<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Pytest-Austinï¼šæ— æŒ‡ä»¤æ’å…¥çš„æ€§èƒ½å›å½’æµ‹è¯•</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Pytest-Austinï¼šæ— æŒ‡ä»¤æ’å…¥çš„æ€§èƒ½å›å½’æµ‹è¯•</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-10-23 03:46:59</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/10/51ce4d0597c92556e291d1a74d251921.png"><img src="http://img2.diglog.com/img/2020/10/51ce4d0597c92556e291d1a74d251921.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>The pytest-austin plugin for  pytest bringsPython performance testing right into your CI pipelines. It uses Austin to profile your test runs withoutany instrumentation. All you have to do is simply mark the tests on which youwant to execute checks for preventing performance regressions.</p><p>Pytest-Austinæ’ä»¶å°†Pythonæ€§èƒ½æµ‹è¯•ç›´æ¥å¸¦å…¥æ‚¨çš„CIç®¡é“ã€‚å®ƒä½¿ç”¨å¥¥æ–¯æ±€æ¥åˆ†ææ‚¨çš„æµ‹è¯•è¿è¡Œï¼Œè€Œä¸éœ€è¦ä»»ä½•æ£€æµ‹ã€‚æ‚¨æ‰€è¦åšçš„å°±æ˜¯ç®€å•åœ°æ ‡è®°è¦å¯¹å…¶æ‰§è¡Œæ£€æŸ¥ä»¥é˜²æ­¢æ€§èƒ½å€’é€€çš„æµ‹è¯•ã€‚</p><p>  Any failed tests will be reported by pytest at the end of the session. All thecollected statistics are written on a file prefixed with  austin_ and followedby a truncated timestamp, inside pytest rootdir. You can drop it onto Speedscope for a quick visual representation of yourtests.</p><p>ä»»ä½•å¤±è´¥çš„æµ‹è¯•éƒ½å°†åœ¨ä¼šè¯ç»“æŸæ—¶ç”±pytestæŠ¥å‘Šã€‚æ‰€æœ‰æ”¶é›†åˆ°çš„ç»Ÿè®¡æ•°æ®éƒ½å†™åœ¨ä¸€ä¸ªå‰ç¼€ä¸ºASTIN_çš„æ–‡ä»¶ä¸­ï¼Œåè·Ÿä¸€ä¸ªæˆªæ–­çš„æ—¶é—´æˆ³ï¼Œä½äºpytest rootdirå†…ã€‚æ‚¨å¯ä»¥å°†å…¶æ”¾åˆ°SpeedScopeä¸Šï¼Œä»¥ä¾¿å¿«é€Ÿç›´è§‚åœ°è¡¨ç¤ºæ‚¨çš„æµ‹è¯•ã€‚</p><p> ================================================================ test session starts ================================================================platform linux -- Python 3.6.9, pytest-6.0.1, py-1.9.0, pluggy-0.13.1 -- /home/gabriele/.cache/pypoetry/virtualenvs/pytest-austin-yu27Ep_e-py3.6/bin/python3.6cachedir: .pytest_cacherootdir: /tmp/pytest-of-gabriele/pytest-226/test_austin_time_checks0plugins: cov-2.10.0, austin-0.1.0collecting ... collected 3 itemstest_austin_time_checks.py::test_lines PASSEDtest_austin_time_checks.py::test_check_fails PASSEDtest_austin_time_checks.py::test_check_succeeds PASSED=================================================================== Austin report ===================================================================austin 2.0.0Collected stats written on /tmp/pytest-of-gabriele/pytest-226/test_austin_time_checks0/.austin_97148135487643.aprofğŸ•‘ Sampling time (min/avg/max) : 376/3327/18019 Î¼sğŸ¢ Long sampling rate : 87/87 (100.00 %) samples took longer than the sampling intervalğŸ’€ Error rate : 0/87 (0.00 %) invalid samplestest_austin_time_checks.py::test_lines test_lines:19 (test_austin_time_checks.py) -16.0 ms (-78.2% of 20.5 ms)test_austin_time_checks.py::test_lines test_lines:18 (test_austin_time_checks.py) -4.1 ms (-10.1% of 40.3 ms)test_austin_time_checks.py::test_lines fibonacci (test_austin_time_checks.py) -9.3 ms (-18.6% of 50.0 ms)test_austin_time_checks.py::test_check_fails test_check_fails (test_austin_time_checks.py) +99.8 ms (9978.6% of 1000.0 Î¼s)test_austin_time_checks.py::test_check_succeeds test_check_succeeds (test_austin_time_checks.py) -9.0 ms (-8.1% of 110.0 ms)================================================================== 1 check failed ==================================================================================================================================== 3 passed in 0.35s =================================================================</p><p>====æµ‹è¯•ä¼šè¯å¯åŠ¨====platform Linux--Python3.6.9ï¼Œpytest-6.0.1ï¼Œpy-1.9.0ï¼ŒPluggy-0.13.1--/home/gabriele/.cache/pypoetry/virtualenvs/pytest-austin-yu27Ep_e-py3.6/bin/python3.6cachedirï¼š.pytest_cacherootdirï¼š/tmp/pytest-of-gabriele/pytest-226/test_austin_time_checks0pluginsï¼šcov-2.10.0ï¼Œå¥¥æ–¯æ±€-0.1.0æ”¶é›†...ã€‚å·²æ”¶é›†3é¡¹stest_austin_time_checks.pyï¼šï¼šTEST_LINES PASSEDtest_austin_time_checks.pyï¼šï¼štest_check_fails PASSEDtest_austin_time_checks.pyï¼šï¼štest_check_succeeds PASSED=Austin Report=austin 2.0.0æ”¶é›†å†™å…¥/tmp/pytest-of-gabriele/pytest-226/test_austin_time_checks0/.austin_97148135487643.aprofğŸ•‘é‡‡æ ·æ—¶é—´çš„ç»Ÿè®¡ä¿¡æ¯(æœ€å°/å¹³å‡/æœ€å¤§)ï¼š376/3327/18019Î¼çš„ğŸ¢é•¿é‡‡æ ·ç‡ï¼š87/87(100.00)ä¸ªæ ·æœ¬ã€‚èŠ±è´¹çš„æ—¶é—´è¶…è¿‡é‡‡æ ·é—´éš”ğŸ’€é”™è¯¯ç‡ï¼š0/87(0.00%)æ— æ•ˆæ ·æœ¬TEST_ASTIN_TIME_CHECKs.pyï¼šï¼šTEST_LINES TEST_LINESï¼š19(TEST_ASTIN_TIME_CHECKS.py)-16.0æ¯«ç§’(-78.2%ï¼Œå…±20.5ms)TEST_ASTIN_TIME_CHECKS.pyï¼šï¼šTEST_LINES TEST_LINESï¼š18(TEST_å¥¥æ–¯æ±€_TIME_CHECKs.py)-4.1ms(-10.1%ï¼Œå…±40.3æ¯«ç§’)TEST_å¥¥æ–¯æ±€_ã€‚Time_checks.pyï¼šï¼šTEST_LINESæ–æ³¢é‚£å¥‘(TEST_ASTIN_TIME_CHECKs.py)-9.3ms(-18.6%ï¼Œå…±50 ms)test_austin_time_checks.pyï¼šï¼štest_check_fails TEST_CHECK_FAILES(TEST_å¥¥æ–¯æ±€_TIME_CHECKs.py))+99.8ms(1000.0Î¼s)test_austin_time_checks.pyï¼šï¼štest_check_succeeds TEST_CHECK_SUCCESS(TEST_å¥¥æ–¯æ±€_TIME_CHECKS.py)çš„9978.6)ã€‚-9.0 ms(110.0 ms)=1æ£€æŸ¥å¤±è´¥=3åœ¨0.35s=ä¸­é€šè¿‡çš„-8.1%.ã€‚</p><p>    NOTE In order for the plugin to work, the Austin binary needs to be on the PATH environment variable. See  Austininstallation instructions tosee how you can easily install Austin on your platform.</p><p>æ³¨ä¸ºäº†ä½¿æ’ä»¶æ­£å¸¸å·¥ä½œï¼ŒAustinäºŒè¿›åˆ¶æ–‡ä»¶éœ€è¦ä½äºPATHç¯å¢ƒå˜é‡ä¸­ã€‚è¯·å‚é˜…Austinå®‰è£…è¯´æ˜ï¼Œäº†è§£å¦‚ä½•åœ¨æ‚¨çš„å¹³å°ä¸Šè½»æ¾å®‰è£…Austinã€‚</p><p>   Once installed, the plugin will try to attach Austin to the pytest process inorder to sample it every time you run pytest. If you want to prevent Austin fromprofiling your tests, you have to steal its mojo. You can do so with the --steal-mojo command line argument.</p><p>å®‰è£…åï¼Œè¯¥æ’ä»¶å°†å°è¯•å°†Austiné™„åŠ åˆ°pytestè¿›ç¨‹ï¼Œä»¥ä¾¿åœ¨æ‚¨æ¯æ¬¡è¿è¡Œpytestæ—¶å¯¹å…¶è¿›è¡Œé‡‡æ ·ã€‚å¦‚æœä½ æƒ³é˜»æ­¢å¥¥æ–¯æ±€åˆ†æä½ çš„æµ‹è¯•ï¼Œä½ å¿…é¡»å·èµ°å®ƒçš„é­”åŠ›ã€‚å¯ä»¥ä½¿ç”¨--steal-mojoå‘½ä»¤è¡Œå‚æ•°æ‰§è¡Œæ­¤æ“ä½œã€‚</p><p>  The plugin looks for the  total_time marker on collected test items, whichtakes a mandatory argument  time and three optional ones:  function,  moduleand  line.</p><p>è¯¥æ’ä»¶åœ¨æ”¶é›†çš„æµ‹è¯•é¡¹ç›®ä¸ŠæŸ¥æ‰¾TOTAL_TIMEæ ‡è®°ï¼Œè¯¥æ ‡è®°éœ€è¦ä¸€ä¸ªå¼ºåˆ¶å‚æ•°æ—¶é—´å’Œä¸‰ä¸ªå¯é€‰å‚æ•°æ—¶é—´ï¼šå‡½æ•°ã€æ¨¡å—å’Œè¡Œã€‚</p><p> If you simply want to check that the duration of a test item doesn&#39;t take longerthan  time, you can mark it with  @pytest.mark.total_time(time). Here,  timecan either be a  float (in seconds) or an instance of  datetime.timedelta.</p><p>å¦‚æœæ‚¨åªæ˜¯æƒ³æ£€æŸ¥æµ‹è¯•é¡¹ç›®çš„æŒç»­æ—¶é—´ä¸ä¼šè¶…è¿‡æ—¶é—´ï¼Œæ‚¨å¯ä»¥ç”¨@pytest.mark.total_time(Time)æ ‡è®°å®ƒã€‚è¿™é‡Œï¼Œtimecaå¯ä»¥æ˜¯ä¸€ä¸ªæµ®ç‚¹å‹(ä»¥ç§’ä¸ºå•ä½)ï¼Œä¹Ÿå¯ä»¥æ˜¯datetime.timeDeltaçš„ä¸€ä¸ªå®ä¾‹ã€‚</p><p>  In some cases, you would want to make sure that a function or method called on acertain line in your test script executes in under a certain amount of time, say5% of the total test time. You can achieve this like so</p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ç¡®ä¿åœ¨æµ‹è¯•è„šæœ¬çš„æŸä¸€è¡Œä¸Šè°ƒç”¨çš„å‡½æ•°æˆ–æ–¹æ³•åœ¨ä¸€å®šçš„æ—¶é—´å†…æ‰§è¡Œï¼Œæ¯”å¦‚æ€»æµ‹è¯•æ—¶é—´çš„5%ã€‚ä½ å¯ä»¥åƒè¿™æ ·åšåˆ°è¿™ä¸€ç‚¹</p><p> import  pytest @ pytest. mark. total_time( &#34;5%&#34;,  line = 7) def  test_hello_default():  somefunction()  fastfunction()  # &lt;- this is line no. 7 in the test script  someotherfunction()</p><p>å¯¼å…¥pytest@pytestã€‚é©¬å…‹ã€‚TOTAL_TIME(&#34ï¼›5%&#34ï¼›ï¼Œline=7)def test_hello_default()ï¼šome function()fast function()#&ltï¼›-è¿™æ˜¯æµ‹è¯•è„šæœ¬ä¸­çš„ç¬¬7è¡ŒæŸä¸€å…¶ä»–å‡½æ•°()ã€‚</p><p> In many cases, however, one would want to test that a function or a methodcalled either directly or indirectly by a test doesn&#39;t take more than a certainoverall time to run. This is where the remaining arguments of the  total_testmarker come into play. Suppose that you want to profile the procedure  barthat is called by method  foo of an object of type  Snafu. To ensure that bar doesn&#39;t take longer than, say, 50% of the overall test duration, you canwrite</p><p>ç„¶è€Œï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œäººä»¬ä¼šæƒ³è¦æµ‹è¯•æµ‹è¯•ç›´æ¥æˆ–é—´æ¥è°ƒç”¨çš„å‡½æ•°æˆ–æ–¹æ³•çš„è¿è¡Œæ—¶é—´æ˜¯å¦ä¸è¶…è¿‡ä¸€å®šçš„æ€»æ—¶é—´ã€‚è¿™å°±æ˜¯TOTAL_TESTMARKçš„å‰©ä½™å‚æ•°å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚å‡è®¾æ‚¨æƒ³è¦åˆ†æç”±Snafuç±»å‹çš„å¯¹è±¡çš„fooæ–¹æ³•è°ƒç”¨çš„è¿‡ç¨‹æ ã€‚è¦ç¡®ä¿BARèŠ±è´¹çš„æ—¶é—´ä¸ä¼šè¶…è¿‡æ€»æµ‹è¯•æŒç»­æ—¶é—´çš„50%ï¼Œæ‚¨å¯ä»¥è¿™æ ·å†™ã€‚</p><p>  You can use the  module argument to resolve function name clashes. For example,if the definition of the function/method  bar occurs within the modules somemodule.py and  someothermodule.py, but you are only interested in theone defined in  somemodule.py, you can change the above into</p><p>å¯ä»¥ä½¿ç”¨æ¨¡å—å‚æ•°æ¥è§£å†³å‡½æ•°åå†²çªã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‡½æ•°/æ–¹æ³•æ çš„å®šä¹‰å‡ºç°åœ¨æ¨¡å—Somemodule.pyå’ŒæŸä¸ªå…¶ä»–æ¨¡å—e.pyä¸­ï¼Œä½†æ‚¨åªå¯¹Somemodule.pyä¸­å®šä¹‰çš„æ¨¡å—æ„Ÿå…´è¶£ï¼Œåˆ™å¯ä»¥å°†ä¸Šè¿°å†…å®¹æ›´æ”¹ä¸ºã€‚</p><p>  And whilst you can also specify a line number, this is perhaps not very handyand practical outside of test scripts themselves, unless the content of themodule is stable enough that line numbers don&#39;t need to be updated veryfrequently.</p><p>è™½ç„¶æ‚¨è¿˜å¯ä»¥æŒ‡å®šè¡Œå·ï¼Œä½†è¿™åœ¨æµ‹è¯•è„šæœ¬æœ¬èº«ä¹‹å¤–å¯èƒ½ä¸æ˜¯å¾ˆæ–¹ä¾¿å’Œå®ç”¨ï¼Œé™¤éæ¨¡å—çš„å†…å®¹è¶³å¤Ÿç¨³å®šï¼Œè¡Œå·ä¸éœ€è¦é¢‘ç¹æ›´æ–°ã€‚</p><p>   In this case, a negative number, such as  -16.0 ms, indicates that the totaltime spent on  test_lines:19 (test_austin_time_checks.py) was 16.0 ms lessthan the total allowed time specified with the  total_time marker, which inthis example is 20.5 ms. Hence, negative numbers indicate a successful check.</p><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œè´Ÿæ•°(å¦‚-16.0æ¯«ç§’)è¡¨ç¤ºTEST_LINESï¼š19(test_austin_time_checks.py)ä¸ŠèŠ±è´¹çš„æ€»æ—¶é—´æ¯”TOTAL_TIMEæ ‡è®°æŒ‡å®šçš„æ€»å…è®¸æ—¶é—´(åœ¨æœ¬ä¾‹ä¸­ä¸º20.5æ¯«ç§’)å°‘16.0æ¯«ç§’ã€‚å› æ­¤ï¼Œè´Ÿæ•°è¡¨ç¤ºæ£€æŸ¥æˆåŠŸã€‚</p><p>   This indicates that the total time spent on test_check_fails (test_austin_time_checks.py) was 99.8 ms more than therequired threshold, which was set to 1 ms.</p><p>è¿™è¡¨ç¤ºTEST_CHECK_FAIES(test_austin_time_checks.py)èŠ±è´¹çš„æ€»æ—¶é—´æ¯”æ‰€éœ€é˜ˆå€¼(è®¾ç½®ä¸º1æ¯«ç§’)å¤š99.8æ¯«ç§’ã€‚</p><p>  One can perform memory allocation checks with the  total_memory marker. Thefirst argument is  size, which can be a percentage of the total memoryallocation of the marked test case, as well as an absolute measure of themaximum amount of memory, e.g.,  &#34;24 MB&#34;. The  function,  module and line are the same as for the  total_time marker. The extra  netargument can be set to  True to check for the total  net memory usage, thatis the difference between memory allocations and deallocations.</p><p>å¯ä»¥ä½¿ç”¨TOTAL_MEMORYæ ‡è®°æ‰§è¡Œå†…å­˜åˆ†é…æ£€æŸ¥ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¤§å°ï¼Œå®ƒå¯ä»¥æ˜¯æ ‡è®°çš„æµ‹è¯•ç”¨ä¾‹çš„æ€»å†…å­˜åˆ†é…çš„ç™¾åˆ†æ¯”ï¼Œä¹Ÿå¯ä»¥æ˜¯æœ€å¤§å†…å­˜é‡çš„ç»å¯¹åº¦é‡ï¼Œä¾‹å¦‚ï¼Œ24MB&#34ï¼›ã€‚å‡½æ•°ã€æ¨¡å—å’Œè¡Œä¸TOTAL_TIMEæ ‡è®°ç›¸åŒã€‚å¯ä»¥å°†é¢å¤–çš„netå‚æ•°è®¾ç½®ä¸ºTrueï¼Œä»¥æ£€æŸ¥æ€»çš„å‡€å†…å­˜ä½¿ç”¨é‡ï¼Œå³å†…å­˜åˆ†é…å’Œé‡Šæ”¾ä¹‹é—´çš„å·®å¼‚ã€‚</p><p>  In order to perform memory checks, you need to specify either the  memory or all profile mode via the  --profile-mode option.</p><p>ä¸ºäº†æ‰§è¡Œå†…å­˜æ£€æŸ¥ï¼Œæ‚¨éœ€è¦é€šè¿‡--profile-modeé€‰é¡¹æŒ‡å®šå†…å­˜æˆ–æ‰€æœ‰é…ç½®æ–‡ä»¶æ¨¡å¼ã€‚</p><p> The negative and positive memory deltas reported by the plugin in the reportbehave like the time deltas described in the previous section. That is, anegative memory delta indicates a successful check, whereas a positive deltaindicates a check that has failed.</p><p>æŠ¥å‘Šä¸­æ’ä»¶æŠ¥å‘Šçš„è´Ÿå†…å­˜å¢é‡å’Œæ­£å†…å­˜å¢é‡çš„è¡Œä¸ºç±»ä¼¼äºä¸Šä¸€èŠ‚ä¸­æè¿°çš„æ—¶é—´å¢é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè´Ÿå€¼å†…å­˜å¢é‡è¡¨ç¤ºæ£€æŸ¥æˆåŠŸï¼Œè€Œæ­£å€¼è¡¨ç¤ºæ£€æŸ¥å¤±è´¥ã€‚</p><p>  When in the  all profile mode, you can perform both time and memory checks bystacking  total_time and  total_memory markers.</p><p>åœ¨All Profileæ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨TOTAL_TIMEå’ŒTOTAL_MEMORYæ ‡è®°æ‰§è¡Œæ—¶é—´å’Œå†…å­˜æ£€æŸ¥ã€‚</p><p>   If your tests spawn other Python processes, you can ask pytest-austin to profilethem too with the  --minime option. Note that if your tests are spawning toomany non-Python processes, the sampling rate might be affected because of theway that Austin tries to discover Python child processes.</p><p>å¦‚æœæ‚¨çš„æµ‹è¯•äº§ç”Ÿäº†å…¶ä»–Pythonè¿›ç¨‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨--minié€‰é¡¹è¦æ±‚pytest-austinä¹Ÿå¯¹å®ƒä»¬è¿›è¡Œæ¦‚è¦åˆ†æã€‚è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨çš„æµ‹è¯•äº§ç”Ÿäº†è®¸å¤šéPythonè¿›ç¨‹ï¼Œé‚£ä¹ˆé‡‡æ ·ç‡å¯èƒ½ä¼šå› ä¸ºAustinè¯•å›¾å‘ç°Pythonå­è¿›ç¨‹çš„æ–¹å¼è€Œå—åˆ°å½±å“ã€‚</p><p>  This plugins generate a report on terminal and dumps the collected profilingstatistics on the file system as well, for later analysis and visualisation. Theverbosity of the terminal report can be controlled with the  --austin-reportoption. By default, it is set to  minimal, which means that only checks thathave failed will be reported. Use  full to see the results for all the checksthat have been detected and executed by the plugin.</p><p>æ­¤æ’ä»¶ç”Ÿæˆæœ‰å…³ç»ˆç«¯çš„æŠ¥å‘Šï¼Œå¹¶å°†æ”¶é›†åˆ°çš„åˆ†æç»Ÿè®¡æ•°æ®è½¬å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥ä¾›ä»¥ååˆ†æå’Œå¯è§†åŒ–ã€‚å¯ä»¥ä½¿ç”¨--austin-reporté€‰é¡¹æ§åˆ¶ç»ˆç«¯æŠ¥å‘Šçš„è¯¦ç»†ç¨‹åº¦ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè®¾ç½®ä¸ºæœ€å°ï¼Œè¿™æ„å‘³ç€åªæŠ¥å‘Šå¤±è´¥çš„æ£€æŸ¥ã€‚ä½¿ç”¨FullæŸ¥çœ‹æ’ä»¶æ£€æµ‹åˆ°å¹¶æ‰§è¡Œçš„æ‰€æœ‰æ£€æŸ¥çš„ç»“æœã€‚</p><p> Regarding the dump of the profiling statistics, the generated file is in theAustin format by default (this is a generalisation of the collapsed stackformat). If you want the plugin to dump the data in either the  pprof or speedscope format, you can set the  --profile-format option accordingly.</p><p>å…³äºæ€§èƒ½åˆ†æç»Ÿè®¡æ•°æ®çš„è½¬å‚¨ï¼Œé»˜è®¤æƒ…å†µä¸‹ç”Ÿæˆçš„æ–‡ä»¶æ˜¯Austinæ ¼å¼(è¿™æ˜¯æŠ˜å å †æ ˆæ ¼å¼çš„æ¨å¹¿)ã€‚å¦‚æœæ‚¨å¸Œæœ›æ’ä»¶ä»¥pprofæˆ–speedscopeæ ¼å¼è½¬å‚¨æ•°æ®ï¼Œæ‚¨å¯ä»¥ç›¸åº”åœ°è®¾ç½®--profile-formaté€‰é¡¹ã€‚</p><p>  This plugin has been tested on Linux, MacOS and Windows. Given that it relies on Austin for sampling the frame stacks ofthe pytest process, its compatibility considerations apply to pytest-austin aswell.</p><p>è¿™ä¸ªæ’ä»¶å·²ç»åœ¨Linuxã€MacOSå’ŒWindowsä¸Šè¿›è¡Œäº†æµ‹è¯•ã€‚é‰´äºå®ƒä¾èµ–äºå¥¥æ–¯æ±€å¯¹pytestè¿›ç¨‹çš„å¸§å †æ ˆè¿›è¡Œé‡‡æ ·ï¼Œå…¶å…¼å®¹æ€§è€ƒè™‘å› ç´ ä¹Ÿé€‚ç”¨äºpytest-å¥¥æ–¯æ±€ã€‚</p><p> On Linux, the use of  sudo is required, unless the  CAP_SYS_PTRACEcapability is granted to the Austin binary with, e.g.</p><p>åœ¨Linuxä¸Šï¼Œéœ€è¦ä½¿ç”¨sudoï¼Œé™¤éå‘AustinäºŒè¿›åˆ¶æ–‡ä»¶æˆäºˆCAP_SYS_PTRACEåŠŸèƒ½ï¼Œä¾‹å¦‚ã€‚</p><p>  Then the use of  sudo is no longer required to allow Austin to attach andsample pytest.</p><p>ç„¶åï¼Œä¸å†éœ€è¦ä½¿ç”¨sudoæ¥å…è®¸å¥¥æ–¯æ±€é™„åŠ å’Œé‡‡æ ·pytestã€‚</p><p> On MacOS, the use of  sudo is also mandatory, unless the user that isinvoking pytest belongs to the  procmod group.</p><p>åœ¨MacOSä¸Šï¼Œé™¤éè°ƒç”¨pytestçš„ç”¨æˆ·å±äºprocmodç»„ï¼Œå¦åˆ™ä¹Ÿå¿…é¡»ä½¿ç”¨sudoã€‚</p><p>  If you like pytest-austin and you find it useful, there are ways for you tocontribute.</p><p>å¦‚æœä½ å–œæ¬¢æœ€çƒ­çš„å¥¥æ–¯æ±€ï¼Œè€Œä¸”ä½ è§‰å¾—å®ƒå¾ˆæœ‰ç”¨ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è®©ä½ åšå‡ºè´¡çŒ®ã€‚</p><p> If you want to help with the development, then have a look at the open issuesand have a look at the  contributing guidelines before youopen a pull request.</p><p>å¦‚æœæ‚¨æƒ³å¸®åŠ©å¼€å‘ï¼Œé‚£ä¹ˆåœ¨æ‚¨æ‰“å¼€Pullè¯·æ±‚ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€çœ‹å…¬å¼€çš„é—®é¢˜ï¼Œå¹¶çœ‹ä¸€çœ‹æœ‰åŠ©äºå¼€å‘çš„æŒ‡å¯¼æ–¹é’ˆã€‚</p><p> You can also contribute to the development of the pytest-austin by becoming asponsor and/or by  buying me a coffeeon BMC or by chipping in a few pennies on PayPal.Me.</p><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡æˆä¸ºasonsorå’Œ/æˆ–ç»™æˆ‘ä¹°ä¸€æ¯BMCå’–å•¡ï¼Œæˆ–è€…åœ¨PayPal.meä¸Šæå‡ ä¾¿å£«ï¼Œæ¥ä¸ºæœ€ç«çˆ†çš„å¥¥æ–¯æ±€çš„å‘å±•åšå‡ºè´¡çŒ®ã€‚</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/P403n1x87/pytest-austin">https://github.com/P403n1x87/pytest-austin</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/æ€§èƒ½/">#æ€§èƒ½</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/austin/">#austin</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1030601.html"><img src="http://img2.diglog.com/img/2020/10/thumb_af62daf8ef2bb0719075fe04e35ad4e0.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030601.html">è®©æˆ‘ä»¬ç”¨GPUæ„å»ºä¸€ä¸ªé«˜æ€§èƒ½çš„æ¨¡ç³Šå™¨</a></div><span class="my_story_list_date">2020-10-23 0:41</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030523.html"><img src="http://img2.diglog.com/img/2020/10/thumb_201285ce3299b458b607b1e1c0b9f4d5.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030523.html">è‡ªPostgreSQL 8.3ä»¥æ¥çš„TPC-Hæ€§èƒ½</a></div><span class="my_story_list_date">2020-10-22 20:49</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030389.html"><img src="http://img2.diglog.com/img/2020/10/thumb_c1481866f8ac975e5bd0efeda6491de0.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030389.html">HPEè¡¨ç¤ºï¼Œå®ƒå·²è·å¾—1.6äº¿ç¾å…ƒçš„æ¬§ç›Ÿèµ„é‡‘ï¼Œç”¨äºåœ¨èŠ¬å…°å»ºé€ ä¸€å°è¶…çº§è®¡ç®—æœºï¼Œç†è®ºä¸Šæœ€é«˜æ€§èƒ½ä¸º550åƒä¸‡äº¿æ¬¡æµ®ç‚¹è¿ç®—</a></div><span class="my_story_list_date">2020-10-22 9:10</span></div><div class="col-sm"><div><a target="_blank" href="/story/1030198.html"><img src="http://img2.diglog.com/img/2020/10/thumb_77e67b9c577f57adddd96d1254075163.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1030198.html">äºšé©¬é€Šçš„éœ²å¨œåœ¨æ—©æœŸæ¥å…¥ï¼šæ²¡æœ‰å¼ºå¤§çš„è¿æ¥ï¼Œæµåª’ä½“æ€§èƒ½å¯èƒ½å‚å·®ä¸é½ï¼ŒiOSç½‘ç»œåº”ç”¨æ”¯æŒè¿˜ä¸é”™ï¼Œé¢‘é“ç»„ç«–äº•æ¸¸æˆé€‰æ‹©</a></div><span class="my_story_list_date">2020-10-21 7:6</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç¾å›½/">#ç¾å›½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç¨‹åº/">#ç¨‹åº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>