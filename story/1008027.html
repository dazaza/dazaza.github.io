<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>在5分钟内了解WebAssembly</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">在5分钟内了解WebAssembly</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-25 06:09:46</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/6/940dad89a212655340bb742fb7c105a5.jpg"><img src="http://img.diglog.com/img/2020/6/940dad89a212655340bb742fb7c105a5.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>WebAssembly于2019年12月5日加入HTML、CSS和Javascript成为Web标准。这对很多事情都很有用，就性能而言，这在浏览器中是前所未见的。如果你有5分钟的时间，我需要解释一下正在进行的这场小小的革命。</p><p>1995年，Brendan Eich在10天内创建了Javascript。在那个时候，Javascript的设计并不是为了快速。它基本上是用来进行表单验证的，速度非常慢。随着时间的推移，情况变得更好了。</p><p>2008年，谷歌不知从哪里冒出来，推出了它的新浏览器：谷歌Chrome。Chrome内部有一个名为V8的Javascript引擎。而V8的革命是Javascript的即时(JIT)编译。这种从解释代码到JIT编译的改变极大地提高了Javascript的性能，从而也提高了浏览器的整体性能。这样的速度使得像NodeJS或Electron这样的技术诞生，以及Javascript的受欢迎程度爆发式增长。</p><p>2015年，WebAssembly首次发布，并发布了一个在Unity下运行的游戏的小演示。游戏直接在浏览器中运行！</p><p>2019年，W3C将WebAssembly作为新的Web标准。就像V8引擎处于鼎盛时期一样，WebAssembly正在形成新的性能革命。所以WebAssembly已经在这里了，而且它有了一个良好的开端。</p><p>WebAssembly(缩写为wasm)是使用非Javascript代码并在浏览器中运行它的一种方式。此代码可以是C、C++、Rust和许多其他代码。它将在您CPU上以接近本机速度在您的浏览器中编译和运行。此代码采用二进制文件的形式，您可以直接从Javascript中将其作为模块使用。</p><p>WebAssembly不是用来取代Javascript的。相反，这两种技术是协同工作的。通过使用Javascript API，您可以将WebAssembly模块加载到页面中。这意味着您可以利用Javascript的灵活性通过WebAssembly利用编译代码的性能。</p><p>WebAssembly这个名称有点误导。WebAssembly确实适用于Web，但并不局限于此！开发WebAssembly的团队费了很大劲才使其成为通用的，以便可以在任何地方使用。我们开始看到这样的例子。</p><p>此外，还有一种误解一直在出现。WebAssembly不是一种编程语言。WebAssembly是一种中间格式，即字节码，它充当其他语言的编译目标。好的，现在还不清楚，我们来画几张画吧。</p><p>你看到了吗？又一件艺术品。如果我告诉你我用的是Photoshop，你相信我吗？不管怎么说！</p><p>第一步：是您和您的开发人员技能。您可以用C、C++生成源代码(您可以使用其他语言)。此代码用于修复问题或使浏览器中的Javascript无法执行过于密集的进程。</p><p>步骤2：您将使用Emscripten进行翻译。Emscripten是一个工具链，使用LLVM构建，可以将源代码编译成WebAssembly。您可以在几个快速步骤中安装和编译您想要的任何内容，我们稍后将对其进行介绍。在此步骤结束时，您将拥有一个WASM文件。</p><p>步骤3：您将在您的网页上使用WASM文件。如果您来自未来，您可以像加载任何ES6模块一样加载此文件。现在，用法稍微复杂一些，但没什么特别的。</p><p>首先，我们需要一小段C++代码来编译。有些人会在浏览器中向你提供整个暗黑破坏神1游戏作为例子，我会用一个加两位数的函数来保持它的简单性。我们不会用这个来证明C++的速度，这只是个例子。</p><p>然后转到您选择的Linux发行版。我们将从下载和安装Emscripten开始。</p><p>#安装依赖项(可以，您可以使用更新版本的Python)sudo apt-get install python2.7git#gettin Emscripten通过GIT克隆。git克隆https://github.com/emscripten-core/emsdk.git#下载、安装并激活sdkcd emsdk./emsdk安装最新版本。/emsdk激活latestlsource。/emsdk_env.sh#确保安装工作demcc-version#将c++文件编译为Web程序集模板</p><p>这就是海克曼的作风。有一种更简单的方法。</p><p>你可以去这个网站，把你的C++代码放在左边。然后，您将在Wat部件中获得导出函数的名称。使用我之前显示的添加函数代码：“_Z3addi”作为函数名，我们将在后面使用它。您只需单击“下载”，您就会拿回您的WASM文件。放松点！</p><p>现在，我们可以让WebAssembly直接在浏览器中工作，而没有周围所有烦人的噪音。</p><p>&lt；html&gt；&lt；head&gt；&lt；title&gt；WASM test&lt；/title&gt；&lt；link rel=&#34；style heet&#34；href=&#34；/style heets/style.css&34；/&gt；&lt；/head&gt；&lt；body&gt；&lt；script&gt；const getRt；https://012q1.sse.codesandbox.io/wasm/add.wasm&#34；)).Then(obj=&gt；obj.instance.exports._Z3addi).Then(Add=&gt；{document.getElementById(&#34；addTarget&#34；).textContent=Add(getRandomNumber()，getRandomNumber())；})；；&lt；/script&gt；&lt；h1&gt；reésultat du C++&lt；/h1&gt；&lt；p id=&#34；addTarget&#34；&。&lt；/p&gt；&lt；/body&gt；&lt；/html&gt；</p><p>就是这个。此html网页允许您使用C++编译成WebAssembly！我跳过所有HTML和明显的内容，使用InstantiateStreaming函数直接转到第11行。正如Mozilla文档所说，此函数允许您通过简单的FETCH编译和实例化我们的WebAssembly模块。</p><p>然后，我通过前面检索到的函数名使用Add函数，并用它替换一段DOM。瞧啊！C++通过浏览器中的Javascript实现。这有多疯狂？听着，我甚至给你做了一个带工作演示的代码箱。我就把它嵌在这里，玩吧！</p><p>你要告诉我光是这样做就很复杂，你是对的。他们正在努力将实例化javascript位替换为将来的简单导入。所以耐心点，它马上就来了。</p><p>我们已经谈了五分钟了，所以我就到此为止了。如果您想更多地了解WebAssembly，并且您面前还有时间：我推荐这篇优秀的文章更深入地研究这个主题。在接下来的故事中，我期待着Web对其他语言的开放将带来什么。有很大的潜力，我迫不及待地想让网络变得更快！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.jesuisundev.com/en/understand-webassembly-in-5-minutes/">https://www.jesuisundev.com/en/understand-webassembly-in-5-minutes/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/了解/">#了解</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1007419.html"><img src="http://img.diglog.com/img/2020/6/thumb_609a35d66c21620e3b9bff2c5b3f07ef.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1007419.html">了解Lucene以了解ElasticSearch</a></div><span class="my_story_list_date">2020-6-21 0:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006674.html"><img src="http://img.diglog.com/img/2020/6/thumb_31aea93dc9cda9bb4a5d4a1eaba92b16.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006674.html">了解证书固定</a></div><span class="my_story_list_date">2020-6-16 0:3</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004686.html"><img src="http://img.diglog.com/img/2020/6/thumb_c3416f715c16a6ba25e7d3e767ce91d5.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004686.html">今天我了解到：如何在Windows Server 2019上使用Keypair登录启用SSH</a></div><span class="my_story_list_date">2020-6-2 0:56</span></div><div class="col-sm"><div><a target="_blank" href="/story/1004530.html"><img src="http://img.diglog.com/img/2020/5/thumb_b3ed81cd763c7bca1935275c4f7bf7e9.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1004530.html">SpaceX与国际空间站开始对接</a></div><span class="my_story_list_date">2020-5-31 22:45</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>