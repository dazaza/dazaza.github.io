<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>å¦‚ä½•åœ¨ Ubuntu 20.04 ä¸Šä¸º OpenStreetMap è®¾ç½® Tegola çŸ¢é‡åˆ‡ç‰‡æœåŠ¡å™¨</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">å¦‚ä½•åœ¨ Ubuntu 20.04 ä¸Šä¸º OpenStreetMap è®¾ç½® Tegola çŸ¢é‡åˆ‡ç‰‡æœåŠ¡å™¨</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-07-28 01:56:53</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/7/02cb17a0e0cf44ccb96f52778e8db6fe.png"><img src="http://img2.diglog.com/img/2021/7/02cb17a0e0cf44ccb96f52778e8db6fe.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Tegola æ˜¯ OpenStreetMap çš„å¼€æºçŸ¢é‡åˆ‡ç‰‡æœåŠ¡å™¨ã€‚ä¹‹å‰æˆ‘ä»¬è§£é‡Šäº†è®¾ç½® OSM tile server çš„è¿‡ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäºå…‰æ …çš„ tile serverã€‚æœ¬æ•™ç¨‹å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨ Ubuntu 20.04 ä¸Šè®¾ç½® Tegola çŸ¢é‡åˆ‡ç‰‡æœåŠ¡å™¨ã€‚å•ç‹¬çš„å†…å®¹å’Œæ ·å¼ï¼Œå…è®¸åˆ›å»ºæŒ‡å‘åŒä¸€ä¸ªå›¾å—å †æ ˆçš„å¤šä¸ªæ ·å¼ã€‚æ‰€éœ€çš„ RAM å’Œç£ç›˜ç©ºé—´å–å†³äºæ‚¨è¦ä½¿ç”¨çš„å›½å®¶/åœ°åŒºåœ°å›¾ã€‚ä¾‹å¦‚ï¼Œæ•´ä¸ªæ˜Ÿçƒåœ°å›¾è‡³å°‘éœ€è¦ 32G RAM å’Œ 1TB SSDï¼ˆå›ºæ€ç¡¬ç›˜ï¼‰ã€‚å¯¹æ•´ä¸ªè¡Œæ˜Ÿåœ°å›¾ä½¿ç”¨æ—‹è½¬ç¡¬ç›˜æ˜¯ä¸å¯è¡Œçš„ã€‚å°†æ•´ä¸ªåœ°çƒç­‰å¤§å‹åœ°å›¾æ•°æ®å¯¼å…¥PostgreSQLæ•°æ®åº“éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚è€ƒè™‘æ·»åŠ æ›´å¤š RAMï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ SSD è€Œä¸æ˜¯æ—‹è½¬ç¡¬ç›˜ä»¥åŠ å¿«å¯¼å…¥è¿‡ç¨‹ã€‚å¦‚æœæ‚¨è¦æ‰˜ç®¡æ•´ä¸ªä¸–ç•Œåœ°å›¾ï¼Œæˆ‘å»ºè®®æ‚¨ä» Contabo è´­ä¹°è¶…å¤§ VPSï¼Œå®ƒå¹å˜˜åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šè¿›è¡Œä»»ä½•é‡å¤§å·¥ä½œä¹‹å‰æ›´æ–°æœåŠ¡å™¨è½¯ä»¶å§‹ç»ˆæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚é€šè¿‡ SSH ç™»å½•åˆ°æ‚¨çš„æœåŠ¡å™¨å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><p>æˆ‘ä»¬å°†ä½¿ç”¨ PostgreSQL æ¥å­˜å‚¨åœ°å›¾æ•°æ®ã€‚ PostGIS æ˜¯ PostgreSQL çš„åœ°ç†ç©ºé—´æ‰©å±•ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…å®ƒä»¬ã€‚ PostgreSQL æ•°æ®åº“æœåŠ¡å™¨å°†è‡ªåŠ¨å¯åŠ¨å¹¶ä¾¦å¬ 127.0.0.1:5432ã€‚å®‰è£…è¿‡ç¨‹ä¸­å°†åœ¨æ“ä½œç³»ç»Ÿä¸Šåˆ›å»º postgres ç”¨æˆ·ã€‚å®ƒæ˜¯ PostgreSQL æ•°æ®åº“æœåŠ¡å™¨çš„è¶…çº§ç”¨æˆ·ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥ç”¨æˆ·æ²¡æœ‰å¯†ç ï¼Œä¹Ÿä¸éœ€è¦è®¾ç½®å¯†ç ï¼Œå› ä¸ºæ‚¨å¯ä»¥ä½¿ç”¨ sudo åˆ‡æ¢åˆ° postgres ç”¨æˆ·å¹¶ç™»å½•åˆ° PostgreSQL æœåŠ¡å™¨ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªåä¸º osm çš„æ•°æ®åº“ï¼ŒåŒæ—¶è®© osm æˆä¸ºæ•°æ®åº“çš„æ‰€æœ‰è€…ã€‚ -E UTF8 æŒ‡å®šåœ¨æ•°æ®åº“ä¸­ä½¿ç”¨çš„å­—ç¬¦ç¼–ç æ–¹æ¡ˆæ˜¯UTF8ã€‚åˆ›å»ºä¸€ä¸ªåä¸º natural_earth çš„æ•°æ®åº“ï¼ŒåŒæ—¶è®© osm ä½œä¸ºæ•°æ®åº“çš„æ‰€æœ‰è€…ã€‚å¯¼å…¥è¿‡ç¨‹å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚ä¸ºäº†åŠ å¿«è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´ä¸€äº› PostgreSQL æœåŠ¡å™¨è®¾ç½®æ¥æé«˜æ€§èƒ½ã€‚ç¼–è¾‘ PostgreSQL ä¸»é…ç½®æ–‡ä»¶ã€‚è¿™å¤ªå°äº†ã€‚ç»éªŒæ³•åˆ™æ˜¯å°†å…¶è®¾ç½®ä¸ºæ€» RAM çš„ 25%ï¼ˆä¸åŒ…æ‹¬äº¤æ¢ç©ºé—´ï¼‰ã€‚ä¾‹å¦‚ï¼Œæˆ‘çš„ VPS æœ‰ 60G RAMï¼Œå› æ­¤æˆ‘å°†å…¶è®¾ç½®ä¸ºï¼šå¦‚æœæ‚¨åƒæˆ‘ä¸€æ ·æœ‰å¾ˆå¤š RAMï¼Œåˆ™å¯ä»¥å°† Effective_cache_size è®¾ç½®ä¸ºæ›´é«˜çš„å€¼ï¼Œä¾‹å¦‚ 20Gã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒPostgreSQL ä¼šå°è¯•åœ¨ RAM ä¸­ä½¿ç”¨å¤§é¡µé¢ã€‚ä½†æ˜¯ï¼ŒLinux é»˜è®¤æƒ…å†µä¸‹ä¸åˆ†é…å¤§é¡µé¢ã€‚æ£€æŸ¥ PostgreSQL çš„è¿›ç¨‹ IDã€‚è¿™æ˜¯ PostgreSQL å°†ä½¿ç”¨çš„å³°å€¼å†…å­˜å¤§å°ã€‚ç°åœ¨æ£€æŸ¥ Linux ä¸­å¤§é¡µé¢çš„å¤§å°ã€‚ AnonHugePages: 0 kB ShmemHugePages: 0 kB HugePages_Total: 0 HugePages_Free: 0 HugePages_Rsvd: 0 HugePages_Surp: 0 Hugepagesize: 2048 kB Hugetlb: 0 kB æˆ‘ä»¬å¯ä»¥è®¡ç®—æˆ‘ä»¬éœ€è¦å¤šå°‘ä¸ªå¤§é¡µé¢ã€‚å°† VmPeak å€¼é™¤ä»¥å¤§é¡µé¢å¤§å°ï¼š16282784 kB / 2048 kB = 7950ã€‚ç¼–è¾‘ /etc/sysctl.conf æ–‡ä»¶ã€‚ AnonHugePages: 0 kB ShmemHugePages: 0 kB HugePages_Total: 7950 HugePages_Free: 7950 HugePages_Rsvd: 0 HugePages_Surp: 0 Hugepagesize: 2048 kB ç”±äºå¯¼å…¥è¿‡ç¨‹å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´å¹¶ä¸”å»ºè®®æ‚¨çš„è®¡ç®—æœºä¸äº’è”ç½‘æ–­å¼€è¿æ¥ï¼Œå› æ­¤å±å¹•å¯èƒ½ä¼šæ–­å¼€ä¿æŒæ‚¨çš„ä¼šè¯æ´»è·ƒã€‚åœ¨ Ubuntu 20.04 æœåŠ¡å™¨ä¸Šå®‰è£…å±å¹•ï¼šé¦–æ¬¡å¯åŠ¨æ—¶ï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªä»‹ç»æ–‡æœ¬ï¼Œåªéœ€æŒ‰ Enter å³å¯ç»“æŸã€‚ç„¶åæ‚¨å°†èƒ½å¤Ÿåƒå¾€å¸¸ä¸€æ ·è¿è¡Œå‘½ä»¤ã€‚</p><p>ä¸ºäº†å¯¼å…¥åœ°å›¾æ•°æ®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ imposm å°† OpenStreetMap æ•°æ®è½¬æ¢ä¸ºæ”¯æŒ postGIS çš„ PostgreSQL æ•°æ®åº“ã€‚ä» Github ä¸‹è½½ã€‚æ¥ä¸‹æ¥ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥PBFï¼ˆProtoBufBinaryï¼‰æ ¼å¼ä¸‹è½½æ•´ä¸ªæ˜Ÿçƒï¼ˆ50Gï¼‰çš„åœ°å›¾æ•°æ®ã€‚è¯·æ³¨æ„ï¼Œopenstreetmap.org çš„ä¸‹è½½é€Ÿåº¦ç›®å‰é™åˆ¶ä¸º 2048 KB/sã€‚æ‚¨å¯ä»¥ä»å¦ä¸€ä¸ªé•œåƒä¸‹è½½æ¤ç‰©åœ°å›¾ï¼Œä¾‹å¦‚å¦‚æœæ‚¨æƒ³è¦å•ä¸ªå›½å®¶/å·/çœ/åŸå¸‚çš„åœ°å›¾ï¼Œè¯·è®¿é—® http://download.geofabrik.deã€‚æ­¤å¤–ï¼ŒBBBike.org æä¾›å…¨çƒ 200 å¤šä¸ªåŸå¸‚å’Œåœ°åŒºçš„ä¸åŒæ ¼å¼çš„æ‘˜å½•ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¸‹è½½è‹±å›½ï¼ˆ1.1Gï¼‰çš„åœ°å›¾æ•°æ®ã€‚ç°åœ¨æ‚¨å¯èƒ½ä¸éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šåšå…¶ä»–äº‹æƒ…ã€‚ç”±äºæ‚¨ä½¿ç”¨çš„æ˜¯ Screenï¼Œæ‚¨å¯ä»¥æŒ‰ Ctrl+Aï¼Œæ¾å¼€è¿™äº›é”®ï¼Œç„¶åæŒ‰ D é”®ä»å½“å‰ Screen ä¼šè¯ä¸­åˆ†ç¦»ã€‚æ‚¨å°†çœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„æ¶ˆæ¯ã€‚è¿™å‘Šè¯‰æˆ‘ä¹‹å‰çš„ Screen ä¼šè¯ ID æ˜¯ 32113ã€‚æ‚¨å¯ä»¥ä» SSH ä¼šè¯ä¸­æ³¨é”€ï¼Œç”šè‡³å…³é—­æ‚¨çš„è®¡ç®—æœºã€‚åˆ«æ‹…å¿ƒï¼ŒOSM å¯¼å…¥è¿‡ç¨‹ä»åœ¨è¿è¡Œã€‚å½“æ‚¨éœ€è¦è¿”å›å¹¶æ£€æŸ¥å¯¼å…¥è¿›åº¦æ—¶ï¼Œé€šè¿‡ SSH è¿æ¥åˆ°æ‚¨çš„æœåŠ¡å™¨å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥è·å–ä¹‹å‰çš„ Screen Session IDã€‚å¯¼å…¥åœ°å›¾æ•°æ®åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å°†å…¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p><p>è½¬åˆ° Tegola Github é¡µé¢å¹¶ä¸‹è½½ linux ç‰ˆæœ¬ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ç»ˆç«¯ä¸­ä¸‹è½½å®ƒã€‚è¿è¡Œ postgis_index.sql è„šæœ¬ä¸º OSM è¡¨åˆ—æ·»åŠ ç´¢å¼•ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚ [webserver] port = &quot;:8080&quot; # Tegola æä¾›ä¸‰ç§åˆ‡ç‰‡ç¼“å­˜ç­–ç•¥ï¼š&quot;file&quot;ã€&quot;redis&quot; å’Œ &quot;s3&quot; [cache] type = &quot;file&quot; basepath=&quot;/tmp/tegola-cache&quot; # OpenStreetMap ( OSM) [[providers]] name = &quot;osm&quot; type = &quot;postgis&quot; host = &quot;127.0.0.1&quot; port = &quot;5432&quot; database = &quot;gis&quot; user = &quot;osm&quot; password = &quot; osm_password&quot; # Natural Earth [[providers] ]] name = &quot;ne&quot; type = &quot;postgis&quot; host = &quot;127.0.0.1&quot; port = &quot;5432&quot; database = &quot;natural_earth&quot; user = &quot;osm&quot; password = &quot; osm_password&quot; å¯ä»¥è®¾ç½®è‡ªå®šä¹‰ä¸­å¿ƒä½ç½®ï¼ˆç»çº¬åº¦) ç”¨äºæ‚¨çš„åœ°å›¾å’Œé»˜è®¤ç¼©æ”¾çº§åˆ«ã€‚è¯·æ³¨æ„ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨åè¿›åˆ¶å€¼ï¼Œè€Œä¸èƒ½ä½¿ç”¨æ•´æ•°å€¼ã€‚ç‰¹æˆˆæ‹‰åœ¨å‰å°è¿è¡Œã€‚ä¸ºäº†åœ¨åå°è¿è¡Œå®ƒï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª systemd æœåŠ¡ï¼Œå®ƒä¹Ÿå…è®¸ Tegola åœ¨ç³»â€‹â€‹ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ã€‚æŒ‰ Ctrl+C åœæ­¢å½“å‰çš„ Tegola è¿›ç¨‹ï¼Œç„¶ååˆ›å»º tegola.service æ–‡ä»¶ã€‚ [Unit] Description=Tegola Vector Tile Server [Service] Type=simple User=www-data ExecStart=/usr/local/bin/tegola serve --config=/opt/tegola-osm/tegola.toml Restart=on-failure RestartSec=5 [Install] WantedBy=multi-user.target æ‚¨åº”è¯¥ä¼šçœ‹åˆ°çŸ¢é‡ç“¦ç‰‡åœ°å›¾ã€‚æ­å–œï¼æ‚¨åˆšåˆšæˆåŠŸæ„å»ºäº†è‡ªå·±çš„çŸ¢é‡åˆ‡ç‰‡æœåŠ¡å™¨ã€‚è¯·æ³¨æ„ï¼ŒFirefox æ— æ³•æ˜¾ç¤ºè¿™äº›çŸ¢é‡åˆ‡ç‰‡ã€‚æ‚¨éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥æ˜¾ç¤ºåŸºäºçŸ¢é‡åˆ‡ç‰‡çš„åœ°å›¾ï¼Œè¿™åœ¨æœ¬æ•™ç¨‹æœ«å°¾è¿›è¡Œäº†è§£é‡Šã€‚</p><p>è¦ä½¿ç”¨åŸŸåè®¿é—®Tegolaï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Nginx æˆ–Apache ä¸ºTegola è®¾ç½®åå‘ä»£ç†ã€‚è¿™ä¹Ÿå°†å…è®¸æˆ‘ä»¬ä½¿ç”¨å…è´¹çš„ Let&#39;s Encrypt è¯ä¹¦å¯ç”¨ HTTPSã€‚ Nginx æ˜¯ä¸€ç§éå¸¸æµè¡Œçš„ Web æœåŠ¡å™¨å’Œåå‘ä»£ç†ã€‚å¦‚æœæ‚¨æ›´å–œæ¬¢ä½¿ç”¨ Nginxï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ­¤æ–‡ä»¶ä¸­ã€‚å°† tile.example.com æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„åŸŸåã€‚æ‚¨è¿˜åº”è¯¥ä¸ºæ­¤å­åŸŸåˆ›å»º DNS A è®°å½•ã€‚å¦‚æœæ‚¨æ²¡æœ‰çœŸæ­£çš„åŸŸåï¼Œæˆ‘å»ºè®®æ‚¨å» NameCheap è´­ä¹°ä¸€ä¸ªã€‚ä»·æ ¼ä½å»‰ï¼Œä»–ä»¬ç»ˆèº«å…è´¹æä¾›whoiséšç§ä¿æŠ¤ã€‚æœåŠ¡å™¨{å¬80ï¼›å¬ [::]:80; server_name tile.example.com; access_log /var/log/nginx/tegola.access; error_log /var/log/nginx/tegola.error;ä½ç½® / { proxy_pass http://127.0.0.1:8080; proxy_set_header ä¸»æœº $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Forwarded-Protocol $scheme; proxy_set_header X-Forwarded-Host $http_host;å¦‚æœæ‚¨æ›´å–œæ¬¢ Apache è€Œä¸æ˜¯ Nginxï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… Apache Web æœåŠ¡å™¨ã€‚è¦ä½¿ç”¨ Apache ä½œä¸ºåå‘ä»£ç†ï¼Œæˆ‘ä»¬éœ€è¦å¯ç”¨ä»£ç†æ¨¡å—å’Œæ ‡å¤´æ¨¡å—ã€‚å°†ä»¥ä¸‹é…ç½®æ”¾å…¥æ–‡ä»¶ä¸­ã€‚å°† tile.example.com æ›¿æ¢ä¸ºæ‚¨çš„å®é™…åŸŸåã€‚ä¸è¦å¿˜è®°ä¸ºæ­¤å­åŸŸåˆ›å»º DNS A è®°å½•ã€‚å¦‚æœæ‚¨æ²¡æœ‰çœŸæ­£çš„åŸŸåï¼Œæˆ‘å»ºè®®æ‚¨å» NameCheap è´­ä¹°ä¸€ä¸ªã€‚ä»·æ ¼ä½å»‰ï¼Œä»–ä»¬ç»ˆèº«å…è´¹æä¾›whoiséšç§ä¿æŠ¤ã€‚</p><p>&lt;VirtualHost *:80&gt; ServerName tile.example.com ErrorDocument 404 /404.html #HTTP ä»£ç† ProxyPass / http://127.0.0.1:8080/ ProxyPassReverse / http://127.0.0.1:8080/ ProxyPreserveHost On &lt;/VirtualHost &gt; ä¸ºäº†åœ¨æ‚¨ä»å¤–éƒ¨è®¿é—® Tegola æœåŠ¡å™¨æ—¶åŠ å¯† HTTP æµé‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®‰è£… Let&#39;s Encrypt é¢å‘çš„å…è´¹ TLS è¯ä¹¦æ¥å¯ç”¨ HTTPSã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤åœ¨ Ubuntu 20.04 ä¸Šå®‰è£… Let&#39;s Encrypt å®¢æˆ·ç«¯ (certbot)ã€‚ --hstsï¼šå°† Strict-Transport-Security æ ‡å¤´æ·»åŠ åˆ°æ¯ä¸ª HTTP å“åº”ã€‚å¼ºåˆ¶æµè§ˆå™¨å§‹ç»ˆå¯¹åŸŸä½¿ç”¨ TLSã€‚é˜²å¾¡ SSL/TLS å‰¥ç¦»ã€‚ --staple-ocspï¼šå¯ç”¨ OCSP è£…è®¢ã€‚æœ‰æ•ˆçš„ OCSP å“åº”è¢«è£…è®¢åˆ°æœåŠ¡å™¨åœ¨ TLS æœŸé—´æä¾›çš„è¯ä¹¦ã€‚ç°åœ¨åº”è¯¥è·å¾—å¹¶è‡ªåŠ¨å®‰è£…è¯ä¹¦ã€‚æ‚¨å¯ä»¥é€šè¿‡ HTTPS è®¿é—® Tegolaï¼šhttps://tile.example.comã€‚æ‚¨éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥æ˜¾ç¤ºåŸºäºçŸ¢é‡åˆ‡ç‰‡çš„åœ°å›¾ã€‚æˆ‘ä»¥ OpenLayer ä¸ºä¾‹ã€‚åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ª map.html æ–‡ä»¶å¹¶è¾“å…¥ä»¥ä¸‹ä»£ç ã€‚ &lt;!doctype html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://openlayers.org/en/v5.3.0/css/ol.css&quot; type=&quot;text /css&quot;&gt; &lt;style&gt; #map{height:1000px;width:100%;background-color:#1C79B5;} &lt;/style&gt; &lt;script src=&quot;https://openlayers.org/en/v5.3.0/ build/ol.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;title&gt;OpenLayers ç¤ºä¾‹&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;map&quot; class=&quot;map&quot;&gt;&lt;/div &gt; &lt;script type=&quot;text/javascript&quot;&gt; var defaultStyle = new ol.style.Style({ fill: new ol.style.Fill({ color: [234,231,221,1] }), stroke: new ol.style.Stroke ({ é¢œè‰²: [182,177,162,1], å®½åº¦: 1 }) }); var waterStyle = new ol.style.Style({ fill: new ol.style.Fill({ color: [28,121,181,1] }),stroke: new ol.style.Stroke({ color: [27,107,159,1], width : 1 }) }); var streetStyle = new ol.style.Style({ fill: new ol.style.Fill({ color: [111,44,173,1] }), stroke: new ol.style.Stroke({ color: [93,32,150, 1]ï¼Œå®½åº¦ï¼š1 }) }); function styleFunction(feature, resolution){ if (feature.get(&#39;type&#39;) == &#39;water&#39; || feature.get(&#39;layer&#39;) == &#39;water_areas&#39; || feature.get(&#39;layer&#39;) == &#39;water_lines&#39;){ è¿”å› [waterStyle]; } if (feature.get(&#39;layer&#39;) == &#39;transport_lines&#39;){ return [streetStyle]; } if (feature.get(&#39;layer&#39;) == &#39;country_polygons&#39; || feature.get(&#39;layer&#39;) == &#39;landuse_areas&#39;){ return null; // ä¸åº”ç”¨ä»»ä½•æ ·å¼ï¼Œè¿”å› null } return [defaultStyle]; } var map = new ol.Map({ target: &#39;map&#39;, layers: [ new ol.layer.VectorTile({ source: new ol.source.VectorTile({ format: new ol.format.MVT(), url: &#39;https://tile.linuxbabe.com/maps/osm/{z}/{x}/{y}.pbf&#39; }), style:styleFunction }) ], view: new ol.View({ center: ol .proj.fromLonLat([0.5,54.5]), //åœ°å›¾å°†ä»¥åˆå§‹ç¼©æ”¾ä¸ºä¸­å¿ƒçš„åæ ‡ï¼š6 }) }); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</p><p>æˆ‘å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©æ‚¨åœ¨ Ubuntu 20.04 ä¸Šè®¾ç½® Tegola Vector Tile Serverã€‚ä¸å¾€å¸¸ä¸€æ ·ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·è®¢é˜…æˆ‘ä»¬çš„å…è´¹æ—¶äº‹é€šè®¯ä»¥è·å–æ›´å¤šæç¤ºå’ŒæŠ€å·§ã€‚ä¿é‡ğŸ™‚</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.linuxbabe.com/ubuntu/set-up-tegola-vector-tile-server-ubuntu-20-04">https://www.linuxbabe.com/ubuntu/set-up-tegola-vector-tile-server-ubuntu-20-04</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ubuntu/">#ubuntu</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/åˆ‡ç‰‡/">#åˆ‡ç‰‡</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/tegola/">#tegola</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/quot/">#quot</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>