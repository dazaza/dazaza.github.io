<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>æ¯”ç‰¹å¸ä»æ— åˆ°æœ‰--ç¬¬1éƒ¨åˆ†</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">æ¯”ç‰¹å¸ä»æ— åˆ°æœ‰--ç¬¬1éƒ¨åˆ†</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-07-04 07:44:09</div><div class="page_narrow text-break page_content"><p>ç†è§£æ¯”ç‰¹å¸çš„åŸºæœ¬æ„å»ºå—(ğŸ˜‰)å¯èƒ½ä¼šè®©ä¸€äº›å¼€å‘äººå‘˜æœ›è€Œå´æ­¥ã€‚å¦‚æœä¸çŸ¥é“æ‰€æœ‰ä¸œè¥¿æ˜¯å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·çš„ï¼Œæˆ‘å‘ç°å¾ˆéš¾æœ‰æ„ä¹‰åœ°ç†è§£ä¸€ä¸ªç³»ç»Ÿã€‚</p><p>å®Œæˆè¿™ä¸€è¿‡ç¨‹çš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯åˆ¶å®šä¸€å¥—ç³»ç»Ÿè¿è¡Œçš„è¿‡ç¨‹ï¼Œå°½ç®¡è¿™æ˜¯å¾ˆåˆçº§çš„è¿‡ç¨‹ã€‚å› æ­¤ï¼Œæœ¬æŒ‡å—çš„ç›®çš„æ˜¯é€šè¿‡ç®€å•çš„ä»£ç ç‰‡æ®µæ¥è§£é‡Šæ¯”ç‰¹å¸æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p>æ³¨ï¼šç›®çš„ä¸æ˜¯åˆ›å»ºæ¯”ç‰¹å¸åè®®çš„çœŸæ­£å®ç°ã€‚å®ƒçš„ç›®çš„ä¹Ÿä¸æ˜¯è§£é‡Šæ¯ä¸€ä¸ªæ¦‚å¿µã€‚å¦‚æœæ‚¨å‘ç°ä¸€ä¸ªæ¦‚å¿µéœ€è¦æµè§ˆï¼Œè¯·æŸ¥æ‰¾åµŒå…¥çš„é“¾æ¥ã€‚</p><p>å¸Œæœ›åœ¨æœ¬ç³»åˆ—ç»“æŸæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æœ‰ä¸€ä¸ªä»»ä½•äººéƒ½å¯ä»¥è¿è¡Œçš„ç±»ä¼¼æ¯”ç‰¹å¸çš„åè®®ã€‚</p><p>è®©keypair=cryptoï¼šï¼šKeyPairï¼šï¼šNew()ï¼›è®©keypair2=cryptoï¼šï¼šKeyPairï¼šï¼šNew()ï¼›è®©tx1=create_sign_tx(&ampï¼›keypairï¼Œkeypair2.public_keyï¼Œ123)ï¼›è®©tx2=create_sign_tx(&ampï¼›keypair2ï¼Œkeypair.public_keyï¼Œ75)ï¼›è®©txs=vecï¼[TX1ï¼ŒTX2]ï¼›è®©PROVED_BLOCK=BLOCKã€‚è®¾block=proposed_block.mine(3)ï¼›//éš¾åº¦3ï¼Œå³hashå¿…é¡»ä»¥&#34ï¼›000&#34ï¼›printlnï¼(&#34ï¼›æŒ–æ˜å—ï¼š{ï¼š#ï¼Ÿ}&#34ï¼›ï¼Œblock)ï¼›</p><p>éœ€è¦å¯†é’¥ä½œä¸ºå®ç°æ‰€æœ‰æƒçš„ä¸€ç§æ‰‹æ®µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¶ˆè´¹ä¸€å®šæ•°é‡çš„æ¯”ç‰¹å¸éœ€è¦æœ‰é’¥åŒ™ã€‚</p><p>ä½ çš„é’¥åŒ™å®é™…ä¸Šç”±ä¸¤éƒ¨åˆ†ç»„æˆã€‚ç§é’¥å’Œå…¬é’¥ã€‚å…¬é’¥å¯ä»¥ä¸ä¸–ç•Œå…±äº«ï¼Œå¹¶ç”¨äºæ¥æ”¶æ¯”ç‰¹å¸ï¼Œè€Œç§é’¥æ˜¯æ‚¨ä¿æŒå®‰å…¨çš„ä¸œè¥¿ï¼Œå› ä¸ºå®ƒå¯ä»¥ç”¨æ¥èŠ±è´¹æ‚¨çš„æ¯”ç‰¹å¸ã€‚æœ‰å…³å…¬é’¥å¯†ç æœ¯çš„æ›´å¤šä¿¡æ¯ã€‚</p><p>åœ¨æ¯”ç‰¹å¸ä¸­ï¼Œæ¤­åœ†æ›²çº¿ç”¨äºå…¬é’¥åŠ å¯†-å…·ä½“åœ°è¯´æ˜¯secp256k1ã€‚åœ¨Esenseä¸­ï¼Œä½¿ç”¨(Psuedo)éšæœºæ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼Œå¯ä»¥å°†å…¶è§†ä¸ºç”¨æˆ·çš„é’±åŒ…ã€‚</p><p>è®©mut rand=randï¼šï¼šOsRngï¼šï¼šnew().unwire()ï¼›è®©SECP=Secp256k1ï¼šï¼šnew()ï¼›let(private_keyï¼Œpublic_key)=secp.Generate_keypair(&ampï¼›mut rand)ï¼›KeyPair{SECPï¼Œpublic_keyï¼Œprivate_keyï¼Œ}ã€‚</p><p>äº¤æ˜“æ˜¯æ¯”ç‰¹å¸ç³»ç»Ÿä¸­æœ€å°çš„å•ä½ã€‚äº¤æ˜“æ˜¯å¯¹ä»Aåˆ°Bçš„xä¸ªæ¯”ç‰¹å¸çš„æ”¯ä»˜è¿›è¡Œç¼–ç çš„æ•°æ®ç»“æ„ã€‚</p><p>é‚£ä¹ˆï¼Œæ˜¯ä»€ä¹ˆé˜»æ­¢äº†ä»»ä½•äººä»£è¡¨ä»–äººè¿›è¡Œè½¬ç§»å‘¢ï¼Ÿå…¬é’¥å¯†ç æœ¯ã€‚è¦æˆä¸ºæœ‰æ•ˆçš„äº¤æ˜“å¹¶è¢«å…¶ä»–äººæ¥å—è¿›å…¥ç½‘ç»œï¼Œäº¤æ˜“éœ€è¦ç”¨`from`å…¬é’¥è¿›è¡Œ&#34ï¼›ç­¾å&#34ï¼›ã€‚</p><p>å®æ–½å¯†é’¥å¯¹{pub FN sign(&ampï¼›selfï¼Œmessageï¼š&ampï¼›[U8])-&gtï¼›ç­¾å{.ã€‚self.secp.sign(&ampï¼›Messageï¼Œ&ampï¼›self.private_key)ï¼›}}ã€‚</p><p>å¦‚å‰æ‰€è¿°ï¼Œç§é’¥å¯¹å¤šä¸ªæ¯”ç‰¹å¸è¿›è¡Œæ§åˆ¶ã€‚A&#39ï¼›çš„ç§é’¥ç”¨äºç­¾ç½²äº¤æ˜“ï¼Œè¿™æ ·ä»»ä½•äººéƒ½å¯ä»¥éªŒè¯ä»Aåˆ°Bçš„äº¤æ˜“å®é™…ä¸Šæ˜¯ç”±Aæˆæƒçš„ã€‚</p><p>è®©tx=Transactionï¼šï¼šTransaction{Fromï¼škeypair.public_keyï¼ŒToï¼ŒAmountï¼Œ}ï¼›è®©sig=keypair.sign(&ampï¼›tx.hash())ï¼›Return Transactionï¼šï¼šSignedTransaction{Transactionï¼štxï¼Œsigï¼šsig.to_string()ï¼Œ}ï¼›</p><p>å—æ˜¯äº‹åŠ¡çš„é›†åˆã€‚è¿™äº›äº¤æ˜“åº”è¯¥ç­¾å­—ï¼Œå› æ­¤æ˜¯æœ‰æ•ˆçš„ã€‚</p><p>è®©TX1=CREATE_SIGNED_TX(&ampï¼›keypairï¼Œkeypair2.public_keyï¼Œ123)ï¼›è®©TX2=CREATE_SIGNED_TX(&ampï¼›keypair2ï¼Œkeypair.public_keyï¼Œ75)ï¼›è®©txs=vecï¼[TX1ï¼ŒTX2]ï¼›è®©PROVED_BLOCK=BLOCKï¼šï¼šProposedBlock{Transactionï¼štxsï¼Œ}ï¼›</p><p>äº‹å®ä¸Šï¼Œåœ¨æ¯”ç‰¹å¸ç½‘ç»œä¸Šï¼Œå”¯ä¸€å¯ä»¥è·¨å—å¤åˆ¶çš„æ•°æ®ã€‚è¯¥å—çš„ç›®çš„æ˜¯æœ‰æ•ˆåœ°å°†å…¶åŒ…å«çš„äº‹åŠ¡å†™å…¥å†å²ã€‚å®ƒé€šè¿‡é‡‡çŸ¿å®ç°äº†è¿™ä¸€ç‚¹ã€‚</p><p>æŒ–æ˜çš„è¿‡ç¨‹å°±æ˜¯åšä¸€ä¸ªè®¡ç®—ï¼Œä»¥ç¡®ä¿æœ‰ä¸€äº›ä¸œè¥¿å¤„äºå±é™©ä¹‹ä¸­ã€‚æ¢å¥è¯è¯´ï¼ŒçŸ¿å·¥å¿…é¡»è¯æ˜ä»–ä»¬åšäº†ä¸€äº›å·¥ä½œ--å·¥ä½œè¯æ˜ã€‚</p><p>å¦‚æœæ•£åˆ—ä»¥ç‰¹å®šæ•°é‡çš„0å¼€å§‹ï¼Œåˆ™POWå°±è¶³å¤Ÿäº†ã€‚æ‰€éœ€çš„0åˆ†ç§°ä¸ºéš¾åº¦ã€‚éš¾åº¦è¶Šå¤§-éœ€è¦çš„0è¶Šå¤šã€‚</p><p>è®©mutéšæœºæ•°ï¼šu32=0ï¼›è®©mut BLOCK_HASHï¼šSTRING=Stringï¼šï¼šNEW()ï¼›è®©BLOCK_STRING=self.Serialize()ï¼›è€Œï¼block_hash.starts_with(&ampï¼›&#34ï¼›0&#34ï¼›.repeat(difficulty)){LET BLOCK=FORMATï¼(&#34ï¼›{}{}&#34ï¼›ï¼ŒBLOCK_STRINGï¼ŒNONCE)ï¼›BLOCK_HASH=åå…­è¿›åˆ¶ï¼šï¼šEncode(Cryptoï¼šï¼šsha256(block.clone()ï¼›NONCE+=1ï¼›}è¿”å›å—{hashï¼šblock_hashï¼ŒNonceï¼ŒTransactionï¼šself.Transaction}ã€‚</p><p>ä½ ç°åœ¨åº”è¯¥æœ‰å¸Œæœ›çœ‹åˆ°è¿™ä¸€åˆ‡æ˜¯å¦‚ä½•ç»“åˆåœ¨ä¸€èµ·çš„ã€‚æ¦‚æ‹¬ä¸€ä¸‹æœ€åˆä»‹ç»çš„é«˜çº§ä»£ç ï¼š</p><p>æœ€åï¼Œè¿è¡Œæ­¤ç¨‹åºå°†ç”Ÿæˆä¸€ä¸ªåŒ…å«ç­¾åäº‹åŠ¡çš„å—ã€‚è®°ä¸‹æ•£åˆ—ã€‚å®ƒä»¥&#34ï¼›000&#34ï¼›å¼€å¤´ï¼Œå› æ­¤å½“éš¾åº¦è®¾ç½®ä¸º3æ—¶ï¼Œå®ƒæ˜¯æœ‰æ•ˆçš„å—ã€‚</p><p>æŒ–æ˜å—ï¼šå—{HASHï¼š&#34ï¼›000cc7b72695c1ab8b7969cb400f73d763bce1cafa866b0aab59fe762eb7fbed&#34ï¼›ï¼ŒNonceï¼š96ï¼Œäº‹åŠ¡ï¼š[ç­¾åäº‹åŠ¡{Transaction{Fromï¼šPublicKey(bf9d4f6c8142956ac683f73ef009369b43aec7d765e18c6ac3b48341bf14ebd9e0a06bec8897e392725dae273eaa51400320130cba64143e61c1f61b3bc4f324ï¼Œ)ï¼ŒToï¼šPublicKey(c1c6bd81ff1a657ae4053149682502c749fbc4b638e047d36c4bdf637ebcd0e93d0f987638c248c099deef8ec76199c1818f3b387e232a2d8da5de5ca91cf13bï¼Œ)ï¼ŒAmountï¼š123ï¼Œ}ï¼Œsigï¼š&#34ï¼›304402206fb0e6ab4a6acfcc0725f048c7fbfed734accc0a4bad864ac161302410ed3f94022035ef86194f8de575658b7e4b3bae2aee193c507d78fe8ba4e43e22bce948271a&#34ï¼›ï¼Œ}ï¼ŒSignedTransaction{Transactionï¼šTransaction{Fromï¼šPublicKey(c1c6bd81ff1a657ae4053149682502c749fbc4b638e047d36c4bdf637ebcd0e93d0f987638c248c099deef8ec76199c1818f3b387e232a2d8da5de5ca91cf13bï¼Œ)ï¼ŒToï¼šPublicKey(bf9d4f6c8142956ac683f73ef009369b43aec7d765e18c6ac3b48341bf14ebd9e0a06bec8897e392725dae273eaa51400320130cba64143e61c1f61b3bc4f324ï¼Œ)ï¼ŒAmountï¼š75ï¼Œ}ï¼ŒSignedTransaction{Transaction{Fromï¼šPublicKey(bf9d4f6c8142956ac683f73ef009369b43aec7d765e18c6ac3b48341bf14ebd9e0a06bec8897e392725dae273eaa51400320130cba64143e61c1f61b3bc4f324ï¼Œ)ï¼ŒAmountï¼š75ï¼Œ}ï¼ŒSignedTransaction{Transaction{Fromï¼šPublicKey(bf9d4f6c8142956ac683f73ef009369b43aec7d765e18c6ac3b48341bf14ebd9e0a06bec8897e392725dae273eaa51400320130cba64143e61c1f61b3bc4f324ï¼Œ)ï¼ŒAmountï¼š75ï¼Œ}ï¼ŒSignedTransactionï¼š&#34ï¼›30440220752b3ea25bd2ab2b29d44659af665caddd7ce9b54144c41e6adcdfde7ef807fa022066682bdb49666a91fd28e14c05cf8229d668c061f404f218bb62619e4604eb59&#34ï¼›ï¼Œ}ï¼Œ]ï¼Œ}</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://monokh.com/posts/bitcoin-from-scratch-part-1">https://monokh.com/posts/bitcoin-from-scratch-part-1</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/æ¯”ç‰¹å¸/">#æ¯”ç‰¹å¸</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ä»æ— åˆ°æœ‰/">#ä»æ— åˆ°æœ‰</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/scratch/">#scratch</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/block/">#block</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1009432.html"><img src="http://img.diglog.com/img/2020/7/thumb_c7da3f57541b2bb64749eccb44ce2b4b.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009432.html">
æŸäº›æ¯”ç‰¹å¸é’±åŒ…ä¸­çš„æ¼æ´ä¼šå¯¼è‡´åŒé‡æ”¯å‡ºæ”»å‡»å’Œå¤¸å¤§ä½™é¢</a></div><span class="my_story_list_date">2020-7-2 14:4</span></div><div class="col-sm"><div><a target="_blank" href="/story/1009195.html"><img src="http://img.diglog.com/img/2020/7/thumb_2f45188b10cc73f7678ce23bced1d20d.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009195.html">æœ‰äººç¥ç§˜åœ°å°†è¿‘10äº¿ç¾å…ƒçš„æ¯”ç‰¹å¸</a></div><span class="my_story_list_date">2020-7-1 7:36</span></div><div class="col-sm"><div><a target="_blank" href="/story/1009106.html"><img src="http://img.diglog.com/img/2020/7/thumb_4d1ed032e70f73c1b4b7cc61d9d05109.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1009106.html">åŠ å·å¤§å­¦åœ¨å‹’ç´¢è½¯ä»¶æ”»å‡»åæ”¯ä»˜114ä¸‡ç¾å…ƒæ¯”ç‰¹å¸</a></div><span class="my_story_list_date">2020-7-1 2:31</span></div><div class="col-sm"><div><a target="_blank" href="/story/1008965.html"><img src="http://img.diglog.com/img/2020/6/thumb_d05634fe2e35f405d4156b7953ae99fa.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1008965.html">æœ€å¤§çš„æœªçŸ¥æ¯”ç‰¹å¸é’±åŒ…ä»¥0.48ç¾å…ƒçš„æ‰‹ç»­è´¹ç§»åŠ¨äº†è¿‘10äº¿ç¾å…ƒ</a></div><span class="my_story_list_date">2020-6-30 21:26</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>