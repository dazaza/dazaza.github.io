<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>PI-孔v5发布</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">PI-孔v5发布</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-11 06:12:25</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/5/32088e8d76768fadf1b2792ad2708d5b.png"><img src="http://img.diglog.com/img/2020/5/32088e8d76768fadf1b2792ad2708d5b.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>经过成功的测试版测试和开发阶段(非常感谢测试版测试员！)之后，我们很高兴地宣布5.0版正式发布！</p><p>PI-hole4.x和5.0之间有许多根本性的变化-因此，严格地说，这是一种单向操作。*一旦从4.x迁移到5.0，就无法返回；您将需要从备份恢复。我要在跳之前看完所有的笔记，并做一个备份！</p><p>实际上，有相当多，但我们将在这里简要地回顾一下更重要的事情。</p><p>这是用户长期以来一直在要求的，我们很自豪终于能够提供这一令人敬畏的功能。可以创建多个组，并可以将黑名单、黑名单和白名单应用于组。*黑名单、黑名单、白名单均可单独启用/禁用。</p><p>为了支持这一新功能，我们将列表存储从/etc/pihole目录中的单个文件迁移到同一目录中的新Grasion数据库。这允许控制列表中项目的启用和禁用，甚至可以添加注释来提醒您为什么要将某些内容列入黑名单/白名单！此外，数据库将存储您最初添加域的时间和上次更改(或禁用)域的时间。*您可能会注意到，更新重力测试(pihole-g)所需的时间比以前稍长一些，但此过程通常在每周清晨在后台进行一次，应该不会中断您的DNS服务。运行时间较长是因为生成了高效的B-tree索引，允许在数据库中进行快速查找。</p><p>我们添加了一个仪表板界面(组管理)，以便能够轻松使用这一强大的新功能，但是，目前没有通过ipihole命令的CLI界面。如果要从CLI管理组，则必须直接与数据库交互。我们在官方文档中准备了一个广泛的示例，展示了通过Web界面进行一些可能的配置，但也展示了如何通过CLI实现相同的功能。</p><p>需要将依赖于操作文件的自定义用户脚本(如.gravity.list、Black.list、Whitelist.txt等)更改为与数据库交互。这个新的数据库有如此强大的功能，它是值得的！而且，我们在这里提供帮助，只需在我们的话语平台上打开一个讨论，我们就可以就如何将新的重力数据库用于您的自定义脚本提供建议。额外的好处是，您将学习如何与数据库系统交互，该数据库系统也广泛用于Android(是的，智能手机操作系统！)、Google的Chrome、Firefox、许多内容管理系统等广泛的应用程序中。如果你愿意，你甚至可以在下一封求职信中把这一点加到你的简历中。</p><p>这已经在一个被广泛讨论的功能请求中涉及到，因为它能够深入分析CNAME查询。这将允许PI-HOLE发现CNAME链中是否有已知的域被阻止。如果找到一个，PI-HOLE现在可以阻止原始查询。*该功能默认为启用，但可以使用FTL配置选项(CNAME_DELP_INSPECT=FALSE)禁用。*请注意，如果您将某个域明确列入白名单，则无论CNAME轨迹是否通向被阻止的域(白名单始终优先)，都会检索该域。</p><p>改进了仪表板上的图形(24小时历史记录的条形图，与之前平滑的曲线相比)。</p><p>有关查询日志页上阻止域的原因的其他信息。例如，如果查询被正则表达式阻止，单击该状态块将把您带到阻止它的阻止列表条目。</p><p>改进了对导入的阻止列表的解析。*重力脚本现在将显示有多少域名无法导入，并提供一些原因示例。</p><p>通过“Local DNS Records”(本地DNS记录)选项卡从Web GUI自定义主机名。*这会将主机名分配给IP地址，类似于可以使用CLI在/etc/hosts文件中执行的操作。*映射存储在/etc/pihole/custom.list中。随着此更改，先前的pihole-a hostrecord命令将被删除。</p><p>改进的调试日志，以表格形式显示您的阻止列表和组，包括注释和启用/禁用状态。</p><p>改进了传送功能。*导出更多设置，并且有从传送器文件导入的其他选项。</p><p>pi-hole不再更改分配给pi的名称服务器(在/etc/Resolution v.conf中)。*PI-HOLE主机的现有名称服务器设置将受到尊重并保持不变。</p><p>向网络表添加了IPv6支持。注意：此网络概述旨在使用可用信息快速查看网络上的客户端，以帮助您确定网络上的客户端是否正在使用PI-HOLE进行DNS。它不打算用作网络管理工具。</p><p>更改了初始安装时提供的阻止列表(一些以前的阻止列表不再保留)。</p><p>使用QEMU和Armel坞站图像为Raspberry PI 1和0版本添加FTL变体。</p><p>在Alpine Linux上使用MUSL添加一个自包含的FTL变体。此二进制文件在任何方面都不依赖于glibc代码。</p><p>当然，还有大量的小调整、改进和一些修复的错误。</p><p>要从版本4.x更新到这个新版本，可以运行pihole-up。*如果您一直在运行5.0测试版，请运行pihole checkout master以从测试版转移到主分支。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://pi-hole.net/2020/05/10/pi-hole-v5-0-is-here/#page-content">https://pi-hole.net/2020/05/10/pi-hole-v5-0-is-here/#page-content</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/发布/">#发布</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/v5/">#v5</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/hole/">#hole</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1001585.html"><img src="http://img.diglog.com/img/2020/5/thumb_98380478f1197514efbe4233810fc1b7.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1001585.html">RetroPie 4.6发布，支持Raspberry PI 4</a></div><span class="my_story_list_date">2020-5-11 6:11</span></div><div class="col-sm"><div><a target="_blank" href="/story/1001486.html"><img src="http://img.diglog.com/img/2020/5/thumb_ab2e0390e497368a818df81a64dfcb99.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1001486.html">美国太空部队发布首个招募视频，承认Netflix喜剧“太空部队”</a></div><span class="my_story_list_date">2020-5-10 13:27</span></div><div class="col-sm"><div><a target="_blank" href="/story/1001468.html"><img src="http://img.diglog.com/img/2020/5/thumb_cee06b3721b0eaf14e92aa8bb80ccd6f.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1001468.html">3D打印N95蒙大拿州面具设计在GPLv3下发布</a></div><span class="my_story_list_date">2020-5-10 9:17</span></div><div class="col-sm"><div><a target="_blank" href="/story/1001408.html"><img src="http://img.diglog.com/img/2020/5/thumb_fd93c5ba89bc7aeeb77dc980b7d1ece7.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1001408.html">Lens v3.4(Kubernetes IDE)发布</a></div><span class="my_story_list_date">2020-5-10 0:47</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>