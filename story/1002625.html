<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>由Python驱动的手线USB和蓝牙键盘</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">由Python驱动的手线USB和蓝牙键盘</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-18 21:42:01</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/5/a78b1c365c96992ac6c10726706ed5ad.jpeg"><img src="http://img.diglog.com/img/2020/5/a78b1c365c96992ac6c10726706ed5ad.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>下载两个Circuit itPython库-Adafruit-ble&amp；Adafruit-HID，并将它们放入名为CIRCUITPY的USB驱动器的lib目录中。</p><p>CircuitPy├─代码.py└─库├─adafruit_ble└─adafruit_hid。</p><p>将Python代码复制到code.py。重新加载code.py时，您将获得一个带USB蓝牙的键盘(&amp；Bluetooth。</p><p>从电路板导入时间导入*导入Digitalio导入usb_hid从adafruit_ble导入adafruit_ble。广告从Adafruit_ble导入广告。做广告。从Adafruit_ble标准导入ProVideServicesAdvertisement。服务。标准。HID从Adafruit_HID导入HIDService。从Adafruit_HID导入键盘。KEYCODE导入KEYCODE AS_ROWS=(P27，P13，P30，P20，P3)COLS=(P26，P31，P29，P28，P5，P4，P24，P25，P23，P22，P14，P15，P16，P17)KEYMAP=(_.。逃生，_。一，_。二，_。三，_。四，_。五，_。六，_。七，_。八，_。九点，_。零，_。减号，_。等于，_。退格键，_。制表符，_。q，_。W，_。e，_。R，_。t，_。Y，_。u，_。我，_。不，_。p，_。左方括号，_。右括号，_。反斜杠，_。CAPS_LOCK，_。a，_。s，_。d，_。F，_。G，_。H，_。J，_。K，_。我，_。分号，_。引用，没有，_。输入，_。Left_Shift，_。z，_。X，_。C，_。v，_。B，_。N，_。m，_。逗号，_。句号，_。正向斜杠、无、_。Right_Shift、None、_。Left_Control，_。LEFT_ALT，_。LEFT_GUI、无、无、_。空格、无、无、_。右_alt，_。Right_GUI，_。应用程序，_。RIGHT_CONTROL，NONE，NONE)类矩阵：def__init__(self__init__(self，row=row，cols=cols)：self。行中的端号为ROWS=[]：IO=Digitalio。数字输入输出(插针)Io.。方向=数字。方向。输出io。drive_mode=digitalio。驱动模式。PUSH_PULL IO。值=0自身。排成一排。附加(Io)自己。COLS=[]表示管脚在COLS中：IO=Digitalio。数字输入输出(插针)Io.。方向=数字。方向。输入io。拉=数字。拉。自暴自弃。科尔斯。附加(Io)自己。PRESSED_KEYS=[]定义扫描(自身)：NEW_KEYS=[]PRESSED_KEYS=[]RELEASED_KEYS=SELF。范围内r的按下的_KEYS(len(自身。行))：SELF。行[r]。范围内c的值=1(len(自身。COLS))：如果是SELF。cols[c]。值：key=r*len(自身。COLS)+c按下_键。在RELEASED_KEYS：RELEASED_KEYS中追加(Key)if key。REMOVE(KEY)ELSE：NEW_KEYS。附加(关键字)自身。行[r]。值=0自身。PRESSED_KEYS=PRESSED_KEYS返回PRESSED_KEYS，RELEASED_KEYS，NEW_KEYS def main()：HID=HIDService()advertisement=ProVideServicesAdvertisement(HID)通告。外观=961 ble=Adafruit_ble。BLERadio()(如果可用)。已连接：在ble中表示c。Connections：C.Disconnect()ble。START_ADVIDATION(ADVID.)ADVALIDATION=True_keyboard=Keyboard(HID.。设备)矩阵=矩阵()USB_键盘=键盘(USB_HID.。设备)，而True：PRESSED_KEYS，RELEASED_KEYS，NEW_KEYS=矩阵。Scan()if RELEASED_KEYS：RELEASED_KEYCODES=LIST(map(lambda i：keymap[i]，RELEASED_KEYS))打印(&#39；释放的键{}&#39；。format(RELEASED_KEYCODE))USB_键盘。如果ble，则释放(*RELEASED_KEYCODE)。已连接：广告=FALSE BLE_KEARY。释放(*RELEASED_KEYCODES)，如果NEW_KEYS：NEW_KEYCODES=LIST(map(lambda i：keymap[i]，new_key))print(&#39；new key{}&#39；。format(New_Keycode))USB_键盘。如果可用，请按(*NEW_KEYCODE)。已连接：广告=FALSE BLE_KEARY。如果不可用，请按(*NEW_KEYCODE)。连接而不是广告：ble。START_ADDISTING(广告)ADVALIDATION=真实时间。睡眠(0.001)如果__名称__==&#39；__Main__&#39；：Main()。</p><p>如果您有不同的ROW和COLS配置，则必须在代码中更改行和COLS。</p><p>正如您可能注意到的，这是一个60%的键盘，它缺少很多键(F1~F12，箭头键)。但是，我们可以添加诸如TMK的层和复合键之类的功能来使小键盘更加强大。受开发更实用的键盘的启发，我们可以对键盘进行优化，使我们的手指保持在主排，这可能会帮助我们提高工作效率。</p><p>在这里，我们介绍一个功能，它是按住一个键来激活另一个功能。</p><p>要应用导航d，请将keyboard.py、keycodes.py和matrix.py复制到CIRCUITPY，然后修改code.py以导入新键盘</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/makerdiary/python-keyboard">https://github.com/makerdiary/python-keyboard</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/蓝牙/">#蓝牙</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/键盘/">#键盘</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/python/">#python</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/驱动/">#驱动</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/wired/">#wired</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1000481.html"><img src="http://img.diglog.com/img/2020/5/thumb_f7d921dcbe60dc1e9675fdc6bda58704.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000481.html">由OralB蓝牙牙刷控制的照明</a></div><span class="my_story_list_date">2020-5-3 20:48</span></div><div class="col-sm"><div><a target="_blank" href="/story/1000384.html"><img src="http://img.diglog.com/img/2020/5/thumb_1769b6a0f17c0e48c8635e328b7fa25e.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000384.html">为什么SARS-CoV-2蓝牙联系人追踪应用程序是一个非常愚蠢的想法</a></div><span class="my_story_list_date">2020-5-3 1:20</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_gadgets_763347.html"><img src="http://img.diglog.com/img/2013/7/thumb_a0ae09bd-7a38-4f13-8442-b7dc55407362.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_gadgets_763347.html">诺基亚推"手机寻物"蓝牙配件</a></div><span class="my_story_list_date">2013-7-30 18:29</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_design_118376.html"><img src="http://img.diglog.com/img/2009/1/thumb_f5ab7bc6f20340e3908bd334c9173085.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_design_118376.html">野外探险笔记本</a></div><span class="my_story_list_date">2009-1-10 23:46</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>