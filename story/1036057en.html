<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ç‰©è”ç½‘æ­æ™“ï¼Œç¬¬1éƒ¨åˆ†ï¼šä¸€å›¢ç³Ÿï¼Œç„¶åæœ‰å®¶åº­åŠ©ç†IoT Unravelled Part 1: It's a Mess but Then There's Home Assistant</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">IoT Unravelled Part 1: It's a Mess but Then There's Home Assistant<br/>ç‰©è”ç½‘æ­æ™“ï¼Œç¬¬1éƒ¨åˆ†ï¼šä¸€å›¢ç³Ÿï¼Œç„¶åæœ‰å®¶åº­åŠ©ç†</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-23 17:19:05</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/1ae15f057cca2b2757ed66a4c2d34d1a.jpg"><img src="http://img2.diglog.com/img/2020/11/1ae15f057cca2b2757ed66a4c2d34d1a.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Alright clever IoT folks, I&#39;ve got two of these garage door openers, what do you reckon the best way of connecting them with Apple HomeKit is?  https://t.co/i0RmjSMkkD</p><p>èªæ˜çš„IoTä¸“å®¶ä»¬ï¼Œæˆ‘æœ‰ä¸¤ä¸ªè¿™æ ·çš„è½¦åº“é—¨å¼€å¯å™¨ï¼Œæ‚¨è®¤ä¸ºå°†å®ƒä»¬ä¸Apple HomeKitè¿æ¥çš„æœ€ä½³æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ https://t.co/i0RmjSMkkD</p><p>â€” Troy Hunt (@troyhunt)  April 25, 2020</p><p>-ç‰¹æ´›ä¼ŠÂ·äº¨ç‰¹ï¼ˆ@troyhuntï¼‰2020å¹´4æœˆ25æ—¥</p><p>  In my mind, the answer would be simple: &#34;Just buy X, plug it in and you&#39;re good to go&#34;. Instead, I found myself heading down the rabbit hole into a world of soldering, custom firmware and community-driven home automation kits. Finally, a full 123 days later, I managed to open my garage door with an app:</p><p>  åœ¨æˆ‘çœ‹æ¥ï¼Œç­”æ¡ˆå¾ˆç®€å•ï¼šâ€œåªéœ€è´­ä¹°Xï¼Œå°†å…¶æ’å…¥ç”µæºå°±å¯ä»¥äº†â€ã€‚ç›¸åï¼Œæˆ‘å‘ç°è‡ªå·±è¿›å…¥äº†ç„Šæ¥ï¼Œå®šåˆ¶å›ºä»¶å’Œç¤¾åŒºé©±åŠ¨çš„å®¶åº­è‡ªåŠ¨åŒ–å¥—ä»¶é¢†åŸŸçš„å›°å¢ƒã€‚ç»ˆäºï¼Œæ•´æ•´123å¤©åï¼Œæˆ‘è®¾æ³•ä½¿ç”¨ä¸€ä¸ªåº”ç”¨ç¨‹åºæ‰“å¼€äº†è½¦åº“é—¨ï¼š</p><p> Smashing it today! So impressed with the Shelly 1, it made this so simple ğŸ˜Š  pic.twitter.com/miD8WdfUvM</p><p> ä»Šå¤©ç²‰ç¢ï¼è®©Shelly 1ç•™ä¸‹æ·±åˆ»çš„å°è±¡ï¼Œè®©å®ƒå˜å¾—å¦‚æ­¤ç®€å•simple pic.twitter.com/miD8WdfUvM</p><p>â€” Troy Hunt (@troyhunt)  August 26, 2020</p><p>-ç‰¹æ´›ä¼ŠÂ·äº¨ç‰¹ï¼ˆ@troyhuntï¼‰2020å¹´8æœˆ26æ—¥</p><p>  What follows is my journey down that very deep, very dark rabbit hole from which I thought I&#39;d never emerge. Every time I thought I had an answer, it raised 2 more questions. I had to buy new gear, learn new acronyms and work with things I&#39;d never heard of before. I waded through endless online discussions with strong opinions expressed in frequently conflicting directions about things I thought would be simple. Never before have I headed down a technology path that, frankly, is such a fragmented mess.</p><p>  æ¥ä¸‹æ¥çš„äº‹æƒ…æ˜¯æˆ‘æ²¿ç€é‚£ä¸ªéå¸¸æ·±ï¼Œéå¸¸é»‘æš—çš„å…”å­æ´èµ°ä¸‹å»çš„æ—…ç¨‹ï¼Œæˆ‘ä»¥ä¸ºæˆ‘æ°¸è¿œéƒ½ä¸ä¼šå‡ºç°ã€‚æ¯å½“æˆ‘ä»¥ä¸ºè‡ªå·±æœ‰ç­”æ¡ˆæ—¶ï¼Œå°±ä¼šæå‡ºå¦å¤–ä¸¤ä¸ªé—®é¢˜ã€‚æˆ‘å¿…é¡»è´­ä¹°æ–°è®¾å¤‡ï¼Œå­¦ä¹ æ–°çš„ç¼©å†™è¯å¹¶ä½¿ç”¨ä»¥å‰ä»æœªå¬è¯´è¿‡çš„ä¸œè¥¿ã€‚åœ¨æ— ä¼‘æ­¢çš„åœ¨çº¿è®¨è®ºä¸­ï¼Œæˆ‘ä»¥å¼ºçƒˆçš„è§‚ç‚¹å‚äºæ— ä¼‘æ­¢çš„è®¨è®ºä¸­ï¼Œè€Œè¿™äº›è§‚ç‚¹åœ¨æˆ‘è®¤ä¸ºå¾ˆç®€å•çš„äº‹æƒ…ä¸Šç»å¸¸ç›¸äº’çŸ›ç›¾ã€‚å¦ç‡åœ°è¯´ï¼Œæˆ‘ä»æœªèµ°è¿‡å¦‚æ­¤é›¶ç¢çš„æŠ€æœ¯é“è·¯ã€‚</p><p> I added to this blog post as I progressed with a view to ultimately having a &#34;happy path&#34; for others to follow in the future. Instead of a single post, I ended up with a 5-part epic which I&#39;ll post piece by piece over the course of this week with the hope that others can follow along and eventually, with enough time and patience, be able to open their garage doors too.</p><p> åœ¨æˆ‘å‰è¿›çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ·»åŠ åˆ°äº†æ­¤åšå®¢æ–‡ç« ä¸­ï¼Œä»¥æœŸæœ€ç»ˆä¸ºå°†æ¥çš„ä»–äººæä¾›ä¸€æ¡â€œå¹¸ç¦çš„é“è·¯â€ã€‚æˆ‘æ²¡æœ‰å‘è¡¨ä»»ä½•ä¸€ç¯‡æ–‡ç« ï¼Œè€Œæ˜¯æ’°å†™äº†ä¸€ä¸ªç”±5éƒ¨åˆ†ç»„æˆçš„å²è¯—ï¼Œæˆ‘å°†åœ¨æœ¬å‘¨çš„è¿‡ç¨‹ä¸­é€ç¯‡å‘å¸ƒï¼Œå¸Œæœ›å…¶ä»–äººå¯ä»¥è·Ÿè¿›ï¼Œå¹¶æœ€ç»ˆåœ¨è¶³å¤Ÿçš„æ—¶é—´å’Œè€å¿ƒä¸‹èƒ½å¤Ÿæ‰“å¼€ä»–ä»¬çš„è½¦åº“é—¨ä¹Ÿä¸€æ ·ã€‚</p><p>  This is where the whole mess starts: what is the hub of your IoT world? In my original tweet above, I thought it would be Apple&#39;s HomeKit which seemed like a reasonable assumption given my family&#39;s dependencies on iPhones, iPads, Apple Watches and with an Apple TV in the house. Those in an Android world might reasonably assume that Google Home would be their hub. Others might assume it&#39;d be something Alexa related. But no, every one of those answers is wrong because every single one is a proprietary ecosystem with fragmented support by different devices and a kludge of vendor lock-in. Take this as an example:</p><p>è¿™å°±æ˜¯æ•´ä¸ªæ··ä¹±çš„å¼€å§‹ï¼šæ‚¨çš„ç‰©è”ç½‘ä¸–ç•Œçš„ä¸­å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿåœ¨ä¸Šé¢çš„åŸå§‹æ¨æ–‡ä¸­ï¼Œæˆ‘è®¤ä¸ºè¿™å°†æ˜¯Appleçš„HomeKitï¼Œè€ƒè™‘åˆ°æˆ‘å®¶äººå¯¹iPhoneï¼ŒiPadï¼ŒApple Watchä»¥åŠå®¶é‡Œè£…æœ‰Apple TVçš„ä¾èµ–ï¼Œè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªåˆç†çš„å‡è®¾ã€‚é‚£äº›ä½¿ç”¨Androidçš„äººå¯èƒ½ä¼šåˆç†åœ°å‡è®¾Google Homeå°†æˆä¸ºä»–ä»¬çš„ä¸­å¿ƒã€‚å…¶ä»–äººå¯èƒ½ä¼šè®¤ä¸ºè¿™ä¸Alexaæœ‰å…³ã€‚ä½†æ˜¯ä¸ï¼Œè¿™äº›ç­”æ¡ˆä¸­çš„æ¯ä¸€ä¸ªéƒ½æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½æ˜¯ä¸€ä¸ªä¸“æœ‰çš„ç”Ÿæ€ç³»ç»Ÿï¼Œä¸åŒè®¾å¤‡çš„æ”¯ç¦»ç ´ç¢çš„æ”¯æŒï¼Œä»¥åŠå‚å•†é”å®šçš„éº»çƒ¦ã€‚ä»¥æ­¤ä¸ºä¾‹ï¼š</p><p> Stuck inside and not allowed out? Nerf gun wall!  LED strip lights are Arlec from Bunnings at A$60 for 5m. Controller app plus Alexa integration so next step is full voice control ğŸ˜  pic.twitter.com/8mP2G3CM3t</p><p> å¡åœ¨é‡Œé¢ï¼Œä¸å…è®¸å‡ºå»å—ï¼Ÿç¥ç»å£æªï¼ LEDæ¡å½¢ç¯æ˜¯æ¥è‡ªBunningsçš„Arlecï¼Œä»·æ ¼ä¸º60æ¾³å…ƒ/ 500ä¸‡ç¾å…ƒã€‚ Controlleråº”ç”¨ç¨‹åºåŠ ä¸ŠAlexaé›†æˆï¼Œå› æ­¤ä¸‹ä¸€æ­¥å°±æ˜¯å®Œæ•´çš„è¯­éŸ³æ§åˆ¶ğŸ˜pic.twitter.com/8mP2G3CM3t</p><p>â€” Troy Hunt (@troyhunt)  April 9, 2020</p><p>-ç‰¹æ´›ä¼ŠÂ·äº¨ç‰¹ï¼ˆ@troyhuntï¼‰2020å¹´4æœˆ9æ—¥</p><p>  Now firstly, the Nerf gun wall is freakin&#39; epic! But secondly, that Arlec LED strip Ari is attaching to the back of the wall runs on  the Grid Connect ecosystem which includes support for:</p><p>  ç°åœ¨é¦–å…ˆï¼ŒNerfçš„æªå£æ˜¯å²è¯—èˆ¬çš„å²è¯—ï¼ä½†æ˜¯ç¬¬äºŒï¼ŒArlec LEDç¯æ¡Ariå›ºå®šåœ¨å¢™çš„èƒŒé¢æ˜¯åœ¨Grid Connectç”Ÿæ€ç³»ç»Ÿä¸Šè¿è¡Œçš„ï¼Œè¯¥ç³»ç»ŸåŒ…æ‹¬å¯¹ä»¥ä¸‹å†…å®¹çš„æ”¯æŒï¼š</p><p>  Google and Amazon. That is all. No HomeKit. In fact, HomeKit was often the odd one out when I looked at IoT products and I can imagine someone explaining it away as Apple demanding things be done the Apple way or the highway hence the lack of compatible devices. And this wasn&#39;t a typo on the Grid Connect website:</p><p>  è°·æ­Œå’Œäºšé©¬é€Šã€‚å°±è¿™äº›ã€‚æ²¡æœ‰HomeKitã€‚å®é™…ä¸Šï¼Œå½“æˆ‘æŸ¥çœ‹ç‰©è”ç½‘äº§å“æ—¶ï¼ŒHomeKitå¸¸å¸¸æ˜¯ä¸€ä¸ªå¥‡æ€ªçš„ä¾‹å­ï¼Œæˆ‘å¯ä»¥æƒ³è±¡æœ‰äººåœ¨è§£é‡Šå®ƒï¼Œå› ä¸ºAppleè¦æ±‚ä»¥Appleæ–¹å¼æˆ–é«˜é€Ÿå…¬è·¯æ¥å®Œæˆäº‹æƒ…ï¼Œå› æ­¤ç¼ºä¹å…¼å®¹çš„è®¾å¤‡ã€‚è¿™å¹¶ä¸æ˜¯Grid Connectç½‘ç«™ä¸Šçš„é”™å­—ï¼š</p><p>  It&#39;s not just the big players either; you&#39;ll find all sorts of lesser-known brands wanting to be the hub of your IoT world. During this whole exercise, I decided I needed to replace the receiver in my home entertainment setup as it wasn&#39;t powerful enough to drive the speakers I have. So, I&#39;m in at the home theatre shop and I see this beautifully made universal remote control:</p><p>  ä¹Ÿä¸åªæ˜¯å¤§å…¬å¸ï¼›æ‚¨ä¼šå‘ç°å„ç§ä¸å¤ªçŸ¥åçš„å“ç‰Œæƒ³è¦æˆä¸ºæ‚¨çš„ç‰©è”ç½‘ä¸–ç•Œçš„æ¢çº½ã€‚åœ¨æ•´ä¸ªç»ƒä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘å†³å®šéœ€è¦åœ¨å®¶åº­å¨±ä¹è®¾å¤‡ä¸­æ›´æ¢æ¥æ”¶å™¨ï¼Œå› ä¸ºå®ƒçš„åŠŸèƒ½ä¸è¶³ä»¥é©±åŠ¨æˆ‘æ‹¥æœ‰çš„æ‰¬å£°å™¨ã€‚å› æ­¤ï¼Œæˆ‘åœ¨å®¶åº­å½±é™¢å•†åº—é‡Œï¼Œçœ‹åˆ°äº†åˆ¶ä½œç²¾ç¾çš„é€šç”¨é¥æ§å™¨ï¼š</p><p>  This lovely, brushed aluminium unit is made by  Control4 and guess what? They can be the hub of your smart home! Oh - but it&#39;s not self-configurable and you need a licensed installer to set it all up for you ğŸ¤¦â€â™‚ï¸</p><p>  è¿™ä¸ªå¯çˆ±çš„é“åˆ¶æ‹‰ä¸å•å…ƒç”±Control4åˆ¶æˆï¼Œæ‚¨çŒœæ€ä¹ˆç€ï¼Ÿå®ƒä»¬å¯ä»¥æˆä¸ºæ‚¨çš„æ™ºèƒ½å®¶å±…çš„æ¢çº½ï¼å“¦-ä½†æ˜¯å®ƒä¸æ˜¯å¯è‡ªè¡Œé…ç½®çš„ï¼Œæ‚¨éœ€è¦è·å¾—è®¸å¯çš„å®‰è£…ç¨‹åºæ‰èƒ½ä¸ºæ‚¨è¿›è¡Œå…¨éƒ¨è®¾ç½®ğŸ¤¦â€â™‚ï¸</p><p>     But it&#39;s also slightly disingenuous because whilst on the surface it may look like yet another solution to the same problem, it&#39;s philosophically different in several key ways:</p><p>ä½†è¿™ä¹Ÿæœ‰ç‚¹ä¸å±‘ä¸€é¡¾ï¼Œå› ä¸ºè™½ç„¶ä»è¡¨é¢ä¸Šçœ‹ï¼Œå®ƒçœ‹èµ·æ¥åƒæ˜¯å¯¹åŒä¸€é—®é¢˜çš„å¦ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯åœ¨å‡ ä¸ªå…³é”®æ–¹é¢ï¼Œå®ƒåœ¨å“²å­¦ä¸Šæ˜¯ä¸åŒçš„ï¼š</p><p> Open source home automation that puts local control and privacy first. Powered by a worldwide community of tinkerers and DIY enthusiasts. Perfect to run on a Raspberry Pi or a local server.</p><p> å¼€æºå®¶åº­è‡ªåŠ¨åŒ–ï¼Œå°†æœ¬åœ°æ§åˆ¶å’Œéšç§æ”¾åœ¨é¦–ä½ã€‚ç”±ä¸–ç•Œå„åœ°çš„ä¿®è¡¥åŒ å’ŒDIYçˆ±å¥½è€…æä¾›æ”¯æŒã€‚éå¸¸é€‚åˆåœ¨Raspberry Piæˆ–æœ¬åœ°æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚</p><p> The Apple / Google / Amazon solutions are all proprietary and tied very closely to the respective tech behemoths&#39; commercial offerings. They want people on their platforms, using their clouds and buying their products. HA, on the other hand, doesn&#39;t care who made what or which devices you have or whose clouds you&#39;re on, it just wants to tie it all together in a meaningful way. It&#39;s an extremely active open source project typically (but not exclusively) run on a Raspberry Pi with a goal of integrating all of your things and keeping them self-contained within your own home rather than being dependent on public cloud services. It has amazing community support and a  very devoted fan base which has helped catapult it into  one of the top open source projects on GitHub. However...</p><p> Apple / Google / Amazonè§£å†³æ–¹æ¡ˆå‡ä¸ºä¸“æœ‰è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”ä¸å„è‡ªçš„ç§‘æŠ€å·¨å¤´çš„å•†ä¸šäº§å“ç´§å¯†ç›¸å…³ã€‚ä»–ä»¬å¸Œæœ›äººä»¬åœ¨å¹³å°ä¸Šä½¿ç”¨äº‘è®¡ç®—å¹¶è´­ä¹°äº§å“ã€‚å¦ä¸€æ–¹é¢ï¼ŒHAä¸åœ¨ä¹è°åˆ¶é€ äº†ä»€ä¹ˆè®¾å¤‡ï¼Œæ‹¥æœ‰å“ªäº›è®¾å¤‡æˆ–æ‰€å¤„çš„äº‘ï¼Œå®ƒåªæ˜¯æƒ³ä»¥ä¸€ç§æœ‰æ„ä¹‰çš„æ–¹å¼å°†å®ƒä»¬æ†ç»‘åœ¨ä¸€èµ·ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æ´»è·ƒçš„å¼€æºé¡¹ç›®ï¼Œé€šå¸¸ï¼ˆä½†ä¸æ˜¯æ’ä»–æ€§åœ°ï¼‰åœ¨Raspberry Piä¸Šè¿è¡Œï¼Œç›®çš„æ˜¯é›†æˆæ‚¨çš„æ‰€æœ‰å†…å®¹å¹¶å°†å…¶ä¿æŒåœ¨è‡ªå·±å®¶é‡Œï¼Œè€Œä¸ä¾èµ–äºå…¬å…±äº‘æœåŠ¡ã€‚å®ƒå…·æœ‰å‡ºè‰²çš„ç¤¾åŒºæ”¯æŒå’Œå¿ å®çš„æ”¯æŒè€…ç¾¤ä½“ï¼Œè¿™æœ‰åŠ©äºå°†å…¶æ¨å‘GitHubä¸Šçš„é¡¶çº§å¼€æºé¡¹ç›®ä¹‹ä¸€ã€‚ç„¶è€Œ...</p><p> The learning curve is steep, it has a bunch of rough edges (it&#39;s still not reached a v1 as of the time of writing), you end up living in  YAML and by any reasonable measure, it&#39;s only usable by geeks who are happy living in a world unfamiliar to most mere mortals. Fortunately, that includes me and despite the &#34;maker&#34; nature of the whole thing, I&#39;m  massively impressed with HA and nothing else I&#39;ve seen along my IoT journey comes even close to comparing. If you&#39;re going to do IoT in any meaningful way, you start with HA.</p><p> å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œè¾¹ç¼˜ç²—ç³™ï¼ˆæˆªè‡³æ’°å†™æœ¬æ–‡æ—¶å°šæœªè¾¾åˆ°v1ï¼‰ï¼Œæ‚¨æœ€ç»ˆç”Ÿæ´»åœ¨YAMLä¸­ï¼Œå¹¶ä¸”ä»¥ä»»ä½•åˆç†çš„æ–¹å¼è¡¡é‡ï¼Œä»…å¯¹é‚£äº›ä¹äºå­¦ä¹ çš„æå®¢æœ‰ç”¨å¤§å¤šæ•°å‡¡äººéƒ½ä¸ç†Ÿæ‚‰çš„ä¸–ç•Œã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™åŒ…æ‹¬æˆ‘åœ¨å†…ï¼Œå°½ç®¡æ•´ä»¶äº‹å…·æœ‰â€œåˆ¶é€ è€…â€çš„æ€§è´¨ï¼Œä½†æ˜¯HAç»™æˆ‘ç•™ä¸‹äº†æ·±åˆ»çš„å°è±¡ï¼Œè€Œæˆ‘åœ¨ç‰©è”ç½‘ä¹‹æ—…ä¸­æ‰€è§åˆ°çš„å…¶ä»–ä¸œè¥¿ç”šè‡³éƒ½æ— æ³•ä¸ä¹‹ç›¸æ¯”ã€‚å¦‚æœæ‚¨æ‰“ç®—ä»¥ä»»ä½•æœ‰æ„ä¹‰çš„æ–¹å¼è¿›è¡Œç‰©è”ç½‘ï¼Œé‚£ä¹ˆæ‚¨å°†ä»HAå¼€å§‹ã€‚</p><p> The thing is though, you need to be ready to get your hands  really dirty:</p><p> äº‹å®æ˜¯ï¼Œæ‚¨éœ€è¦å‡†å¤‡å¥½ä½¿è‡ªå·±çš„æ‰‹çœŸæ­£å˜è„ï¼š</p><p> Is phoscon running in a docker container? If so you&#39;ll likely need to use vnc to connect to the container to get to the phoscon UI to remove the device from there. Then remove the integration from HA, then readd it. It might need a tidy up in HA config files if it gets orphaned.</p><p> phosconæ˜¯å¦åœ¨dockerå®¹å™¨ä¸­è¿è¡Œï¼Ÿå¦‚æœæ˜¯è¿™æ ·ï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨vncè¿æ¥åˆ°å®¹å™¨ï¼Œæ‰èƒ½è¿›å…¥phoscon UIä»é‚£é‡Œåˆ é™¤è®¾å¤‡ã€‚ç„¶åä»HAä¸­åˆ é™¤é›†æˆï¼Œç„¶åé˜…è¯»ã€‚å¦‚æœå®ƒæˆä¸ºå­¤ç«‹å¯¹è±¡ï¼Œåˆ™å¯èƒ½éœ€è¦æ•´ç†HAé…ç½®æ–‡ä»¶ã€‚</p><p>â€” Phil Ermiya (@PhilErmiya)  June 18, 2020</p><p>-è²å°”Â·åŸƒå°”ç±³äºšï¼ˆ@PhilErmiyaï¼‰2020å¹´6æœˆ18æ—¥</p><p>  I captured this tweet and dropped it into the draft blog post as I was lamenting just how damn hard it was to make simple things work the way I wanted them to. But I don&#39;t want to get anywhere near that level of detail in this blog series as it&#39;ll just scare people off, let me instead focus on the basics and provide enough background to get people heading in the right direction, starting with the fundamental principles of what makes HA great.</p><p>æˆ‘æ•æ‰åˆ°äº†è¿™æ¡æ¨æ–‡ï¼Œå¹¶æŠŠå®ƒæ”¾åˆ°äº†è‰ç¨¿åšå®¢ä¸­ï¼Œå½“æ—¶æˆ‘åœ¨å“€å¹è®©ç®€å•çš„äº‹æƒ…ä»¥æˆ‘å¸Œæœ›çš„æ–¹å¼å·¥ä½œæ˜¯å¤šä¹ˆçš„è¾›è‹¦ã€‚ä½†æˆ‘ä¸æƒ³åœ¨æœ¬åšå®¢ç³»åˆ—ä¸­è·å¾—å¦‚æ­¤è¯¦ç»†çš„ä¿¡æ¯ï¼Œå› ä¸ºè¿™åªä¼šå“peopleäººï¼Œè€Œè®©æˆ‘ä¸“æ³¨äºåŸºç¡€çŸ¥è¯†ï¼Œå¹¶æä¾›è¶³å¤Ÿçš„èƒŒæ™¯ï¼Œä½¿äººä»¬ä»æ­£ç¡®çš„æ–¹å‘å‰è¿›ã€‚åŒ»ç®¡å±€å‡ºè‰²çš„åŸºæœ¬åŸåˆ™ã€‚</p><p>   HA integrates with other devices and services which it can both use as triggers and perform actions on.</p><p>   HAä¸å…¶ä»–è®¾å¤‡å’ŒæœåŠ¡é›†æˆï¼Œå¯ä»¥ç”¨ä½œè§¦å‘å™¨å¹¶å¯¹å…¶æ‰§è¡Œæ“ä½œã€‚</p><p> For example, just to jump straight to the conclusion for a moment, I now have a bunch of little motion sensors around the house that can turn lights on:</p><p> ä¾‹å¦‚ï¼Œåªæ˜¯æƒ³é©¬ä¸Šå¾—å‡ºç»“è®ºï¼Œæˆ‘ç°åœ¨æˆ¿å­å‘¨å›´æœ‰ä¸€å †å°è¿åŠ¨ä¼ æ„Ÿå™¨ï¼Œå®ƒä»¬å¯ä»¥æ‰“å¼€ç¯ï¼š</p><p> Now entering the next phase of my IoT buildout with Xiaomi Aqara motion sensors spread around the house to trigger lights on or off based on movement. These are Zigbee based with a 2 year battery life and include light sensors as well. Cool ğŸ˜  pic.twitter.com/XLIPyNz5Ej</p><p> ç°åœ¨ä½¿ç”¨å°ç±³Aqaraè¿åŠ¨ä¼ æ„Ÿå™¨è¿›å…¥æˆ‘çš„ç‰©è”ç½‘æ‰©å±•çš„ä¸‹ä¸€é˜¶æ®µï¼Œè¿åŠ¨ä¼ æ„Ÿå™¨éå¸ƒæˆ¿å±‹ï¼Œæ ¹æ®ç§»åŠ¨æƒ…å†µè§¦å‘å¼€ç¯æˆ–å…³ç¯ã€‚è¿™äº›éƒ½æ˜¯åŸºäºZigbeeçš„ï¼Œå…·æœ‰2å¹´çš„ç”µæ± å¯¿å‘½ï¼Œå¹¶ä¸”è¿˜åŒ…æ‹¬å…‰ä¼ æ„Ÿå™¨ã€‚é…·ğŸ˜pic.twitter.com/XLIPyNz5Ej</p><p>â€” Troy Hunt (@troyhunt)  October 6, 2020</p><p>-ç‰¹æ´›ä¼ŠÂ·äº¨ç‰¹ï¼ˆ@troyhuntï¼‰2020å¹´10æœˆ6æ—¥</p><p>  This is achieved firstly, by using an integration that can communicate with the sensors and in this case, it&#39;s  deCONZ which is made by Phoscon:</p><p>  é¦–å…ˆï¼Œè¿™æ˜¯é€šè¿‡ä½¿ç”¨å¯ä»¥ä¸ä¼ æ„Ÿå™¨é€šä¿¡çš„é›†æˆå®ç°çš„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ç”±Phosconåˆ¶é€ çš„deCONZï¼š</p><p>  I&#39;ve left other integrations in the screen cap above to give you a sense of some of the other things HA can communicate with: Alexa, WeMo switches, Elgato key lights and many other connected devices in my house. At the time of writing, there are 1,713 different integrations including...  a Have I Been Pwned Integration!</p><p>  æˆ‘åœ¨ä¸Šé¢çš„å±å¹•æˆªå›¾ä¸­ä¿ç•™äº†å…¶ä»–é›†æˆï¼Œä»¥ä½¿æ‚¨äº†è§£HAå¯ä»¥ä¸ä¹‹é€šä¿¡çš„å…¶ä»–ä¸€äº›åŠŸèƒ½ï¼šAlexaï¼ŒWeMoå¼€å…³ï¼ŒElgatoæŒ‰é”®ç¯å’Œæˆ‘å®¶ä¸­çš„è®¸å¤šå…¶ä»–è¿æ¥çš„è®¾å¤‡ã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œæœ‰1,713ç§ä¸åŒçš„é›†æˆï¼ŒåŒ…æ‹¬... aæˆ‘æ˜¯å¦æ‹¥æœ‰é›†æˆï¼</p><p>  The deCONZ integration enables communication with Zigbee devices (more on that in part 2) and per the screen cap above, I presently have 35 of those in my house. One of them is the first motion sensor in the earlier tweet which, in HA, looks like this:</p><p>deCONZé›†æˆå…è®¸ä¸Zigbeeè®¾å¤‡è¿›è¡Œé€šä¿¡ï¼ˆç¬¬2éƒ¨åˆ†ä¸­çš„æ›´å¤šå†…å®¹ï¼‰ï¼Œå¹¶ä¸”æŒ‰ç…§ä¸Šé¢çš„å±å¹•æˆªå›¾ï¼Œæˆ‘å®¶ç›®å‰æœ‰35ä¸ªã€‚å…¶ä¸­ä¸€ä¸ªæ˜¯æ—©æœŸæ¨æ–‡ä¸­çš„ç¬¬ä¸€ä¸ªè¿åŠ¨ä¼ æ„Ÿå™¨ï¼Œåœ¨HAä¸­ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p>  The motion sensor is a device I placed at the bottom of the stairs in my house which spans 3 floors. I have another motion sensor halfway along near the kids&#39; room and another again at the top near our master bedroom. These motion sensor devices each have 3 different entities:</p><p>  è¿åŠ¨ä¼ æ„Ÿå™¨æ˜¯æˆ‘æ”¾ç½®åœ¨æˆ‘æˆ¿å­æ¥¼æ¢¯åº•éƒ¨çš„è®¾å¤‡ï¼Œè¯¥è®¾å¤‡è·¨è¶Š3å±‚æ¥¼ã€‚æˆ‘åœ¨å­©å­æˆ¿é—´é™„è¿‘æœ‰ä¸€ä¸ªè¿åŠ¨ä¼ æ„Ÿå™¨ï¼Œåœ¨æˆ‘ä»¬ä¸»å§å®¤é™„è¿‘çš„é¡¶éƒ¨æœ‰å¦ä¸€ä¸ªè¿åŠ¨ä¼ æ„Ÿå™¨ã€‚è¿™äº›è¿åŠ¨ä¼ æ„Ÿå™¨è®¾å¤‡å„è‡ªå…·æœ‰3ä¸ªä¸åŒçš„å®ä½“ï¼š</p><p>  This nomenclature threw me a bit at first but it makes sense: one physical device you can hold in your hand may measure many different things and each one of those things is considered to be an entity (entities aren&#39;t just about measurement but let&#39;s use that as a simplistic example for the moment). I have little temperature sensors in each room and each one of those devices can measure humidity, pressure, temperature and has a battery state:</p><p>  è¿™ç§å‘½åæ³•èµ·åˆç»™æˆ‘å¸¦æ¥äº†ä¸€ç‚¹éº»çƒ¦ï¼Œä½†å®ƒæ˜¯æœ‰é“ç†çš„ï¼šæ‚¨å¯ä»¥æ‹¿åœ¨æ‰‹ä¸­çš„ä¸€ä¸ªç‰©ç†è®¾å¤‡å¯èƒ½ä¼šæµ‹é‡è®¸å¤šä¸åŒçš„äº‹ç‰©ï¼Œå¹¶ä¸”è¿™äº›äº‹ç‰©ä¸­çš„æ¯ä¸€ä¸ªéƒ½è¢«è§†ä¸ºä¸€ä¸ªå®ä½“ï¼ˆå®ä½“ä¸ä»…ä»…æ˜¯æµ‹é‡ï¼Œè€Œæ˜¯è®©æˆ‘ä»¬ä½¿ç”¨ä½œä¸ºç›®å‰çš„ç®€åŒ–ç¤ºä¾‹ï¼‰ã€‚æˆ‘åœ¨æ¯ä¸ªæˆ¿é—´ä¸­éƒ½æ²¡æœ‰æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œå¹¶ä¸”è¿™äº›è®¾å¤‡ä¸­çš„æ¯ä¸€ä¸ªéƒ½å¯ä»¥æµ‹é‡æ¹¿åº¦ï¼Œå‹åŠ›ï¼Œæ¸©åº¦å¹¶å…·æœ‰ç”µæ± çŠ¶æ€ï¼š</p><p>  Yet another device I now have all over the house is an IoT relay called a Shelly, two of which you can see in the tweet below (they&#39;re the little blue units amongst all the wires):</p><p>  æˆ‘ç°åœ¨åˆ°å¤„éƒ½æ˜¯çš„å¦ä¸€ç§è®¾å¤‡æ˜¯ç§°ä¸ºShellyçš„IoTä¸­ç»§ï¼Œæ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„æ¨æ–‡ä¸­çœ‹åˆ°å…¶ä¸­çš„ä¸¤ä¸ªï¼ˆå®ƒä»¬æ˜¯æ‰€æœ‰ç”µçº¿ä¸­çš„è“è‰²å°å•å…ƒï¼‰ï¼š</p><p>   Yes, this is pretty normal Aussie wall socket wiring. No, we don&#39;t use gang boxes. Yes, I&#39;m conscious you do things differently in other parts of the world. Moving on, each Shelly has a single entity which is simply a power switch:</p><p>   æ˜¯çš„ï¼Œè¿™æ˜¯æ¾³å¤§åˆ©äºšå¢™ä¸Šæ’åº§çš„æ­£å¸¸æ¥çº¿ã€‚ä¸ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨å¸®æ´¾ç›’ã€‚æ˜¯çš„ï¼Œæˆ‘çŸ¥é“æ‚¨åœ¨ä¸–ç•Œå…¶ä»–åœ°æ–¹çš„åšæ³•æœ‰æ‰€ä¸åŒã€‚æ¥ä¸‹æ¥ï¼Œæ¯ä¸ªShellyéƒ½æœ‰ä¸€ä¸ªå®ä½“ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç”µæºå¼€å…³ï¼š</p><p>  So, now we have all the mechanics required to tie together automations and as you can see in the screen cap above (and in the earlier one that shows the stairs motion sensor), I have 2 automations using these devices. I&#39;m not going to go anywhere near the YAML involved in this blog series, let&#39;s instead focus on the logic:</p><p>  å› æ­¤ï¼Œç°åœ¨æˆ‘ä»¬å…·å¤‡äº†å°†è‡ªåŠ¨åŒ–ç»“åˆåœ¨ä¸€èµ·çš„æ‰€æœ‰æœºåˆ¶ï¼Œæ­£å¦‚æ‚¨åœ¨ä¸Šé¢çš„å±å¹•æˆªå›¾ä¸­ï¼ˆä»¥åŠåœ¨è¾ƒæ—©çš„æ˜¾ç¤ºæ¥¼æ¢¯è¿åŠ¨ä¼ æ„Ÿå™¨çš„å±å¹•æˆªå›¾ä¸­å¯ä»¥çœ‹åˆ°çš„ï¼‰æ‰€çœ‹åˆ°çš„é‚£æ ·ï¼Œæˆ‘æœ‰ä¸¤ç§ä½¿ç”¨è¿™äº›è®¾å¤‡çš„è‡ªåŠ¨åŒ–ã€‚åœ¨æœ¬ç³»åˆ—åšå®¢æ‰€æ¶‰åŠçš„YAMLæ–¹é¢ï¼Œæˆ‘å°†ä¸åšä»»ä½•ä»‹ç»ï¼Œè€Œæ˜¯å°†é‡ç‚¹æ”¾åœ¨é€»è¾‘ä¸Šï¼š</p><p> If motion is detected at the bottom, middle or top of the stairs and the light level down the bottom is beneath 200 lumens, turn the Shelly on the light switch on</p><p> å¦‚æœåœ¨æ¥¼æ¢¯çš„åº•éƒ¨ï¼Œä¸­é—´æˆ–é¡¶éƒ¨æ£€æµ‹åˆ°è¿åŠ¨ï¼Œå¹¶ä¸”åº•éƒ¨çš„å…‰çº¿æ°´å¹³ä½äº200æµæ˜ï¼Œè¯·æ‰“å¼€ç¯å…‰å¼€å…³ä¸Šçš„Shelly</p><p> If all 3 motion sensors haven&#39;t detected any motion for the last 5 minutes, turn the Shelly on the light switch off</p><p>å¦‚æœåœ¨è¿‡å»çš„5åˆ†é’Ÿå†…æ‰€æœ‰3ä¸ªè¿åŠ¨ä¼ æ„Ÿå™¨å‡æœªæ£€æµ‹åˆ°ä»»ä½•è¿åŠ¨ï¼Œè¯·å…³é—­ç”µç¯ä¸Šçš„é›ªè‰</p><p>  But that automation just turns on a single light, what if I wanted to turn on more lights? Or play music? Or set other device statuses, all at the same time? This is where we get to &#34;scenes&#34; which allow you to define multiple pre-set states that can all be switched on in one go. For example, Ari wanted a fast way to get all his lights back to the same state he referred to as &#34;cool&#34;, so we made a scene that turned on a bunch of lights and set the nerf gun wall to red:</p><p>  ä½†æ˜¯é‚£ç§è‡ªåŠ¨åŒ–åªæ˜¯æ‰“å¼€ä¸€ä¸ªç¯ï¼Œå¦‚æœæˆ‘æƒ³æ‰“å¼€æ›´å¤šçš„ç¯æ€ä¹ˆåŠï¼Ÿè¿˜æ˜¯æ’­æ”¾éŸ³ä¹ï¼Ÿè¿˜æ˜¯åŒæ—¶è®¾ç½®å…¶ä»–è®¾å¤‡çŠ¶æ€ï¼Ÿè¿™æ˜¯æˆ‘ä»¬è¿›å…¥â€œåœºæ™¯â€çš„åœ°æ–¹ï¼Œå®ƒå…è®¸æ‚¨å®šä¹‰å¤šä¸ªé¢„è®¾çŠ¶æ€ï¼Œå¯ä»¥ä¸€æ¬¡æ‰“å¼€æ‰€æœ‰çŠ¶æ€ã€‚ä¾‹å¦‚ï¼ŒAriæƒ³è¦ä¸€ç§å¿«é€Ÿçš„æ–¹æ³•æ¥å°†ä»–çš„æ‰€æœ‰ç¯å…‰æ¢å¤åˆ°ä»–æ‰€è°“çš„â€œé…·â€çŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬åˆ¶ä½œäº†ä¸€ä¸ªåœºæ™¯ï¼Œè¯¥åœºæ™¯æ‰“å¼€äº†ä¸€å †ç¯å…‰å¹¶å°†nerfæªå£è®¾ç½®ä¸ºçº¢è‰²ï¼š</p><p>  That scene can be trigged by various events, including automations. We&#39;ll come back and look at that again shortly but for now, let&#39;s talk about how all those lights work in the first place.</p><p>  å¯ä»¥é€šè¿‡å„ç§äº‹ä»¶ï¼ˆåŒ…æ‹¬è‡ªåŠ¨åŒ–ï¼‰æ¥è§¦å‘è¯¥åœºæ™¯ã€‚æˆ‘ä»¬å°†å¾ˆå¿«å†æ¥çœ‹çœ‹ï¼Œä½†æ˜¯ç°åœ¨ï¼Œè®©æˆ‘ä»¬å…ˆè°ˆè°ˆæ‰€æœ‰è¿™äº›ç¯æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p>  Ever get an odd sense of dÃ©jÃ  vu when you see a product under a certain brand and you could  swear you&#39;d seen it somewhere before, but just different? I had that recently when I drove a friend&#39;s Tesla Model X and the indicator stalk felt just like the one in my Mercedes. Turns out that because  it  is just like the one in my Mercedes with the US brand using a bunch of parts from the Germans.</p><p>  å½“æ‚¨çœ‹åˆ°æŸä¸ªå“ç‰Œä¸‹çš„äº§å“æ—¶ï¼Œæ›¾ç»å‘èª“ä¼šåœ¨ä»¥å‰çš„æŸä¸ªåœ°æ–¹çœ‹åˆ°å®ƒæ—¶ï¼Œä¼šæ„Ÿåˆ°å¥‡æ€ªå—ï¼Ÿæœ€è¿‘ï¼Œå½“æˆ‘å¼€è½¦é©¾é©¶æœ‹å‹çš„ç‰¹æ–¯æ‹‰Model Xæ—¶ï¼Œæˆ‘æœ‰é‚£ç§æ„Ÿè§‰ï¼ŒæŒ‡ç¤ºå™¨æ†çš„æ„Ÿè§‰å°±åƒæˆ‘çš„æ¢…èµ›å¾·æ–¯è½¦ä¸Šçš„ä¸€æ ·ã€‚äº‹å®è¯æ˜ï¼Œå› ä¸ºå®ƒå°±åƒæˆ‘çš„æ¢…èµ›å¾·æ–¯è½¿è½¦ä¸­çš„ç¾å›½å“ç‰Œä¸€æ ·ï¼Œä½¿ç”¨äº†è®¸å¤šå¾·å›½äººçš„é›¶ä»¶ã€‚</p><p>  Anyone know what&#39;s involved in making Grid Connect lights play nice with  @home_assistant? These are the units, got a heap of them in the kids&#39; rooms and they already integrate with Alexa and Google Assistant:  https://t.co/xJKdtzJKED</p><p>  ä»»ä½•äººéƒ½çŸ¥é“åœ¨ä½¿Grid Connectç¯å…‰ä¸@home_assistanté…åˆä½¿ç”¨æ—¶ä¼šæ¶‰åŠä»€ä¹ˆï¼Ÿè¿™äº›æ˜¯å•å…ƒï¼Œåœ¨å­©å­ä»¬çš„æˆ¿é—´é‡Œå †äº†å¾ˆå¤šï¼Œå®ƒä»¬å·²ç»ä¸Alexaå’ŒGoogleåŠ©æ‰‹é›†æˆäº†ï¼šhttps://t.co/xJKdtzJKED</p><p>â€” Troy Hunt (@troyhunt)  July 19, 2020</p><p>-ç‰¹æ´›ä¼ŠÂ·äº¨ç‰¹ï¼ˆ@troyhuntï¼‰2020å¹´7æœˆ19æ—¥</p><p>  Earlier on I mentioned I&#39;d bought the  Grid Connect lights (which are manufactured by  Arlec) to put behind Ari&#39;s Nerf Gun wall. They were cheap (at least compared to something like Philips Hue), RGB (not just different shades of white) and could talk over Wi-Fi (not just controllable via a remote). The Grid Connect app worked fine but as I also mentioned earlier, there&#39;s no way it&#39;d work with Apple&#39;s HomeKit and based on feedback to the tweet above, nor were there any integrations with HA. But there was another option:</p><p>  æ—©äº›æ—¶å€™ï¼Œæˆ‘æåˆ°æˆ‘è´­ä¹°äº†Grid Connectç¯ï¼ˆç”±Arlecåˆ¶é€ ï¼‰æ”¾åœ¨Ariçš„Nerf Gunå¢™åé¢ã€‚å®ƒä»¬å¾ˆä¾¿å®œï¼ˆè‡³å°‘ä¸é£åˆ©æµ¦Hueä¹‹ç±»çš„ä¸œè¥¿ç›¸æ¯”ï¼‰ï¼ŒRGBï¼ˆä¸ä»…æœ‰ä¸åŒçš„ç™½è‰²é˜´å½±ï¼‰è€Œä¸”å¯ä»¥é€šè¿‡Wi-Fié€šè¯ï¼ˆä¸ä»…å¯ä»¥é€šè¿‡é¥æ§å™¨æ§åˆ¶ï¼‰ã€‚ Grid Connectåº”ç”¨ç¨‹åºè¿è¡Œè‰¯å¥½ï¼Œä½†æ˜¯æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„é‚£æ ·ï¼Œå®ƒæ— æ³•ä¸Appleçš„HomeKitä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”åŸºäºå¯¹ä¸Šè¿°æ¨æ–‡çš„åé¦ˆï¼Œä¹Ÿæ²¡æœ‰ä¸HAé›†æˆã€‚ä½†æ˜¯è¿˜æœ‰å¦ä¸€ç§é€‰æ‹©ï¼š</p><p> These are based on an off the shelf Tuya ESP8266 module. Either use the Smart Life or Tuya apps instead of the Grid Connect one - HA has an integration to their cloud based web service. Or flash them with different firmware - Tasmota and ESPHome are the main options</p><p>è¿™äº›åŸºäºç°æˆçš„Tuya ESP8266æ¨¡å—ã€‚ä½¿ç”¨Smart Lifeæˆ–Tuyaåº”ç”¨ç¨‹åºè€Œä¸æ˜¯Grid Connect one-HAå·²å°†å…¶åŸºäºäº‘çš„WebæœåŠ¡é›†æˆåœ¨ä¸€èµ·ã€‚æˆ–ä½¿ç”¨å…¶ä»–å›ºä»¶åˆ·æ–°å®ƒä»¬-Tasmotaå’ŒESPHomeæ˜¯ä¸»è¦é€‰é¡¹</p><p>â€” Chris Ford (@chrisfordoz)  July 19, 2020</p><p>-å…‹é‡Œæ–¯Â·ç¦ç‰¹ï¼ˆ@chrisfordozï¼‰2020å¹´7æœˆ19æ—¥</p><p>  Ok, that&#39;s actually several different options but let&#39;s just focus on Tuya first because that&#39;s the easiest path.  Tuya is &#34;the World&#39;s Leading IoT platform&#34; (yay, another platform ğŸ¤¦â€â™‚ï¸) and per the above tweet, they ship products that run  a ESP8266 chip which is a pretty common piece of kit. Consequently, I could pair that Grid Connect light strip with the Tuya app which... then says Arlec!</p><p>  å¥½çš„ï¼Œå®é™…ä¸Šè¿™æ˜¯å‡ ç§ä¸åŒçš„é€‰æ‹©ï¼Œä½†æ˜¯è®©æˆ‘ä»¬é¦–å…ˆå…³æ³¨Tuyaï¼Œå› ä¸ºè¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ã€‚ Tuyaæ˜¯â€œä¸–ç•Œé¢†å…ˆçš„IoTå¹³å°â€ï¼ˆæ˜¯çš„ï¼Œå¦ä¸€ä¸ªå¹³å°ğŸ¤¦â€â™‚ï¸ï¼‰ï¼Œæ ¹æ®ä¸Šè¿°æ¨æ–‡ï¼Œä»–ä»¬å‘è´§çš„äº§å“å‡è¿è¡ŒESP8266èŠ¯ç‰‡ï¼Œè¿™æ˜¯ä¸€å¥—éå¸¸å¸¸è§çš„å¥—ä»¶ã€‚å› æ­¤ï¼Œæˆ‘å¯ä»¥å°†Grid Connectç¯å¸¦ä¸Tuyaåº”ç”¨ç¨‹åºé…å¯¹ï¼Œç„¶åè¯´Arlecï¼</p><p>     Turns out these are also Tuya compatible so now, without directly buying a single Tuya product, I have a lot of products running in the Tuya app:</p><p>     äº‹å®è¯æ˜ï¼Œè¿™äº›äº§å“ä¹Ÿä¸Tuyaå…¼å®¹ï¼Œå› æ­¤ï¼Œç°åœ¨ï¼Œæ— éœ€ç›´æ¥è´­ä¹°å•ä¸ªTuyaäº§å“ï¼Œæˆ‘å°±å¯ä»¥åœ¨Tuyaåº”ç”¨ä¸­è¿è¡Œå¾ˆå¤šäº§å“ï¼š</p><p>  What that means is that it&#39;s dead easy to control things such as the colour and the brightness:</p><p>  è¿™æ„å‘³ç€å¾ˆéš¾æ§åˆ¶è¯¸å¦‚é¢œè‰²å’Œâ€‹â€‹äº®åº¦ä¹‹ç±»çš„ä¸œè¥¿ï¼š</p><p>  Now, let&#39;s bring it back to HA for a moment and the value proposition here is that per Chris&#39; earlier tweet, there&#39;s an integration that can bring these devices right into the same environment all my other IoT things are now in:</p><p>  ç°åœ¨ï¼Œè®©æˆ‘ä»¬æš‚æ—¶å›åˆ°HAï¼Œè¿™é‡Œçš„ä»·å€¼ä¸»å¼ æ˜¯æ ¹æ®Chrisçš„è¾ƒæ—©æ¨æ–‡ï¼Œæœ‰ä¸€ä¸ªé›†æˆå¯ä»¥å°†è¿™äº›è®¾å¤‡å¸¦å…¥ç›¸åŒçš„ç¯å¢ƒä¸­ï¼Œè€Œæˆ‘ç°åœ¨æ‰€æœ‰çš„å…¶ä»–IoTéƒ½åœ¨å…¶ä¸­ï¼š</p><p>  Ok, so far so good, now let&#39;s get to the twists in all this starting with how the same device looks in HA:</p><p>  å¥½çš„ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè®©æˆ‘ä»¬å¼€å§‹æ¢è®¨æ‰€æœ‰ç›¸åŒçš„äº‹ç‰©ï¼Œä»åŒä¸€ä¸ªè®¾å¤‡åœ¨HAä¸­çš„å¤–è§‚å¼€å§‹ï¼š</p><p>  That looks fine now, but when I first added the downlights, I had no colour control. Power and brightness, yes, but no colour. It took some researching to realise that  Tuya had killed colour control for a whole bunch of other people too and that the answer was to edit the customize.yaml file and for each Tuya entity, change the supported features to indicate colour control. I&#39;m not even going to get into the mechanics of that here because that&#39;s not really the point of this series, rather I want to highlight how I kept running into &#34;compatible but not completely compatible&#34; scenarios like this.</p><p>ç°åœ¨çœ‹èµ·æ¥è¿˜ä¸é”™ï¼Œä½†æ˜¯å½“æˆ‘ç¬¬ä¸€æ¬¡æ·»åŠ ç­’ç¯æ—¶ï¼Œæˆ‘æ²¡æœ‰è¿›è¡Œé¢œè‰²æ§åˆ¶ã€‚åŠŸç‡å’Œäº®åº¦ï¼Œæ˜¯çš„ï¼Œä½†æ²¡æœ‰é¢œè‰²ã€‚ç»è¿‡ä¸€äº›ç ”ç©¶åæ‰æ„è¯†åˆ°ï¼ŒTuyaä¹Ÿæ€æ­»äº†è®¸å¤šå…¶ä»–äººçš„è‰²å½©æ§åˆ¶ï¼Œç­”æ¡ˆæ˜¯ç¼–è¾‘edit.yamlæ–‡ä»¶ï¼Œå¹¶ä¸ºæ¯ä¸ªTuyaå®ä½“æ›´æ”¹æ”¯æŒçš„åŠŸèƒ½ä»¥æŒ‡ç¤ºè‰²å½©æ§åˆ¶ã€‚æˆ‘ä»€è‡³ä¸æ‰“ç®—åœ¨è¿™é‡Œè®¨è®ºå…¶æœºåˆ¶ï¼Œå› ä¸ºè¿™å¹¶ä¸æ˜¯æœ¬ç³»åˆ—çš„é‡ç‚¹ï¼Œè€Œæ˜¯æˆ‘æƒ³å¼ºè°ƒä¸€ä¸‹æˆ‘å¦‚ä½•ä¸€ç›´é‡åˆ°è¿™æ ·çš„â€œå…¼å®¹ä½†ä¸å®Œå…¨å…¼å®¹â€çš„åœºæ™¯ã€‚</p><p> So, now should I change the colour via the Tuya app or the HA website or app? In one way, it doesn&#39;t matter because the state is reflected the same in both (i.e. make it red in HA and the Tuya app shows it as red). In another way, I&#39;m now in this vicious cycle of having more and more apps for specific IoT devices that whilst integrated with HA, still require the OEM app to do a heap of stuff. For example, the  Nanoleaf app has a very specific set of controls:</p><p> å› æ­¤ï¼Œç°åœ¨åº”è¯¥é€šè¿‡Tuyaåº”ç”¨ç¨‹åºæˆ–HAç½‘ç«™æˆ–åº”ç”¨ç¨‹åºæ›´æ”¹é¢œè‰²å—ï¼Ÿä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œè¿™æ²¡å…³ç³»ï¼Œå› ä¸ºçŠ¶æ€åœ¨ä¸¤ä¸ªçŠ¶æ€ä¸­éƒ½å¾—åˆ°äº†ç›¸åŒçš„åæ˜ ï¼ˆå³åœ¨HAä¸­å°†å…¶è®¾ä¸ºçº¢è‰²ï¼Œè€ŒTuyaåº”ç”¨å°†è¯¥çŠ¶æ€æ˜¾ç¤ºä¸ºçº¢è‰²ï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ç°åœ¨æ­£å¤„äºè¿™ç§æ¶æ€§å¾ªç¯ä¸­ï¼Œè¶Šæ¥è¶Šå¤šçš„ç‰¹å®šç‰©è”ç½‘è®¾å¤‡çš„åº”ç”¨ç¨‹åºè™½ç„¶ä¸HAé›†æˆåœ¨ä¸€èµ·ï¼Œä½†ä»ç„¶éœ€è¦OEMåº”ç”¨ç¨‹åºåšå¤§é‡çš„å·¥ä½œã€‚ä¾‹å¦‚ï¼ŒNanoleafåº”ç”¨ç¨‹åºå…·æœ‰ä¸€ç»„éå¸¸å…·ä½“çš„æ§ä»¶ï¼š</p><p>  These allow predefined scenes to be played on the light panels (something that can also be triggered by HA), but also very specific configuration such as what colour to make individual panels. AFAIK, that capability isn&#39;t built into the HA integration and even if it was, it&#39;s unlikely the experience in setting it up would rival that of the dedicated app.</p><p>  è¿™äº›å…è®¸åœ¨ç¯å…‰é¢æ¿ä¸Šæ’­æ”¾é¢„å®šä¹‰çš„åœºæ™¯ï¼ˆä¹Ÿå¯ä»¥ç”±HAè§¦å‘ï¼‰ï¼Œä½†ä¹Ÿå¯ä»¥è¿›è¡Œéå¸¸ç‰¹æ®Šçš„é…ç½®ï¼Œä¾‹å¦‚åˆ¶ä½œå•ä¸ªé¢æ¿çš„é¢œè‰²ã€‚ AFAIKï¼Œè¯¥åŠŸèƒ½ä¸æ˜¯å†…ç½®äºHAé›†æˆä¸­çš„ï¼Œå³ä½¿å®ƒæ˜¯å†…ç½®çš„ï¼Œå®‰è£…å®ƒçš„ç»éªŒä¹Ÿä¸å¤ªå¯èƒ½ä¸ä¸“ç”¨åº”ç”¨ç¨‹åºç›¸åª²ç¾ã€‚</p><p> The bottom line is that you inevitably end up with multiple different interfaces into the same device be they native interfaces provided by the device manufacturer or those exposed via the HA integration. But it doesn&#39;t end there either, because you still need to get those devices back into the other IoT hubs. Here&#39;s why:</p><p> æœ€é‡è¦çš„æ˜¯ï¼Œæ‚¨ä¸å¯é¿å…åœ°è¦åœ¨åŒä¸€è®¾å¤‡ä¸­ä½¿ç”¨å¤šä¸ªä¸åŒçš„æ¥å£ï¼Œæ— è®ºå®ƒä»¬æ˜¯è®¾å¤‡åˆ¶é€ å•†æä¾›çš„æœ¬æœºæ¥å£è¿˜æ˜¯é€šè¿‡HAé›†æˆå…¬å¼€çš„æ¥å£ã€‚ä½†è¿™è¿˜ä¸æ­¢äºæ­¤ï¼Œå› ä¸ºæ‚¨ä»ç„¶éœ€è¦å°†è¿™äº›è®¾å¤‡æ”¾å›å…¶ä»–IoTä¸­å¿ƒã€‚åŸå› å¦‚ä¸‹ï¼š</p><p>  Earlier on, I lamented that everyone wants to be the hub of your IoT world and that fortunately, HA can play that role in the place of one of the large incumbent tech companies. Mostly. The gap comes when you start using products from one of those companies that expect to communicate with IoT devices via their own proprietary product. For example, both my kids have an Amazon Echo Dot in their room. I put these in there in part because they&#39;re fun learning devices they can easily ask questions of (they can also ask &#34;Alexa, who&#39;s Troy Hunt&#34; and get an answer or, as I learned last night with my daughter, they can ask &#34;Alexa, is Troy Hunt handsome&#34; and get a resounding &#34;He is handsome&#34; ğŸ¤£), and in part to control their IoT-enabled devices. The latter can be done without even needing HA as Tuya natively integrates with Alexa and exposes all the devices:</p><p>  æ—©äº›æ—¶å€™ï¼Œæˆ‘æ„Ÿå¹æ¯ä¸ªäººéƒ½å¸Œæœ›æˆä¸ºæ‚¨çš„ç‰©è”ç½‘ä¸–ç•Œçš„æ¢çº½ï¼Œè€Œä¸”å¹¸è¿çš„æ˜¯ï¼ŒHAå¯ä»¥ä»£æ›¿ç°æœ‰çš„å¤§å‹ç§‘æŠ€å…¬å¸ä¹‹ä¸€å‘æŒ¥è¿™ä¸€ä½œç”¨ã€‚å¤§å¤šã€‚å½“æ‚¨å¼€å§‹ä½¿ç”¨é‚£äº›å¸Œæœ›é€šè¿‡è‡ªå·±çš„ä¸“æœ‰äº§å“ä¸IoTè®¾å¤‡è¿›è¡Œé€šä¿¡çš„å…¬å¸ä¹‹ä¸€çš„äº§å“æ—¶ï¼Œå°±ä¼šå‡ºç°å·®è·ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä¸¤ä¸ªå­©å­çš„æˆ¿é—´é‡Œéƒ½æœ‰ä¸€ä¸ªAmazon Echo Dotã€‚æˆ‘ä¹‹æ‰€ä»¥æŠŠå®ƒä»¬æ”¾åœ¨è¿™é‡Œï¼Œéƒ¨åˆ†æ˜¯å› ä¸ºå®ƒä»¬æ˜¯æœ‰è¶£çš„å­¦ä¹ å·¥å…·ï¼Œå®ƒä»¬å¯ä»¥è½»æ¾åœ°æå‡ºä»¥ä¸‹é—®é¢˜ï¼ˆä»–ä»¬ä¹Ÿå¯ä»¥é—®â€œ Alexaï¼Œè°æ˜¯Troy Huntâ€å¹¶è·å¾—ç­”æ¡ˆï¼Œæˆ–è€…ï¼Œæ­£å¦‚æˆ‘æ˜¨æ™šä¸å¥³å„¿å­¦åˆ°çš„é‚£æ ·ï¼Œä»–ä»¬å¯ä»¥é—®â€œ Alexaï¼Œç‰¹æ´›ä¼ŠÂ·äº¨ç‰¹ï¼ˆTroy Huntï¼‰å¾ˆå¸…â€ï¼Œå“äº®çš„â€œä»–å¾ˆå¸…â€ï¼ˆğŸ¤£ï¼‰ï¼Œéƒ¨åˆ†æ˜¯æ§åˆ¶ä»–ä»¬çš„IoTè®¾å¤‡ã€‚åè€…ç”šè‡³ä¸éœ€è¦HAå³å¯å®Œæˆï¼Œå› ä¸ºTuyaä¸Alexaæœ¬æœºé›†æˆå¹¶å…¬å¼€äº†æ‰€æœ‰è®¾å¤‡ï¼š</p><p>  But there are other things in HA which we might still want to access via Alexa, for example the &#34;cool&#34; scene I set up for Ari earlier on. To do that we need to surface data from HA into Alexa which can be done with  the Amazon Alexa integration. Once configured, the scene appears and he can talk to the Echo Dot and ask Alexa to &#34;turn on cool in Ari&#39;s room&#34;:</p><p>  ä½†æ˜¯åœ¨HAä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä»æƒ³é€šè¿‡Alexaè®¿é—®å…¶ä»–å†…å®¹ï¼Œä¾‹å¦‚æˆ‘ä¹‹å‰ä¸ºAriè®¾ç½®çš„â€œé…·â€åœºæ™¯ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ®ä»HAæµ®åˆ°Alexaä¸­ï¼Œè¿™å¯ä»¥é€šè¿‡Amazon Alexaé›†æˆæ¥å®Œæˆã€‚é…ç½®å®Œæˆåï¼Œå°†å‡ºç°åœºæ™¯ï¼Œä»–å¯ä»¥ä¸Echo Dotå¯¹è¯å¹¶è¦æ±‚Alexaâ€œåœ¨Ariçš„æˆ¿é—´é‡Œå˜å‡‰â€ï¼š</p><p>  Just as there are reasons to surface HA into Alexa, there are also reasons to surface HA into Apple&#39;s HomeKit, a feat that can be achieved with  the HomeKit Bridge integration. (Note: there is also  Homebridge which is  a different beast altogether.) We can now surface all the same devices into Apple&#39;s ecosystem:</p><p>  å°±åƒæœ‰ç†ç”±å°†HAå¼•å…¥Alexaä¸€æ ·ï¼Œä¹Ÿæœ‰ç†ç”±å°†HAå¼•å…¥è‹¹æœçš„HomeKitä¸­ï¼Œè¿™ä¸€å£®ä¸¾å¯ä»¥é€šè¿‡HomeKit Bridgeé›†æˆæ¥å®ç°ã€‚ ï¼ˆæ³¨æ„ï¼šè¿˜æœ‰Homebridgeï¼Œå®ƒæ˜¯å®Œå…¨ä¸åŒçš„é‡å…½ã€‚ï¼‰ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰ç›¸åŒçš„è®¾å¤‡å¼•å…¥Appleçš„ç”Ÿæ€ç³»ç»Ÿï¼š</p><p>  Remember, that Nerf gun wall is running the Arlec LED strips that use Grid Connect surfaced through the Tuya app which all has no support for HomeKit yet here we are with control in HomeKit ğŸ˜</p><p>è¯·è®°ä½ï¼ŒNerfçš„æªç®¡æ­£åœ¨è¿è¡ŒArlec LEDç¯å¸¦ï¼Œè¯¥LEDç¯å¸¦ä½¿ç”¨é€šè¿‡Tuyaåº”ç”¨ç¨‹åºæµ®å‡ºæ°´é¢çš„Grid Connectï¼Œè€Œè¯¥åº”ç”¨ç¨‹åºéƒ½ä¸æ”¯æŒHomeKitï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡HomeKitè¿›è¡Œæ§åˆ¶ğŸ˜</p><p>   One of the primary reasons for doing this is that once you&#39;re in the Apple ecosystem you have Siri so now I can just raise my wrist and say &#34;Hey Siri, open the garage door&#34;. Or if I&#39;m in my car with Apple CarPlay I can issue the same command without even taking my hands off the wheel.</p><p>   è¿™æ ·åšçš„ä¸»è¦åŸå› ä¹‹ä¸€æ˜¯ï¼Œä¸€æ—¦æ‚¨è¿›å…¥äº†Appleç”Ÿæ€ç³»ç»Ÿï¼Œä¾¿æœ‰äº†Siriï¼Œå› æ­¤ç°åœ¨æˆ‘å¯ä»¥ä¸¾èµ·æ‰‹è…•è¯´â€œå˜¿Siriï¼Œæ‰“å¼€è½¦åº“é—¨â€ã€‚æˆ–è€…ï¼Œå¦‚æœæˆ‘ä½¿ç”¨Apple CarPlayå¼€è½¦æ—¶ï¼Œä¹Ÿå¯ä»¥å‘å‡ºç›¸åŒçš„å‘½ä»¤ï¼Œè€Œæ— éœ€æŠŠæ‰‹æ”¾å¼€ã€‚</p><p> This does, however, create other problems especially when it comes to troubleshooting. Take a look at  the hero image at the top of this blog post. Nice Nerf gun wall representing Ari&#39;s room as HomeKit sees it on my iPad, except... his desk power is showing &#34;No Response&#34;. Huh, wonder if he accidentally unplugged it this morning? So I go into his room and no, he hasn&#39;t unplugged it because his neon-backlit keyboard is glowing and it&#39;s plugged into the USB hub connected to the TP-Link HS100 smart plug that&#39;s presently unresponsive. It&#39;s surfaced in HomeKit via the HomeKit Bridge integration in HA so I go into that device and the entity is disabled. If HA can&#39;t see it then HomeKit won&#39;t be able to see it. Ok, let&#39;s go further up the stack and now I&#39;m in the native iOS Kasa app where the plug is both present and responsive to power on / power off commands which means it&#39;s on the network just fine. I stopped there because frankly, I got a bit pissed with the whole thing and just want to finish this blog post right now, but I&#39;ve included this here to demonstrate just how many moving parts are required to make all this work. Just one of those moving parts stops and not only does it kill a part of your internet of things, but there&#39;s a good chance you&#39;ll be in for a lengthy troubleshooting session.</p><p> ä½†æ˜¯ï¼Œè¿™ç¡®å®ä¼šå¼•èµ·å…¶ä»–é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨è¿›è¡Œæ•…éšœæ’é™¤æ—¶ã€‚çœ‹çœ‹æ­¤åšå®¢æ–‡ç« é¡¶éƒ¨çš„è‹±é›„å½¢è±¡ã€‚å°±åƒHomeKitåœ¨æˆ‘çš„iPadä¸Šçœ‹åˆ°çš„é‚£æ ·ï¼Œæ¼‚äº®çš„Nerfæªå£ä»£è¡¨äº†Ariçš„æˆ¿é—´ï¼Œé™¤äº†...ä»–çš„æ¡Œé¢ç”µæºæ˜¾ç¤ºâ€œæ— å“åº”â€ã€‚å‘µå‘µï¼Œæƒ³çŸ¥é“ä»–ä»Šå¤©æ—©ä¸Šæ˜¯å¦ä¸å°å¿ƒå°†å…¶æ‹”æ‰äº†å—ï¼Ÿæ‰€ä»¥æˆ‘è¿›äº†ä»–çš„æˆ¿é—´ï¼Œä¸ï¼Œä»–æ²¡æœ‰æ‹”å‡ºç”µæºï¼Œå› ä¸ºä»–çš„éœ“è™¹ç¯èƒŒå…‰é”®ç›˜å‘å…‰ï¼Œå¹¶ä¸”å·²æ’å…¥è¿æ¥åˆ°ç›®å‰æ— å“åº”çš„TP-Link HS100æ™ºèƒ½æ’å¤´çš„USBé›†çº¿å™¨ä¸­ã€‚å®ƒé€šè¿‡HAä¸­çš„HomeKit Bridgeé›†æˆåœ¨HomeKitä¸­æµ®å‡ºæ°´é¢ï¼Œå› æ­¤æˆ‘è¿›å…¥è¯¥è®¾å¤‡ï¼Œè¯¥å®ä½“è¢«ç¦ç”¨ã€‚å¦‚æœHAæ— æ³•çœ‹åˆ°å®ƒï¼Œåˆ™HomeKitå°†æ— æ³•çœ‹åˆ°å®ƒã€‚å¥½çš„ï¼Œè®©æˆ‘ä»¬æ›´è¿›ä¸€æ­¥ï¼Œç°åœ¨æˆ‘åœ¨æœ¬åœ°iOS Kasaåº”ç”¨ç¨‹åºä¸­ï¼Œè¯¥åº”ç”¨ç¨‹åºæ—¢å­˜åœ¨æ’å¤´ï¼Œåˆå“åº”å¼€æœº/å…³æœºå‘½ä»¤ï¼Œè¿™æ„å‘³ç€å®ƒåœ¨ç½‘ç»œä¸Šæ­£å¸¸ã€‚æˆ‘åœåœ¨é‚£é‡Œæ˜¯å› ä¸ºå¦ç‡åœ°è¯´ï¼Œæˆ‘å¯¹æ•´ä¸ªäº‹æƒ…æœ‰ç‚¹ç”Ÿæ°”ï¼Œåªæ˜¯æƒ³ç«‹å³å®Œæˆæœ¬ç¯‡åšå®¢æ–‡ç« ï¼Œä½†æ˜¯æˆ‘åœ¨æ­¤å¤„åŒ…æ‹¬äº†è¿™ä¸ªå†…å®¹ï¼Œä»¥æ¼”ç¤ºå®Œæˆæ‰€æœ‰è¿™äº›å·¥ä½œéœ€è¦å¤šå°‘ä¸ªè¿åŠ¨éƒ¨ä»¶ã€‚è¿™äº›ç§»åŠ¨éƒ¨ä»¶ä¸­çš„åªæœ‰ä¸€ä¸ªåœæ­¢äº†ï¼Œä¸ä»…æ€æ­»äº†ä¸€éƒ¨åˆ†ç‰©è”ç½‘ï¼Œè€Œä¸”å¾ˆæœ‰å¯èƒ½ä¼šè¿›è¡Œå†—é•¿çš„æ•…éšœæ’é™¤ä¼šè¯ã€‚</p><p> This all took me a while to wrap my head around, namely the fact that you can&#39;t escape the necessity to have multiple &#34;hubs of all your things&#34; and that they can all work together harmoniously... most of the time. It&#39;s not difficult, but it  is fiddly especially when you end up with the same devices in HA as Alexa can natively talk to then you see dupes or you get to HomeKit and there&#39;s a zillion devices in there when you really only want a couple of lights. There are solutions to these problems, however, it just requires a little patience and a lot of tweaking.</p><p> è¿™ä¸€åˆ‡èŠ±äº†æˆ‘ä¸€æ®µæ—¶é—´æ¥å›é¿ï¼Œè¿™æ˜¯äº‹å®ï¼Œå³æ‚¨æ— æ³•é€ƒé¿æ‹¥æœ‰å¤šä¸ªâ€œæ‰€æœ‰äº‹ç‰©é›†çº¿å™¨â€çš„å¿…è¦æ€§ï¼Œè€Œä¸”å®ƒä»¬å¯ä»¥åœ¨å¤§å¤šæ•°æ—¶é—´å’Œè°åœ°ååŒå·¥ä½œã€‚è¿™å¹¶ä¸å›°éš¾ï¼Œä½†æ˜¯å¾ˆå¥‡æ€ªï¼Œç‰¹åˆ«æ˜¯å½“æ‚¨æœ€ç»ˆåœ¨HAä¸­ä½¿ç”¨ç›¸åŒçš„è®¾å¤‡æ—¶ï¼ŒAlexaå¯ä»¥ä¸ä»–ä»¬è¿›è¡Œæœ¬åœ°äº¤è°ˆï¼Œç„¶åæ‚¨çœ‹åˆ°é‡å¤å¯¹è±¡ï¼Œæˆ–è€…æ‚¨è¿›å…¥äº†HomeKitï¼Œå½“æ‚¨çœŸçš„åªæƒ³è¦å‡ ç›ç¯æ—¶ï¼Œé‚£é‡Œæœ‰ä¸è®¡å…¶æ•°çš„è®¾å¤‡ã€‚ ã€‚æœ‰è§£å†³è¿™äº›é—®é¢˜çš„æ–¹æ³•ï¼Œä½†æ˜¯ï¼Œè¿™éœ€è¦ä¸€ç‚¹è€å¿ƒå’Œå¤§é‡è°ƒæ•´ã€‚</p><p>  I want to wrap up part 1 here because it&#39;s a nice Â finish before peeling back more layers of complexity. Get yourself a Raspberry Pi, install HA and add integrations for your existing devices, surface through your platforms of choice and you&#39;re off and running. But that&#39;s only the first step, in part 2 I want to start delving into the implications of all those IP addresses, the role of Zigbee, custom firmware and soldering and ultimately, finding my own happy path to how complex I wanted to make the whole thing.</p><p>  æˆ‘æƒ³åœ¨è¿™é‡Œæ€»ç»“ç¬¬1éƒ¨åˆ†ï¼Œå› ä¸ºåœ¨å‰¥ç¦»æ›´å¤šå±‚æ¬¡çš„å¤æ‚æ€§ä¹‹å‰è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®Œæˆã€‚ä¸ºè‡ªå·±é…å¤‡Raspberry Piï¼Œå®‰è£…HAå¹¶ä¸ºç°æœ‰è®¾å¤‡æ·»åŠ é›†æˆï¼Œé€šè¿‡é€‰æ‹©çš„å¹³å°æµ®å‡ºæ°´é¢ï¼Œç„¶åå¼€å§‹è¿è¡Œã€‚ä½†è¿™åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œåœ¨ç¬¬2éƒ¨åˆ†ä¸­ï¼Œæˆ‘æƒ³å¼€å§‹ç ”ç©¶æ‰€æœ‰è¿™äº›IPåœ°å€çš„å«ä¹‰ï¼ŒZigbeeçš„ä½œç”¨ï¼Œå®šåˆ¶å›ºä»¶å’Œç„Šæ¥ï¼Œå¹¶æœ€ç»ˆæ‰¾åˆ°ä¸€æ¡è‡ªå·±çš„å¿«ä¹ä¹‹è·¯ï¼Œäº†è§£æˆ‘æƒ³è¦ä½¿æ•´ä½“å˜å¾—å¤šä¹ˆå¤æ‚äº‹æƒ…ã€‚</p><p> Lastly, I&#39;m going to devote my regular weekly update live stream to this blog series and do it in conjunction with my good mate Scott Helme whose been going through his own IoT journey. It&#39;ll be broadcast at 17:00 Gold Coast time for me this Friday which is 08:00 the same day in London and 23:00 Thursday evening on the US west coast. If you can&#39;t make the live stream, it&#39;ll still be available here afterwards:</p><p> æœ€åï¼Œæˆ‘å°†æ¯å‘¨å®šæœŸæ›´æ–°å®æ—¶æµåˆ°æ­¤åšå®¢ç³»åˆ—ä¸­ï¼Œå¹¶ä¸æˆ‘çš„å¥½ä¼´ä¾£Scott Helmeä¸€èµ·è¿›è¡Œï¼Œä»–æ­£åœ¨ç»å†è‡ªå·±çš„ç‰©è”ç½‘ä¹‹æ—…ã€‚å®ƒå°†åœ¨æœ¬æ˜ŸæœŸäº”åœ¨é»„é‡‘æµ·å²¸æ—¶é—´17:00å¹¿æ’­ç»™æˆ‘ï¼Œè¿™æ˜¯ä¼¦æ•¦çš„å½“å¤©08:00å’Œç¾å›½è¥¿æµ·å²¸çš„æ˜ŸæœŸå››æ™šä¸Š23:00ã€‚å¦‚æœæ‚¨æ— æ³•åˆ¶ä½œå®æ—¶æµï¼Œåˆ™æ­¤åä»å°†å¯ç”¨ï¼š</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.troyhunt.com/iot-unravelled-part-1-its-a-mess-but-then-theres-home-assistant/">https://www.troyhunt.com/iot-unravelled-part-1-its-a-mess-but-then-theres-home-assistant/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ç‰©è”ç½‘/">#ç‰©è”ç½‘</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ä¸€å›¢ç³Ÿ/">#ä¸€å›¢ç³Ÿ</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/è®¾å¤‡/">#è®¾å¤‡</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>