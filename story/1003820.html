<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>瓦式磁记录NAS崩溃</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">瓦式磁记录NAS崩溃</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-27 03:36:32</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/5/6cbdede6357a9517df406d7f25607f15.png"><img src="http://img.diglog.com/img/2020/5/6cbdede6357a9517df406d7f25607f15.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>当希捷在2014年宣布他们的8 TB归档驱动器时，瓦式磁记录是一次绝妙的黑客攻击。SMR驱动器部分重叠磁道，利用读磁头比写磁头窄的事实。通过这种方式，您可以以较低的成本获得更高的密度，但这意味着后续写入也需要重写相邻磁道，这会对随机写入性能产生负面影响。</p><p>作为一个行业，我们认为这些驱动器的最佳用途是价格敏感的蠕虫应用程序，如内容交付。</p><p>因此，当系统管理员开始注意到他们的新西部数据Red NAS驱动器由于随机写入超时和故障而退出NAS RAID和ZFS池时，这是令人惊讶的。此行为与SMR驱动器响应随机写入的方式一致，因为RAID和ZFS存储它们的元数据。Smartmontools漏洞跟踪器上的这条帖子让人大开眼界：</p><p>有许多SMR驱动器悄悄地潜入供应渠道，这些渠道被编程为“看起来”像“传统”驱动器(CMR)。这似乎是试图绕过消费者阻力…。WD和Seagate都是驱动器管理的SMR(DM-SMR)驱动器，当通过传统方式询问时，这些驱动器不会将自己报告为SMR。…。更糟糕的是，他们将DM-SMR驱动器作为“RAID”和“NAS”驱动器发货。</p><p>西部数据最终承认，他们的许多驱动器现在都使用SMR，包括他们的Red驱动器，广告中说这些驱动器将在NASS中使用。Block and Files报道称，希捷和东芝已经承认做了同样的事情，尽管两家公司都明确表示，他们的NAS品牌驱动器都没有这样做。</p><p>从技术上讲，这个故事有太多需要解开的地方，但我对人的元素同样感兴趣。</p><p>从外部看，WD特别会浪费他们从Backblaze这样的公司那里获得的积极媒体的浪潮，这似乎是彻头彻尾的奇怪之处，他们表示，他们的驱动器-以及他们的HGST子公司的驱动器-更值得信赖和可靠。通过一个管理决策，工程师现在将对在其存储阵列中使用WD驱动器的选择进行事后评估。这个驱动器在WD的SMR列表上吗？如果不是，我能相信它不使用它吗，因为他们以前愿意隐瞒事实？</p><p>要做到这一点，这些公司的管理层必须明确或以其他方式决定：</p><p>我得到的前两点，都是商业现实。像这样复杂的大规模生产技术的利润率肯定比我30岁出头的发际线(Welp)下降得更快，研发竞争也很激烈。在(1)中提供更便宜的产品是合理的；在(2)中保持利润似乎是可疑的，但至少你可以理解这一点。</p><p>但是(3)是一个严重的误判。即使他们认为他们已经充分提高了SMR的性能，可以用于通用计算和NASS，但将新的SMR驱动器添加到RAID和ZFS池中，立即和透明地证明了这一点是错误的。</p><p>这就是为什么混淆SMR的使用是奇怪的原因。他们这样做的事实是承认人们不会自愿选择使用这项技术，特别是在像Nass这样的特定工作负荷中。如果我们顺着这一点得出它的合乎逻辑的结论：</p><p>客户会购买他们认为是传统驱动器的东西，因为它们被贴上了NAS驱动器的标签，用于需要相当好的随机写入性能的RAID阵列中，特别是在重新同步期间。</p><p>驱动器将立即报告与传统硬件上的彻底故障一致的问题。Linux和FreeBSD上支持SMR的工具不会注意到，因为它们的SMR操作已被混淆。</p><p>客户将报告这些故障、提交支持案例并退货，费用由制造商承担。更换设备解决不了问题，因为基础技术并不是为其使用和宣传的目的而设计的。人们会变得悲伤。</p><p>我们有SMR驱动器是件好事；它们提供了冷存储的成本优势，但可以立即读取。但是，正如我不会将USB闪存用于ZFS zil日志，也不会在手肘上戴帽子一样，SMR也不适合使用NAS。</p><p>公司和他们的公关部门从来没有意识到，不是使用$tech产生了敌意，而是它被隐藏了。这不是第一次发生了，我们都知道这不会是最后一次。嘿，那是一段很好的段落，下次我会引用它的！</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://rubenerd.com/the-shingled-magnetic-recording-nas-debacle/">https://rubenerd.com/the-shingled-magnetic-recording-nas-debacle/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/磁记录/">#磁记录</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/magnetic/">#magnetic</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/驱动器/">#驱动器</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>