<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>打造您自己的韦斯莱定位时钟</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">打造您自己的韦斯莱定位时钟</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-20 00:10:25</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/5/b279709b904797005541142de43f668a.jpeg"><img src="http://img.diglog.com/img/2020/5/b279709b904797005541142de43f668a.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>使用Life360跟踪家庭成员的位置。这项服务允许实时更新每个家庭成员的位置和速度。Life360允许对任意地理围栏区域进行命名。这是用来贴标签的地方，如学校和工作场所。</p><p>使用家庭助理作为家庭成员在家中和家周围的位置和移动的信息交换中心。家庭助理托管在Raspberry Pirunning Hass.io上。</p><p>Custom Home Assistant规则计算每个家庭成员的韦斯莱时钟状态。每个状态都可以从Home AssistantDashboard中看到。时钟状态的改变使用MQTT协议通过网络传输到物理时钟。</p><p>自定义软件在Raspberry PI上运行，监控MQTT消息流以了解时钟状态的变化，并更新物理时钟指针。这款软件还增加了一些手部运动的光斑。例如，指针在每个钟面扇区内的位置将取决于此人离家的距离。这样，你一眼就能看出某人离家是远是近。你甚至可以注意到那个人的时钟在向家走的进度。</p><p>有四个指针的物理时钟。这座钟被安装在一座老式的老式钟上。钟面被分成八个几乎相等的扇区。每个分区都有一个位置/位置标签。这些标签是：家、致命危险、魁地奇、工作、学校、花园、过境和迷失。</p><p>下一阶段将是重复使用原始时钟附带的钟声。钟声可以提醒人们注意时钟状态的显著变化，例如，宣布某人回家了。目前的计划是用步进电机驱动现有的编钟机构。</p><p>Home家庭状态由Home Assistant Life360集成触发。我有一个明确的地理围栏区域，当我们在那个区域内时，我们就被认为是家。我还使用Home AssistantUnifi集成来识别家庭成员何时连接到家庭WiFi网络。此外，我还可以确定它们连接到哪些WiFi接入点(AP)。这提供了一些关于它们在属性上的位置的粒度。如果有人在商店里，在主屋里，或者在外面的花园里，这个系统都可以。我用家属区顺时针方向的一半表示有人在主屋里，用逆时针方向的一半表示有人在商店里。</p><p>迷失这是一种包罗万象的状态，当某人静止不动，而不是在家里，也不在学校或工作的指定地点之一时，这是一种包罗万象的状态。时钟指针在扇区内的位置根据它们离家的距离而变化。离家越近，手越靠近家属区。失落扇区内的位置在对数范围内变化，以便在离家更近的时候提供更精细的细节。</p><p>花园此扇区在连接到花园附近的室外WiFi接入点时触发。</p><p>当有人骑自行车时会触发魁地奇。我用两种方式操纵了这件事。首先，根据一套关于低速运动的复杂规则，比走路快，开车慢。其次，我会检测到有人目前在VR室内自行车应用Zwift上处于活跃状态。</p><p>致命危险如果生命360测量到某人的时速超过75英里，就会触发这一点。由于青少年即将驾车出行，我将密切关注这一事件。</p><p>我决定重新使用一个旧的祖父/祖母钟，而不是建造一个新的箱子。我很幸运，在一家旧货店找到了一只完美的箱子。这个钟是一个小小的祖父钟，有时也被称为祖母钟。不像全尺寸的老爷钟那样气势磅礴，也不容易移动。我需要脸部的大小来匹配我的艺术品，需要箱子的深度来装这些服务和新的发条。</p><p>手是3D打印的，每个家庭成员的名字都印在手上，就像在哈利波特电影中一样。每只手的底部都有人名的首字母。为了更好的对比度和给人以陈旧的外观，手部都被涂上了颜色。</p><p>我花了很长时间试图弄清楚如何把手固定在黄铜管轴上。我考虑过夹紧轮毂(太大)、夹头(传统钟表指针使用的金属接头)、胶水和热胶(这很管用)。最后，通过使3D打印指针上的孔战略性地变小，我能够用恰好适合的文件来扩展孔。它们足够紧，可以安全地穿着。我从一只手上移走了太多的材料，于是用胶水(E-6000)把它固定住了。</p><p>在这个建造过程中，我花了相当多的时间来研究其他人是如何尝试建造韦斯莱钟的。我找到的最完整、最正宗的版本是由printableProps制作的。</p><p>我在网上看了看，在“哈利波特”系列电影中出现了两种风格的韦斯莱钟。第一种风格出现的频率更高，也更容易复制。它还有一些我希望永远不会需要的部门，比如监狱。</p><p>幸运的是，这种风格的艺术家米娜·利马(MinaLima)出售官方授权的韦斯莱钟海报。这张海报花的钱很值，因为我不需要自己创作这幅图画，而这是哈利波特电影中的图画。</p><p>祖母/祖父的钟有一套钟声。我计划一旦完成时钟装置就把它们整合起来。我启动了一个新项目来研究和记录这个版本：Weasley Chimes。</p><p>我正在使用家庭助理追踪和传送我家人的位置。为了做到这一点，我正在使用Life360集成来进行详细的位置跟踪。为了跟踪房子周围更精细的位置，我使用了UnifiIntegration来监控每个家庭成员离哪个WiFi接入点最近的位置。</p><p>我&#39；m包括示例家庭助理YAML配置代码创建一个韦斯莱时钟传感器。该传感器将跟踪给定用户的Weasley Clock状态：家里、花园、学校、工作、在途、死亡、丢失、错误。</p><p>我需要在树莓PI上运行一个守护进程来控制时钟伺服。为此，我编写了Weasley Clock，它监控来自Home Assistant的MQTT消息，并管理物理时钟的运动。</p><p>钟表支撑结构的CAD是由我的岳父罗恩创建的。他还负责这个项目的所有3D打印工作。</p><p>我的儿子亚历克斯(Alex)为钟表指针做了CAD，并生成了钟表的CAD渲染：</p><p>我曾考虑过使用ModPodge，甚至尝试用Mod Podge在胶合板上贴上其他一些海报。</p><p>3M Super77让脸部表面更光滑，而且不需要重新铺设正面来获得良好的附着力。超级77套很快就能上架，所以看一些如何使用它的视频，并找一个伙伴来帮助你在放下海报时保持笔直。</p><p>注意：勾选的项目对于4针时钟来说是一个很好的设置。从理论上讲，可以创造出一个6针的钟，所有的尺寸都有。然而，Serocity不出售尺寸为2 mm和7 mm的夹具中心。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/randomstring/WeasleyClock">https://github.com/randomstring/WeasleyClock</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/韦斯莱/">#韦斯莱</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/weasley/">#weasley</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/时钟/">#时钟</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>