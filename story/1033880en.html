<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ä½¿ç”¨Alfredåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€GitHubå­˜å‚¨åº“</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">ä½¿ç”¨Alfredåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€GitHubå­˜å‚¨åº“</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-09 00:51:00</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/1a65df924f8779c225ea2e11e4155568.png"><img src="http://img2.diglog.com/img/2020/11/1a65df924f8779c225ea2e11e4155568.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>One thing I do multiple times a day is browsing my companyâ€™s GitHub organization repositories. My process for opening these repositories in the browser is:</p><p>æˆ‘æ¯å¤©åšçš„ä¸€ä»¶äº‹å°±æ˜¯æµè§ˆæˆ‘å…¬å¸çš„GitHubç»„ç»‡å­˜å‚¨åº“ã€‚æˆ‘åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¿™äº›å­˜å‚¨åº“çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p>  This flow works well for repositories that I have starred as bookmarks or that I browsed recentlyâ€¦ â€¦But because Iâ€™m a total sucker for Alfred, today I wasted almost an hour moving this process into an Alfred workflow.</p><p>æ­¤æµç¨‹å¯¹äºæˆ‘ä½œä¸ºä¹¦ç­¾ä½¿ç”¨çš„å­˜å‚¨åº“æˆ–æˆ‘æœ€è¿‘æµè§ˆè¿‡çš„â€¦å­˜å‚¨åº“éƒ½å¾ˆæœ‰æ•ˆã€‚â€¦ã€‚ä½†æ˜¯å› ä¸ºæˆ‘å¯¹Alfredéå¸¸ç€è¿·ï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘æµªè´¹äº†å°†è¿‘ä¸€ä¸ªå°æ—¶å°†è¿™ä¸ªè¿‡ç¨‹è½¬ç§»åˆ°Alfredçš„å·¥ä½œæµç¨‹ä¸­ã€‚</p><p>     Making an API request to filter the repositories each time I invoke the Alfred workflow wasnâ€™t an option.</p><p>æˆ‘ä¸èƒ½åœ¨æ¯æ¬¡è°ƒç”¨Alfredå·¥ä½œæµæ—¶å‘å‡ºAPIè¯·æ±‚æ¥è¿‡æ»¤å­˜å‚¨åº“ã€‚</p><p> So I decided to 1) download the entire repository list into a JSON file, 2) transform it into an Alred-compatible format, and 3) use the  Alfredâ€™s fuzzy search helper to filter the results.</p><p>å› æ­¤ï¼Œæˆ‘å†³å®š1)å°†æ•´ä¸ªå­˜å‚¨åº“åˆ—è¡¨ä¸‹è½½åˆ°ä¸€ä¸ªJSONæ–‡ä»¶ä¸­ï¼Œ2)å°†å…¶è½¬æ¢ä¸ºAlredå…¼å®¹çš„æ ¼å¼ï¼Œ3)ä½¿ç”¨Alfredçš„æ¨¡ç³Šæœç´¢åŠ©æ‰‹æ¥è¿‡æ»¤ç»“æœã€‚</p><p>    TIL: Selecting all the â€œrepoâ€ sub-scopes is not the same as selecting the entire scope â€” which is needed to use the API token to get the list of all the private repositories.</p><p>TILï¼šé€‰æ‹©æ‰€æœ‰â€œrepoâ€å­ä½œç”¨åŸŸä¸é€‰æ‹©æ•´ä¸ªä½œç”¨åŸŸä¸åŒ-è¿™æ˜¯ä½¿ç”¨APIä»¤ç‰Œè·å–æ‰€æœ‰ç§æœ‰å­˜å‚¨åº“åˆ—è¡¨æ‰€å¿…éœ€çš„ã€‚</p><p> The GitHub API pagination has a limit of 200 items per page. I needed to fetch way more than 200 repositories, so I modified  this cool (but outdated) bash script to fetch all of them in a single command and print them out to the console:</p><p>GitHub APIåˆ†é¡µé™åˆ¶ä¸ºæ¯é¡µ200ä¸ªé¡¹ç›®ã€‚æˆ‘éœ€è¦è·å–200å¤šä¸ªå­˜å‚¨åº“ï¼Œæ‰€ä»¥æˆ‘ä¿®æ”¹äº†è¿™ä¸ªå¾ˆé…·(ä½†å·²è¿‡æ—¶)çš„bashè„šæœ¬ï¼Œä»¥ä¾¿åœ¨ä¸€ä¸ªå‘½ä»¤ä¸­è·å–æ‰€æœ‰å­˜å‚¨åº“ï¼Œå¹¶å°†å®ƒä»¬æ‰“å°åˆ°æ§åˆ¶å°ï¼š</p><p> #!/bin/bash if  [  ${ #@} -lt  2  ] ;  then    &#34;usage:  $0 [your github credentials as &#39;user:token&#39;] [REST expression]&#34;    1 ; fi GITHUB_CREDENTIALS = $1 GITHUB_API_REST = $2 GITHUB_API_HEADER_ACCEPT = &#34;Accept: application/vnd.github.v3+json&#34; temp =  ` basename $0 ` TMPFILE =  `mktemp /tmp/$ {temp }.XXXXXX `  ||    1 function    {  curl -s -u  $GITHUB_CREDENTIALS  $1 -H  &#34; ${GITHUB_API_HEADER_ACCEPT}&#34;  &gt;&gt;  $TMPFILE } # single page result-s (no pagination), have no Link: section, the grep result is empty last_page =  ` curl -s -I -u $GITHUB_CREDENTIALS  &#34;https://api.github.com ${GITHUB_API_REST}?per_page=200&#34; -H  &#34; ${GITHUB_API_HEADER_ACCEPT}&#34;  |  grep  &#39;^Link:&#39;  |  sed -e  &#39;s/^Link:.*page=//g&#39; -e  &#39;s/&gt;.*$//g&#39; ` # does this result use pagination? if  [ -z  &#34; $last_page&#34;  ] ;  then  # no - this result has only one page rest_call  &#34;https://api.github.com ${GITHUB_API_REST}?per_page=200&#34; else  # yes - this result is on multiple pages  for  p  in   ` seq  1 $last_page ` ;  do rest_call  &#34;https://api.github.com ${GITHUB_API_REST}?per_page=200&amp;page= $p&#34;  done fi cat  $TMPFILE</p><p>#ï¼/bin/bash if[${#@}-lt2]ï¼›åˆ™&#34ï¼›ç”¨æ³•ï¼š$0[æ‚¨çš„GitHubå‡­æ®ä¸º&#39ï¼›ç”¨æˆ·ï¼šä»¤ç‰Œ&#39ï¼›][RESTè¡¨è¾¾å¼]&#34ï¼›1ï¼›fi GitHub_Credentials=$1 GitHub_API_REST=$2 GitHub_API_Header_Accept=&#34ï¼›Acceptï¼šApplication/vnd.gib.v3+json&#34ï¼›Temp=`basename$0`TMPFILE=`mktemp/tmp/${temp}.XXXXXX`|1å‡½æ•°{curl-s-u$GitHub_Credentials$1-H&#34ï¼›${GitHub_API_HEADER_ACCEPT}&#34ï¼›&gtï¼›&gtï¼›$TMPFILE}#å•é¡µç»“æœ-s(æ— åˆ†é¡µ)ï¼Œæ²¡æœ‰é“¾æ¥ï¼šèŠ‚ï¼Œgrepç»“æœä¸ºç©ºlast_ã€‚Https://api.github.com${GITHUB_API_REST}ï¼ŸPER_PAGE=200&#34ï¼›-H&#34ï¼›${GITHUB_API_HEADER_ACCEPT}&#34ï¼›|grep&39ï¼›^é“¾æ¥ï¼š&#39ï¼›|sed-e&#39ï¼›s/^é“¾æ¥ï¼š.*PAGE=//g&39ï¼›-e&#39ï¼›s/&gtï¼›.*$//g&#39ï¼›`#æ­¤ç»“æœæ˜¯å¦ä½¿ç”¨åˆ†é¡µï¼Ÿå¦‚æœ[-z&#34ï¼›$LAST_PAGE&#34ï¼›]ï¼›åˆ™#no-æ­¤ç»“æœåªæœ‰ä¸€ä¸ªé¡µé¢REST_CALL&#34ï¼›https://api.github.com${GITHUB_API_REST}ï¼ŸPER_PAGE=200P&#34ï¼›å¦åˆ™#YES-æ­¤ç»“æœåœ¨å¤šä¸ªé¡µé¢ä¸Šï¼Œä½äº`SEQ 1$LAST_PAGE`ï¼›DO REST_CALL&#34ï¼›https://api.github.com${GITHUB_API_REST}ï¼ŸPER_PAGE=200&AMPï¼›PAGE=$p&#34ï¼›å®ŒæˆFIç›®å½•$TMPFILEã€‚</p><p>   FYI, you can also run it this way to get all the repositories you have access to (both on your personal account and on other organization accounts):</p><p>ä»…ä¾›å‚è€ƒï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è¿è¡Œå®ƒï¼Œä»¥è·å–æ‚¨æœ‰æƒè®¿é—®çš„æ‰€æœ‰å­˜å‚¨åº“(åŒ…æ‹¬æ‚¨çš„ä¸ªäººå¸æˆ·å’Œå…¶ä»–ç»„ç»‡å¸æˆ·)ï¼š</p><p>    uid: Unique identifier for the item which allows Alfred to learn about this item for subsequent sorting and ordering of the userâ€™s actioned results. I used the repository ID ( id).</p><p>UIDï¼šé¡¹ç›®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå…è®¸Alfredäº†è§£è¯¥é¡¹ç›®ï¼Œä»¥ä¾¿éšåå¯¹ç”¨æˆ·çš„æ“ä½œç»“æœè¿›è¡Œæ’åºå’Œæ’åºã€‚æˆ‘ä½¿ç”¨äº†å­˜å‚¨åº“ID(Id)ã€‚</p><p> arg: The argument which is passed through the workflow to open it in the browser. I used the repository URL ( html_url).</p><p>Argï¼šä¼ é€’ç»™å·¥ä½œæµä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å®ƒçš„å‚æ•°ã€‚æˆ‘ä½¿ç”¨äº†å­˜å‚¨åº“URL(Html_Url)ã€‚</p><p>  cat ~/my-company-repos.txt  | jq -s  &#39;.[] | map({ arg: .html_url, uid: .id, title: .name, subtitle: .description }) | { items: . }&#39;  &gt; ~/my-company-repos.json</p><p>Cat~/my-company-repos.txt|jq-s&#39ï¼›.[]|MAP({argï¼š.html_urlï¼Œuidï¼š.idï¼ŒTitleï¼š.nameï¼ŒSubTitleï¼š.Description})|{Itemsï¼šã€‚}&#39ï¼›&gtï¼›~/my-company-repos.jsonã€‚</p><p> The  jq script generates a  ~/my-company-repos.json file compatible with the  Alfred Script Filter JSON format.</p><p>JQè„šæœ¬ç”Ÿæˆä¸€ä¸ªä¸Alfredè„šæœ¬è¿‡æ»¤å™¨JSONæ ¼å¼å…¼å®¹çš„~/my-company-repos.jsonæ–‡ä»¶ã€‚</p><p>  The Alfred standard script filtering doesnâ€™t have a good fuzzy search option â€” which I really wanted given the huge amount of repositories.</p><p>Alfredæ ‡å‡†è„šæœ¬è¿‡æ»¤æ²¡æœ‰å¾ˆå¥½çš„æ¨¡ç³Šæœç´¢é€‰é¡¹--è€ƒè™‘åˆ°å¤§é‡çš„å­˜å‚¨åº“ï¼Œè¿™æ˜¯æˆ‘éå¸¸æƒ³è¦çš„ã€‚</p><p> As a workaround, I used  alfred-fuzzy, a Python helper script for Alfred that replaces the â€œAlfred filters resultsâ€ option with fuzzy search.</p><p>ä½œä¸ºä¸€ç§è§£å†³åŠæ³•ï¼Œæˆ‘ä½¿ç”¨äº†Alfred-Fuzzyï¼Œè¿™æ˜¯Alfredçš„ä¸€ä¸ªPythonåŠ©æ‰‹è„šæœ¬ï¼Œå®ƒç”¨æ¨¡ç³Šæœç´¢å–ä»£äº†â€œAlfred Filters Resultsâ€é€‰é¡¹ã€‚</p><p>  In the workflow, connect the â€œScript Filterâ€ to the â€œOpen URLâ€ action:</p><p>åœ¨å·¥ä½œæµä¸­ï¼Œå°†â€œè„šæœ¬è¿‡æ»¤å™¨â€è¿æ¥åˆ°â€œæ‰“å¼€URLâ€æ“ä½œï¼š</p><p> Thatâ€™s it.I can now invoke the workflow using the keyword set in the â€œScript Filterâ€ action and fuzzy search the repo Iâ€™m interested in.</p><p>å°±æ˜¯è¿™æ ·ï¼Œæˆ‘ç°åœ¨å¯ä»¥ä½¿ç”¨â€œè„šæœ¬è¿‡æ»¤å™¨â€æ“ä½œä¸­è®¾ç½®çš„å…³é”®å­—è°ƒç”¨å·¥ä½œæµï¼Œå¹¶æ¨¡ç³Šæœç´¢æˆ‘æ„Ÿå…´è¶£çš„repoã€‚</p><p> Alfred is also smart enough to keep track of my workflow usage, surfacing the most clicked results to the top of the list ğŸ’¥</p><p>é˜¿å°”å¼—é›·å¾·ä¹Ÿè¶³å¤Ÿèªæ˜ï¼Œå¯ä»¥è·Ÿè¸ªæˆ‘çš„å·¥ä½œæµä½¿ç”¨æƒ…å†µï¼Œå°†ç‚¹å‡»ç‡æœ€é«˜çš„ç»“æœæ˜¾ç¤ºåœ¨åˆ—è¡¨ğŸ’¥çš„é¡¶éƒ¨ã€‚</p><p> Yes, the workflow can be improved in several ways (e.g.: auto-update the repository list after n days)â€¦ but Iâ€™m happy enough with the current result for now.</p><p>å¯ä»¥ï¼Œå¯ä»¥é€šè¿‡å‡ ç§æ–¹å¼æ”¹è¿›å·¥ä½œæµ(ä¾‹å¦‚ï¼šnå¤©åè‡ªåŠ¨æ›´æ–°å­˜å‚¨åº“åˆ—è¡¨)â€¦ã€‚ä½†æˆ‘å¯¹ç›®å‰çš„ç»“æœå·²ç»å¾ˆæ»¡æ„äº†ã€‚</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://mmazzarolo.com/blog/2020-09-28-alfred-github-repos/">https://mmazzarolo.com/blog/2020-09-28-alfred-github-repos/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/github/">#github</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/alfred/">#alfred</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/open/">#open</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1033660.html"><img src="http://img2.diglog.com/img/2020/11/thumb_e8a462cce56d2b68b4d24fbea8d89f37.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033660.html">GitHub YouTube-DLä¸‹æ¶ä¸ä»…ä»…æ˜¯ç¾å›½æ³•å¾‹çš„é—®é¢˜</a></div><span class="my_story_list_date">2020-11-7 14:13</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033454.html"><img src="http://img2.diglog.com/img/2020/11/thumb_35598305cd417b83b8fab05e3a4f7b31.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033454.html">GitHubçš„æºä»£ç æ˜¨æ™šåœ¨GitHubç½‘ç«™â€¦ä¸Šæ³„éœ²ã€‚è¯´å¤§ä¹Ÿå¤§å§</a></div><span class="my_story_list_date">2020-11-6 7:41</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033434.html"><img src="http://img2.diglog.com/img/2020/11/thumb_e54b64d1df1197950f8e3325011504ce.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033434.html">GitHubå¦è®¤è¢«é»‘å®¢å…¥ä¾µ</a></div><span class="my_story_list_date">2020-11-6 7:33</span></div><div class="col-sm"><div><a target="_blank" href="/story/1033265.html"><img src="http://img2.diglog.com/img/2020/11/thumb_3c453984327c27da470e63b39ae6fedc.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033265.html">æˆ‘å°†æ•´ä¸ªGitHubåç«¯æºä»£ç ä¸Šä¼ åˆ°GitHubè‡ªå·±çš„DMCA repo</a></div><span class="my_story_list_date">2020-11-5 20:2</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç¾å›½/">#ç¾å›½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç¨‹åº/">#ç¨‹åº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>