<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>我们对西部数据可怕的SMR Red Drive进行了测试</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">我们对西部数据可怕的SMR Red Drive进行了测试</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-08 18:48:48</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/6/046bb039a85c02a260ee0165e8eae169.jpg"><img src="http://img.diglog.com/img/2020/6/046bb039a85c02a260ee0165e8eae169.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>西部数据公司因试图将SMR磁盘技术偷偷带入他们的Red系列NAS磁盘而收到了大量的负面新闻，甚至是诉讼。为了更好地处理这种情况，ARS购买了西部数据4TB Red eFax型SMR驱动器，并亲自进行了测试。</p><p>最近，知名科技爱好者网站Servethehome测试了一款基于SMR的4TB带ZFS的红盘，发现它严重缺乏。该磁盘在一般性能测试中表现良好(如果表现不佳)。但是，当Servethehome使用它来更换降级的RAIDz1 vdev中的磁盘时，需要9天以上的时间才能完成操作-所有竞争对手的NAS驱动器在大约16小时内执行相同的任务。</p><p>这理所当然地提出了一个问题，即当西部数据试图在NAS驱动器中使用SMR技术时，它在想什么，更不用说试图偷偷进入市场了。西部数据到底有没有测试过这些光盘？但是，尽管Servethehome的ZFS测试很有价值，但它们忽略了这类驱动器消费者和小型企业NAS设备最常见的使用案例，如Synology的DS1819+或Netkit的ReadyNAS RN628X00。它们都使用Linux内核RAID(Mdraid)来管理其阵列。</p><p>在购买了与ServetheHome测试的WD 4TB Red eFax驱动器类似的WD 4TB Red eFax驱动器后，我们使用现有的测试台，在ARS存储热棒中使用了8个Seagate Ironwolf驱动器来创建RAID6阵列。我们的八个Ironwolf磁盘是一个12T的，所以我们将它们划分为一个3500GiB-这使得阵列足够小，当我们的Ironwolf出现故障时，我们的新WD Red Disk可以作为替代磁盘。</p><p>当我们创建RAID6阵列时，我们使用了参数-bNone，以防止它在使用阵列中以前存在的磁盘时尝试执行位图扫描以进行更快的重建。我们使用ext4文件系统对其进行格式化，参数为-E lazy_able_init=0，lazy_Journal_init=0，这样后台进程就不会使用普通用户通常不会遇到的驱动器活动来污染我们的测试。</p><p>格式化新的8个磁盘的19TiB阵列后，我们将14TiB的数据转储到14个子目录中，每个子目录包含1,024个1GiB文件，其中填充了伪随机数据。这使得阵列的使用率略高于75%。此时，我们使阵列中的一个Ironwolf磁盘出现故障，对其执行wipefs-a/dev/sdl1命令以删除现有的RAID标头，然后将其重新添加到现在降级的阵列中。这是我们的基线。</p><p>一旦Ironwolf成功地重建到阵列中，我们再次将其排除在外-这一次，我们将其从系统中完全移除，并用我们的4TB Red SMR豚鼠取而代之。首先，我们将整个4TB Red作为丢失的分区Ironwolf的替代，馈送到降级的阵列中。然后，一旦它完成重建，我们再次使其失效，擦除其中的RAID头，然后将其重新添加以进行第二次重建。</p><p>这为我们提供了两个测试案例-一个出厂新的Red SMR磁盘正在重建到阵列中，以及一个旧的红色SMR磁盘，其上的大量数据已经重建到阵列中。我们认为测试两种方式都很重要，因为每种情况都是NAS磁盘在现实世界中的常见用法。看起来，一个装满数据的SMR磁盘可能比一个全新的磁盘性能更差，因为它处理已使用的区域时不需要读取-修改-写入。</p><p>我们对SMR磁盘在第一次测试中表现良好并不感到惊讶-撇开消费者的愤怒不谈，西部数据似乎不太可能在没有进行任何测试的情况下将这些磁盘送出家门。更令我们惊讶的是，它在旧状态下的表现与新状态下的一样-驱动器的固件能够很好地混洗数据，不需要花一分钟就能像新状态那样从旧状态重建。</p><p>显然，WD Red的固件可以应付处理传统RAID重建的挑战，这相当于一个巨大的、非常大的块顺序写入测试。下一件要检查的事情是，eFax是否能很好地处理消费者NAS的典型日常用例的繁重版本-即存储大文件。</p><p>再一次，乍一看，WD Red通过了测试。就吞吐量而言，Red仅比其非SMR铁狼竞争对手慢16.7%。即使是第二次重新测试，当固件处理已经满的区域变得更加困难时，情况也不会有明显的改变。</p><p>当我们进一步深入研究FIO的延迟数据时，情况看起来明显更糟。与铁狼相比，电子传真红平均比铁狼慢68.8%--但同样，这是不会赢得这场比赛的领地，而不是你会因为诈骗领地而被起诉的。“电子传真红”比“铁狼”要慢68.8%--但同样，这是不会赢得这场比赛的领地，而不是你会因为诈骗领地而被起诉。只有当我们查看1MiB随机写入测试的峰值延迟时，我们才会开始看到当您在计划外的方向上按下Red时，事情会变得多么糟糕。在最坏的情况下，它的返回率高达1.3秒，比铁狼最慢的108毫秒的返回率差了10倍以上。</p><p>我们可以从这一峰值延迟结果推断出，当Red的固件陷入严重困境时，其吞吐量可能会在一段时间内降至1MiB/秒以下-这与我们在观看吞吐量测试运行时看到的不断变化的吞吐量数字相关。它还告诉我们，对于桌面用户，当他们单击按钮并拖动东西时，希望事情发生的人，Red偶尔可以在本应非常、非常容易的工作负载中提供真正令人沮丧的体验，即使是对于传统的驱动器也是如此。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://arstechnica.com/gadgets/2020/06/western-digitals-smr-disks-arent-great-but-theyre-not-garbage/">https://arstechnica.com/gadgets/2020/06/western-digitals-smr-disks-arent-great-but-theyre-not-garbage/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/red/">#red</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/western/">#western</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/测试/">#测试</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>