<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ＳＱＬ语法参考手册</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6067137220025946"
     crossorigin="anonymous"></script>
</head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><div id="myga-top-1">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6067137220025946"
                crossorigin="anonymous"></script>
            <!-- hor_page_top -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-6067137220025946"
                data-ad-slot="9055428599"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
            </div><h1 class="page_narrow">ＳＱＬ语法参考手册</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">by <a href="/user/david55/">david55</a> on 2008-04-14 20:53:56</div><div class="page_narrow text-break page_content"><p class="myga-story-1">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6067137220025946"
                crossorigin="anonymous"></script>
            <!-- square_story_page_1 -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-6067137220025946"
                data-ad-slot="6429265258"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>

            </p><p>DB2 提供了关连式资料库的查询语言 ＳＱＬ (Structured Query Language)， 是一种非常口语化、既易学又易懂的语法。此一语言几乎是每个资料库系统都 必须提供的，用以表示关连式的操作，包含了资料的定义（ＤＤＬ）以及资料 的处理（ＤＭＬ）。SQL原来拼成 SEQUEL，这语言的原型以“系统 R“的名 字在 IBM 圣荷西实验室完成，经过 IBM 内部及其他的许多使用性及效率测试， 其结果相当令人满意，并决定在系统R 的技术基础发展出来 IBM 的产品。而 且美国国家标准学会（ANSI）及国际标准化组织（ISO在 1987 遵循一个几乎 是以 IBM SQL 为基础的标准关连式资料语言定义。 </p><p>资料定义 ＤＤＬ（Data Definition Language) </p><p>资料定语言是指对资料的格式和形态下定义的语言，他是每个资料库要建立时候 时首先要面对的，举凡资料分哪些表格关系、表格内的有什麽栏位主键、表格和表格之间互相参考的关系等等，都是在开始的时候所必须规划好的。 </p><p></p><p>建表格： </p><p>语法： </p><p>CREATE TABLE table_name( </p><p>column1 DATATYPE [NOT NULL] [NOT NULL PRIMARY KEY], </p><p>column2 DATATYPE [NOT NULL], </p><p>...） </p><p>说明 </p><p>DATATYPE --是资料的格式，详见表。 </p><p>NUT NULL --可不可以允许资料有空的（尚未有资料填入）。 </p><p>PRIMARY KEY --是本表的主键。 </p><p></p><p>更改表格 </p><p>ALTER TABLE table_name </p><p>ADD COLUMN column_name DATATYPE </p><p>说明增加一个栏位（没有删除某个栏位的语法） </p><p>ALTER TABLE table_name </p><p>ADD PRIMARY KEY (column_name) </p><p>说明更改表得的定义把某个栏位设为主键 </p><p>ALTER TABLE table_name </p><p>DROP PRIMARY KEY (column_name) </p><p>说明把主键的定义删除。 </p><p></p><p>建立索引 </p><p>CREATE INDEX index_name ON table_name (column_name) </p><p>说明对某个表格的栏位建立索引以增加查询时的速度 </p><p></p><p>删除 </p><p>DROP table_name </p><p>DROP index_name </p><p></p><p>资料形态 DATATYPE </p><p>ＳＱＬ 的资料形态 DATATYPEs </p><p>smallint </p><p>16 位元的整数 </p><p>interger </p><p>32 位元的整数 </p><p>decimal(p,s) </p><p>p 精确值和 s 大小的十进位整数，精确值 p 是指全部有几个数(digits) </p><p>大小值 s 是指小数点後有几位数。 </p><p>如果没有特别指定，则系 统会设为 p=5; s=0 。 </p><p>float </p><p>32位元的实数 </p><p>double </p><p>64位元的实数 </p><p>char(n) </p><p>n 长度的字串，n不能超过 254 </p><p>varchar(n) </p><p>长度不固定且其最大长度为 n 的字串，n不能超过 4000 </p><p>graphic(n) </p><p>和 char(n) 一样，不过其单位是两个字元 double-bytes， n不能超过 127。这个形态是为了支援两个字元长度的字体，例如中文字 </p><p>vargraphic(n) </p><p>可变长度且其最大长度为 n 的双字元字串，n不能超过 2000 </p><p>date </p><p>包含了 年份、月份、日期. </p><p>time </p><p>包含了 小时、分钟、秒. </p><p>timestamp </p><p>包含了 年、月、日、时、分、秒、千分之一秒. </p><p></p><p>资料操作 ＤＭＬ （Data Manipulation Language) </p><p>资料定义好之後接下来的就是资料的操作。资料的操作不外乎增加资料（insert)、 查询资料（query）、更改资料（update) 、删除资料（delete）四种模式，以下分别介绍他们的语法： </p><p></p><p>增加资料： </p><p>INSERT INTO table_name (column1,column2,...) VALUES ( value1,value2, ...) </p><p>说明： </p><p>1.若没有指定column 系统则会按表格内的栏位顺序填入资料 </p><p>2.栏位的资料形态和所填入的资料必须吻合 </p><p>3.table_name 也可以是景观 view_name </p><p></p><p>INSERT INTO table_name (column1,column2,...) SELECT columnx,columny,... FROM another_table </p><p>说明：也可以经过一个子查询（subquery）把别的表格的资料填入 </p><p></p><p>查询资料： </p><p>基本查询 </p><p>SELECT column1,columns2,... FROM table_name </p><p>说明：把table_name 的特定栏位资料全部列出来 </p><p>SELECT * </p><p>FROM table_name </p><p>WHERE column1 = xxx </p><p>[AND column2 &gt; yyy] [OR column3 &lt;&gt; zzz] </p><p>说明： </p><p>1.’*’表示全部的栏位都列出来 </p><p>2.WHERE 之後是接条件式，把符合条件的资料列出来 </p><p>SELECT column1,column2 </p><p>FROM table_name </p><p>ORDER BY column2 [DESC] </p><p>说明： </p><p>ORDER BY 是指定以某个栏位做排序，[DESC]是指从大到小排列，若 </p><p>没有指明，则是从小到大排列 </p><p></p><p>组合查询 </p><p>组合查询是指所查询得资料来源并不只有单一的表格，而是联合一个以上的表格才能够得到结果的。 </p><p>SELECT * </p><p>FROM table1,table2 </p><p>WHERE table1.colum1=table2.column1 </p><p>说明： </p><p>1.查询两个表格中其中 column1 值相同的资料 </p><p>2.当然两个表格相互比较的栏位，其资料形态必须相同 </p><p>3.一个复杂的查询其动用到的表格可能会很多个 </p><p></p><p>整合性的查询： </p><p>SELECT COUNT (*) </p><p>FROM table_name </p><p>WHERE column_name = xxx </p><p>说明： </p><p>查询符合条件的资料共有几笔 </p><p>SELECT SUM(column1) </p><p>FROM table_name </p><p>说明： </p><p>1.计算出总和，所选的栏位必须是可数的数字形态 </p><p>2.除此以外还有 AVG() 是计算平均、MAX()、MIN() </p><p>计算最大最小值的整合性查询 </p><p>SELECT column1,AVG(column2) </p><p>FROM table_name </p><p>GROUP BY column1 </p><p>HAVING AVG(column2) &gt; xxx </p><p>说明： </p><p>1.GROUP BY: 以column1 为一组计算 column2 的平均值 </p><p>必须和 AVG、SUM 等整合性查询的关键字一起使用 </p><p>2.HAVING : 必须和 GROUP BY 一起使用作为整合性的限制 </p><p></p><p>复合性的查询 </p><p>SELECT * </p><p>FROM table_name1 </p><p>WHERE EXISTS ( </p><p>SELECT * </p><p>FROM table_name2 </p><p>WHERE conditions ) </p><p>说明： </p><p>1.WHERE 的 conditions 可以是另外一个的 query </p><p>2.EXISTS 在此是指存在与否 </p><p>SELECT * </p><p>FROM table_name1 </p><p>WHERE column1 IN ( </p><p>SELECT column1 </p><p>FROM table_name2 </p><p>WHERE conditions ) </p><p>说明 </p><p>1. IN 後面接的是一个集合，表示column1 存在集合里面 </p><p>2. SELECT 出来的资料形态必须符合 column1 </p><p></p><p>其他查询 </p><p>SELECT * </p><p>FROM table_name1 </p><p>WHERE column1 LIKE ’x%’ </p><p>说明： </p><p>1.LIKE 必须和後面的’x%’ 相呼应表示以 x为开头的字串 </p><p>SELECT * </p><p>FROM table_name1 </p><p>WHERE column1 IN (’xxx’,’yyy’,..) </p><p>说明 </p><p>1. IN 後面接的是一个集合，表示column1 存在集合里面 </p><p>SELECT * </p><p>FROM table_name1 </p><p>WHERE column1 BETWEEN xx AND yy </p><p>说明 </p><p>1. BETWEEN 表示 column1 的值介於 xx 和 yy 之间 </p><p></p><p>更改资料： </p><p>UPDATE table_name </p><p>SET column1=’xxx’ </p><p>WHERE conditoins </p><p>说明： </p><p>1.更改某个栏位设定其值为’xxx’ </p><p>2.conditions 是所要符合的条件、若没有 WHERE 则 </p><p>整个 table 的那个栏位都会全部被更改 </p><p></p><p>删除资料： </p><p>DELETE FROM table_name </p><p>WHERE conditions </p><p>说明：删除符合条件的资料</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/sql/">#sql</a></button></div></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a>&nbsp;<a href="/users/">users</a></div>&copy;2005-2099 diglog.com </div></div></body></html>