<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ä½¿ç”¨Apple Siliconï¼ˆM1ï¼‰ä½œä¸ºäº‘å·¥ç¨‹å¸ˆï¼Œå†æ—¶ä¸¤ä¸ªæœˆ Using Apple Silicon (M1) as a cloud engineer, two months in</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Using Apple Silicon (M1) as a cloud engineer, two months in<br/>ä½¿ç”¨Apple Siliconï¼ˆM1ï¼‰ä½œä¸ºäº‘å·¥ç¨‹å¸ˆï¼Œå†æ—¶ä¸¤ä¸ªæœˆ </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-04 02:54:57</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/3/9d3c75d26fdbd7ae516aef83d62c84c4.jpg"><img src="http://img2.diglog.com/img/2021/3/9d3c75d26fdbd7ae516aef83d62c84c4.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>So I&#39;ve been using my new M1-based MacBook Pro for a couple of months for a mix of development, email, and other things an  open-source maintainer does day-to-day.</p><p>å› æ­¤ï¼Œæˆ‘å‡ ä¸ªæœˆæ¥ä¸€ç›´åœ¨ä½¿ç”¨æ–°çš„åŸºäºM1çš„MacBook Proï¼Œä»¥è¿›è¡Œå¼€å‘ï¼Œç”µå­é‚®ä»¶å’Œå¼€æºç»´æŠ¤è€…æ—¥å¸¸å·¥ä½œçš„å…¶ä»–å·¥ä½œã€‚</p><p> The typical first reaction that you get when using this is &#34;it runs my Docker stack without sounding like a plane taking off??&#34;.</p><p> ä½¿ç”¨æ­¤åŠŸèƒ½æ—¶ï¼Œæ‚¨é€šå¸¸ä¼šæ”¶åˆ°çš„å…¸å‹ç¬¬ä¸€ååº”æ˜¯ï¼†ï¼ƒ34;å®ƒè¿è¡Œæˆ‘çš„Dockerå †æ ˆæ—¶å¬èµ·æ¥å¹¶ä¸åƒé£æœºè¦èµ·é£ã€‚</p><p> It&#39;s a pretty amazing piece of engineering, and in many ways, I think that the ARM architecture is the future. A number of fast-growing tech giants (besides Apple) are pouring a ton of money into making ARM work for a ton of use-cases: Nvidia (trying to  buy ARM Holdings from SoftBank) and Amazon (deep investment in the new  Graviton processors) are the two that primarily come to mind.</p><p> è¿™æ˜¯ä¸€ä¸ªéå¸¸äº†ä¸èµ·çš„å·¥ç¨‹ï¼Œä»å¾ˆå¤šæ–¹é¢æ¥è¯´ï¼Œæˆ‘è®¤ä¸ºARMä½“ç³»ç»“æ„æ˜¯æœªæ¥ã€‚è®¸å¤šå¿«é€Ÿå‘å±•çš„ç§‘æŠ€å·¨å¤´ï¼ˆé™¤è‹¹æœå…¬å¸ä¹‹å¤–ï¼‰æ­£æŠ•å…¥å¤§é‡èµ„é‡‘ä½¿ARMåœ¨å¤§é‡ç”¨ä¾‹ä¸­å‘æŒ¥ä½œç”¨ï¼šNvidiaï¼ˆè¯•å›¾ä»è½¯é“¶è´­ä¹°ARMæ§è‚¡å…¬å¸ï¼‰å’ŒAmazonï¼ˆå¯¹æ–°å‹Gravitonå¤„ç†å™¨çš„å·¨é¢æŠ•èµ„ï¼‰ ï¼‰æ˜¯æœ€å…ˆæƒ³åˆ°çš„ä¸¤ä¸ªã€‚</p><p> As you might know, in processors low energy consumption (and low heat dissipation) often equates to the ability to scale processing efficiently for large workloads. It also means longer battery cycles for non-cloud use-cases (less waste, more bang for the buck). This is why I think ARM is the future, even if it might take a decade for the mainstream cloud to migrate over.</p><p> å¦‚æ‚¨æ‰€çŸ¥ï¼Œåœ¨å¤„ç†å™¨ä¸­ï¼Œä½èƒ½è€—ï¼ˆå’Œä½æ•£çƒ­ï¼‰é€šå¸¸ç­‰åŒäºé’ˆå¯¹å¤§å‹å·¥ä½œè´Ÿè½½æœ‰æ•ˆæ‰©å±•å¤„ç†èƒ½åŠ›ã€‚å¯¹äºéäº‘è®¡ç®—ç”¨ä¾‹ï¼Œè¿™ä¹Ÿæ„å‘³ç€æ›´é•¿çš„ç”µæ± ç»­èˆªæ—¶é—´ï¼ˆæ›´å°‘çš„æµªè´¹ï¼Œæ›´å¤šçš„èŠ±é”€ï¼‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘è®¤ä¸ºARMæ˜¯æœªæ¥çš„åŸå› ï¼Œå³ä½¿ä¸»æµäº‘å¯èƒ½è¦èŠ±åå¹´çš„æ—¶é—´æ‰èƒ½è¿ç§»è¿‡æ¥ã€‚</p><p>   All the software I need to use &#34;just works&#34;. I found that if an ARM-native version is not available for an application, the emulated one works just fine and there&#39;s no performance drawback that I can notice. To emulate an application, you just need to install Rosetta 2. The OS will automatically detect that Rosetta is needed and prompt you to install it. However, you can also install it manually via</p><p>   æˆ‘éœ€è¦ä½¿ç”¨çš„æ‰€æœ‰è½¯ä»¶éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚æˆ‘å‘ç°ï¼Œå¦‚æœARMæœ¬åœ°ç‰ˆæœ¬ä¸é€‚ç”¨äºæŸä¸ªåº”ç”¨ç¨‹åºï¼Œåˆ™æ¨¡æ‹Ÿçš„ç‰ˆæœ¬å°±å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œå¹¶ä¸”æˆ‘ä¸ä¼šæ³¨æ„åˆ°ä»»ä½•æ€§èƒ½ä¸Šçš„ç¼ºé™·ã€‚è¦æ¨¡æ‹Ÿåº”ç”¨ç¨‹åºï¼Œæ‚¨åªéœ€è¦å®‰è£…Rosetta2ã€‚æ“ä½œç³»ç»Ÿå°†è‡ªåŠ¨æ£€æµ‹åˆ°éœ€è¦Rosettaï¼Œå¹¶æç¤ºæ‚¨å®‰è£…å®ƒã€‚ä½†æ˜¯ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰‹åŠ¨å®‰è£…</p><p>  The tools you use for development are likely still catching up to this architectural change, and will be for some time. We engineers sometimes use very low-level system capabilities. In some cases, I had to install preview editions of software, but everything worked very well for me. Here are some programs that I&#39;ve tested:</p><p>  æ‚¨ç”¨äºå¼€å‘çš„å·¥å…·å¯èƒ½ä»ä¼šèµ¶ä¸Šè¿™ç§ä½“ç³»ç»“æ„çš„æ›´æ”¹ï¼Œå¹¶ä¸”å°†æŒç»­ä¸€æ®µæ—¶é—´ã€‚æˆ‘ä»¬çš„å·¥ç¨‹å¸ˆæœ‰æ—¶ä¼šä½¿ç”¨éå¸¸ä½çº§çš„ç³»ç»ŸåŠŸèƒ½ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘å¿…é¡»å®‰è£…è½¯ä»¶çš„é¢„è§ˆç‰ˆï¼Œä½†æ˜¯ä¸€åˆ‡å¯¹æˆ‘æ¥è¯´éƒ½å¾ˆå¥½ã€‚è¿™æ˜¯æˆ‘æµ‹è¯•è¿‡çš„ä¸€äº›ç¨‹åºï¼š</p><p> âœ… VS Code. The amd64 version works perfectly well, however, the terminal will be an amd64 process, which may cause some programs to also run as amd64. The arm64 native version is available on the  VS Code Insiders and works really well.</p><p> âœ…VSä»£ç ã€‚ amd64ç‰ˆæœ¬å¯ä»¥å¾ˆå¥½åœ°è¿è¡Œï¼Œä½†æ˜¯ç»ˆç«¯å°†æ˜¯amd64è¿›ç¨‹ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æŸäº›ç¨‹åºä¹Ÿä»¥amd64çš„èº«ä»½è¿è¡Œã€‚åœ¨VS Code Insidersä¸Šå¯ä»¥ä½¿ç”¨arm64æœ¬æœºç‰ˆæœ¬ï¼Œå¹¶ä¸”æ•ˆæœéå¸¸å¥½ã€‚ </p><p> âœ… Docker. M1 native version is a must. Emulation doesn&#39;t have virtualization features, which the Docker app requires. You can download the  Docker App for M1, which is in preview. As mentioned on the documentation page, there are some limitations currently related to HTTP proxy, VPN clients, and performance, but the Docker team is making progress fast. (A month or two ago Kubernetes wasn&#39;t working, but now it is!).</p><p>âœ…ç å¤´ã€‚ M1æœ¬æœºç‰ˆæœ¬æ˜¯å¿…é¡»çš„ã€‚ä»¿çœŸä¸ä¼šå…·æœ‰è™šæ‹ŸåŒ–åŠŸèƒ½ï¼ŒDockeråº”ç”¨ç¨‹åºéœ€è¦è™šæ‹ŸåŒ–åŠŸèƒ½ã€‚æ‚¨å¯ä»¥ä¸ºM1ä¸‹è½½Dockeråº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨ç¨‹åºæ­£åœ¨é¢„è§ˆä¸­ã€‚å¦‚æ–‡æ¡£é¡µé¢ä¸Šæ‰€è¿°ï¼Œç›®å‰æœ‰ä¸€äº›å±€é™æ€§ä¸HTTPä»£ç†ï¼ŒVPNå®¢æˆ·ç«¯å’Œæ€§èƒ½ç›¸å…³ï¼Œä½†Dockerå›¢é˜Ÿæ­£åœ¨å¿«é€Ÿå–å¾—è¿›åº¦ã€‚ ï¼ˆä¸€ä¸ªæœˆæˆ–ä¸¤é¢—æœˆkubernetes wasnï¼†ï¼ƒ39; tå·¥ä½œï¼Œä½†ç°åœ¨æ˜¯ï¼ï¼‰ã€‚</p><p> I should also mention that during the first few weeks I had some issues with audio skips when using Bluetooth, but an OS update fixed it (just like  Apple promissed).</p><p> æˆ‘è¿˜åº”è¯¥æä¸€ä¸‹ï¼Œåœ¨å‰å‡ å‘¨å†…ï¼Œæˆ‘åœ¨ä½¿ç”¨è“ç‰™æ—¶å‘å‡ºéŸ³é¢‘è·³è¿‡çš„ä¸€äº›é—®é¢˜ï¼Œä½†æ“ä½œç³»ç»Ÿæ›´æ–°å›ºå®šå®ƒï¼ˆå°±åƒAppleæ‰¹å‡†ï¼‰ã€‚</p><p> I also use a âœ… YubiKey 5C Nano and a bunch of random peripherals like a âœ… USB microphone and a âœ… dock plugged into Ethernet.</p><p> æˆ‘è¿˜ä½¿ç”¨âœ…yubikey 5c nanoå’Œä¸€å †éšæœºå¤–å›´è®¾å¤‡ï¼Œå¦‚âœ…USBéº¦å…‹é£å’Œæ’å…¥ä»¥å¤ªç½‘çš„âœ…ç å¤´ã€‚</p><p>  âœ… Go.  1.16 RC adds support for building darwin/arm64 binaries. I built binaries in Docker and ran them natively. Works great.</p><p>  âœ…å»ã€‚ 1.16 RCä¸ºå»ºç«‹è¾¾å°”æ–‡/ ARM64äºŒè¿›åˆ¶æ–‡ä»¶å¢åŠ äº†æ”¯æŒã€‚æˆ‘åœ¨Dockerä¸­å»ºç«‹äº†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæœ¬èº«è·‘äº†å®ƒä»¬ã€‚ä¼Ÿå¤§çš„å·¥ä½œã€‚</p><p> ğŸŸ¡ Java and Scala. I had issues with the JVM, experiencing random process hangs. It seems that there are no official OpenJDK builds for aarch64, however there are some community options. See more info below.</p><p> ğŸŸ¡javaå’Œscalaã€‚æˆ‘æœ‰JVMçš„é—®é¢˜ï¼Œé‡åˆ°éšæœºè¿‡ç¨‹æŒ‚èµ·ã€‚ä¼¼ä¹æ²¡æœ‰AARCH64çš„å®˜æ–¹OpenJDKç‰ˆæœ¬ï¼Œä½†æœ‰ä¸€äº›ç¤¾åŒºé€‰é¡¹ã€‚æŸ¥çœ‹ä»¥ä¸‹ä¿¡æ¯ã€‚</p><p>  ğŸ”´ .Net didn&#39;t work for me natively nor emulated. I did not investigate why though.</p><p>  ğŸ”´.NETå¹¶æ²¡æœ‰ä¸ºæˆ‘å·¥ä½œï¼Œä¹Ÿæ²¡æœ‰æ¨¡ä»¿ã€‚æˆ‘æ²¡æœ‰è°ƒæŸ¥åŸå› ã€‚</p><p>     âœ… Ruby and Ruby on Rails works fine on native architecture in Docker. Minimal testing though.</p><p>     âœ…Rubyå’ŒRubyåœ¨Railsä¸Šå·¥ä½œåœ¨Dockerä¸­çš„æœ¬æœºæ¶æ„ä¸Šã€‚å°½é‡å°‘çš„æµ‹è¯•ã€‚ </p><p>  It&#39;s extremely easy to mistake the kind of architecture you run as. Rosetta 2 is that good.</p><p>å¼„é”™æ‚¨æ‰€è¿è¡Œçš„ä½“ç³»ç»“æ„éå¸¸å®¹æ˜“ã€‚ Rosetta 2å¾ˆå¥½ã€‚</p><p> The easiest way to tell the difference is by opening Activity Monitor and looking at the Architecture column: if it says  Apple, it&#39;s ARM. If it says  Intel, it&#39;s X86_64. Here&#39;s how I can tell that Zoom is an ARM process, while Spotify is an X86_64 process.</p><p> åŒºåˆ«çš„æœ€ç®€å•æ–¹æ³•æ˜¯æ‰“å¼€â€œæ´»åŠ¨ç›‘è§†å™¨â€ï¼Œç„¶åæŸ¥çœ‹â€œæ¶æ„â€åˆ—ï¼šå¦‚æœè¯´çš„æ˜¯Appleï¼Œå®ƒå°±æ˜¯ARMã€‚å¦‚æœæ˜¾ç¤ºIntelï¼Œåˆ™ä¸ºX86_64ã€‚è¿™æ˜¯æˆ‘å¦‚ä½•åˆ†è¾¨Zoomæ˜¯ARMè¿›ç¨‹ï¼Œè€ŒSpotifyæ˜¯X86_64è¿›ç¨‹ã€‚</p><p>   If you&#39;re not sure about the terminal you&#39;re using, you can type  uname -m. It&#39;ll say either  X86_64,  arm64 (mac) or  aarch64 (linux).  arm64 and  aarch64 are both ARM -  uname on Mac just reports it differently compared to Linux.</p><p>   å¦‚æœæ‚¨ä¸ç¡®å®šæ‰€ä½¿ç”¨çš„ç»ˆç«¯ï¼Œåˆ™å¯ä»¥é”®å…¥uname -mã€‚å®ƒä¼šè¯´X86_64ï¼Œarm64ï¼ˆmacï¼‰æˆ–aarch64ï¼ˆlinuxï¼‰ã€‚ arm64å’Œaarch64éƒ½æ˜¯ARM-ä¸Macç›¸æ¯”ï¼ŒMacä¸Šçš„unameæŠ¥å‘Šæœ‰æ‰€ä¸åŒã€‚</p><p>   One issue I encountered on both my M1 laptop and also a  MacStadium MacMini instance that we use for Mac testing is that Brew randomly started to complain about git missing. Not sure what the cause of this is, but it could be the fact that brew has been adding native arm support for many packages in the last few months and it&#39;s possible that this migration resulted in some inconsistencies. This is pure speculation, however, I&#39;ve not researched this.</p><p>   æˆ‘åœ¨M1ç¬”è®°æœ¬ç”µè„‘å’ŒMacStadium MacMiniå®ä¾‹ï¼ˆæˆ‘ä»¬ç”¨äºMacæµ‹è¯•ï¼‰ä¸Šé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯Brewéšæœºå¼€å§‹æŠ±æ€¨gitä¸¢å¤±ã€‚ä¸ç¡®å®šé€ æˆè¿™ç§æƒ…å†µçš„åŸå› æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯å¯èƒ½æ˜¯å› ä¸ºbrewåœ¨è¿‡å»å‡ ä¸ªæœˆä¸­ä¸€ç›´åœ¨ä¸ºè®¸å¤šè½¯ä»¶åŒ…æ·»åŠ æœ¬æœºæ”¯æŒï¼Œå¹¶ä¸”è¿™ç§è¿ç§»æœ‰å¯èƒ½å¯¼è‡´æŸäº›ä¸ä¸€è‡´ä¹‹å¤„ã€‚è¿™çº¯ç²¹æ˜¯çŒœæµ‹ï¼Œä½†æ˜¯ï¼Œæˆ‘è¿˜æ²¡æœ‰å¯¹æ­¤è¿›è¡Œç ”ç©¶ã€‚</p><p> (In any case, a very impressive effort to switch architecture so quickly for a project that hosts so many packages!)</p><p> ï¼ˆæ— è®ºå¦‚ä½•ï¼Œå¯¹äºæ‰¿è½½è¿™ä¹ˆå¤šç¨‹åºåŒ…çš„é¡¹ç›®ï¼Œå¦‚æ­¤å¿«é€Ÿåœ°åˆ‡æ¢ä½“ç³»ç»“æ„éƒ½æ˜¯ä¸€é¡¹éå¸¸ä»¤äººå°è±¡æ·±åˆ»çš„å·¥ä½œï¼ï¼‰</p><p> Back to fixing the issue now. Using  brew doctor I was able to find out that Xcode needed a (re)install. Easy:  xcode-select --install. However, the issue was still there. On the MacStadium instance, I was able to just uninstall brew and reinstall it and everything was fine. I was not as comfortable doing that on my laptop after having installed so much via casks. Instead, I was able to just remove the brew  git via  brew uninstall git and simply rely on  git from Xcode, which seems to work just fine. (If anyone reading this knows what&#39;s up with my brew&#39;s git and can tell me how to fix it, ping me on Twitter:  @vladaionescu)</p><p> å›åˆ°ç°åœ¨è§£å†³é—®é¢˜ã€‚ä½¿ç”¨brew doctorï¼Œæˆ‘å‘ç°Xcodeéœ€è¦é‡æ–°å®‰è£…ã€‚ç®€å•ï¼šxcode-select --installã€‚ä½†æ˜¯ï¼Œé—®é¢˜ä»ç„¶å­˜åœ¨ã€‚åœ¨MacStadiumå®ä¾‹ä¸Šï¼Œæˆ‘èƒ½å¤Ÿå¸è½½brewå¹¶é‡æ–°å®‰è£…å®ƒï¼Œä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚åœ¨é€šè¿‡æœ¨æ¡¶å®‰è£…äº†å¾ˆå¤šä¸œè¥¿ä¹‹åï¼Œæˆ‘åœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿™æ ·åšä¸å¤ªèˆ’æœã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘èƒ½å¤Ÿé€šè¿‡brew brewå¸è½½gitæ¥åˆ é™¤brew gitï¼Œå¹¶ä¸”ä»…ä¾èµ–äºXcodeçš„gitï¼Œè¿™ä¼¼ä¹è¿˜å¯ä»¥ã€‚ ï¼ˆå¦‚æœä»»ä½•äººé˜…è¯»æ­¤ä¹¦éƒ½çŸ¥é“æˆ‘çš„å•¤é…’gitæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¹¶å¯ä»¥å‘Šè¯‰æˆ‘å¦‚ä½•è§£å†³å®ƒï¼Œè¯·åœ¨Twitterä¸Šå¯¹æˆ‘æ‰§è¡Œpingæ“ä½œï¼š@vladaionescuï¼‰</p><p>  The Docker preview worked almost flawlessly for me from day 1. Making use of multi-platform images seems daunting at first, but really it&#39;s actually pretty simple.</p><p>  ä»ç¬¬ä¸€å¤©å¼€å§‹ï¼ŒDockeré¢„è§ˆå¯¹æˆ‘æ¥è¯´å‡ ä¹æ˜¯å®Œç¾æ— ç¼ºçš„ã€‚ä¸€å¼€å§‹ä½¿ç”¨å¤šå¹³å°å›¾åƒä¼¼ä¹ä»¤äººç”Ÿç•ï¼Œä½†å®é™…ä¸Šå®ƒéå¸¸ç®€å•ã€‚ </p><p> The Docker for Mac app comes packed with  QEMU out of the box - so Docker is able to run either arm64 and amd64 images. Most official images are now supported on arm64 too. If you&#39;re building an image, by default it&#39;ll use your native architecture to execute the build (arm64) and most things will usually just work. Your mileage may vary, however, if you are  curling some binary that may need to switch from  X86_64 to  aarch64 in its URL, or if you&#39;re doing lower-level stuff. I also noticed that some alpine packages are also not available for ARM (eg  shellcheck).</p><p>ç”¨äºMac Appçš„Dockerä¸Qemuä¸€èµ·æ‰“å¼€ç›’å­ - æ‰€ä»¥Dockerèƒ½å¤Ÿè¿è¡ŒARM64å’ŒAMD64å›¾åƒã€‚ç°åœ¨ï¼Œå¤§å¤šæ•°å®˜æ–¹å›¾åƒä¹Ÿæ”¯æŒARM64ã€‚å¦‚æœæ‚¨ï¼†ï¼ƒ39;é‡æ–°æ„å»ºå›¾åƒï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒï¼†ï¼ƒ39; llä½¿ç”¨æ‚¨çš„æœ¬åœ°ä½“ç³»ç»“æ„æ‰§è¡Œæ„å»ºï¼ˆarm64ï¼‰ï¼Œå¤§å¤šæ•°äº‹æƒ…é€šå¸¸åªéœ€å·¥ä½œã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ­£åœ¨å·æ›²æŸäº›äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯èƒ½éœ€è¦åœ¨å…¶URLä¸­ä»x86_64åˆ‡æ¢åˆ°AARCH64çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ–è€…æ‚¨ï¼†ï¼ƒ39;é‡æ–°æ‰§è¡Œè¾ƒä½çº§åˆ«çš„ä¸œè¥¿ã€‚æˆ‘ä¹Ÿæ³¨æ„åˆ°ä¸€äº›é˜¿å°”å‘æ–¯å±±åŒ…è£¹ä¹Ÿä¸é€‚ç”¨äºARMï¼ˆä¾‹å¦‚Shellcheckï¼‰ã€‚</p><p> The Docker team advise that QEMU is a best-effort approach and that it is best to run images natively as much as possible. I have encountered myself issues with some binaries when I tried to emulate them via QEMU. Here&#39;s a quote from  Sebastiaan van Stijn, member of the Moby Technical Steering Comitee (TSC).</p><p> Dockerå›¢é˜Ÿå»ºè®®Qemuæ˜¯ä¸€ç§æœ€ä½³æ–¹æ³•ï¼Œæœ€å¥½å°½å¯èƒ½åœ°è¿è¡Œå›¾åƒã€‚å½“æˆ‘è¯•å›¾é€šè¿‡qemuæ•ˆä»¿å®ƒä»¬æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™é‡Œçš„Sebastiaan Van Stijnçš„æŠ¥ä»·ï¼†ï¼ƒ39; MobyæŠ€æœ¯è½¬å‘Comiteeï¼ˆTSCï¼‰çš„æˆå‘˜ã€‚</p><p>  Almost all of the official images are available for either platform. Third party ones are a mixed bag, with most of the community only offering amd64 versions. As a sample, the  Kafka community image is amd64 only. The  Redis image is multi-platform. How can you tell? Go to the  Docker Hub page for a tag (eg  latest) and look for this dropdown. If the dropdown exists, it means that it&#39;s a multi-platform image.</p><p>  å‡ ä¹æ‰€æœ‰å®˜æ–¹å›¾åƒéƒ½é€‚ç”¨äºä»»ä½•ä¸€ä¸ªå¹³å°ã€‚ç¬¬ä¸‰æ–¹æ˜¯ä¸€ä¸ªæ··åˆåŒ…ï¼Œå¤§éƒ¨åˆ†ç¤¾åŒºéƒ½åªæä¾›äº†AMD64ç‰ˆæœ¬ã€‚ä½œä¸ºæ ·æœ¬ï¼ŒKafkaç¤¾åŒºå½¢è±¡ä»…ä¸ºAMD64ã€‚ Redis Imageæ˜¯å¤šå¹³å°çš„ã€‚ä½ æ€ä¹ˆçŸ¥é“ï¼Ÿè½¬åˆ°Docker Hubé¡µé¢ä»¥è·å–æ ‡è®°ï¼ˆä¾‹å¦‚æœ€æ–°ï¼‰å¹¶æŸ¥æ‰¾æ­¤ä¸‹æ‹‰åˆ—è¡¨ã€‚å¦‚æœå­˜åœ¨ä¸‹æ‹‰ç›®ï¼Œåˆ™æ„å‘³ç€å®ƒï¼†ï¼ƒ39; så¤šå¹³å°å›¾åƒã€‚</p><p>  To build an image for a different architecture, you can use  docker buildx build --platform=linux/amd64 . instead of the usual  docker build .. For more details on building multi-platform images see  Akihiro Suda&#39;s blog.</p><p>  è¦ä¸ºä¸åŒçš„ä½“ç³»ç»“æ„æ„å»ºå›¾åƒï¼Œå¯ä»¥ä½¿ç”¨Docker BuildX Build --platform = Linux / AMD64ã€‚è€Œä¸æ˜¯é€šå¸¸çš„Docker Build ..æœ‰å…³å»ºè®¾å¤šå¹³å°å›¾åƒçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…Akihiro Sudaï¼†ï¼ƒ39; såšå®¢ã€‚</p><p> If you  docker pull an image from the registry, it will again default to your native architecture (if available), unless you specify  --platform=linux/amd64.</p><p> å¦‚æœç å¤´ä»æ³¨å†Œè¡¨ä¸­æå–å›¾åƒï¼Œåˆ™å°†é»˜è®¤ä¸ºæ‚¨çš„æœ¬æœºæ¶æ„ï¼ˆå¦‚æœå¯ç”¨ï¼‰ï¼Œé™¤éæ‚¨æŒ‡å®š--platform = linux / amd64ã€‚</p><p> If you  docker run an image, it will default to whatever version of the image you have available locally or it will attempt to pull the arm64 version from the registry. You can also override the platform via  --platform=linux/amd64 if you&#39;d like to run the amd64 version specifically.</p><p> å¦‚æœæ‚¨åœæ”¾è¿è¡Œå›¾åƒï¼Œå®ƒå°†é»˜è®¤ä¸ºæ‚¨åœ¨æœ¬åœ°å¯ç”¨çš„å›¾åƒçš„ä»»ä½•ç‰ˆæœ¬ï¼Œæˆ–è€…å®ƒå°†å°è¯•ä»æ³¨å†Œè¡¨ä¸­æå–ARM64ç‰ˆæœ¬ã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡--platform = linux / amd64æ¥è¦†ç›–å¹³å°ï¼Œå¦‚æœæ‚¨ï¼†ï¼ƒ39; dä¸“é—¨è¿è¡ŒAMD64ç‰ˆæœ¬ã€‚</p><p>  Docker Compose will happily run a mixture of various architectures. The same rules apply with regards to pulling and running. You can also specify  platform: linux/amd64 for the service definition in  docker-compose.yml if you&#39;d like to be specific.</p><p>  Docker Composeä¼šæ„‰å¿«åœ°è¿è¡Œå„ç§æ¶æ„çš„æ··åˆã€‚ç›¸åŒçš„è§„åˆ™é€‚ç”¨äºæ‹‰åŠ¨å’Œè¿è¡Œã€‚æ‚¨è¿˜å¯ä»¥æŒ‡å®šå¹³å°ï¼šLinux / AMD64ï¼Œç”¨äºDocker-Compose.ymlä¸­çš„æœåŠ¡å®šä¹‰ï¼Œå¦‚æœæ‚¨å–œæ¬¢å…·ä½“ã€‚ </p><p> One thing to note is that Docker-in-Docker is not supported by QEMU ( abandoned PR here). So you cannot run an arm64 Docker in an amd64 Docker or vice-versa.  However, if you run your natively-supported Docker-in-Docker, the inner Docker can still run multi-platform images fine.</p><p>éœ€è¦æ³¨æ„çš„ä¸€ä»¶äº‹æ˜¯ï¼ŒQEMUä¸æ”¯æŒDocker-in-Dockerï¼ˆæ­¤å¤„ä¸å†ä½¿ç”¨PRï¼‰ã€‚å› æ­¤ï¼Œæ‚¨ä¸èƒ½åœ¨amd64 Dockerä¸­è¿è¡Œarm64 Dockerï¼Œåä¹‹äº¦ç„¶ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨è¿è¡Œæœ¬æœºæ”¯æŒçš„Docker-in-Dockerï¼Œåˆ™å†…éƒ¨Dockerä»ç„¶å¯ä»¥å¾ˆå¥½åœ°è¿è¡Œå¤šå¹³å°æ˜ åƒã€‚</p><p> Another issue that I noticed with the Docker preview on the M1 is that there are currently performance issues with multi-processor use - so much so that performance using a single core is sometimes slightly better than the performance of using 8 cores. Or at least that&#39;s what  @jasmas claims. I&#39;ve also seen some  benchmarks testing the import of a database like MySQL, and it seems that there are some clear performance issues (~25X) with the Apple virtualization API. I&#39;ve not seen such a drastic difference in common use, but hopefully these are addressed soon.</p><p> æˆ‘åœ¨M1ä¸Šçš„Dockeré¢„è§ˆä¸­æ³¨æ„åˆ°çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå½“å‰ä½¿ç”¨å¤šå¤„ç†å™¨å­˜åœ¨æ€§èƒ½é—®é¢˜-å¦‚æ­¤ä¹‹å¤šï¼Œä»¥è‡³äºä½¿ç”¨å•æ ¸çš„æ€§èƒ½æœ‰æ—¶ä¼šæ¯”ä½¿ç”¨8æ ¸çš„æ€§èƒ½ç¨å¥½ã€‚æˆ–è€…è‡³å°‘æ˜¯@jasmaså£°ç§°çš„ã€‚æˆ‘è¿˜çœ‹åˆ°äº†ä¸€äº›åŸºå‡†æµ‹è¯•äº†MySQLä¹‹ç±»çš„æ•°æ®åº“çš„å¯¼å…¥ï¼Œå¹¶ä¸”çœ‹æ¥è‹¹æœè™šæ‹ŸåŒ–APIå­˜åœ¨ä¸€äº›æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ï¼ˆçº¦25å€ï¼‰ã€‚æˆ‘æ²¡æœ‰çœ‹åˆ°è¿™ç§å¸¸ç”¨ç”¨æ³•æœ‰å¦‚æ­¤å¤§çš„å·®å¼‚ï¼Œä½†å¸Œæœ›è¿™äº›é—®é¢˜èƒ½å°½å¿«è§£å†³ã€‚</p><p>  Native support for Apple Silicon is not yet available in the generally available VS Code version, but running the amd64 emulated version works pretty well. You can also use the native version via a VS Code Universal build (contains both architectures in a single package) available via  VS Code Insiders.</p><p>  é€šç”¨çš„VS Codeç‰ˆæœ¬å°šæœªæä¾›å¯¹Apple Siliconçš„æœ¬åœ°æ”¯æŒï¼Œä½†è¿è¡Œamd64ä»¿çœŸç‰ˆæœ¬çš„æ•ˆæœå¾ˆå¥½ã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡VS Code Insidersæä¾›çš„VS Code Universalç‰ˆæœ¬ï¼ˆåœ¨å•ä¸ªè½¯ä»¶åŒ…ä¸­åŒ…å«ä¸¤ç§ä½“ç³»ç»“æ„ï¼‰ä½¿ç”¨æœ¬æœºç‰ˆæœ¬ã€‚</p><p> An issue I ran into with the amd64 version was that I did not realize that the terminal was also an amd64 process (Again, Rosetta 2 is just that good). In some situations, this led to some strange issues when running Docker, where QEMU was acting up with segmentation faults. After some head-scratching the issue was resolved by switching to the ARM-based VS Code Insiders edition.</p><p> æˆ‘åœ¨ä½¿ç”¨amd64ç‰ˆæœ¬æ—¶é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘æ²¡æœ‰æ„è¯†åˆ°ç»ˆç«¯æœºä¹Ÿæ˜¯amd64è¿›ç¨‹ï¼ˆåŒæ ·ï¼ŒRosetta 2ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¼šå¯¼è‡´è¿è¡ŒDockeræ—¶å‡ºç°ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ï¼Œå…¶ä¸­QEMUæ­£åœ¨å¤„ç†åˆ†æ®µé”™è¯¯ã€‚ç»è¿‡ä¸€ç•ªåŠªåŠ›ä¹‹åï¼Œé€šè¿‡åˆ‡æ¢åˆ°åŸºäºARMçš„VS Code Insidersç‰ˆæœ¬è§£å†³äº†è¯¥é—®é¢˜ã€‚</p><p>  We&#39;ve added support for Apple M1 in Earthly and so far it&#39;s working wonderfully. This is in Beta, so if you end up giving this a try - we&#39;d appreciate any feedback you can give us via  GitHub issues or in our  Slack.</p><p>  æˆ‘ä»¬å·²ç»åœ¨Earthlyä¸­å¢åŠ äº†å¯¹Apple M1çš„æ”¯æŒï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®ƒçš„è¿è¡Œéå¸¸å‡ºè‰²ã€‚è¿™æ˜¯Betaç‰ˆï¼Œå› æ­¤å¦‚æœæ‚¨å°è¯•ä¸€ä¸‹-æˆ‘ä»¬éå¸¸æ„Ÿè°¢æ‚¨å¯ä»¥é€šè¿‡GitHubé—®é¢˜æˆ–åœ¨Slackä¸­ç»™æˆ‘ä»¬æä¾›ä»»ä½•åé¦ˆã€‚</p><p> One useful Earthly trick I&#39;ve used a lot is that if one part of your build has not yet been ported to amd64, you can simply mark it as  --platform=linux/amd64 - and thus only that part will execute on amd64. The rest will run natively. This is relatively rare, however - most Docker builds just work across either platform. Our  examples build is pretty representative. There&#39;s also an extensive guide on  multi-platform builds with Earthly.</p><p> æˆ‘ç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªå®ç”¨çš„å®ç”¨æŠ€å·§æ˜¯ï¼Œå¦‚æœå°šæœªå°†æ„å»ºçš„ä¸€éƒ¨åˆ†ç§»æ¤åˆ°amd64ï¼Œåˆ™åªéœ€å°†å…¶æ ‡è®°ä¸º--platform = linux / amd64-å› æ­¤åªæœ‰è¯¥éƒ¨åˆ†å¯ä»¥åœ¨amd64ã€‚å…¶ä½™çš„å°†åœ¨æœ¬åœ°è¿è¡Œã€‚ä½†æ˜¯ï¼Œè¿™æ˜¯ç›¸å¯¹ç½•è§çš„-å¤§å¤šæ•°Dockeræ„å»ºéƒ½å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªå¹³å°ä¸Šå·¥ä½œã€‚æˆ‘ä»¬çš„ç¤ºä¾‹æ„å»ºéå¸¸å…·æœ‰ä»£è¡¨æ€§ã€‚è¿˜æä¾›äº†æœ‰å…³Earthlyçš„å¤šå¹³å°æ„å»ºçš„è¯¦å°½æŒ‡å—ã€‚</p><p>  You don&#39;t necessarily need to build  darwin/arm64 binaries to run them on M1. Rosetta 2 emulation works great on Intel ones. If you want to, however,  Go 1.16 RC just added support for this.</p><p>  æ‚¨ä¸å¿…æ„å»ºdarwin / arm64äºŒè¿›åˆ¶æ–‡ä»¶å³å¯åœ¨M1ä¸Šè¿è¡Œå®ƒä»¬ã€‚ Rosetta 2ä»¿çœŸåœ¨Intelä¸Šéå¸¸æœ‰æ•ˆã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ„¿æ„ï¼ŒGo 1.16 RCåˆšåˆšæ·»åŠ äº†å¯¹æ­¤çš„æ”¯æŒã€‚ </p><p>  I ran into issues when using the JVM. After investigating online, it seems that OpenJDK is not yet available for the M1. The way this was manifesting for me was that the JVM process would just hang randomly. By using  --platform=linux/amd64 in Docker or in Earthly builds, I was able to get OpenJDK to work most of the time, but I&#39;m still seeing random hangs.</p><p>ä½¿ç”¨JVMæ—¶é‡åˆ°é—®é¢˜ã€‚åœ¨çº¿è°ƒæŸ¥ä¹‹åï¼Œä¼¼ä¹OpenJDKå°šæœªå¯ç”¨äºM1ã€‚å¯¹æˆ‘è€Œè¨€ï¼Œè¿™è¡¨ç°å‡ºæ¥çš„æ–¹å¼æ˜¯JVMè¿›ç¨‹å°†éšæœºæŒ‚èµ·ã€‚é€šè¿‡åœ¨Dockeræˆ–Earthlyç‰ˆæœ¬ä¸­ä½¿ç”¨--platform = linux / amd64ï¼Œæˆ‘èƒ½å¤Ÿä½¿OpenJDKå¤§éƒ¨åˆ†æ—¶é—´éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯æˆ‘ä»ç„¶çœ‹åˆ°éšæœºæŒ‚èµ·ã€‚</p><p> According to this  StackOverflow thread, there are  Azul-provided builds of the Zulu JDK for the M1 and also  Microsoft has put up an aarch64 build for the OpenJDK too. I have not tested these so I can&#39;t say whether they work well or not.</p><p> æ ¹æ®æ­¤StackOverflowçº¿ç¨‹ï¼Œå­˜åœ¨Azulä¸ºM1æä¾›çš„Zulu JDKæ„å»ºï¼Œå¹¶ä¸”Microsoftä¹Ÿä¸ºOpenJDKå»ºç«‹äº†aarch64æ„å»ºã€‚æˆ‘æ²¡æœ‰æµ‹è¯•è¿™äº›ï¼Œæ‰€ä»¥æˆ‘ä¸èƒ½è¯´å®ƒä»¬æ˜¯å¦è¿ä½œè‰¯å¥½ã€‚</p><p>  One of the things I noticed about my new laptop is that everything opens up really fast and the awake from sleep time is also really low. These are sub-second differences though so you might not notice it - or maybe it&#39;s a placebo acting up on me and there&#39;s no real difference :-)</p><p>  å…³äºæ–°ç¬”è®°æœ¬ç”µè„‘ï¼Œæˆ‘æ³¨æ„åˆ°çš„ä¸€ä»¶äº‹æ˜¯ï¼Œä¸€åˆ‡æ‰“å¼€éƒ½éå¸¸å¿«ï¼Œè€Œä»ç¡çœ æ—¶é—´ä¸­å”¤é†’çš„æ—¶é—´ä¹Ÿå¾ˆçŸ­ã€‚ä¸è¿‡ï¼Œè¿™äº›å·®å¼‚æ˜¯ä¸åˆ°ä¸€ç§’çš„å·®å¼‚ï¼Œå› æ­¤æ‚¨å¯èƒ½ä¸ä¼šæ³¨æ„åˆ°-ä¹Ÿè®¸è¿™æ˜¯å®‰æ…°å‰‚å¯¹æˆ‘èµ·ä½œç”¨ï¼Œå¹¶ä¸”æ²¡æœ‰çœŸæ­£çš„å·®å¼‚:-)</p><p> Docker is currently slower, however, as mentioned above, due to the multi-core issue. As far as I can tell the difference is approximately 1.75X compared to an Intel MacBook Pro. I would assume that this will be fixed in a future preview of the Docker for Mac app.</p><p> å¦‚ä¸Šæ‰€è¿°ï¼Œç”±äºå¤šæ ¸é—®é¢˜ï¼ŒDockerç›®å‰è¾ƒæ…¢ã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œä¸Intel MacBook Proç›¸æ¯”ï¼Œå·®å¼‚çº¦ä¸º1.75å€ã€‚æˆ‘è®¤ä¸ºè¿™å°†åœ¨å°†æ¥çš„Docker for Macåº”ç”¨ç¨‹åºé¢„è§ˆä¸­ä¿®å¤ã€‚</p><p>  Battery life on the M1 is really really really good - half a day of Zoom meetings + email only took 20% of my battery. I work from home a lot, so I don&#39;t use this much. But it&#39;s great to know it really lasts for a serious coding session if I needed it on the go.</p><p>  M1çš„ç”µæ± ç»­èˆªæ—¶é—´çœŸçš„éå¸¸å¥½-å˜ç„¦ä¼šè®®å’Œç”µå­é‚®ä»¶çš„åŠå¤©æ—¶é—´ä»…æ¶ˆè€—äº†æˆ‘20ï¼…çš„ç”µæ± ç”µé‡ã€‚æˆ‘å¾ˆå¤šæ—¶å€™åœ¨å®¶å·¥ä½œï¼Œæ‰€ä»¥æˆ‘ä¸ç»å¸¸ä½¿ç”¨ã€‚ä½†æ˜¯å¾ˆé«˜å…´çŸ¥é“ï¼Œå¦‚æœæˆ‘åœ¨æ—…â€‹â€‹é€”ä¸­éœ€è¦å®ƒçš„è¯ï¼Œå®ƒç¡®å®å¯ä»¥æŒç»­å¾ˆé•¿æ—¶é—´ã€‚</p><p>  I can&#39;t talk about the M1 without mentioning the cost of the setup. It has very similar specs to the Intel MBP I bought last year, but it&#39;s a whole $1000 cheaper. It&#39;s crazy. I don&#39;t know why - it feels really performant for the most part, it makes no noise, and it has a long-lasting battery.</p><p>  æˆ‘ä¸èƒ½ä¸è°ˆèµ·M1çš„å®‰è£…æˆæœ¬ã€‚å®ƒçš„è§„æ ¼ä¸æˆ‘å»å¹´è´­ä¹°çš„Intel MBPéå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯ä¾¿å®œäº†æ•´æ•´1000ç¾å…ƒã€‚å¤ªç–¯ç‹‚äº†ã€‚æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆ-åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒæ„Ÿè§‰ç¡®å®å¾ˆå‡ºè‰²ï¼Œæ²¡æœ‰å™ªéŸ³ï¼Œå¹¶ä¸”ç”µæ± å¯¿å‘½å¾ˆé•¿ã€‚</p><p> I think the strategy here is that this will be the low-end MacBook Pro of the line-up, while a future Apple Silicon-based one will have even beefier specs.</p><p> æˆ‘è®¤ä¸ºè¿™é‡Œçš„ç­–ç•¥æ˜¯ï¼Œè¿™å°†æ˜¯è¯¥äº§å“çº¿ä¸­çš„ä½ç«¯MacBook Proï¼Œè€Œæœªæ¥åŸºäºApple Siliconçš„äº§å“å°†å…·æœ‰æ›´å¼ºå¤§çš„è§„æ ¼ã€‚ </p><p>  As you can see, my workflow is very much Docker-heavy. Docker seems to be working well enough for me and it&#39;s taken away any possible pain that may be associated with individual language ecosystem tooling.</p><p>å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘çš„å·¥ä½œæµç¨‹éå¸¸ç¹çã€‚ Dockerå¯¹æˆ‘æ¥è¯´ä¼¼ä¹è¿ä½œè‰¯å¥½ï¼Œå®ƒæ¶ˆé™¤äº†ä¸å•ä¸ªè¯­è¨€ç”Ÿæ€ç³»ç»Ÿå·¥å…·æœ‰å…³çš„ä»»ä½•å¯èƒ½çš„ç—›è‹¦ã€‚</p><p> For most binaries, if they don&#39;t work across platforms natively, Rosetta 2 works wonders on them, or  --platform=linux/amd64 in Docker is all that is needed. The JVM issues were the only ones I could not figure out completely - but also, I did not spend time trying out the Microsoft-provided OpenJDK build or the Zulu JVM.</p><p> å¯¹äºå¤§å¤šæ•°äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚æœå®ƒä»¬ä¸èƒ½åœ¨æœ¬åœ°å¹³å°ä¸Šè¿è¡Œï¼Œåˆ™Rosetta 2å¯ä»¥åœ¨å®ƒä»¬ä¸Šé¢äº§ç”Ÿå¥‡è¿¹ï¼Œæˆ–è€…åªéœ€è¦Dockerä¸­çš„--platform = linux / amd64å³å¯ã€‚ JVMé—®é¢˜æ˜¯æˆ‘æ— æ³•å®Œå…¨è§£å†³çš„å”¯ä¸€é—®é¢˜-è€Œä¸”ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰èŠ±æ—¶é—´å»å°è¯•Microsoftæä¾›çš„OpenJDKæ„å»ºæˆ–Zulu JVMã€‚</p><p> Overall I&#39;m happy with my M1. I like bleeding-edge technology, and I had to use preview versions of some software, but had no major issues in my typical workflow. I&#39;m surprised how well most things just work.</p><p> æ€»ä½“è€Œè¨€ï¼Œæˆ‘å¯¹æˆ‘çš„M1æ„Ÿåˆ°æ»¡æ„ã€‚æˆ‘å–œæ¬¢æœ€å‰æ²¿çš„æŠ€æœ¯ï¼Œå¹¶ä¸”ä¸å¾—ä¸ä½¿ç”¨æŸäº›è½¯ä»¶çš„é¢„è§ˆç‰ˆï¼Œä½†æ˜¯åœ¨æˆ‘çš„å…¸å‹å·¥ä½œæµç¨‹ä¸­æ²¡æœ‰ä¸»è¦é—®é¢˜ã€‚æˆ‘å¾ˆæƒŠè®¶å¤§å¤šæ•°äº‹æƒ…çš„æ•ˆæœå¦‚ä½•ã€‚</p><p> If you&#39;re a developer and your coding productivity depends on your laptop, I would triple check that my setup works as expected on an ARM architecture before making a purchase. For the most part you should be fine outside the Java / Scala world - but you never know! QEMU can be hit or miss sometimes.</p><p> å¦‚æœæ‚¨æ˜¯å¼€å‘äººå‘˜ï¼Œè€Œæ‚¨çš„ç¼–ç æ•ˆç‡å–å†³äºæ‚¨çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œé‚£ä¹ˆåœ¨è´­ä¹°ä¹‹å‰ï¼Œæˆ‘ä¼šä¸‰éæ£€æŸ¥æˆ‘çš„è®¾ç½®æ˜¯å¦å¯ä»¥åœ¨ARMæ¶æ„ä¸Šæ­£å¸¸å·¥ä½œã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨åœ¨Java / Scalaä¸–ç•Œä¹‹å¤–åº”è¯¥è¿˜ä¸é”™-ä½†æ‚¨æ°¸è¿œä¸ä¼šçŸ¥é“ï¼ QEMUæœ‰æ—¶ä¼šè¢«å‡»ä¸­æˆ–é”™è¿‡ã€‚</p><p> If you&#39;re not a developer, or only use your laptop for browsing and email, I really don&#39;t see any reason why you would pick an Intel MacBook over this one. I would also assume that the MacBook Air version is also amazing (unlike the Intel version of MacBook Air, which is often on the slow side for modern web browsing). The M1 chip is very similar between Pro and Air and there&#39;s no need for fans.</p><p> å¦‚æœæ‚¨ä¸æ˜¯å¼€å‘äººå‘˜ï¼Œæˆ–è€…ä»…ä½¿ç”¨ç¬”è®°æœ¬ç”µè„‘æµè§ˆå’Œå‘é€ç”µå­é‚®ä»¶ï¼Œé‚£ä¹ˆæˆ‘çœŸçš„çœ‹ä¸åˆ°ä¸ºä»€ä¹ˆæ‚¨ä¼šåœ¨æ­¤ç¬”è®°æœ¬ç”µè„‘ä¸Šé€‰æ‹©Intel MacBookçš„ä»»ä½•åŸå› ã€‚æˆ‘è¿˜è¦å‡è®¾MacBook Airç‰ˆæœ¬ä¹Ÿå¾ˆæ£’ï¼ˆä¸Intelç‰ˆæœ¬çš„MacBook Airä¸åŒï¼Œåè€…é€šå¸¸åœ¨ç°ä»£Webæµè§ˆä¸­é€Ÿåº¦è¾ƒæ…¢ï¼‰ã€‚ M1èŠ¯ç‰‡åœ¨Proå’ŒAirä¹‹é—´éå¸¸ç›¸ä¼¼ï¼Œå› æ­¤ä¸éœ€è¦é£æ‰‡ã€‚ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.earthly.dev/using-apple-silicon-m1-as-a-cloud-engineer-two-months-in/">https://blog.earthly.dev/using-apple-silicon-m1-as-a-cloud-engineer-two-months-in/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/silicon/">#silicon</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/docker/">#docker</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>