<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ä¸ºä»€ä¹ˆJavaçš„è®°å½•æ¯”Lombokçš„æ•°æ®å’ŒKotlinçš„æ•°æ®ç±»æ›´å¥½* Why Java's Records Are Better* Than Lombok's Data and Kotlin's Data Classes</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Why Java's Records Are Better* Than Lombok's Data and Kotlin's Data Classes<br/>ä¸ºä»€ä¹ˆJavaçš„è®°å½•æ¯”Lombokçš„æ•°æ®å’ŒKotlinçš„æ•°æ®ç±»æ›´å¥½* </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-08 00:14:53</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/f0d30e94d18bf352a09ddc6e31fbb8fb.jpg"><img src="http://img2.diglog.com/img/2021/5/f0d30e94d18bf352a09ddc6e31fbb8fb.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>I&#39;m sure by now you&#39;ve all seen the examples of how records turn a full-blown POJO ...</p><p>æˆ‘è‚¯å®šæ˜¯ç°åœ¨ä½ ï¼†ï¼ƒ39; veå…¨éƒ½çœ‹åˆ°äº†è®°å½•å¦‚ä½•å˜æˆå…¨å¹çš„pojo ......</p><p> class    {	 private  final  int low ;	 private  final  int high ;	 public   ( int low ,  int high )  {		 this .low  = low ;		 this .high  = high ;	 }	 public  int  getLow ( )  {		 return low ;	 }	 public  int  getHigh ( )  {		 return high ;	 }	 @Override	 public  boolean  equals (  o )  {		 if  ( this  == o )			 return  true ;		 if  (o  ==  null  ||  getClass ( )  != o . getClass ( ) )			 return  false ;		  range  =  (  ) o ;		 return low  == range .low  &amp;&amp;				high  == range .high ;	 }	 @Override	 public  int  hashCode ( )  {		 return   . hash (low , high ) ;	 }	 @Override	 public    toString ( )  {		 return  &#34;[&#34;  + low  +  &#34;; &#34;  + high  +  &#34;]&#34; ;	 } }</p><p> ç­çº§{ç§äººå†³èµ›INTä½;ç§äººå†³èµ›INTé«˜;å…¬å…±ï¼ˆInt Lowï¼ŒInt Highï¼‰{è¿™ä¸ª.Low =ä½;è¿™ä¸ªã€‚é«˜=é«˜; public int getlowï¼ˆï¼‰{è¿”å›ä½; public int gethighï¼ˆï¼‰{è¿”å›é«˜; @Overrideå…¬å…±å¸ƒå°”ç­‰äºï¼ˆoï¼‰{å¦‚æœï¼ˆè¿™== oï¼‰è¿”å›true; ifï¼ˆo == null || getClassï¼ˆï¼‰ï¼= oã€‚getClassï¼ˆï¼‰ï¼‰è¿”å›false;èŒƒå›´=ï¼ˆï¼‰o;è¿”å›ä½==èŒƒå›´.Lowï¼†amp;ï¼†amp;é«˜==èŒƒå›´ã€‚é«˜åº¦; @Override public int hashcodeï¼ˆï¼‰{returnã€‚å“ˆå¸Œï¼ˆä½ï¼Œé«˜ï¼‰; @Override Public ToStringï¼ˆï¼‰{è¿”å›ï¼†ï¼ƒ34; [ï¼†ï¼ƒ34; +ä½+ï¼†ï¼ƒ34 ;; ï¼†ï¼ƒ34; +é«˜+ï¼†ï¼ƒ34;]ï¼†ï¼ƒ34; ; }}</p><p>   Of course Lombok&#39;s   @Data or   @Value (depending on your needs) could do that for years with a few more lines:</p><p>   å½“ç„¶é¾™ç›®åƒï¼†ï¼ƒ39; s @dataæˆ–@valueï¼ˆå–å†³äºæ‚¨çš„éœ€æ±‚ï¼‰å¯èƒ½ä¼šè¿™æ ·åšå¤šå¹´æ¥å‡ å¹´ï¼š</p><p>    So these are essentially the same features right?No.No, they&#39;re really not.Because for records, boilerplate reduction is not the purpose, it&#39;s just a (welcome) consequence of their semantics.</p><p>    æ‰€ä»¥è¿™äº›åŸºæœ¬ä¸Šæ˜¯å³è¾¹çš„ç‰¹å¾ï¼ŸNo.Noï¼Œä»–ä»¬çœŸçš„ä¸æ˜¯ã€‚å› ä¸ºå¯¹äºè®°å½•è€Œè¨€ï¼Œæ°´æ¿å‡å°‘ä¸æ˜¯ç›®çš„ï¼Œå®ƒï¼†ï¼ƒ39;åªæ˜¯ä¸€ä¸ªï¼ˆæ¬¢è¿ï¼‰ä»–ä»¬çš„è¯­ä¹‰çš„ç»“æœã€‚</p><p>  Unfortunately, this gets easily lost.The boilerplate reduction is obvious and sexy and easy to demonstrate, so it gets a lot of exposure.But the semantics and their benefits don&#39;t.It doesn&#39;t help that  the official documentation also takes the boilerplate angle and while  JEP 395 better explains the semantics, due to its scope it&#39;s naturally vague when it comes to describing the downstream benefits.So I thought I&#39;d write them down here.</p><p>  ä¸å¹¸çš„æ˜¯ï¼Œè¿™å¾ˆå®¹æ˜“ä¸¢å¤±ã€‚é™ä½æ°´æ¿æ˜¯æ˜¾è€Œæ˜“è§çš„å’Œæ€§æ„Ÿä¸”æ˜“äºè¯æ˜çš„ï¼Œæ‰€ä»¥å®ƒå¾—åˆ°äº†å¾ˆå¤šæ›å…‰ã€‚ä½†æ˜¯è¯­ä¹‰å’Œä»–ä»¬çš„å¥½å¤„Donï¼†ï¼ƒ39; t.it nonnï¼†ï¼ƒ39; tå¸®åŠ©é‚£ä¸ªå®˜æ–¹æ–‡ä»¶è¿˜é‡‡ç”¨äº†æ ·æ¿è§’åº¦ï¼Œè€ŒMEP 395æ›´å¥½åœ°è§£é‡Šäº†è¯­ä¹‰ï¼Œç”±äºå…¶èŒƒå›´ï¼Œç”±äºå…¶èŒƒå›´ï¼†ï¼ƒ39;åœ¨æè¿°ä¸‹æ¸¸ä¼˜åŠ¿æ—¶è‡ªç„¶æ¨¡ç³Šã€‚æ‰€ä»¥æˆ‘è®¤ä¸ºæˆ‘åœ¨è¿™é‡Œå†™ä¸‹å®ƒä»¬ã€‚</p><p>      So by creating a record you&#39;re telling the compiler, your colleagues, the whole wide world that this type is about data.More precisely, data that&#39;s (shallowly) immutable and transparently accessible.That&#39;s the core semantic - everything else follows from here.</p><p>      æ‰€ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªè®°å½•ä½ ï¼†ï¼ƒ39;é‡æ–°å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œä½ çš„åŒäº‹ï¼Œè¿™ç§ç±»å‹çš„æ•´ä¸ªä¸–ç•Œéƒ½æ˜¯å…³äºdataçš„å…¨éƒ¨ä¸–ç•Œã€‚æ°å¥½ï¼Œï¼†ï¼ƒ39; sï¼ˆæµ…ï¼‰ä¸å¯å˜ä¸”é€æ˜åœ°è®¿é—®çš„æ•°æ®ã€‚è¿™æ˜¯ï¼†ï¼ƒ39; sæ ¸å¿ƒè¯­ä¹‰ - å…¶ä»–ä¸€åˆ‡éƒ½ä»è¿™é‡Œéµå¾ªã€‚</p><p> If this semantic doesn&#39;t apply to the type you want to create, then you shouldn&#39;t create a record.If you do it anyways (maybe lured in by the promise of no boilerplate or because you think records are equivalent to   @Data/  @Value or data classes), you&#39;re muddying your design and chances are good that it will come back to bite you.So don&#39;t.</p><p> å¦‚æœè¿™ä¸ªè¯­ä¹‰ä¸é€‚ç”¨äºä½ æƒ³è¦åˆ›å»ºçš„ç±»å‹ï¼Œé‚£ä¹ˆä½ åº”è¯¥åˆ›å»ºä¸€ä¸ªè®°å½•ã€‚å¦‚æœä½ åšåˆ°äº†ä¸€ä¸ªè®°å½•ï¼ˆä¹Ÿè®¸æ˜¯ç”±æ²¡æœ‰Butherplateçš„æ‰¿è¯ºæˆ–è€…å› ä¸ºä½ è®¤ä¸ºè®°å½•æ˜¯ç­‰ä»·çš„åˆ°@ data / @valueæˆ–æ•°æ®ç±»ï¼‰ï¼Œyouï¼†ï¼ƒ39;æ³¥æ³çš„è®¾è®¡å’Œæœºä¼šå¾ˆå¥½ï¼Œå®ƒä¼šå›æ¥å’¬ä½ ã€‚æ‰€ä»¥ä¸è¦ï¼†ï¼ƒ39; tã€‚ </p><p>   Let&#39;s have a closer look at transparency.Records even have a motto for that - paraphrasing  a Project Amber design document:</p><p>è®©ï¼†ï¼ƒ39; sä»”ç»†çœ‹çœ‹é€æ˜åº¦ã€‚ç”šè‡³æœ‰ä¸€ä¸ªåº§å³é“­ä¸ºæ­¤ - é‡Šæ”¾é¡¹ç›®ç¥ç€è‰²è®¾è®¡æ–‡ä»¶ï¼š</p><p> The API for a record models the state, the whole state, and nothing but the state.</p><p> è®°å½•æ¨¡å‹çš„APIï¼ŒçŠ¶æ€ï¼Œæ•´ä¸ªçŠ¶æ€ï¼Œé™¤äº†çŠ¶æ€ä¹‹å¤–ã€‚</p><p>  an accessor for each component with the same name and return type that returns exactly the component&#39;s value (or the API doesn&#39;t model the state)</p><p>  å…·æœ‰ç›¸åŒåç§°å’Œè¿”å›ç±»å‹çš„æ¯ä¸ªç»„ä»¶çš„è®¿é—®è€…ï¼Œè¯¥è¿”å›è¿”å›çš„ç»„ä»¶ï¼†ï¼ƒ39; så€¼ï¼ˆæˆ–api nonnï¼†ï¼ƒ39; tæ¨¡å‹çŠ¶æ€ï¼‰</p><p> an accessible constructor whose parameter list matches the components (called  canonical constructor; or the API doesn&#39;t model the state)</p><p> ä¸€ä¸ªå¯è®¿é—®çš„æ„é€ å‡½æ•°ï¼Œå…¶å‚æ•°åˆ—è¡¨ä¸ç»„ä»¶åŒ¹é…ï¼ˆç§°ä¸ºè§„èŒƒæ„é€ å‡½æ•°;æˆ–API NONï¼†ï¼ƒ39; tæ¨¡å‹çŠ¶æ€ï¼‰</p><p>  no class inheritance (or the API doesn&#39;t model the whole state because more can be hiding elsewhere)</p><p>  æ²¡æœ‰ç±»ç»§æ‰¿ï¼ˆæˆ–API NONï¼†ï¼ƒ39; Tæ¨¡å‹æ•´ä¸ªçŠ¶æ€ï¼Œå› ä¸ºæ›´å¤šçš„çŠ¶æ€å¯ä»¥è—åœ¨åˆ«å¤„ï¼‰ï¼‰</p><p> Why, though?Lombok allows additional fields and Kotlin&#39;s data classes, too, as well as private &#34;components&#34; (that&#39;s the record term; Kotlin calls them  primary constructor parameters).So why is Java so strict about this?To answer that, we need some math.</p><p> è™½ç„¶ï¼Œä¸ºä»€ä¹ˆï¼Ÿé¾™ç›®åƒå…è®¸å…¶ä»–å­—æ®µå’Œkotlinï¼†ï¼ƒ39; sæ•°æ®ç±»ä»¥åŠç§äººï¼†ï¼ƒ34;ç»„ä»¶ï¼†ï¼ƒ34; ï¼ˆï¼†ï¼ƒ39;å”±ç‰‡æœ¯è¯­; kotlinè°ƒç”¨ä»–ä»¬çš„ä¸»è¦æ„é€ å‡½æ•°å‚æ•°ï¼‰ã€‚å› æ­¤ï¼Œä¸ºä»€ä¹ˆJavaè¿™ä¹ˆä¸¥æ ¼åœ°å¯¹æ­¤æœ‰æ‰€ä¸¥æ ¼ï¼Ÿè¦å›ç­”ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›æ•°å­¦ã€‚</p><p>  A  set is a bunch of elements, e.g. we can say  C is the set of all colors   { blue , gold ,  . . .  } and  N the set of all natural numbers   {  0 ,  1 ,  . . . }.The finite set   {  - 2147483648 ,  . . . ,  0 ,  . . . ,  2147483647 } is what we in Java typically call  int and if we throw in   null we get  Integer.Similarly, the infinite set of all possible strings (plus   null ğŸ™„) is what we call  String.</p><p>  ä¸€ç»„æ˜¯ä¸€å †å…ƒç´ ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¯´Cæ˜¯æ‰€æœ‰é¢œè‰²çš„é›†åˆ{è“è‰²ï¼Œé‡‘è‰²ï¼Œã€‚ ã€‚ ã€‚ nä¸ªå…¨è‡ªç„¶æ•°{0,1ï¼Œã€‚ ã€‚ ã€‚ }ã€‚æœ‰é™é›†{ -  2147483648ï¼Œã€‚ ã€‚ ã€‚ ï¼Œ0ï¼Œã€‚ ã€‚ ã€‚ ï¼Œ2147483647}æ˜¯æˆ‘ä»¬åœ¨Javaä¸­çš„å¸¸å¸¸è°ƒç”¨intï¼Œå¦‚æœæˆ‘ä»¬æŠ›å‡ºnullï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°æ•´æ•°ã€‚ç›¸ä¼¼çš„ï¼Œæ— é™çš„ä¸€ç»„æ‰€æœ‰å¯èƒ½çš„å­—ç¬¦ä¸²ï¼ˆåŠ ä¸ºnullğŸ™„ï¼‰æ˜¯æˆ‘ä»¬ç§°ä¹‹ä¸ºå­—ç¬¦ä¸²çš„ã€‚ </p><p> So, as you can see, types are sets where the set&#39;s values are exactly the values that are legal for that type.That also means that  set theory, &#34;the branch of mathematical logic that studies sets&#34; ( says Wikipedia), is related to  type theory, &#34;the academic study of type systems&#34; ( likewise), which language design relies on.</p><p>å› æ­¤ï¼Œæ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œç±»å‹æ˜¯é›†åˆï¼†ï¼ƒ39; så€¼çš„ç±»å‹ï¼Œå…¶ä¸­ï¼†ï¼ƒ39; så€¼æ­£å¥½æ˜¯è¯¥ç±»å‹åˆæ³•çš„å€¼ã€‚ä¹Ÿæ„å‘³ç€è®¾ç½®ç†è®ºï¼Œï¼†ï¼ƒ34;ç ”ç©¶é›†çš„æ•°å­¦é€»è¾‘åˆ†æ”¯ï¼†ï¼ƒ34 ; ï¼ˆWikipediaï¼‰ï¼Œä¸ç±»å‹ç†è®ºæœ‰å…³ï¼Œï¼†ï¼ƒ34;ç³»ç»Ÿç±»å‹ï¼†ï¼ƒ34çš„å­¦æœ¯ç ”ç©¶; ï¼ˆåŒæ ·ï¼‰ï¼Œå“ªç§è¯­è¨€è®¾è®¡ä¾èµ–ã€‚</p><p>  Now let&#39;s do something fancy and build pairs of integers (yes,  that fancy):   {  ( 0 ,  0 ) ,  ( 0 ,  1 ) ,  . . .  }.This is what a simple and terribly incomplete Java class for that would look like:</p><p>  ç°åœ¨è®©ï¼†ï¼ƒ39åšä¸€äº›èŠ±å“¨çš„ä¸œè¥¿å’Œæ„å»ºçš„æ•´æ•°å¯¹ï¼ˆæ˜¯çš„ï¼Œé‚£ä¸ªèŠ±å“¨çš„ï¼‰ï¼š{ï¼ˆ0,0ï¼‰ï¼Œï¼ˆ0,1ï¼‰ï¼Œã€‚ ã€‚ ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•è€Œéå¸¸ä¸å®Œæ•´çš„Javaç±»ï¼Œè¿™çœ‹èµ·æ¥åƒï¼š</p><p>  We could call the corresponding set  Pair and that would work.But there&#39;s a bit more insight to be had because we know more about the set&#39;s structure.Specifically, we know that it&#39;s the combination of all   ints with all   ints.Set theory calls that a  product and it&#39;s written as  int Ã— int (each type in a product is called an  operand).</p><p>  æˆ‘ä»¬å¯ä»¥è°ƒç”¨ç›¸åº”çš„é›†åˆå¹¶å°†å…¶å·¥ä½œã€‚ä½†æ˜¯ï¼Œåœ¨é‚£é‡Œæœ‰æ›´å¤šçš„æ´å¯ŸåŠ›ï¼Œå› ä¸ºæˆ‘ä»¬æ›´äº†è§£äº†å…³äºé›†åˆå’Œï¼ƒ39; sç»“æ„çš„æ›´å¤šä¿¡æ¯ã€‚ç‰¹æ®Šåœ°ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒçš„ç»“åˆï¼†ï¼ƒ39;æ‰€æœ‰INTSéƒ½å…·æœ‰æ‰€æœ‰INTS.SETç†è®ºç§°ä¸ºäº§å“å’ŒITï¼†ï¼ƒ39; Sç¼–å†™ä¸ºintÃ—intï¼ˆäº§å“ä¸­çš„æ¯ç§ç±»å‹ç§°ä¸ºæ“ä½œæ•°ï¼‰ã€‚</p><p> That&#39;s pretty cool because set theory has all kinds of things to say about applying functions to these products.One aspect of that is how functions that operate on a single operand can be combined to functions that operate on all operands and which properties of the functions ( injective,  bijective, etc.) remain intact.</p><p> ï¼†ï¼ƒ39; så¾ˆé…·ï¼Œå› ä¸ºé›†åˆç†è®ºæœ‰å„ç§å„æ ·çš„äº‹æƒ…å¯ä»¥è¯´å¯¹è¿™äº›äº§å“çš„åº”ç”¨ç¨‹åºã€‚ä¸€ä¸ªæ–¹é¢æ˜¯å¦‚ä½•å°†åœ¨å•ä¸ªæ“ä½œæ•°ä¸Šè¿è¡Œçš„å‡½æ•°ç»„åˆæˆåœ¨æ‰€æœ‰æ“ä½œæ•°ä¸Šè¿è¡Œçš„å‡½æ•°ä»¥åŠå“ªäº›å±æ€§åŠŸèƒ½ï¼ˆé‡æ–°æ³¨å°„ï¼Œé»‘è‰²ç­‰ï¼‰ä¿æŒå®Œæ•´ã€‚</p><p>  // given: bijective function from int to int  increment  =	i  -&gt; i  ==   .MAX_VALUE  ?   .MIN_VALUE  :  ++i ; // then: combining two `increment`s yields a bijective function // (this requires no additional proof or consideration)   &lt;  &gt; incrementPair  =	pair  -&gt;  new   (		increment . applyAsInt (pair . first ( ) ) ,		increment . applyAsInt (pair . second ( ) ) ) ;</p><p>  //ç»™å®šï¼šæ¥è‡ªintåˆ°int increment = i  - ï¼†gt;æˆ‘== .max_valueï¼Ÿ .min_valueï¼š++ i; //ç„¶åï¼šç»„åˆä¸¤ä¸ªâ€œå¢é‡â€ç”Ÿç‰©å‡½æ•°//ï¼ˆè¿™ä¸éœ€è¦å¦å¤–çš„è¯æ˜æˆ–è€ƒè™‘ï¼‰ï¼†lt; ï¼†gt; incrementpair =é…å¯¹ - ï¼†gt;æ–°ï¼ˆé€’å¢ã€‚Applyasintï¼ˆå¯¹ã€‚ç¬¬ä¸€ï¼ˆï¼‰ï¼‰ï¼Œé€’å¢ã€‚Applyasintï¼ˆå¯¹ã€‚ç¬¬äºŒï¼ˆï¼‰ï¼‰ï¼‰;</p><p> Did you note the accessors    :: first and    :: second?They didn&#39;t exist in the class above, so I need to add them.Otherwise I couldn&#39;t apply functions to individual components/operands and so I couldn&#39;t really use    as a pair of   ints.Similarly, but in the other direction, I needed a constructor that takes both   ints as arguments so I can reconstitute a pair.</p><p> æ‚¨æ˜¯å¦æ³¨æ„åˆ°äº†è®¿é—®è€…::ç¬¬ä¸€ä¸ªå’Œ::ç¬¬äºŒä¸ªï¼Ÿä»–ä»¬åœ¨ä¸Šé¢çš„è¯¾å ‚ä¸Šæ²¡æœ‰å­˜åœ¨ï¼Œæ‰€ä»¥æˆ‘éœ€è¦æ·»åŠ å®ƒä»¬ã€‚åˆå¯ä»¥å‘å„ä¸ªç»„ä»¶/æ“ä½œæ•°åº”ç”¨å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥ï¼ƒ39; tçœŸçš„ç”¨ä½œä¸€å¯¹ints.simarimarlyï¼Œä½†åœ¨å¦ä¸€ä¸ªæ–¹å‘ä¸Šï¼Œæˆ‘éœ€è¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå°†ä¸¤ä¸ªintsä½œä¸ºå‚æ•°å æ®ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥é‡æ–°æ„å»ºä¸€å¯¹ã€‚</p><p> More generally, to apply set theory to a type in the way I alluded to above, all its operands need to be accessible and there must be a way to turn a tuple of operands into an instance.If both is true, type theory calls such a type a  product type (and their instances  tuples) and there are a few cool things we can do with them.</p><p> æ›´ä¸€èˆ¬åœ°è¯´ï¼Œè¦ä»¥æˆ‘æš—ç¤ºçš„æ–¹å¼å°†Setç†è®ºåº”ç”¨äºä¸€ä¸ªç±»å‹ï¼Œæ‰€ä»¥æ‰€æœ‰æ“ä½œæ•°éƒ½éœ€è¦è®¿é—®ï¼Œå¹¶ä¸”å¿…é¡»æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å°†æ“ä½œæ•°é‡è½¬æ¢ä¸ºå®ä¾‹ã€‚å¦‚æœä¸¤è€…éƒ½æ˜¯çœŸçš„ï¼Œé‚£ä¹ˆç±»å‹ç†è®ºå‘¼å«Aå‹äº§å“ç±»å‹ï¼ˆåŠå…¶å®ä¾‹å…ƒç»„ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å®ƒä»¬è¿›è¡Œä¸€äº›å¾ˆé…·çš„äº‹æƒ…ã€‚ </p><p>   Where  nominal means that records are identified by their name and not their structure.That way you can&#39;t mix up two different record types that both model  int Ã— int, for example    ( int first ,  int second ) and    ( int low ,  int high ).Also, we access the record components not by index (not  range . get1 ( )) but by name (  record . low ( )).</p><p>æ ‡ç§°æ„å‘³ç€è®°å½•ç”±ä»–ä»¬çš„åå­—è€Œä¸æ˜¯å®ƒä»¬çš„ç»“æ„æ¥æ ‡è¯†ã€‚æ‚¨å¯ä»¥ï¼†ï¼ƒ39; tæ··åˆä¸¤ä¸ªä¸åŒçš„è®°å½•ç±»å‹ï¼Œä¾‹å¦‚å‹å·Ã—intï¼Œä¾‹å¦‚ï¼ˆint firstï¼Œintç¬¬äºŒï¼‰å’Œï¼ˆint lowï¼Œ INT HIGHï¼‰.ALSOï¼Œæˆ‘ä»¬è®¿é—®çš„å½•åˆ¶ç»„ä»¶ä¸æ˜¯ç´¢å¼•ï¼ˆä¸æ˜¯èŒƒå›´ã€‚GET1ï¼ˆï¼‰ï¼‰ï¼Œä½†æŒ‰åç§°ï¼ˆè®°å½•ã€‚ä½ï¼ˆï¼‰ï¼‰ã€‚</p><p> (Beyond that, a record&#39;s accessors and its canonical constructor form an  embedding-projection pair, but I hardly understand that.Definitely too little to explain.)</p><p> ï¼ˆè¶…è¶Šè¯¥æ—¶ï¼Œè®°å½•ï¼†ï¼ƒ39; Sç¬¦å·å’Œå…¶è§„èŒƒæ„é€ å‡½æ•°æ„æˆåµŒå…¥æŠ•å½±å¯¹ï¼Œä½†æˆ‘å‡ ä¹ä¸æ˜ç™½ã€‚è™šæ‹Ÿæ€§å¤ªå°‘è€Œæ— æ³•è§£é‡Šã€‚ï¼‰</p><p>  I want to drive the point home:Records want to be product types (because of the cool things) and for that to work, all their components must be accessible, i.e. there can be no hidden state, and construction from them must be possible.That&#39;s why records are  transparent carriers of immutable data.</p><p>  æˆ‘æƒ³å¼€è½¦ç‚¹ä¸»é¡µï¼šè®°å½•æƒ³è¦æ˜¯äº§å“ç±»å‹ï¼ˆå› ä¸ºå¾ˆé…·çš„ä¸œè¥¿ï¼‰å’Œä¸ºæ­¤å·¥ä½œï¼Œæ‰€æœ‰ç»„ä»¶å¿…é¡»å¯ä»¥è®¿é—®ï¼Œå³å¯ä»¥æ²¡æœ‰éšè—çŠ¶æ€ï¼Œå¹¶ä¸”å¿…é¡»ä»å®ƒä»¬çš„æ„é€ ã€‚é‚£ä¸ªï¼†ï¼ƒ39;ä¸ºä»€ä¹ˆè®°å½•æ˜¯ä¸å¯å˜æ•°æ®çš„é€æ˜è½½ä½“ã€‚</p><p>  Hence the compiler generates accessors.  Hence we can&#39;t change their names or return type.  Hence we should be very careful with overriding them.  Hence the compiler generates a canonical constructor.  Hence there can be no inheritance.</p><p>  å› æ­¤ï¼Œç¼–è¯‘å™¨ç”Ÿæˆè®¿é—®å™¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼†ï¼ƒ39; tæ›´æ”¹ä»–ä»¬çš„åå­—æˆ–è¿”å›ç±»å‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥éå¸¸å°å¿ƒåœ°æ¨æ–­å®ƒä»¬ã€‚å› æ­¤ï¼Œç¼–è¯‘å™¨ç”Ÿæˆä¸€ä¸ªè§„èŒƒæ„é€ å‡½æ•°ã€‚å› æ­¤ï¼Œæ²¡æœ‰ç»§æ‰¿ã€‚</p><p>  Most benefits we get from the algebraic structure revolve around the fact that the accessors together with the canonical constructor allow to take apart and recreate record instances in a structured manner without loss of information.</p><p>  æˆ‘ä»¬ä»ä»£æ•°ç»“æ„è·å¾—çš„å¤§å¤šæ•°å¥½å¤„å›´ç»•ç€ä¹˜åçš„è¾…åŠ©å™¨ä¸è§„èŒƒæ„é€ å‡½æ•°ä¸€èµ·å…è®¸ä»¥ç»“æ„åŒ–çš„æ–¹å¼åˆ†å¼€å’Œé‡æ–°åˆ›å»ºè®°å½•å®ä¾‹ï¼Œè€Œä¸ä¼šä¸¢å¤±ä¿¡æ¯ã€‚</p><p>  JEP 405 proposes record and array patterns, which will enhance Java&#39;s   capabilities.They will allow us to take records and arrays apart and apply further checks to their components:</p><p>  JEP 405æå‡ºäº†è®°å½•å’Œé˜µåˆ—æ¨¡å¼ï¼Œè¿™å°†å¢å¼ºJavaå’Œï¼ƒ39; Sèƒ½åŠ›ã€‚ä»–ä»¬å°†å…è®¸æˆ‘ä»¬åˆ†å¼€è®°å½•å’Œæ•°ç»„å¹¶è¿›ä¸€æ­¥æ£€æŸ¥å…¶ç»„ä»¶ï¼š</p><p> if  (range  instanceof   ( int low ,  int high )  &amp;&amp; high  &lt; low )	 return  new   (high , low ) ;</p><p> ifï¼ˆèŒƒå›´å®ä¾‹ï¼ˆint lowï¼Œint highï¼‰ï¼†amp;ï¼†amp;é«˜<ä½ï¼‰è¿”å›æ–°çš„ï¼ˆé«˜ï¼Œä½ï¼‰; </p><p> Thanks to full transparency, we can be sure not to miss hidden state.That means that the difference between  range and the returned instance is exactly what you see:  low and  high are flipped - nothing more.</p><p>ç”±äºå®Œå…¨é€æ˜åº¦ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šä¸è¦é”™è¿‡éšè—çŠ¶æ€ã€‚è¿™æ„å‘³ç€èŒƒå›´å’Œè¿”å›çš„å®ä¾‹ä¹‹é—´çš„åŒºåˆ«æ­£æ˜¯ä½ æ‰€çœ‹åˆ°çš„ï¼šä½å’Œé«˜çš„ç¿»è½¬ - æ²¡æœ‰æ›´å¤šã€‚</p><p>  A future version of Java may introduce   with blocks that make it very easy to create copies of (usually immutable) instances with some values changed.It could look something like this:</p><p>  æœªæ¥ç‰ˆæœ¬çš„Javaå¯èƒ½ä¼šä½¿ç”¨å—ä»‹ç»ï¼Œä½¿å…¶éå¸¸å®¹æ˜“åˆ›å»ºï¼ˆé€šå¸¸æ˜¯ä¸å¯å˜ï¼‰å®ä¾‹çš„å‰¯æœ¬ï¼Œå…¶ä¸­ä¸€äº›å€¼å·²æ›´æ”¹ã€‚å®ƒå¯ä»¥çœ‹å‡ºè¿™æ ·çš„ä¸œè¥¿ï¼š</p><p> range  =  new   ( 5 ,  10 ) ; // SYNTAX IS MADE UP!  newRange  = range  with  { low  =  0 ;  } // range: [5; 10] // newRange: [0; 10]</p><p> èŒƒå›´=æ–°ï¼ˆ5,10ï¼‰; //è¯­æ³•æ˜¯ç»„æˆçš„ï¼ newrange =èŒƒå›´ï¼Œ{low = 0; } //èŒƒå›´ï¼š[5; 10] // newrangeï¼š[0; 10]</p><p> The language can derive   with expressions precisely because   s API is aligned with its declaration.And similar to before, we can rely on  newRange being exactly like  range except for  low - there can be no hidden state that we failed to transport.And the language really doesn&#39;t have to do much here:</p><p> è¿™ç§è¯­è¨€å¯ä»¥ç²¾ç¡®åœ°ä»è¡¨è¾¾å¼æ´¾ç”Ÿï¼Œå› ä¸ºS APIä¸å…¶å£°æ˜å¯¹é½ã€‚ä¸ä¹‹å‰ç›¸ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¾èµ–äºçº½çº¦çš„æ­£å¸¸ä¸èŒƒå›´å®Œå…¨ç›¸åŒï¼Œé™¤äº†ä½ç”µå¹³ - å¯ä»¥æ²¡æœ‰éšè—çš„çŠ¶æ€ï¼Œæˆ‘ä»¬æ— æ³•è¿è¾“ã€‚çœŸæ­£çš„è¯­è¨€ä¸å¾—ä¸åœ¨è¿™é‡Œåšå¤šå°‘ï¼†ï¼ƒ39;</p><p>  (Note that this feature is far from being a reality and might get dropped or change considerably.)</p><p>  ï¼ˆè¯·æ³¨æ„ï¼Œæ­¤åŠŸèƒ½è¿œéä½œä¸ºç°å®ï¼Œå¹¶ä¸”å¯èƒ½ä¼šæ‰è½æˆ–æ›´æ”¹ã€‚ï¼‰</p><p>  To turn an instance into a byte stream, a JSON or XML document, or any other external representation and back again requires a way to take an instance apart into its values and then take those values and put them back together.You can immediately see how this works really well with records.Not only do they expose all their state and offer a canonical constructor, they do so in a structured way that makes the reflection API for that very straightforward to use.</p><p>  å°†å®ä¾‹æ—‹è½¬åˆ°å­—èŠ‚æµï¼ŒJSONæˆ–XMLæ–‡æ¡£æˆ–å†æ¬¡è¿”å›ä»»ä½•å…¶ä»–å¤–éƒ¨è¡¨ç¤ºï¼Œéœ€è¦ä¸€ç§æ–¹æ³•å°†å®ä¾‹åˆ†å¼€è¿›å…¥å…¶å€¼ï¼Œç„¶åæ‹æ‘„è¿™äº›å€¼å¹¶å°†å®ƒä»¬æ”¾åœ¨ä¸€èµ·ã€‚æ‚¨å¯ä»¥ç«‹å³æŸ¥çœ‹å¦‚ä½•è¿™å®é™…ä¸Šä¸Recordsæœ‰å…³ã€‚åªæœ‰ä»–ä»¬åªæ˜¯æš´éœ²æ‰€æœ‰å›½å®¶å¹¶æä¾›è§„èŒƒæ„é€ å‡½æ•°ï¼Œä»–ä»¬ä»¥ä¸€ç§ç»“æ„åŒ–æ–¹å¼è¿™æ ·åšï¼Œä½¿åå°„APIç”¨äºéå¸¸ç®€å•çš„ä½¿ç”¨ã€‚</p><p> For a lot more about how records changed serialization, check out  the Inside Java Podcast, episode 14 (also on many audio platforms, e.g.  on Spotify).If you prefer a short read, I wrote  a Twitter thread about it.</p><p> æœ‰å…³å¦‚ä½•æ›´æ”¹åºåˆ—åŒ–çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹å†…éƒ¨Java Podcastï¼Œç¬¬14é›†ï¼ˆä¹Ÿå¯ä»¥åœ¨è®¸å¤šéŸ³é¢‘å¹³å°ä¸Šï¼Œä¾‹å¦‚Spotifyï¼‰ã€‚å¦‚æœæ‚¨æ›´å–œæ¬¢ç®€çŸ­çš„é˜…è¯»ï¼Œæˆ‘å†™äº†ä¸€ä¸ªå…³äºå®ƒçš„Twitterçº¿ç¨‹ã€‚ </p><p>  Going back to the boilerplate for a second.As explained earlier, we need the following code so a record can be a product type:</p><p>è¿”å›åˆ°ç¬¬äºŒä¸ªæ°´åº“çš„ç¬¬äºŒä¸ªã€‚åœ¨å‰é¢è§£é‡Šï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹ä»£ç ï¼Œå› æ­¤è®°å½•å¯ä»¥æ˜¯äº§å“ç±»å‹ï¼š</p><p>  I didn&#39;t explicitly state that, but it&#39;s kinda nice if   ( 0 ,  0 )  =  ( 0 ,  0 ), so a proper  equals implementation is welcome as well, which immediately requires a  hashCode implementation.</p><p>  æˆ‘æ²¡æœ‰æ˜ç¡®åœ°è¯´æ˜ï¼Œä½†å®ƒæœ‰ç‚¹å¾ˆå¥½ï¼Œå¦‚æœï¼ˆ0,0ï¼‰=ï¼ˆ0,0ï¼‰ï¼Œé‚£ä¹ˆæ¬¢è¿é€‚å½“çš„ç­‰äºå®ç°ï¼Œå®ƒç«‹å³éœ€è¦ä¸€ä¸ªå“ˆå¸Œç å®ç°ã€‚</p><p> Since we need all that, the compiler might as well generate it.So it does (and throws in  toString for good measure) - not so much to save us from writing it but because it&#39;s a natural consequence of the algebraic structure.</p><p> ç”±äºæˆ‘ä»¬éœ€è¦æ‰€æœ‰è¿™äº›ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šäº§ç”Ÿå®ƒã€‚æ‰€ä»¥å®ƒç¡®å®ï¼ˆå¹¶ä¸”åœ¨ToStringä¸­æŠ›å‡ºäº†å¥½çš„è¡¡é‡æ ‡å‡†ï¼‰ - æ²¡æœ‰é‚£ä¹ˆå¤šæ¥æ‹¯æ•‘æˆ‘ä»¬æ¥å†™å®ƒï¼Œè€Œæ˜¯å› ä¸ºå®ƒå’Œï¼ƒ39;æ˜¯ä»£æ•°ç»“æ„çš„è‡ªç„¶åæœã€‚</p><p>  Records&#39; semantics restrict which class-building tools you can use.As discussed, you can&#39;t add hidden state via additional fields, can&#39;t rename accessors, can&#39;t change their return type, and probably shouldn&#39;t change their return value.Records also don&#39;t allow reassigning component values, i.e. their backing fields are   final, and no class inheritance (you can implement interfaces, though).</p><p>  è®°å½•ï¼†ï¼ƒ39;è¯­ä¹‰é™åˆ¶äº†æ‚¨å¯ä»¥ä½¿ç”¨çš„è¯¾ç¨‹å»ºç­‘å·¥å…·ã€‚è®¨è®ºï¼Œæ‚¨å¯ä»¥é€šè¿‡å…¶ä»–å­—æ®µæ·»åŠ éšè—çŠ¶æ€ï¼Œå¯ä»¥ï¼†ï¼ƒ39; té‡å‘½åè®¿é—®è€…ï¼ŒCANï¼†ï¼ƒ39; tæ›´æ”¹ä»–ä»¬çš„è¿”å›ç±»å‹ï¼Œå¹¶ä¸”å¯èƒ½åº”è¯¥æ˜¯ï¼†ï¼ƒ39 ; tæ›´æ”¹ä»–ä»¬çš„è¿”å›å€¼.Recordsä¹Ÿä¸ä¼šå…è®¸é‡æ–°åˆ†é…ç»„ä»¶å€¼ï¼Œå³å®ƒä»¬çš„å¤‡ä»½å­—æ®µæ˜¯æœ€ç»ˆçš„ï¼Œè€Œä¸”æ²¡æœ‰ç±»ç»§æ‰¿ï¼ˆå°½ç®¡å¦‚æ­¤ï¼Œæ‚¨å¯ä»¥å®ç°æ¥å£ï¼‰ã€‚</p><p> So what if you need that?Then records aren&#39;t what you&#39;re looking for and you need to create a regular class instead.Even if that means that just to change 10% of the functionality, you&#39;ll end up with 90% of the boilerplate that a record would&#39;ve prevented.</p><p> é‚£ä¹ˆå¦‚æœä½ éœ€è¦ä»€ä¹ˆï¼Ÿç„¶åè®°å½•arenï¼†ï¼ƒ39; tä½ æƒ³è¦ä»€ä¹ˆï¼Œä½ éœ€è¦ä»€ä¹ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ™®é€šçš„è¯¾ç¨‹ã€‚è¿™æ„å‘³ç€åªè¦æ”¹å˜10ï¼…çš„åŠŸèƒ½ï¼Œä½ å°±ä¼šï¼†ï¼ƒ39 LLæœ€ç»ˆæœ‰90ï¼…çš„æ ·å“æ¿ï¼Œè®°å½•å°†ï¼†ï¼ƒ39; veé˜²æ­¢ã€‚</p><p>  Lombok just generates code.There&#39;s no semantic attached, so you have all the freedom you need to adapt the class to your requirements.Of course you don&#39;t get the benefits that come from stronger guarantees either, although Lombok may be able to generate destructuring methods in the future.</p><p>  Lombokåªæ˜¯ç”Ÿæˆä»£ç ã€‚æ²¡æœ‰è¯­ä¹‰é™„åŠ ï¼Œæ‰€ä»¥ä½ æ‹¥æœ‰æ‰€æœ‰çš„è‡ªç”±ï¼Œä½ éœ€è¦é€‚åº”æ‚¨çš„è¯¾ç¨‹.Of andï¼†ï¼ƒ39;è™½ç„¶é¾™çœ¼æ´›å…‹æ–¯å¯èƒ½èƒ½å¤Ÿåœ¨å°†æ¥äº§ç”Ÿç ´åæ€§æ–¹æ³•ã€‚</p><p>  (That said, I don&#39;t advertise using Lombok.It heavily relies on APIs internal to the compiler, which can change at any time and which means projects using it can break on any minor Java update.That it goes to  great lengths to  hide that technical debt from its users isn&#39;t great either.)</p><p>  ï¼ˆå¦‚æ­¤ï¼Œæˆ‘è¯´ï¼Œæˆ‘ä¸ä½¿ç”¨Lombokå®£ä¼ ã€‚å®ƒå¾ˆå¤§ä¾èµ–äºç¼–è¯‘å™¨å†…éƒ¨çš„APIï¼Œè¿™å¯ä»¥éšæ—¶æ”¹å˜ï¼Œè¿™æ„å‘³ç€ä½¿ç”¨å®ƒå¯ä»¥åœ¨ä»»ä½•æ¬¡è¦Javaæ›´æ–°ä¸­æ‰“ç ´ä»»ä½•æ¬¡è¦javaæ›´æ–°ã€‚éšè—å…¶ç”¨æˆ·çš„æŠ€æœ¯å€ºåŠ¡ä¹Ÿä¸ä¼Ÿå¤§ã€‚ï¼‰ </p><p>   You often create classes whose main purpose is to hold data.In such classes, some standard functionality and utility functions are often mechanically derivable from the data.</p><p>æ‚¨ç»å¸¸åˆ›å»ºä¸»è¦ç›®çš„æ˜¯ä¿æŒæ•°æ®çš„ç±»ã€‚åœ¨æ­¤ç±»ç±»ä¸­ï¼ŒæŸäº›æ ‡å‡†åŠŸèƒ½å’Œå®ç”¨åŠŸèƒ½é€šå¸¸æ˜¯ä»æ•°æ®æœºæ¢°æ´¾ç”Ÿçš„ã€‚</p><p> You can see that the semantic of holding data is there as well, but it&#39;s pretty weak and the focus is on deriving functionality, i.e. generating code.Indeed, data classes offer more class building tools than records (mutable &#34;components&#34;, hidden state, ...), but unlike with Lombok, you can&#39;t use all of them (can&#39;t be extended, can&#39;t create your own  copy method, ...).On the other hand, data classes don&#39;t give records&#39; strong guarantees, so Kotlin can&#39;t quite build the same features on top of them.</p><p> æ‚¨å¯ä»¥çœ‹åˆ°æŒæœ‰æ•°æ®çš„è¯­ä¹‰ä¹Ÿåœ¨é‚£é‡Œï¼Œä½†å®ƒç›¸å½“å¼±ï¼Œç„¦ç‚¹æ˜¯åœ¨æ¨å¯¼åŠŸèƒ½ï¼Œå³ç”Ÿæˆä»£ç .Dæ•°æ®ç±»æä¾›æ¯”è®°å½•æ›´å¤šçš„ç±»å»ºç­‘å·¥å…·ï¼ˆå¯å˜ï¼†ï¼ƒ34 ;ç»„ä»¶ï¼†ï¼ƒ34;ï¼Œéšè—çŠ¶æ€ï¼Œ......ï¼‰ï¼Œä½†ä¸é¾™ç›®å²›ä¸åŒï¼Œæ‚¨å¯ä»¥ï¼†ï¼ƒ39; tä½¿ç”¨æ‰€æœ‰è¿™äº›ï¼ˆCANï¼†ï¼ƒ39; tå»¶é•¿ï¼ŒCANï¼†ï¼ƒ39; tåˆ›å»ºè‡ªå·±çš„å¤åˆ¶æ–¹æ³•ã€‚ ..ï¼‰ã€‚å¦ä¸€æ–¹é¢ï¼Œæ•°æ®ç±»Donï¼†ï¼ƒ39; Tç»™è®°å½•ï¼†ï¼ƒ39;å¼ºçƒˆçš„ä¿è¯ï¼Œæ‰€ä»¥kotlinå¯ä»¥åœ¨å…¶ä¸­çš„é¡¶éƒ¨å»ºç«‹ç›¸åŒçš„åŠŸèƒ½ã€‚</p><p>  Before you get your keyboards out to write angry comments (which you can&#39;t because I didn&#39;t get around to have those yet - har har), this is no value judgement.It&#39;s a different trade-off with different costs and benefits and if Kotlin&#39;s make more sense to you, that&#39;s fine with me.Don&#39;t @ me (as the kids say).</p><p>  åœ¨ä½ æŠŠé”®ç›˜æ‹¿å‡ºæ¥å†™ä½œæ„¤æ€’çš„è¯„è®ºä¹‹å‰ï¼ˆä½ å¯ä»¥ï¼†ï¼ƒ39; tï¼Œå› ä¸ºæˆ‘æ²¡æœ‰attï¼ƒ39; tï¼†ï¼ƒ39; t fat to with-har harï¼‰ï¼Œè¿™ä¸æ˜¯ä»·å€¼åˆ¤æ–­ã€‚ï¼†ï¼ƒ39; saä¸åŒçš„è´¸æ˜“ - è„±ç¦»ä¸åŒçš„æˆæœ¬å’Œç¦åˆ©ï¼Œå¦‚æœkotlinï¼†ï¼ƒ39;ï¼†ï¼ƒ39;ï¼†ï¼ƒ39;å¾ˆå¥½åœ°ä¸me.donï¼†ï¼ƒ39; t @ meï¼ˆæ­£å¦‚å­©å­ä»¬æ‰€è¯´çš„é‚£æ ·ï¼‰ã€‚</p><p>   So of course records aren&#39;t  generally better or worse than the other two features or others with similar design like Scala&#39;s case classes.But they do have strong semantics with a firm mathematical foundation that, while limiting our class design space, enable powerful features that would otherwise not be possible or at least not as reliable.</p><p>   æ‰€ä»¥å½“ç„¶è®°å½•arenï¼†ï¼ƒ39; tä¸€èˆ¬æ¯”å…¶ä»–ä¸¤ä¸ªç‰¹å¾æˆ–æ›´å·®æˆ–å…¶ä»–æœ‰ç±»ä¼¼è®¾è®¡çš„ç‰¹å¾ï¼Œå¦‚scalaï¼†ï¼ƒ39; scaseç±»ã€‚ä½†ä»–ä»¬ç¡®å®å…·æœ‰å¼ºå¤§çš„è¯­ä¹‰ï¼Œå…·æœ‰åšå®šçš„æ•°å­¦åŸºç¡€ï¼ŒåŒæ—¶é™åˆ¶æˆ‘ä»¬çš„ç­çº§è®¾è®¡ç©ºé—´ï¼Œå¯ç”¨å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¦åˆ™æ— æ³•æˆ–è‡³å°‘ä¸å¯èƒ½ã€‚</p><p> It&#39;s a trade-off between developer freedom and language power.And it&#39;s one I&#39;m happy with and look forward to see unfolding it&#39;s full potential over the next years.</p><p> å®ƒï¼†ï¼ƒ39;åœ¨å¼€å‘äººå‘˜è‡ªç”±å’Œè¯­è¨€æƒä¹‹é—´çš„æƒè¡¡ã€‚å®ƒï¼†ï¼ƒ39;æˆ‘çš„ä¸€ä¸ªï¼†ï¼ƒ39;æˆ‘å¾ˆé«˜å…´ï¼ŒæœŸå¾…çœ‹åˆ°æ˜å¹´çš„å±•ç¤ºï¼†ï¼ƒ39; </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://nipafx.dev/java-record-semantics/">https://nipafx.dev/java-record-semantics/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/è®°å½•/">#è®°å½•</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/data/">#data</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>