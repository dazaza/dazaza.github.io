<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥æ‹¥æœ‰ç¾å¥½çš„äº‹ç‰© Maybe We Can Have Nice Things</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Maybe We Can Have Nice Things<br/>ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥æ‹¥æœ‰ç¾å¥½çš„äº‹ç‰© </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-19 21:10:52</div><div class="page_narrow text-break page_content"><p>Programming languages advance by introducing new constraints. A key reason wedonâ€™t use assembly language for everything is that the lack of constraints makeit too hard to use for everyday programming. Before   gotowas considered harmful</p><p>ç¼–ç¨‹è¯­è¨€é€šè¿‡å¼•å…¥æ–°çš„çº¦æŸæ¡ä»¶è€Œå¾—ä»¥å‘å±•ã€‚æˆ‘ä»¬ä¸å¯¹æ‰€æœ‰å†…å®¹éƒ½ä½¿ç”¨æ±‡ç¼–è¯­è¨€çš„ä¸€ä¸ªå…³é”®åŸå› æ˜¯ï¼Œç”±äºç¼ºä¹çº¦æŸï¼Œå› æ­¤æ—¥å¸¸ç¼–ç¨‹éƒ½å¾ˆéš¾ä½¿ç”¨ã€‚åœ¨è¢«è®¤ä¸ºæœ‰å®³ä¹‹å‰</p><p>, people wrote machine code that jumped all over theplace, and programmers had to maintain a mental model of the complete machinestate and the full implications of each jumpâ€Šâ€”â€Ša recipe for bugs.  was introduced: structured languages still compiled down to gotos (or arbitrary jumps), but the programmer could think in termsof more limited jumps:  if,  switch/ case, call,  return,  for. These constrainedjumps are much easier to understand; for example, when youâ€™re reading code, youcan know that  return doesnâ€™t return just anywhere. It returns onlyto the caller, as identified by a pointer on the stack. Later, languagedesigners added additional constrained jumps like throw/ catch, and virtual function calls. ( throw is a little bit too  goto-y for my taste,since you canâ€™t tell locally where the relevant  catch block is. Butthatâ€™s a story for another time.)</p><p>ï¼Œäººä»¬ç¼–å†™äº†æ— å¤„ä¸åœ¨çš„æœºå™¨ä»£ç ï¼Œç¨‹åºå‘˜ä¸å¾—ä¸ç»´æŠ¤æ•´ä¸ªæœºå™¨çŠ¶æ€ä»¥åŠæ¯æ¬¡è·³è·ƒçš„å…¨éƒ¨å«ä¹‰çš„æ€ç»´æ¨¡å‹-è¿™æ˜¯æ¼æ´çš„è§£å†³æ–¹æ³•ã€‚å¼•å…¥äº†ï¼šç»“æ„åŒ–è¯­è¨€ä»ç„¶å¯ä»¥ç¼–è¯‘ä¸ºgetosï¼ˆæˆ–ä»»æ„è·³è½¬ï¼‰ï¼Œä½†æ˜¯ç¨‹åºå‘˜å¯ä»¥è€ƒè™‘æ›´æœ‰é™çš„è·³è½¬ï¼šifï¼Œswitch / caseï¼Œcallï¼Œreturnï¼Œforã€‚è¿™äº›å—çº¦æŸçš„è·³è·ƒæ›´å®¹æ˜“ç†è§£ï¼›ä¾‹å¦‚ï¼Œå½“æ‚¨é˜…è¯»ä»£ç æ—¶ï¼Œæ‚¨å¯ä»¥çŸ¥é“returnå¹¶ä¸ä»…ä»…è¿”å›ä»»ä½•åœ°æ–¹ã€‚å®ƒä»…è¿”å›ç»™è°ƒç”¨è€…ï¼Œç”±å †æ ˆä¸Šçš„æŒ‡é’ˆæ ‡è¯†ã€‚åæ¥ï¼Œè¯­è¨€è®¾è®¡äººå‘˜æ·»åŠ äº†å…¶ä»–å—çº¦æŸçš„è·³è½¬ï¼Œä¾‹å¦‚throw / catchå’Œè™šæ‹Ÿå‡½æ•°è°ƒç”¨ã€‚ ï¼ˆæ ¹æ®æˆ‘çš„å£å‘³ï¼ŒæŠ•æ·æœ‰ç‚¹å¤ªåäº†ï¼Œå› ä¸ºæ‚¨æ— æ³•åœ¨æœ¬åœ°è¯´å‡ºç›¸å…³çš„æ•è·å—åœ¨å“ªé‡Œã€‚ä½†è¿™æ˜¯å¦ä¸€ä¸ªæ•…äº‹äº†ã€‚ï¼‰</p><p> ,which essentially â€˜piggybacksâ€™ on the value of the stack and enriches it with alot more power. (The additional complexity is usually manageable, and worth it.)It allows you extend the automatic memory management that the stack provides,initializing and cleaning up complex resources instead of just primitive valueslike integers and floats. You can automatically close open files, releasedynamic storage, and so on. And itâ€™s deterministic. But there was still the problem of the heap: a free-fire zone with noconstraints, riddled with memory leaks (heap resources allocated but neverreleased) and use-after-free bugs (heap resources re-used even after having beenreleased).</p><p> ï¼Œè¿™å®é™…ä¸Šæ˜¯â€œèƒŒè´Ÿâ€å †æ ˆçš„ä»·å€¼ï¼Œå¹¶é€šè¿‡æ›´å¤šçš„åŠŸèƒ½ä¸°å¯Œäº†å®ƒã€‚ ï¼ˆé™„åŠ çš„å¤æ‚æ€§é€šå¸¸æ˜¯å¯ä»¥æ§åˆ¶çš„ï¼Œå¹¶ä¸”å€¼å¾—ï¼‰ã€‚å®ƒå…è®¸æ‚¨æ‰©å±•å †æ ˆæä¾›çš„è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œåˆå§‹åŒ–å’Œæ¸…é™¤å¤æ‚çš„èµ„æºï¼Œè€Œä¸ä»…ä»…æ˜¯åŸå§‹å€¼ï¼ˆå¦‚æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼‰ã€‚æ‚¨å¯ä»¥è‡ªåŠ¨å…³é—­æ‰“å¼€çš„æ–‡ä»¶ï¼Œé‡Šæ”¾åŠ¨æ€å­˜å‚¨ç­‰ã€‚è€Œä¸”æ˜¯ç¡®å®šæ€§çš„ã€‚ä½†æ˜¯ä»ç„¶å­˜åœ¨å †çš„é—®é¢˜ï¼šæ²¡æœ‰çº¦æŸçš„è‡ªç”±å‘å°„åŒºï¼Œå†…å­˜æ³„æ¼ï¼ˆå·²åˆ†é…å †èµ„æºä½†ä»æœªé‡Šæ”¾ï¼‰å’Œæ— ç”¨åçš„bugï¼ˆå †èµ„æºå³ä½¿åœ¨é‡Šæ”¾åä¹Ÿå¾—åˆ°äº†é‡æ–°ä½¿ç”¨ï¼‰å……æ»¡äº†æ··ä¹±ã€‚</p><p> , enabling us to more completelysolve the worst remaining memory unsafety problem. (Previous solutions to theheap lifetime problem were  dynamic,not static, and hence expensive in space and timeâ€Šâ€”â€Šas well as beingnon-deterministic. These limitations reduce the applicability ofdynamically-managed languages to applications and environments where these costsare affordable.) And, of course, taming object lifetimes greatly eases the problem of safe,efficient concurrency. Concurrency is the key to improving performance in modernsystems.</p><p> ï¼Œä½¿æˆ‘ä»¬å¯ä»¥æ›´å½»åº•åœ°è§£å†³æœ€ä¸¥é‡çš„å‰©ä½™å†…å­˜ä¸å®‰å…¨é—®é¢˜ã€‚ ï¼ˆä»¥å‰å¯¹å †ç”Ÿå­˜æœŸé—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ˜¯åŠ¨æ€çš„ï¼Œè€Œä¸æ˜¯é™æ€çš„ï¼Œå› æ­¤åœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šéƒ½æ˜¯æ˜‚è´µçš„ï¼Œè€Œä¸”æ˜¯ä¸ç¡®å®šçš„ã€‚è¿™äº›é™åˆ¶é™ä½äº†åŠ¨æ€ç®¡ç†çš„è¯­è¨€åœ¨è´Ÿæ‹…è¿™äº›è´¹ç”¨çš„åº”ç”¨ç¨‹åºå’Œç¯å¢ƒä¸­çš„é€‚ç”¨æ€§ã€‚ï¼‰å½“ç„¶ï¼Œé©¯æœå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥å¤§å¤§ç¼“è§£å®‰å…¨ï¼Œé«˜æ•ˆçš„å¹¶å‘é—®é¢˜ã€‚å¹¶å‘æ˜¯æé«˜ç°ä»£ç³»ç»Ÿæ€§èƒ½çš„å…³é”®ã€‚</p><p> Beyond memory safety, Rust makes more use of typefulness than I typically seein other mainstream languages in its niche. For example, Rustâ€™s rich enums and pattern matching make it easier to write state machines, thenew type idiom makes it easier to get additional type safety (and improvesthe interface-as-documentation factor), and so on. You can work to get similarbenefits in other languages, but Rustâ€™s syntactic mechanisms and idiomatic usagecreate affordances for these easier patterns.</p><p> é™¤äº†å†…å­˜å®‰å…¨æ€§ä¹‹å¤–ï¼ŒRustè¿˜æ¯”æˆ‘åœ¨å…¶ä¸»æµäº§å“ä¸­å…¶ä»–ä¸»æµè¯­è¨€ä¸­é€šå¸¸çœ‹åˆ°çš„æ›´å¤šåœ°ä½¿ç”¨äº†å¯é”®å…¥æ€§ã€‚ä¾‹å¦‚ï¼ŒRustä¸°å¯Œçš„æšä¸¾å’Œæ¨¡å¼åŒ¹é…ä½¿ç¼–å†™çŠ¶æ€æœºå˜å¾—æ›´åŠ å®¹æ˜“ï¼Œæ–°çš„ç±»å‹ä¹ æƒ¯ä½¿è·å¾—é™„åŠ çš„ç±»å‹å®‰å…¨æ€§ï¼ˆå¹¶æ”¹å–„äº†â€œæ–‡æ¡£æ¥å£â€ï¼‰æ›´åŠ å®¹æ˜“ï¼Œç­‰ç­‰ã€‚æ‚¨å¯ä»¥åŠªåŠ›è·å¾—å…¶ä»–è¯­è¨€çš„ç±»ä¼¼å¥½å¤„ï¼Œä½†æ˜¯Rustçš„å¥æ³•æœºåˆ¶å’Œæƒ¯ç”¨ç”¨æ³•ä¸ºè¿™äº›æ›´ç®€å•çš„æ¨¡å¼æä¾›äº†å®æƒ ã€‚</p><p> Another freeing constraint Rust has introduced has been to systematize andautomate dependency management: the Cargo package management system. Gooddependency management is a  monstrouslyhard problem. Any dependency management system, including manual or ad hocmanagement, poses a variety of problems:</p><p> Rustå¼•å…¥çš„å¦ä¸€ä¸ªé‡Šæ”¾çº¦æŸæ˜¯ç³»ç»ŸåŒ–å’Œè‡ªåŠ¨åŒ–ä¾èµ–é¡¹ç®¡ç†ï¼šè´§è¿åŒ…è£¹ç®¡ç†ç³»ç»Ÿã€‚è‰¯å¥½çš„ä¾èµ–æ€§ç®¡ç†æ˜¯ä¸€ä¸ªéå¸¸å›°éš¾çš„é—®é¢˜ã€‚ä»»ä½•ä¾èµ–å…³ç³»ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ‰‹åŠ¨æˆ–ä¸´æ—¶ç®¡ç†ï¼Œéƒ½ä¼šå¸¦æ¥å„ç§é—®é¢˜ï¼š</p><p> Version conflicts: Inevitably, the latest version of the foo packagehas changed its API in such a way that it canâ€™t interoperate with the barpackage. Now resolve these conflicts all up and down the dependency tree.Fun!</p><p> ç‰ˆæœ¬å†²çªï¼šä¸å¯é¿å…çš„æ˜¯ï¼Œæœ€æ–°ç‰ˆæœ¬çš„fooè½¯ä»¶åŒ…å·²æ›´æ”¹å…¶APIï¼Œä½¿å…¶æ— æ³•ä¸barpackageè¿›è¡Œäº’æ“ä½œã€‚ç°åœ¨è§£å†³ä¾èµ–å…³ç³»æ ‘ä¸Šæ‰€æœ‰è¿™äº›å†²çªã€‚ </p><p> Supply-chain security: When you pull in a dependency, you must trustthe transitive closure of all the authors who have committed to that dependencysub-tree. This includes not just the code and the programs you can build withit, but build scripts themselves.</p><p>ä¾›åº”é“¾å®‰å…¨æ€§ï¼šå¼•å…¥ä¾èµ–é¡¹æ—¶ï¼Œå¿…é¡»ä¿¡ä»»å·²æäº¤ç»™è¯¥ä¾èµ–é¡¹å­æ ‘çš„æ‰€æœ‰ä½œè€…çš„ä¼ é€’æ€§å…³é—­ã€‚è¿™ä¸ä»…åŒ…æ‹¬æ‚¨å¯ä»¥ä½¿ç”¨å…¶æ„å»ºçš„ä»£ç å’Œç¨‹åºï¼Œè¿˜åŒ…æ‹¬æ„å»ºè„šæœ¬æœ¬èº«ã€‚</p><p> Micro- and even pico-dependencies: The tendency to multiply theprevious 2 problems by creating  extremely tiny</p><p> å¾®è§‚ç”šè‡³å¾®å¦™çš„ä¾å­˜å…³ç³»ï¼šå€¾å‘äºé€šè¿‡åˆ›å»ºæå°çš„å¾®å°é—®é¢˜æ¥ä¹˜ä»¥å…ˆå‰çš„ä¸¤ä¸ªé—®é¢˜</p><p>,  single-use packages. Proliferation: The tendency to multiply the previous 3 problems bycreating several packages that serve the same basic need, leading to a situationin which effort solving the same problem is fragmentedâ€Šâ€”â€Šincludingdocumentation, training, code reviewer/auditor hours, and so on. (I call thisthe â€œOccamâ€™s Razor now has  5blades</p><p>ï¼Œä¸€æ¬¡æ€§åŒ…è£…ã€‚æ‰©æ•£ï¼šå€¾å‘äºé€šè¿‡åˆ›å»ºæ»¡è¶³ç›¸åŒåŸºæœ¬éœ€æ±‚çš„å¤šä¸ªç¨‹åºåŒ…æ¥ä½¿å‰ä¸‰ä¸ªé—®é¢˜å€å¢ï¼Œä»è€Œå¯¼è‡´è§£å†³ç›¸åŒé—®é¢˜çš„å·¥ä½œåˆ†æ•£åŒ–çš„æƒ…å†µ-åŒ…æ‹¬æ–‡æ¡£ï¼ŒåŸ¹è®­ï¼Œä»£ç å®¡æŸ¥å‘˜/å®¡è®¡å‘˜æ—¶é—´ç­‰ã€‚ ï¼ˆæˆ‘ç§°ä¹‹ä¸ºâ€œ Occamçš„å‰ƒåˆ€ç°åœ¨æœ‰5ä¸ªåˆ€ç‰‡</p><p>â€ problem.) The NPM ecosystem provides the clearest modern illustration of theseproblems. (See page 11 of  Githubâ€™sreport on security</p><p>NPMç”Ÿæ€ç³»ç»Ÿæä¾›äº†è¿™äº›é—®é¢˜çš„æœ€æ¸…æ™°çš„ç°ä»£ä¾‹è¯ã€‚ ï¼ˆè¯·å‚é˜…Githubå®‰å…¨æŠ¥å‘Šçš„ç¬¬11é¡µ</p><p>, for example.) However, for all of NPMâ€™s problems,  at least it is a package managementsystem at all! Itâ€™s easy to pick on NPM (or predecessors like  CPAN</p><p>ä¾‹å¦‚ã€‚ï¼‰ä½†æ˜¯ï¼Œå¯¹äºNPMçš„æ‰€æœ‰é—®é¢˜ï¼Œè‡³å°‘å®ƒæ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼é€‰æ‹©NPMï¼ˆæˆ–CPANç­‰å‰èº«äº§å“ï¼‰å¾ˆå®¹æ˜“</p><p>, or  CTAN,or...), but even at its worst itâ€™s a  huge improvement over manuallymanaging dependencies (such as by manually vendoring them into your source tree,or just telling the user to install such-and-such libraries before attempting tocompile). Life is better with NPM, and with Rustâ€™s Cargo, Goâ€™s  go get, andso on. Even when they arenâ€™t perfect yet, they provide a framework forimprovement, by constraining where dependencies come from and how we maintainthem.</p><p>ï¼Œæˆ–CTANï¼Œæˆ–...ï¼‰ï¼Œä½†å³ä½¿åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå®ƒä¹Ÿæ¯”æ‰‹åŠ¨ç®¡ç†ä¾èµ–é¡¹ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡å°†å®ƒä»¬æ‰‹åŠ¨ä¾›åº”åˆ°æºä»£ç æ ‘ä¸­ï¼Œæˆ–è€…åªæ˜¯å‘Šè¯‰ç”¨æˆ·åœ¨å°è¯•ç¼–è¯‘ä¹‹å‰å®‰è£…æ­¤ç±»åº“ï¼‰æœ‰å¾ˆå¤§çš„æ”¹è¿›ï¼‰ã€‚ NPMï¼ŒRustçš„Cargoï¼ŒGoçš„go getç­‰ä½¿ç”Ÿæ´»å˜å¾—æ›´å¥½ã€‚å³ä½¿å®ƒä»¬è¿˜ä¸æ˜¯å¾ˆå®Œç¾ï¼Œå®ƒä»¬ä¹Ÿä¼šé€šè¿‡çº¦æŸä¾èµ–æ¥è‡ªä½•å¤„ä»¥åŠæˆ‘ä»¬å¦‚ä½•ç»´æŠ¤å®ƒä»¬æ¥æä¾›æ”¹è¿›æ¡†æ¶ã€‚</p><p> But a lot of work is still necessary. As an example of a Nice Thing Indeed,Cargo has this add-on package called  supply-chain</p><p> ä½†æ˜¯ä»ç„¶éœ€è¦å¤§é‡å·¥ä½œã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒCargoæœ‰ä¸€ä¸ªåä¸ºä¾›åº”é“¾çš„é™„åŠ ç»„ä»¶ </p><p>,which will show you all the packages a given package depends on. It will alsoestimate how many individual publishers author those dependencies. Here is whathappens when you run supply-chain on itself: ~/src/rust/cargo-supply-chain %  cargo supply-chain publishersThe following crates will be ignored because they come from a local directory: - cargo-supply-chainThe `crates.io` cache was not found or it is invalid. Run `cargo supply-chain update` to generate it.Fetching publisher info from crates.ioThis will take roughly 2 seconds per crate due to API rate limitsFetching data for &#34;adler&#34; (0/79)[ 77 items, including some surprising ones, elided...]Fetching data for &#34;xattr&#34; (78/79)The following individuals can publish updates for your dependencies: 1. alexcrichton via crates: flate2, wasm-bindgen-backend, wasi, bitflags, proc-macro2, wasm-bindgen-macro, wasm-bindgen, openssl-probe, unicode-xid, wasm-bindgen-macro-support, filetime, semver, tar, unicode-normalization, libc, js-sys, bumpalo, log, wasm-bindgen-shared, cfg-if, cc, web-sys [ 55 authors elided...] 57. zesterer via crates: spinNote: there may be outstanding publisher invitations. crates.io provides no way to list them.Invitations are also impossible to revoke, and they never expire.See https://github.com/rust-lang/crates.io/issues/2868 for more info.All members of the following teams can publish updates for your dependencies: 1. &#34;github:rustwasm:core&#34; (https://github.com/rustwasm) via crates: web-sys, js-sys, wasm-bindgen-macro, wasm-bindgen-macro-support, wasm-bindgen-backend, wasm-bindgen, wasm-bindgen-shared 2. &#34;github:servo:cargo-publish&#34; (https://github.com/servo) via crates: core-foundation-sys, percent-encoding, form_urlencoded, unicode-bidi, core-foundation, idna, url 3. &#34;github:servo:rust-url&#34; (https://github.com/servo) via crates: percent-encoding, form_urlencoded, idna, url 4. &#34;github:rust-bus:maintainers&#34; (https://github.com/rust-bus) via crates: security-framework-sys, security-framework, tinyvec 5. &#34;github:rust-lang-nursery:libs&#34; (https://github.com/rust-lang-nursery) via crates: bitflags, log, lazy_static 6. &#34;github:serde-rs:owners&#34; (https://github.com/serde-rs) via crates: serde_derive, serde, serde_json 7. &#34;github:rust-lang:libs&#34; (https://github.com/rust-lang) via crates: libc, cfg-if 8. &#34;github:rust-lang-nursery:log-owners&#34; (https://github.com/rust-lang-nursery) via crates: log 9. &#34;github:rust-random:maintainers&#34; (https://github.com/rust-random) via crates: getrandomGithub teams are black boxes. It&#39;s impossible to get the member list without explicit permission.~/src/rust/cargo-supply-chain %  cargo supply-chain updateNote: this will download large amounts of data (approximately 250Mb).On a slow network this will take a while.</p><p>ï¼Œè¿™å°†å‘æ‚¨å±•ç¤ºç»™å®šåŒ…å–å†³äºçš„æ‰€æœ‰åŒ…ã€‚å®ƒå°†è¿˜ä¼šè¯„ä¼°æœ‰å¤šå°‘ä¸ªå‘å¸ƒè€…ä½œè€…ä½œè€…ç¼–å†™è¿™äº›ä¾èµ–é¡¹ã€‚åœ¨è¿™é‡Œï¼Œå½“æ‚¨è¿è¡Œä¾›åº”é“¾æœ¬èº«æ—¶ï¼šã€œ/ src /é”ˆ/è´§ç‰©ä¾›åº”é“¾ï¼…è´§ç‰©ä¾›åº”é“¾å‘å¸ƒè€…å°†å¿½ç•¥ä»¥ä¸‹ç®±å­ï¼Œå› ä¸ºå®ƒä»¬æ¥è‡ªå½“åœ°ç›®å½•ï¼š - è´§ç‰©ä¾›åº” -  Chainthe`æ¿æ¡ç®±æœªæ‰¾åˆ°.IO`ç¼“å­˜æˆ–å®ƒæ— æ•ˆã€‚è¿è¡Œâ€œè´§ç‰©ä¾›åº”é“¾æ›´æ–°â€ä»¥ç”Ÿæˆå®ƒã€‚æ¥è‡ªç®±å­çš„å‘å¸ƒå•†ä¿¡æ¯.IOTHISç”±äºAPIç‡Limitsfettingæ•°æ®ä¸ºï¼†ï¼ƒ34; Adlerï¼†ï¼ƒ34; ï¼ˆ0/79ï¼‰[77é¡¹ï¼ŒåŒ…æ‹¬ä¸€äº›ä»¤äººæƒŠè®¶çš„é¡¹ç›®ï¼ŒLeated ...]è·å–ï¼†ï¼ƒ34; XATTRï¼†ï¼ƒ34; ï¼ˆ78/79ï¼‰ä»¥ä¸‹ä¸ªäººå¯ä»¥å‘å¸ƒä¾èµ–å…³ç³»çš„æ›´æ–°ï¼š1ã€‚AlexCrichtoné€šè¿‡é“¾æ¡ï¼šFlate2ï¼ŒWASM-BINDGEN-åç«¯ï¼ŒWASIï¼ŒBitFlagsï¼ŒProc-Macro2ï¼ŒWASM-BINDGEN-MACROï¼ŒWASM-BINDGENï¼ŒOPENSSL-PROBE ï¼ŒUnicode-xidï¼ŒWASM-Bindgen-å®æ”¯æŒï¼Œæ–‡ä»¶ï¼ŒSemverï¼ŒTarï¼ŒUnicode-rancormizationï¼ŒLibcï¼ŒJS-Sysï¼ŒBumpaloï¼ŒLogï¼ŒWASM-Bindgen-Sharedï¼ŒCFG-IFï¼ŒCCï¼ŒWeb-Sys [55ä½œè€…æ‰€é€‰æ‹©çš„......] 57.é€šè¿‡æ¿æ¡ç®±çš„Zestererï¼šSpinnoteï¼šå¯èƒ½æœ‰ä¼˜ç§€çš„å‡ºç‰ˆå•†é‚€è¯·å‡½ã€‚ Crates.ioæ²¡æœ‰æä¾›åˆ—å‡ºå®ƒä»¬çš„æ–¹æ³•ã€‚æ’¤æ¶ˆä¹Ÿæ— æ³•æ’¤æ¶ˆï¼Œè€Œä¸”ä»–ä»¬ä»æœªexpire.se https://github.com/rust-lang/crates.io/issues/2868è·å–æ›´å¤šä¿¡æ¯ã€‚æ‰€æœ‰çš„æˆå‘˜ä»¥ä¸‹å›¢é˜Ÿå¯ä»¥å‘å¸ƒä¾èµ–é¡¹çš„æ›´æ–°ï¼š1.ï¼†ï¼ƒ34; GitHubï¼šRustwasmï¼šCoreï¼†ï¼ƒ34; ï¼ˆhttps://github.com/rustwasmï¼‰é€šè¿‡ç®±å­ï¼šweb-sysï¼Œjs-sysï¼Œwasm-bindgen-macroï¼Œwasm-bindgen-accro-supportï¼Œwasm-bindgen-beftendï¼Œwasm-bindgenï¼Œwasm-bindgen-å…±äº«2.ï¼†ï¼ƒ34; GitHubï¼šä¼ºæœï¼šCargo-Publishï¼†ï¼ƒ34; ï¼ˆhttps://github.com/servoï¼‰é€šè¿‡ç®±å­ï¼šæ ¸å¿ƒåŸºç¡€ -  sysï¼Œç™¾åˆ†æ¯” - ç¼–ç ï¼Œform_urlencodedï¼Œunicode-bidiï¼Œæ ¸å¿ƒåŸºç¡€ï¼Œidnaï¼Œurl 3.ï¼†ï¼ƒ34; githubï¼šä¼ºæœï¼šrust-urlï¼† ï¼ƒ34; ï¼ˆhttps://github.com/servoï¼‰é€šè¿‡é“¾æ¡ï¼šç¼–ç ç™¾åˆ†æ¯”ï¼Œform_urlencodedï¼Œidnaï¼Œurl 4.ï¼†ï¼ƒ34; githubï¼šrust-busï¼šç»´æŠ¤è€…ï¼†ï¼ƒ34; ï¼ˆhttps://github.com/rust-busï¼‰é€šè¿‡ç®±å­ï¼šå®‰å…¨æ¡†æ¶ -  sysï¼Œå®‰å…¨æ¡†æ¶ï¼Œtinyvec 5.ï¼†ï¼ƒ34; githubï¼šrust-lang-æ‰˜å„¿æ‰€ï¼šlibsï¼†ï¼ƒ34; ï¼ˆhttps://github.com/rust-lang-nurseryï¼‰é€šè¿‡ç®±å­ï¼šbitflagsï¼Œlogï¼Œlogï¼Œlazy_static 6.ï¼†ï¼ƒ34; githubï¼šserde-rsï¼šä¸šä¸»ï¼†ï¼ƒ34; ï¼ˆhttps://github.com/serde -rsï¼‰é€šè¿‡ç®±å­ï¼šserde_deriveï¼Œserdeï¼Œserde_json 7.ï¼†ï¼ƒ34; githubï¼šrust-langï¼šlibsï¼†ï¼ƒ34; ï¼ˆhttps://github.com/rust-langï¼‰é€šè¿‡é“¾æ¡ï¼šlibcï¼Œcfg-if 8.ï¼†ï¼ƒ34; githubï¼šrust-lang-æ‰˜å„¿æ‰€ï¼šè®°å½•ä¸šä¸»ï¼†ï¼ƒ34; ï¼ˆhttps://github.com/rust-lang-nurseryï¼‰é€šè¿‡é“¾æ¡ï¼šlog 9.ï¼†ï¼ƒ34; githubï¼šrust-wandomï¼šç»´æŠ¤è€…ï¼†ï¼ƒ34; ï¼ˆhttps://github.com/rust-randomï¼‰é€šè¿‡é“¾æ¡ï¼šgetrandomgithubå›¢é˜Ÿæ˜¯é»‘è‰²ç›’å­ã€‚å¦‚æœæ²¡æœ‰æ˜ç¡®è®¸å¯ï¼Œå®ƒæ˜¯ä¸å¯èƒ½è·å–ä¼šå‘˜åå•ã€‚ã€œ/ src /é”ˆ/è´§ç‰©ä¾›åº”é“¾ï¼…è´§æºé“¾ä¾›åº”é“¾UpdateNoteï¼šè¿™å°†ä¸‹è½½å¤§é‡æ•°æ®ï¼ˆçº¦250mbï¼‰.onæ…¢ç½‘ç»œéœ€è¦ä¸€æ®µæ—¶é—´ã€‚</p><p> Now, thatâ€™s a lot of dependencies by a lot of publishers whom I donâ€™t know.(Although itâ€™s not automated, if you dig around youâ€™ll find that many of thoseauthors are well-established members of the Rust development team, so trustingthem is an easier sell.) Another bummer is that, when I built supply-chain, mydefault  $CFLAGS broke the build ( Update 18 Feb: with analmost certainly spurious and not security-relevant warning, -Wunused-macros). (My flags are quite persnickety: -Weverything -Werror -std=c11. Very little code builds with theseflags. ğŸ˜‡) Apparently, some of supply-chainâ€™s own dependencies depend on C code.Alas.</p><p> ç°åœ¨ï¼Œè¿™æ˜¯æˆ‘ä¸çŸ¥é“çš„å¾ˆå¤šå‡ºç‰ˆå•†çš„å¾ˆå¤šä¾èµ–ã€‚ï¼ˆè™½ç„¶å®ƒä¸æ˜¯è‡ªåŠ¨åŒ–çš„ï¼Œå¦‚æœä½ æŒ–æ˜ä½ ä¼šå‘ç°è®¸å¤šTheSeauthorsæ˜¯ç”Ÿé”ˆå¼€å‘å›¢é˜Ÿçš„æˆå‘˜ï¼Œæ‰€ä»¥ä¿¡ä»»æ˜¯ä¸€ä¸ªæ›´å®¹æ˜“çš„å–ã€‚ ï¼ˆæˆ‘çš„æ——å¸œéå¸¸å‚ç›´ï¼š-weverything -Werror -Std = C11ã€‚å¾ˆå°‘çš„ä»£ç ç”¨ThemoPlagsæ„å»ºã€‚ğŸ˜‡ï¼‰æ˜¾ç„¶ï¼Œä¸€äº›ä¾›åº”é“¾è‡ªå·±çš„ä¾èµ–å…³ç³»å–å†³äºCä»£ç ã€‚</p><p> But thatâ€™s OK! Cargo provides a framework for working on these problems. Overtime, Iâ€™d like to see things move along these lines:</p><p> ä½†é‚£æ²¡å…³ç³»ï¼è´§ç‰©æä¾›äº†ä¸€ä¸ªåŠªåŠ›è§£å†³è¿™äº›é—®é¢˜çš„æ¡†æ¶ã€‚åŠ ç­ï¼Œæˆ‘æƒ³çœ‹çœ‹äº‹æƒ…æ²¿ç€è¿™äº›çº¿æ¡ç§»åŠ¨ï¼š</p><p> Replace C/C++ dependencies with Rust, and reduce the use of unsafe. This has been happening, and will continue to, over time.(See  the Safety Danceproject, which is a focused on reducing the use of unsafe.)</p><p> ç”¨Rustæ›¿æ¢C / C ++ä¾èµ–å…³ç³»ï¼Œå¹¶å‡å°‘ä¸å®‰å…¨çš„ä½¿ç”¨ã€‚è¿™å·²ç»å‘ç”Ÿï¼Œå¹¶å°†ç»§ç»­ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ã€‚ï¼ˆå‚è§å®‰å…¨èˆæ›²ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“æ³¨äºå‡å°‘ä¸å®‰å…¨çš„ä½¿ç”¨ã€‚ï¼‰</p><p> Coalesce the most common dependencies into a (semi-)official â€˜extended stdâ€™, so that they can appear as a single dependency with a singlepublishing team. This is controversial in some communities, but I think it wouldgo a long way toward reducing the problems.</p><p> å°†æœ€å¸¸è§çš„ä¾èµ–æ€§ä¸ï¼ˆåŠï¼‰å®˜æ–¹çš„â€œæ‰©å±•STDâ€ç»“åˆï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥ä½œä¸ºå•ä¸€ä¾èµ–ä¸å•ä¸€çš„å›¢é˜Ÿã€‚è¿™åœ¨æŸäº›ç¤¾åŒºå­˜åœ¨äº‰è®®ï¼Œä½†æˆ‘è®¤ä¸ºè¿™å°†æ˜¯å‡å°‘é—®é¢˜çš„æ¼«é•¿æ–¹æ³•ã€‚</p><p> Obviate some of the micro-dependencies by folding them into larger, moregeneral packages including the language itself,  std, and â€˜extended stdâ€™ (where and if appropriate). This is also sometimescontroversial, but again I think it would help.</p><p> é€šè¿‡å°†å®ƒä»¬æŠ˜å æˆè¾ƒå¤§ï¼Œæ›´å¤šçš„å¥—è£…åŒ…ï¼ŒåŒ…æ‹¬è¯­è¨€æœ¬èº«ï¼ŒSTDå’Œâ€œæ‰©å±•STDâ€ï¼ˆåœ¨å“ªé‡Œä»¥åŠé€‚å½“çš„æ–¹å¼ï¼‰æ¥é¿å…ä¸€äº›å¾®ä¾èµ–æ€§ã€‚è¿™ä¹Ÿæ˜¯æœ‰æ—¶å€™ï¼Œä½†æˆ‘è®¤ä¸ºå®ƒä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p><p> Perhaps supply-chain, check, clippy, or a new tool could provide someindication of a packageâ€™s reputation or something like what the Perl communityjokingly calls  kwalitee:Not quality, but overall â€˜smellsâ€™. Good test coverage? Is the package versiongreater than 1.0? Actively maintained? Frequently used? Maintained by the samepeople for a long time? A low proportion of lines of code in  unsafeblocks, or in C/C++/assembly? Some of these things can be more or lessautomatically determined, and tooling could flag packages that stand out.  Funupdate 18 Feb: Such a thing exists, and is called  crev</p><p> ä¹Ÿè®¸ä¾›åº”é“¾ï¼Œæ£€æŸ¥ï¼Œclippyæˆ–ä¸€ä¸ªæ–°å·¥å…·å¯ä»¥æä¾›åŒ…è£…çš„å£°èª‰æˆ–ç±»ä¼¼äºPerl Communitjokinglyç§°ä¹‹ä¸ºkwaliteeï¼šä¸æ˜¯è´¨é‡çš„ä¸œè¥¿ï¼Œè€Œæ˜¯æ•´ä½“â€œé—»èµ·æ¥â€ã€‚è‰¯å¥½çš„æµ‹è¯•è¦†ç›–èŒƒå›´ï¼Ÿ Package VersionGreaterå°äº1.0å—ï¼Ÿç§¯æç»´æŠ¤ï¼Ÿç»å¸¸ä½¿ç”¨ï¼Ÿé•¿æœŸä»¥æ¥ä¸€ç›´ç”±ä»–äººç»´æŒï¼Ÿä¸å®‰å…¨å—ä¸­çš„ä»£ç ä¸­çš„ä¸€è¡Œæˆ–åœ¨C / C ++ /ç»„ä»¶ä¸­çš„ä½æ¯”ä¾‹è¿™äº›ä¸œè¥¿ä¸­çš„ä¸€äº›å¯ä»¥æ›´å¤šæˆ–å°äºè‡ªåŠ¨ç¡®å®šï¼Œå¹¶ä¸”å·¥å…·å¯ä»¥æ ‡è®°è„±é¢–è€Œå‡ºçš„åŒ…è£¹ã€‚ Funupdate 18æœˆ18æ—¥ï¼šè¿™æ ·çš„ä¸œè¥¿å­˜åœ¨ï¼Œå¹¶ä¸”è¢«ç§°ä¸ºcrev </p><p>. Awesome! Another good thing about Rust is its friendly community. Not all systemsprogramming communities are as welcoming as Rustâ€™s is. Rust, and some othercommunities, have taken  proactive steps tomaintain a healthy community</p><p>ã€‚æƒŠäººçš„ï¼ Rustçš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯å…¶å‹å¥½çš„ç¤¾åŒºã€‚å¹¶éæ‰€æœ‰çš„ç³»ç»Ÿç¼–ç¨‹ç¤¾åŒºéƒ½åƒRustä¸€æ ·å—æ¬¢è¿ã€‚ Rustå’Œå…¶ä»–ä¸€äº›ç¤¾åŒºå·²é‡‡å–ç§¯ææªæ–½æ¥ç»´æŠ¤å¥åº·çš„ç¤¾åŒº</p><p>. I think itâ€™s fair to say the Rust community isdoing relatively well, especially in the systems programming niche. Like all language communities, whether of natural languages or artificiallanguages, the community and the body of literature and the oral tradition arewhat matter. In its niche, Rust looks like the option with the most momentumaround a more positive, healthier community. The community and the language areprobably not perfectâ€Šâ€”â€Šnothing is, if perfect is even a thingâ€Šâ€”â€Šbut Rust lookslike the community most open to solving its problems, and most capable ofsolving systems programming problems.</p><p>ã€‚æˆ‘è®¤ä¸ºå¯ä»¥è¯´Rustç¤¾åŒºåšå¾—ç›¸å¯¹ä¸é”™ï¼Œå°¤å…¶æ˜¯åœ¨ç³»ç»Ÿç¼–ç¨‹é¢†åŸŸã€‚åƒæ‰€æœ‰è¯­è¨€ç¤¾åŒºä¸€æ ·ï¼Œæ— è®ºæ˜¯è‡ªç„¶è¯­è¨€è¿˜æ˜¯äººå·¥è¯­è¨€ï¼Œç¤¾åŒºå’Œæ–‡å­¦ä¸»ä½“ä»¥åŠå£å¤´ä¼ ç»Ÿéƒ½è‡³å…³é‡è¦ã€‚åœ¨å…¶åˆ©åŸºå¸‚åœºä¸­ï¼ŒRustçœ‹èµ·æ¥æ˜¯å›´ç»•ä¸€ä¸ªæ›´ç§¯æï¼Œæ›´å¥åº·çš„ç¤¾åŒºå‘å±•æœ€å¿«çš„é€‰æ‹©ã€‚ç¤¾åŒºå’Œè¯­è¨€å¯èƒ½ä¸æ˜¯å®Œç¾çš„-å“ªæ€•æ˜¯å®Œç¾çš„ä¸œè¥¿ä¹Ÿæ²¡æœ‰-ä½†æ˜¯Rustä¼¼ä¹æ˜¯ç¤¾åŒºæœ€æ„¿æ„è§£å†³å…¶é—®é¢˜ï¼Œå¹¶ä¸”æœ€æœ‰èƒ½åŠ›è§£å†³ç³»ç»Ÿç¼–ç¨‹é—®é¢˜ã€‚</p><p>  Thanks to Sergey Davidoff, supply-chain maintainer, for pointing me atcrev and noting that Safety Dance is more about reducing  unsafethan C.</p><p>  æ„Ÿè°¢ä¾›åº”é“¾ç»´æŠ¤è€…è°¢å°”ç›–Â·æˆ´ç»´å¤šå¤«ï¼ˆSergey Davidoffï¼‰ä¸ºæˆ‘æŒ‡å‡ºäº†è‡ªä¿¡ï¼Œå¹¶æŒ‡å‡ºâ€œå®‰å…¨ä¹‹èˆâ€çš„ç›®çš„åœ¨äºå‡å°‘ä¸å®‰å…¨æ„Ÿã€‚</p><p> Noncombatant.org by  Chris Palmer is in the Creative Commons, under theterms of the  Attribution-NonCommercial-ShareAlike4.0 International License.</p><p> å…‹é‡Œæ–¯Â·å¸•å°”é»˜ï¼ˆChris Palmerï¼‰æ’°å†™çš„Noncombatant.orgä½äºåˆ›ç”¨CCï¼Œå—Attribution-NonCommercial-ShareAlike4.0å›½é™…è®¸å¯çš„çº¦æŸã€‚ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://noncombatant.org/2021/02/16/maybe-we-can-have-nice-things/">https://noncombatant.org/2021/02/16/maybe-we-can-have-nice-things/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/æ‹¥æœ‰/">#æ‹¥æœ‰</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/nice/">#nice</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>