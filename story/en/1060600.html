<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨Webç»„ä»¶ How we use web components</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">How we use web components<br/>æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨Webç»„ä»¶ </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-05-05 20:56:33</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/5/8a5cdda641447f749a5b8cbea7d113a1.png"><img src="http://img2.diglog.com/img/2021/5/8a5cdda641447f749a5b8cbea7d113a1.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>At GitHub, we pride ourselves on delivering a first-class developer experience. A considerable part of our work is on our front end, which we strive to keep as lightweight, fast, and accessible as possible. For a product as large as GitHub, this can be quite the task. Like many front-end codebases, we leverage components, independent, isolated, and reusable pieces of code that allow application teams to deliver high fidelity UI quickly and efficiently while still keeping to our high standards of quality.</p><p>åœ¨GitHubï¼Œæˆ‘ä»¬ä¸ºæä¾›ä¸€æµçš„å¼€å‘äººå‘˜ä½“éªŒè€Œè‡ªè±ªã€‚æˆ‘ä»¬æ­£é¢çš„ä¸€éƒ¨åˆ†æ˜¯æˆ‘ä»¬çš„å‰ç«¯ï¼Œæˆ‘ä»¬åŠªåŠ›ä¿æŒå°½å¯èƒ½è½»ä¾¿ï¼Œå¿«é€Ÿï¼Œå¿«é€Ÿã€‚å¯¹äºåƒGitHubä¸€æ ·å¤§çš„äº§å“ï¼Œè¿™å¯ä»¥æ˜¯å®Œå…¨çš„ä»»åŠ¡ã€‚ä¸è®¸å¤šå‰ç«¯ç å¸ƒä¸€æ ·ï¼Œæˆ‘ä»¬åˆ©ç”¨ç»„ä»¶ï¼Œç‹¬ç«‹ï¼Œéš”ç¦»å’Œå¯é‡å¤ä½¿ç”¨çš„ä»£ç ï¼Œå…è®¸åº”ç”¨å›¢é˜Ÿå¿«é€Ÿæœ‰æ•ˆåœ°æä¾›é«˜ä¿çœŸUIï¼ŒåŒæ—¶ä»ç„¶ä¿æŒé«˜æ ‡å‡†çš„è´¨é‡ã€‚</p><p> Weâ€™re using Web Components in a big way at GitHub. We have  over a dozen open-source Web Components and with dozens more that are closed source.</p><p> æˆ‘ä»¬åœ¨GitHubä¸­ä½¿ç”¨Webç»„ä»¶ã€‚æˆ‘ä»¬æ‹¥æœ‰åå‡ ä¸ªå¼€æºWebç»„ä»¶ï¼Œå¹¶ä¸”æ•°åä¸ªæ˜¯å°é—­æºçš„æ›´å¤šã€‚</p><p>  When GitHub launched over a decade ago, we had a modest front-end codebase that mostly used jQuery. Ten years and nearly 85,000 lines of code later, we had a large front-end codebase that was starting to show growing pains. We ultimately transitioned away from jQuery ( for reasons which we detailed in a blog post at the time) and started using new technologies which could better solve our problems.</p><p>  å½“GitHubåœ¨åå¹´å‰æ¨å‡ºæ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé€‚åº¦çš„å‰ç«¯ä»£ç åº“ï¼Œä¸»è¦ç”¨äºjQueryã€‚åå¹´å’Œè¿‘85,000è¡Œä»£ç ç¨åï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¤§å‹å‰ç«¯ç å¸ƒå¼€å§‹å±•ç¤ºæˆé•¿çš„ç—›è‹¦ã€‚æˆ‘ä»¬æœ€ç»ˆä»jQueryè½¬å˜ï¼ˆå‡ºäºå½“æ—¶çš„åšå®¢æ–‡ç« ä¸­è¯¦è¿°çš„åŸå› ï¼‰å¹¶å¼€å§‹ä½¿ç”¨èƒ½å¤Ÿæ›´å¥½åœ°è§£å†³æˆ‘ä»¬é—®é¢˜çš„æ–°æŠ€æœ¯ã€‚</p><p> We began to dabble with a new technology called   Web Components, a set of native browser technologies that allow the development of customized HTML elements, progressively enhanced with JavaScript.</p><p> æˆ‘ä»¬å¼€å§‹æ¶‰åŠä¸€ç§åä¸ºWebç»„ä»¶çš„æ–°æŠ€æœ¯ï¼Œè¿™æ˜¯ä¸€ç»„å…è®¸å¼€å‘è‡ªå®šä¹‰HTMLå…ƒç´ çš„æœ¬æœºæµè§ˆå™¨æŠ€æœ¯ï¼Œé€æ­¥å¢å¼ºäº†JavaScriptã€‚</p><p> We chose to use Web Components because our codebase was already structured into component-like behaviors. Still, as the GitHub monolith grew in size, we saw the need to implement better encapsulations before the front-end became unmanageable â€“ and Web Components fit the bill. Web Components offered better portability and encapsulation than our existing JavaScript behaviors. We were happy to experiment with Web Components alongside our existing front-end infrastructure since it doesnâ€™t incur any upfront cost or â€œbuy-inâ€ to a specific framework.</p><p> æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨Webç»„ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä»£ç åº“å·²ç»æ„å»ºæˆç»„ä»¶ç±»ä¼¼çš„è¡Œä¸ºã€‚å°½ç®¡å¦‚æ­¤ï¼Œéšç€GitHub Monolithçš„è§„æ¨¡ï¼Œæˆ‘ä»¬è®¤ä¸ºåœ¨å‰ç«¯å˜å¾—æ— æ³•ç®¡ç†ä¹‹å‰ï¼Œæˆ‘ä»¬çœ‹åˆ°éœ€è¦æ›´å¥½çš„å°è£… - å¹¶ä¸”Webç»„ä»¶é€‚åˆè´¦å•ã€‚ Webç»„ä»¶æä¾›æ¯”æˆ‘ä»¬ç°æœ‰çš„JavaScriptè¡Œä¸ºæ›´å¥½çš„å¯ç§»æ¤æ€§å’Œå°è£…ã€‚æˆ‘ä»¬å¾ˆä¹æ„ä¸æˆ‘ä»¬ç°æœ‰çš„å‰ç«¯åŸºç¡€æ¶æ„ä¸€èµ·å°è¯•ç½‘ç»œç»„ä»¶ï¼Œå› ä¸ºå®ƒä¸ä¼šå¯¹ç‰¹å®šæ¡†æ¶çš„é¢„ä»˜æˆæœ¬æˆ–â€œä¹°å…¥â€å¹¶ä¸äº§ç”Ÿã€‚</p><p> Our first two custom elements shipped in 2014:   &lt;relative-time&gt; and  &lt;local-time&gt;, which show times and dates in friendly formats, and   &lt;include-fragment&gt;, which allows us to lazy load HTML fragments. Slowly we realized just how powerful these elements could be and began replacing design patterns within the codebase wholesale, such as replacing our â€œfaceboxâ€ modal dialog pattern with   &lt;details-dialog&gt;. Our components now range from very generic, multi-purpose behaviors like   &lt;remote-input&gt; to specific single-purpose components such as the   &lt;markdown-toolbar&gt; element and its siblings.</p><p> æˆ‘ä»¬çš„å‰ä¸¤ä¸ªè‡ªå®šä¹‰å…ƒç´ äº2014å¹´å‘è´§ï¼šï¼†lt;ç›¸å¯¹æ—¶é—´ï¼†gt;å’Œï¼†lt; local-timeï¼†gt;ï¼Œä»¥å‹å¥½æ ¼å¼çš„æ˜¾ç¤ºæ—¶é—´å’Œæ—¥æœŸï¼Œï¼†lt; include-fragmentï¼†gt;ï¼Œå®ƒå…è®¸æˆ‘ä»¬å»¶è¿ŸåŠ è½½HTMLç‰‡æ®µã€‚æ…¢æ…¢åœ°ï¼Œæˆ‘ä»¬å®ç°äº†è¿™äº›å…ƒç´ çš„åŠŸèƒ½å¦‚ä½•å¼ºå¤§ï¼Œå¹¶å¼€å§‹æ›¿æ¢CodeBaseæ‰¹å‘å†…çš„è®¾è®¡æ¨¡å¼ï¼Œä¾‹å¦‚ç”¨ï¼†lt;è¯¦ç»†ä¿¡æ¯å¯¹è¯æ¡†æ›¿æ¢æˆ‘ä»¬çš„â€œé¢å‘æ¡†â€æ¨¡æ€å¯¹è¯æ¡†æ¨¡å¼ã€‚æˆ‘ä»¬çš„ç»„ä»¶ç°åœ¨çš„èŒƒå›´æ˜¯ï¼†lt;è¿œç¨‹è¾“å…¥ï¼†gtçš„éå¸¸é€šç”¨çš„å¤šåŠŸèƒ½è¡Œä¸ºã€‚å¯¹äºç‰¹å®šçš„å•ä¸€ç”¨é€”ç»„ä»¶ï¼Œä¾‹å¦‚ï¼†lt; markdown-toolbarï¼†gt;å…ƒç´ åŠå…¶å…„å¼Ÿå§å¦¹ã€‚</p><p> For the power Web Components affords, there are still pain points and pitfalls. With such a large codebase owned by hundreds of engineers across dozens of teams, we need to provide as much support and tooling as possible, encoding best practices without manual code review becoming a bottleneck.</p><p> å¯¹äºç”µæºç½‘ç»„ä»¶æä¾›ï¼Œä»æœ‰ç–¼ç—›ç‚¹å’Œé™·é˜±ã€‚é€šè¿‡è·¨è¶Šæ•°åä¸ªå›¢é˜Ÿçš„æ•°ç™¾åå·¥ç¨‹å¸ˆæ‹¥æœ‰çš„å¦‚æ­¤å¤§çš„CodeBaseï¼Œæˆ‘ä»¬éœ€è¦æä¾›å°½å¯èƒ½å¤šçš„æ”¯æŒå’Œå·¥å…·ï¼Œç¼–ç æœ€ä½³å®è·µï¼Œæ— éœ€æ‰‹åŠ¨ä»£ç å®¡æŸ¥æˆä¸ºä¸€ä¸ªç“¶é¢ˆã€‚ </p><p>  To make engineers effective at writing high-quality Web Componentsâ€”and encourage best practicesâ€”weâ€™ve been working on a few tools to make authoring Web Components much easier.</p><p>ä¸ºäº†ä½¿å·¥ç¨‹å¸ˆåœ¨ç¼–å†™é«˜è´¨é‡çš„Webç»„ä»¶æ—¶ - å¹¶é¼“åŠ±æœ€ä½³å®è·µ - æˆ‘ä»¬ä¸€ç›´åœ¨åŠªåŠ›ä½¿åˆ›ä½œWebç»„ä»¶æ›´å®¹æ˜“çš„å·¥å…·ã€‚</p><p>  Weâ€™ve been transitioning our Rails code to using ViewComponent, a framework for building reusable components within Rails. ViewComponent goes hand-in-hand with Web Components since a ViewComponent can have a one-to-one relationship with a Web Component, allowing our developers to work on a single abstraction for both front-end and backend.</p><p>  æˆ‘ä»¬ä¸€ç›´å°†æˆ‘ä»¬çš„Railsä»£ç è½¬æ¢ä¸ºä½¿ç”¨ViewComponentï¼Œè¿™æ˜¯ä¸€ç§åœ¨Railsä¸­æ„å»ºå¯é‡ç”¨ç»„ä»¶çš„æ¡†æ¶ã€‚ ViewComponentä½¿ç”¨Webç»„ä»¶æºæ‰‹ï¼Œå› ä¸ºViewComponentå¯ä»¥ä¸Webç»„ä»¶å…·æœ‰ä¸€å¯¹ä¸€å…³ç³»ï¼Œå…è®¸æˆ‘ä»¬çš„å¼€å‘äººå‘˜å¯¹å‰ç«¯å’Œåç«¯çš„å•ä¸ªæŠ½è±¡å·¥ä½œã€‚</p><p>  Catalyst, our open source library that makes it easier to write web components, has been a driving force that ties together some of our best practices. Catalyst leverages TypeScript to add decorators, which save on a lot of the boilerplate necessary to write Web Components.</p><p>  Catalystï¼Œæˆ‘ä»¬çš„å¼€æºåº“ï¼Œä½¿å…¶æ›´å®¹æ˜“ç¼–å†™Webç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¨åŠ¨åŠ›ï¼Œè¿™äº›é©±åŠ¨åŠ›ä¸æˆ‘ä»¬çš„æœ€ä½³å®è·µä¸­çš„ä¸€äº›æœ‰å…³ã€‚ Catalyståˆ©ç”¨TypeScriptæ·»åŠ è£…é¥°å™¨ï¼Œè¯¥è£…é¥°å™¨ä¿å­˜åœ¨ç¼–å†™Webç»„ä»¶æ‰€éœ€çš„å¾ˆå¤šæ ·å¼æ¿ä¸Šã€‚</p><p> Catalyst took inspiration from the excellent  Stimulus library, and Googleâ€™s  LitElement. It is designed to answer the specific set of needs our developers require. Our internal developer experience surveys have shown success in providing a substantial improvement in authoring code over legacy patterns.</p><p> å‚¬åŒ–å‰‚ä»ä¼˜ç§€çš„åˆºæ¿€å›¾ä¹¦é¦†å’Œè°·æ­Œçš„è¯‰è®¼ä¸­è·å–äº†çµæ„Ÿã€‚å®ƒæ—¨åœ¨å›ç­”æˆ‘ä»¬å¼€å‘äººå‘˜éœ€è¦çš„ç‰¹å®šéœ€æ±‚é›†ã€‚æˆ‘ä»¬çš„å†…éƒ¨å¼€å‘äººå‘˜ä½“éªŒè°ƒæŸ¥è¡¨æ˜äº†åœ¨é—ç•™æ¨¡å¼ä¸‹æä¾›äº†é‡å¤§æ”¹è¿›ã€‚</p><p> You can read more about Catalyst and its conventions, patterns, and anti-patterns in our  guide.</p><p> æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„æŒ‡å—ä¸­é˜…è¯»æ›´å¤šå…³äºCatalyståŠå…¶çº¦å®šï¼Œæ¨¡å¼å’Œåæ¨¡å¼çš„ä¿¡æ¯ã€‚</p><p>  We provide a set of open-source linter configurations for developers. For general code practices we have  eslint-plugin-github. We also have  eslint-plugin-custom-elements, which provides further checks for authoring Web Components. Extracting these to open source repositories allows us to remove code from the monolith but remain consistent.</p><p>  æˆ‘ä»¬ä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç»„å¼€æºLinté…ç½®ã€‚å¯¹äºä¸€èˆ¬ä»£ç å®è·µï¼Œæˆ‘ä»¬æœ‰eslint-plugin-githubã€‚æˆ‘ä»¬è¿˜æœ‰eslint-plugin-custom-compentsï¼Œå®ƒæä¾›äº†è¿›ä¸€æ­¥æ£€æŸ¥åˆ›ä½œWebç»„ä»¶ã€‚æå–è¿™äº›ä»¥å¼€æºå­˜å‚¨åº“å…è®¸æˆ‘ä»¬ä»å•ç”˜çŸ³ä¸­åˆ é™¤ä»£ç ï¼Œä½†ä¿æŒä¸€è‡´ã€‚</p><p> We also have internal tests to verify that developers follow best practices and ensure that they donâ€™t continue to use deprecated patterns and behaviors. One of our tests makes sure that a deprecated â€œfaceboxâ€ pattern isnâ€™t introduced to the codebase and suggests using a   &lt;details-dialog&gt; element as an alternative.</p><p> æˆ‘ä»¬è¿˜å…·æœ‰å†…éƒ¨æµ‹è¯•ï¼Œä»¥éªŒè¯å¼€å‘äººå‘˜éµå¾ªæœ€ä½³å®è·µï¼Œå¹¶ç¡®ä¿ä»–ä»¬ä¸ç»§ç»­ä½¿ç”¨å·²å¼ƒç”¨æ¨¡å¼å’Œè¡Œä¸ºã€‚æˆ‘ä»¬çš„æµ‹è¯•ä¹‹ä¸€ï¼Œç¡®ä¿ä¸æ¨å‡ºå¼ƒç”¨çš„â€œé¢éƒ¨æ¡†â€æ¨¡å¼ï¼Œå¹¶ä½¿ç”¨Aï¼†lt; dialogy-dialogï¼†gt;å…ƒç´ ä½œä¸ºæ›¿ä»£å“ã€‚ </p><p> class FaceboxDeprecationTest &lt; Test::Fast::TestCase EXPECTED_NUMBER_OF_FACEBOXES = 44 # Find facebox triggers set with rel=facebox, in either HTML attributes or # as part of hash assignment (for rails helpers) REGEX_FOR_FACEBOX_BINDING = %r|rel\s*[=:]&gt;?\s*[&#34;&#39;]?facebox| REGEX_FOR_DATA_FACEBOX = %r|data-facebox\s*=&gt;?\s*| def test_limit_facebox actual_rel_facebox = grep(REGEX_FOR_FACEBOX_BINDING, options: %w[-In], paths: %w[app/**/*.erb]) actual_data_facebox = grep(REGEX_FOR_DATA_FACEBOX, options: %w[-In], paths: %w[app/**/*.erb]) count = actual_rel_facebox.count(&#34;\n&#34;) + actual_data_facebox.count(&#34;\n&#34;) assert_operator count, :&lt;=, EXPECTED_NUMBER_OF_FACEBOXES, &lt;&lt;-EOLIt looks like you added a facebox. Please use &lt;details-dialog&gt; instead.If you must increment EXPECTED_NUMBER_OF_FACEBOXES in this test, please/cc @github/ui-frameworks-reviewers in your pull request, as we may be able to help! Thanks.EOL assert_equal EXPECTED_NUMBER_OF_FACEBOXES, count, &lt;&lt;-EOLIt looks like you removed a facebox. YOU ARE AWESOME! ğŸ’– ğŸ’– ğŸ’– ğŸ’– ğŸ’–Please decrement EXPECTED_NUMBER_OF_FACEBOXES in this test and treat yourself tosomething special. You deserve it.EOL endend</p><p>Class FaceBoxDeprecationTestï¼†lt; test :: fast :: testcaseé¢„æœŸ_number_of_faceboxes = 44ï¼ƒæŸ¥æ‰¾ä½¿ç”¨rel = faceboxè®¾ç½®çš„é¢éƒ¨æ¡†è§¦å‘å™¨ï¼Œåœ¨htmlå±æ€§æˆ–ï¼ƒä¸­ä½œä¸ºå“ˆå¸Œåˆ†é…çš„ä¸€éƒ¨åˆ†ï¼ˆå¯¹äºRailså¸®åŠ©è€…ï¼‰Regex_for_faceBox_Binding =ï¼…R | rel \ï¼…r | rel \ s * [=ï¼š]ï¼†gt ;ï¼Ÿ\ s * [ï¼†ï¼ƒ34;ï¼†ï¼ƒ39;]ï¼Ÿé¢å‘æ¡†æ¶regex_for_data_facebox =ï¼…r |æ•°æ®é¢æ¡†\ s * =ï¼†gt;ï¼Ÿ\ s * | def test_limit_faceboxå®é™…_rel_facebox = grepï¼ˆregex_for_facebox_bindingï¼Œé€‰é¡¹ï¼šï¼…w [-in]ï¼Œpathsï¼šï¼…w [app / ** / *ã€‚erb]ï¼‰å®é™…_data_facebox = grepï¼ˆregex_for_data_faceboxï¼Œé€‰é¡¹ï¼šï¼…w [-in]ï¼Œpathsï¼šï¼… w [app / ** / *ã€‚erb]ï¼‰count =å®é™…= actic_rel_facebox.countï¼ˆï¼†ï¼ƒ34; \ nï¼†ï¼ƒ34;ï¼‰+ active_data_facebox.countï¼ˆï¼†ï¼ƒ34; \ nï¼†ï¼ƒ34;ï¼‰assert_operator countï¼Œï¼šï¼†lt; = ï¼Œé¢„æœŸçš„_number_of_faceboxesï¼Œï¼†lt;ï¼†lt;ï¼†lt; -eolitçœ‹èµ·æ¥æ‚¨æ·»åŠ äº†ä¸€ä¸ªé¢éƒ¨æ¡†ã€‚è¯·ä½¿ç”¨ï¼†lt;è¯¦ç»†ä¿¡æ¯å¯¹è¯æ¡†å’Œgt;ç›¸åã€‚å¦‚æœæ‚¨å¿…é¡»åœ¨æ­¤æµ‹è¯•ä¸­é€’å¢é¢„æœŸï¼Œè¯·åœ¨æ­¤æµ‹è¯•ä¸­ï¼Œè¯·/ cc @ github / ui-frameworks-readyersï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½ä¼šæä¾›å¸®åŠ©ï¼ vishent.eol assert_equalé¢„æœŸ_number_of_faceboxesï¼Œcountï¼Œï¼†lt;ï¼†lt; -eolitçœ‹èµ·æ¥åƒä½ åˆ é™¤äº†ä¸€ä¸ªé¢å‘æ¡†ã€‚ä½ å¤ªæ£’äº†ï¼ ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–é€’å‡é¢„æœŸ_Number_of_faceboxesåœ¨æ­¤æµ‹è¯•ä¸­å¹¶äº«å—è‡ªå·±ç‰¹æ®Šçš„ã€‚ä½ åº”è¯¥å¾—åˆ°å®ƒã€‚å°†endend</p><p>  The road from an application-specific front-end behavior to an open-source Web Component starts with a Catalyst component inside the monolith codebase. Components that are good candidates for extraction get generalized into a robust, strictly behavioral, dependency-free Web Component.</p><p>  ä»åº”ç”¨ç¨‹åºç‰¹å®šçš„å‰ç«¯è¡Œä¸ºåˆ°å¼€æºWebç»„ä»¶çš„é“è·¯ä»¥Monolith CodeBaseå†…çš„å‚¬åŒ–å‰‚ç»„ä»¶å¼€å¤´ã€‚æå–è‰¯å¥½å€™é€‰äººçš„ç»„ä»¶å°†å¹¿æ³›åŒ–ä¸ºå¼ºå¤§çš„ï¼Œä¸¥æ ¼çš„è¡Œä¸ºä¾èµ–æ€§Webç»„ä»¶ã€‚</p><p> In the monolith, engineers might prototype ideas and ship them slowly using feature flags while continuously revising them. After the component has been tested in production for some time, we will look for opportunities to lift the component into its own repository. We also regularly assess the codebase to find reusable patterns, generic behaviors, or components that otherwise have a compelling reason to be lifted into their own repositories.</p><p> åœ¨æ•´å½¢å•ç‰‡ä¸­ï¼Œå·¥ç¨‹å¸ˆå¯èƒ½ä¼šåœ¨ä¸æ–­ä¿®æ”¹å®ƒä»¬çš„åŒæ—¶ä½¿ç”¨ç‰¹è‰²æ ‡å¿—æ…¢æ…¢åœ°æ€è€ƒå¹¶æ…¢æ…¢è¿é€å®ƒä»¬ã€‚åœ¨ç»„ä»¶åœ¨ç”Ÿäº§ä¸­è¿›è¡Œäº†ä¸€æ®µæ—¶é—´åï¼Œæˆ‘ä»¬å°†å¯»æ‰¾æœºä¼šå°†ç»„ä»¶å‡çº§ä¸ºè‡ªå·±çš„å­˜å‚¨åº“ã€‚æˆ‘ä»¬è¿˜å®šæœŸè¯„ä¼°CodeBaseï¼Œä»¥æŸ¥æ‰¾å¯é‡ç”¨çš„æ¨¡å¼ï¼Œé€šç”¨è¡Œä¸ºæˆ–ç»„ä»¶ï¼Œå¦åˆ™æœ‰ä»¤äººä¿¡æœçš„åŸå› è¢«è§£é™¤ä¸ºè‡ªå·±çš„å­˜å‚¨åº“ã€‚</p><p>  We encourage developers to write Catalyst components while developing user interfaces within the dotcom monolith. The benefits of utilizing Catalyst from the start are that the library abstracts away some common pitfalls of writing Web Components and enforces best practices.</p><p>  æˆ‘ä»¬é¼“åŠ±å¼€å‘äººå‘˜ç¼–å†™Catalystç»„ä»¶ï¼ŒåŒæ—¶åœ¨Dotcom Monolithå¼€å‘ç”¨æˆ·ç•Œé¢ã€‚åˆ©ç”¨å‚¬åŒ–å‰‚ä»ä¸€å¼€å§‹çš„å¥½å¤„æ˜¯å›¾ä¹¦é¦†æ‘˜è¦ä¸€äº›å¸¸è§çš„å†™ä½œWebç»„ä»¶çš„ç¼ºé™·å¹¶å¼ºåˆ¶æ‰§è¡Œæœ€ä½³å®è·µã€‚</p><p> Registering a Web Component can incur some boilerplate, but we make it easier with naming conventions and a sprinkle of  TypeScript decorators.  Actions in Catalyst make event listening easier than managing global event listeners. Mutating  targets for existing HTML is better than rendering HTML templates in the browser.</p><p> æ³¨å†ŒWebç»„ä»¶å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›æ ·æ¿ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ›´è½»æ¾åœ°å‘½åçº¦å®šå’Œæ´’ä¸Šçš„æ‰“å­—è£…é¥°å™¨ã€‚å‚¬åŒ–å‰‚ä¸­çš„è¡ŒåŠ¨ä½¿å¾—äº‹ä»¶å€¾å¬æ¯”ç®¡ç†å…¨çƒæ´»åŠ¨ä¾¦å¬å™¨æ›´å®¹æ˜“ã€‚çªå˜ç°æœ‰HTMLçš„ç›®æ ‡ä¼˜äºæµè§ˆå™¨ä¸­çš„HTMLæ¨¡æ¿æ›´å¥½ã€‚</p><p>  While contained within our application, components might have appli cation-specific code added to them as they get used in different contexts. Application-specific code is OK when you have specific needs that you need to fulfill, but if a component is supposed to work in other contexts, it needs to be flexible and generalized. Most often, this comes in the form of hard-coded options that should be made configurable. Generalizing a component so that it is more portable is critical to enabling re-use by other teams.</p><p>  è™½ç„¶åŒ…å«åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå› æ­¤ç»„ä»¶å¯èƒ½ä¼šåœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨æ—¶æ·»åŠ ç‰¹å®šäºç‰¹å®šçš„ä»£ç ã€‚ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ä»£ç æ˜¯å¯ä»¥å®Œæˆçš„ç‰¹å®šéœ€æ±‚ï¼Œä½†å¦‚æœç»„ä»¶åº”è¯¥åœ¨å…¶ä»–ä¸Šä¸‹æ–‡ä¸­å·¥ä½œï¼Œåˆ™éœ€è¦çµæ´»å’Œæ¦‚æ‹¬ã€‚é€šå¸¸ï¼Œè¿™æ˜¯ä»¥ç¡¬ç¼–ç é€‰é¡¹çš„å½¢å¼æ¥é…ç½®ï¼Œè¿™äº›é€‰é¡¹åº”è¯¥æ˜¯å¯é…ç½®çš„ã€‚æ¦‚æ‹¬ä¸€ä¸ªç»„ä»¶ï¼Œä½¿å…¶æ›´åŠ ä¾¿æºå¯¹äºèƒ½å¤Ÿé€šè¿‡å…¶ä»–å›¢é˜Ÿé‡å¤ä½¿ç”¨è‡³å…³é‡è¦ã€‚</p><p> Before extracting the Catalyst component, we remove the Catalyst-specific functionality and convert it to a plain Web Component. Why remove the library that the team claims makes writing Web Components easier? While Catalyst is beneficial for developers, we want our components to have zero dependencies. Requiring developers outside of the GitHub organization to understand Catalyst before contributing code back to the component is extra friction that we donâ€™t want to incur.</p><p> åœ¨æå–å‚¬åŒ–å‰‚ç»„åˆ†ä¹‹å‰ï¼Œæˆ‘ä»¬å»é™¤å‚¬åŒ–å‰‚ç‰¹å¼‚æ€§åŠŸèƒ½å¹¶å°†å…¶è½¬æ¢ä¸ºå¹³çº¹ç½‘ç»„ä»¶ã€‚ä¸ºä»€ä¹ˆåˆ é™¤å›¢é˜Ÿå£°æ˜çš„åº“ä½¿å¾—ç¼–å†™Webç»„ä»¶æ›´å®¹æ˜“ï¼Ÿè™½ç„¶Catalystå¯¹å¼€å‘äººå‘˜æœ‰ç›Šï¼Œä½†æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ç»„ä»¶å…·æœ‰é›¶ä¾èµ–æ€§ã€‚åœ¨GitHubç»„ç»‡ä¹‹å¤–éœ€è¦å¼€å‘äººå‘˜åœ¨è´¡çŒ®ä»£ç ä¹‹å‰äº†è§£Catalystï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸æƒ³äº§ç”Ÿçš„é¢å¤–æ‘©æ“¦ã€‚ </p><p>  While monolith components might be tightly coupled to specific application logic, have third-party dependencies, and lean on existing tests, we have a different set of standards for open source components. Our open source components should have close to 0 dependencies, be framework and library agnostic, lightweight, style free, decoupled from any other components, and should do only one thing and one thing well.</p><p>è™½ç„¶Monolithç»„ä»¶å¯èƒ½ç´§å¯†è€¦åˆåˆ°ç‰¹å®šçš„åº”ç”¨ç¨‹åºé€»è¾‘ï¼Œä½†æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–é¡¹ï¼Œå¹¶ä¾èµ–äºç°æœ‰æµ‹è¯•ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸åŒçš„å¼€æºç»„ä»¶çš„æ ‡å‡†ã€‚æˆ‘ä»¬çš„å¼€æºç»„ä»¶åº”é è¿‘0ä¾èµ–æ€§ï¼Œæ¡†æ¶å’Œå›¾ä¹¦é¦†ä¸å¯çŸ¥ï¼Œè½»å·§ï¼Œè‡ªç”±ï¼Œä»ä»»ä½•å…¶ä»–ç»„ä»¶è§£è€¦ï¼Œå¹¶åº”è¯¥åªåšä¸€ä»¶äº‹å’Œä¸€ä»¶äº‹ã€‚</p><p> While we want our components to be dependency-free, we also want the same robustness guarantees from the monolithâ€”and that includes types. We include TypeScript definitions with our components, also written using ES modules, to enable bundlers to consume it easily. We also ensure there is a full test suite and linter setup using our standardized configurations.</p><p> è™½ç„¶æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ç»„ä»¶æ— ä¾èµ–ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¸Œæœ›ä»æ³°å‹’æ–¯ - è€Œä¸”åŒ…æ‹¬ç±»å‹çš„ç¨³å¥æ€§ä¿è¯ã€‚æˆ‘ä»¬åŒ…å«ä½¿ç”¨ESæ¨¡å—å†™å…¥çš„ç»„ä»¶çš„ç±»å‹é”®ç›˜å®šä¹‰ï¼Œä»¥ä½¿Bundlerèƒ½å¤Ÿè½»æ¾æ¶ˆè€—ã€‚æˆ‘ä»¬è¿˜ç¡®ä¿ä½¿ç”¨æˆ‘ä»¬çš„æ ‡å‡†åŒ–é…ç½®ç¡®ä¿æœ‰ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•å¥—ä»¶å’ŒLinterè®¾ç½®ã€‚</p><p> An excellent example of a component that has gone through the open-source lifecycle is the  &lt;typing-effect&gt; element. A product engineering team within GitHub recently prototyped a terminal-inspired UI in which text appeared as if someone were typing it. In a previous project, we used the excellent and robust  typed.js for a typing animation, and the team initially reached for that library again.</p><p> é€šè¿‡å¼€æºç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯ï¼†lt;é”®å…¥æ•ˆæœï¼†gt;å…ƒç´ ã€‚ GitHubä¸­çš„äº§å“å·¥ç¨‹å›¢é˜Ÿæœ€è¿‘è¢«åŸå‹è®¾è®¡äº†ä¸€ä¸ªç»ˆç«¯å¯å‘çš„UIï¼Œå…¶ä¸­æ–‡æœ¬å‡ºç°åœ¨æŸäººé”®å…¥å®ƒã€‚åœ¨ä»¥å‰çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†é”®å…¥åŠ¨ç”»çš„ä¼˜ç§€å’Œå¼ºå¤§çš„é”®å…¥.jsï¼Œå¹¶ä¸”è¯¥å›¢é˜Ÿæœ€åˆè¾¾åˆ°è¯¥åº“ã€‚</p><p> The parts of the UI that the team already built were lightweight, and our tooling identified that adding  typed.js to the page would increase the bundle size fivefold. The UI Systems team asked the product engineering team to consider other options. We found that the functionality we needed for this application was limited enough that it was worth trying to build it ourselves.</p><p> UIå·²ç»æ„å»ºçš„UIçš„éƒ¨åˆ†æ˜¯è½»é‡çº§çš„ï¼Œæˆ‘ä»¬çš„å·¥å…·è¯†åˆ«ä¸ºé¡µé¢æ·»åŠ é”®å…¥çš„.jså°†å¢åŠ æ†ç»‘å°ºå¯¸äº”å€ã€‚ UIç³»ç»Ÿå›¢é˜Ÿè¦æ±‚äº§å“å·¥ç¨‹å›¢é˜Ÿè€ƒè™‘å…¶ä»–é€‰æ‹©ã€‚æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬ä¸ºæ­¤ç”³è¯·æ‰€éœ€çš„åŠŸèƒ½æœ‰é™ï¼Œä»¥è‡³äºå€¼å¾—è‡ªå·±å»ºç«‹è‡ªå·±ã€‚</p><p> The product engineering team wrote the first version of our own typing animation for the new UI. Using Catalyst, it took less than a day and fewer than 40 lines of code. Realizing that other teams could use this effect, we decided to put it through the lifecycle steps. We refactored the component to have zero dependencies, â€œejectedâ€ it out of the Catalyst library, and open-sourced the component as   &lt;typing-effect&gt;.</p><p> äº§å“å·¥ç¨‹å›¢é˜Ÿä¸ºæ–°UIå†™äº†æˆ‘ä»¬è‡ªå·±é”®å…¥åŠ¨ç”»çš„ç¬¬ä¸€ç‰ˆã€‚ä½¿ç”¨å‚¬åŒ–å‰‚ï¼ŒèŠ±è´¹ä¸åˆ°ä¸€å¤©ï¼Œå°‘äº40è¡Œä»£ç ã€‚æ„è¯†åˆ°å…¶ä»–å›¢é˜Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ•ˆæœï¼Œæˆ‘ä»¬å†³å®šå°†å®ƒé€šè¿‡ç”Ÿå‘½å‘¨æœŸæ­¥éª¤ã€‚æˆ‘ä»¬å°†ç»„ä»¶é‡æ„ä¸ºå…·æœ‰é›¶ä¾èµ–æ€§çš„ç»„ä»¶ï¼Œâ€œå°†â€å®ƒä»å‚¬åŒ–å‰‚æ–‡åº“ä¸­å‡ºæ¥ï¼Œå¹¶å°†ç»„ä»¶å¼€æ”¾ä¸ºï¼†lt;é”®å…¥æ•ˆæœã€‚</p><p>  Overall, weâ€™re thrilled with the changes that weâ€™ve made to the GitHub front-end since our last post. According to the internal developer surveys that weâ€™ve conducted, our developers are pleased with Catalyst and ViewComponent!</p><p>  æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬å¾ˆæ¿€åŠ¨æˆ‘ä»¬çš„æœ€åä¸€ç¯‡æ–‡ç« ä»¥æ¥æˆ‘ä»¬å‘Githubå‰ç«¯åšå‡ºäº†å…´å¥‹ã€‚æ ¹æ®æˆ‘ä»¬è¿›è¡Œçš„å†…éƒ¨å¼€å‘äººå‘˜è°ƒæŸ¥ï¼Œæˆ‘ä»¬çš„å¼€å‘äººå‘˜å¯¹å‚¬åŒ–å‰‚å’Œæ™¯è§‚æ„Ÿåˆ°æ»¡æ„ï¼</p><p> Developers enjoy the encapsulation of ViewComponent, making it easier to test UI and increasing developer confidence. Developers feel Catalyst is a welcome change from â€œold-styleâ€ JavaScript without the massive leap to a different framework or paradigm.</p><p> å¼€å‘äººå‘˜äº«å—ViewComponentçš„å°è£…ï¼Œä½¿æµ‹è¯•UIæ›´æ˜“äºæµ‹è¯•ï¼Œå¹¶å¢åŠ å¼€å‘äººå‘˜çš„ä¿¡å¿ƒã€‚å¼€å‘äººå‘˜æ„Ÿåˆ°å‚¬åŒ–å‰‚æ˜¯ä»â€œæ—§å¼â€JavaScriptçš„æ¬¢è¿å˜åŒ–ï¼Œè€Œæ— éœ€å·¨å¤§çš„æ¡†æ¶æˆ–èŒƒä¾‹ã€‚ </p><p>  Weâ€™re continuing to open source more generic open-source behavioral Web Components under the name â€œGitHub Elements.â€ We have a collection of these elements on  https://github.com/github/github-elements, which syncs to  our page on webcomponents.org.</p><p>æˆ‘ä»¬ç»§ç»­åœ¨åç§°â€œGitHubå…ƒç´ â€ä¸‹å¼€æºæ›´å¹¿æ³›çš„å¼€æºè¡Œä¸ºWebç»„ä»¶ã€‚æˆ‘ä»¬åœ¨https://github.com/github-ä¸­æœ‰ä¸€ç³»åˆ—è¿™äº›å…ƒç´ ï¼Œå®ƒå°†åœ¨WebComponents.orgä¸ŠåŒæ­¥åˆ°æˆ‘ä»¬çš„é¡µé¢ã€‚</p><p> Weâ€™re excited about Web Componentsâ€™ future and continue to monitor proposed changes to the HTML spec. The two proposals we are most excited about these days are the  Template Parts and  Declarative Shadow DOM proposals. These proposals would make it even easier for engineers to ship Web Components and would solve some common pain points that we have with the current state of Web Components.  Weâ€™ve implemented the minimum viable bits of Template Parts in a ponyfill, which is being used in production today, and weâ€™re keen to see it gain traction from the broader community.</p><p> æˆ‘ä»¬å¯¹Webç»„ä»¶çš„æœªæ¥æ„Ÿåˆ°å…´å¥‹ï¼Œå¹¶ç»§ç»­ç›‘æ§æå‡ºçš„HTMLè§„èŒƒçš„æ›´æ”¹ã€‚æˆ‘ä»¬æœ€å…´å¥‹çš„ä¸¤é¡¹å»ºè®®æ˜¯æ¨¡æ¿é›¶ä»¶å’Œé™ˆè¿°çš„å½±å­DOMææ¡ˆã€‚è¿™äº›ææ¡ˆå°†ä½¿å·¥ç¨‹å¸ˆæ›´å®¹æ˜“è¿é€Webç»„ä»¶ï¼Œå¹¶ä¸”å¯ä»¥è§£å†³æˆ‘ä»¬å…·æœ‰å½“å‰Webç»„ä»¶çŠ¶æ€çš„å¸¸è§ç–¼ç—›ç‚¹ã€‚æˆ‘ä»¬åœ¨ä»Šå¤©æ­£åœ¨ç”Ÿäº§çš„Ponyfillä¸­å®æ–½äº†æœ€ä½å¯è¡Œçš„æ¨¡æ¿é›¶ä»¶ï¼Œæˆ‘ä»¬çƒ­è¡·äºçœ‹åˆ°å®ƒä»æ›´å¹¿æ³›çš„ç¤¾åŒºè·å¾—ç‰µå¼•åŠ›ã€‚</p><p>  Thanks to Keith Cirkel for kick-starting this post, Ben Scofield and Joel Hawksley for reviewing it, and Nick Holden for working with us to extract the  &lt;typing-effect&gt; element.</p><p>  æ„Ÿè°¢Keith Cirkelå¼€å§‹å¯åŠ¨è¿™ç¯‡æ–‡ç« ï¼ŒBen Scofieldå’ŒJoel Hawksleyè¿›è¡Œå®¡æŸ¥ï¼Œå¹¶æ˜µç§°éœå°”ç™»ä¸æˆ‘ä»¬ä¸€èµ·ä½¿ç”¨ä»¥æå–ï¼†lt;æ‰“å­—æ•ˆæœï¼†gt;å…ƒç´ ã€‚ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.blog/2021-05-04-how-we-use-web-components-at-github/">https://github.blog/2021-05-04-how-we-use-web-components-at-github/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ç»„ä»¶/">#ç»„ä»¶</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>