<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>åŸºäºæ–°çš„æµè§ˆå™¨çš„æœ¨å¶æ›¿æ¢å™¨ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•å»ºé€ å®ƒ The new browser-based puppeteer REPL, and how we built it</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The new browser-based puppeteer REPL, and how we built it<br/>åŸºäºæ–°çš„æµè§ˆå™¨çš„æœ¨å¶æ›¿æ¢å™¨ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•å»ºé€ å®ƒ </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-03-12 07:49:27</div><div class="page_narrow text-break page_content"><p>Without out a doubt, one of the most helpful tools when working with any browser automation library is a visual debugger.  We&#39;ve written quite a bit about it. Since browserless is built specifically for developers, we&#39;re always striving to provide the best experience possible with debugging â â€” and weren&#39;t satisfied with the state-of-the-art with the newer automation libraries. Simply put:  headless: false isn&#39;t  quite enough to debug puppeteer, nor is any current live &#34;REPL&#34; out there.</p><p>æ¯«æ— ç–‘é—®ï¼Œä½¿ç”¨ä»»ä½•æµè§ˆå™¨è‡ªåŠ¨åŒ–åº“æ—¶ï¼Œæœ€æœ‰ç”¨çš„å·¥å…·ä¹‹ä¸€æ˜¯å¯è§†è°ƒè¯•å™¨ã€‚æˆ‘ä»¬ï¼†ï¼ƒ39; veå†™äº†å¾ˆå¤šå…³äºå®ƒã€‚ç”±äºæ— è®ºæ˜¯ä¸“é—¨ä¸ºå¼€å‘äººå‘˜å»ºç«‹çš„ï¼Œæˆ‘ä»¬å§‹ç»ˆåŠªåŠ›æä¾›æœ€ä½³ä½“éªŒï¼Œå¹¶é€šè¿‡æ›´æ–°çš„è‡ªåŠ¨åŒ–å›¾ä¹¦é¦†å¯¹æœ€å…ˆè¿›çš„æŠ€æœ¯æä¾›æ»¡æ„çš„ã€‚ç®€å•åœ°è¯´ï¼šæ— å¤´ï¼šè™šå‡çš„isnï¼†ï¼ƒ39; tè¶³ä»¥è°ƒè¯•æœ¨å¶ï¼Œä¹Ÿä¸æ˜¯ä»»ä½•å½“å‰ç”Ÿæ´»ï¼†ï¼ƒ34; replï¼†ï¼ƒ34;åœ¨é‚£é‡Œã€‚</p><p> Today, we&#39;re happy to announce that our complete re-write of the  debugger is now live ğŸ‰! It includes all the features of what we wanted in a debugger, and  more.</p><p> ä»Šå¤©ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´å®£å¸ƒæˆ‘ä»¬å®Œå…¨é‡æ–°ç¼–å†™è°ƒè¯•å™¨ç°åœ¨æ´»ç€ğŸ‰ï¼å®ƒåŒ…æ‹¬æˆ‘ä»¬åœ¨è°ƒè¯•å™¨ä¸­æƒ³è¦çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä»¥åŠæ›´å¤šã€‚</p><p> The new REPL web-app We&#39;ve been using this debugger internally for quite some time, and have found it  incredibly useful. A short list of features include:</p><p> æ–°çš„Repl Web-Appæˆ‘ä»¬ï¼†ï¼ƒ39;åœ¨å†…éƒ¨ä½¿ç”¨è¿™ä¸ªè°ƒè¯•å™¨è¿›è¡Œäº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œå¹¶å‘ç°å®ƒéå¸¸æœ‰ç”¨ã€‚ç®€çŸ­çš„åŠŸèƒ½åˆ—è¡¨åŒ…æ‹¬ï¼š</p><p>  Quite a bit of planning, research and development went into building this editor out. Since we found it to be such a useful tool, we also thought it&#39;d be interesting to go over some of its core fundamentals and how we went about building it. Let me pause and say this before we get to far: if you do one thing today,  just try out the debugger. If you do two things, read below on how we built it!</p><p>  ç›¸å½“å¤šçš„è§„åˆ’ï¼Œç ”å‘è¿›å…¥äº†è¿™ä¸€ç¼–è¾‘å™¨ã€‚ç”±äºæˆ‘ä»¬å‘ç°å®ƒæ˜¯è¿™æ ·ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œæˆ‘ä»¬ä¹Ÿè®¤ä¸ºå®ƒï¼†ï¼ƒ39; Dï¼†ï¼ƒ39æ˜¯æœ‰è¶£çš„ï¼Œè¶Šè¿‡å…¶ä¸€äº›æ ¸å¿ƒåŸºæœ¬é¢ä»¥åŠæˆ‘ä»¬å¦‚ä½•å»ºç«‹å®ƒã€‚è®©æˆ‘æš‚åœå¹¶åœ¨è¿„ä»Šä¸ºæ­¢ä¹‹å‰è¯´å‡ºæ¥ï¼šå¦‚æœä½ ä»Šå¤©åšä¸€ä»¶äº‹ï¼Œé‚£å°±è¯•è¯•äº†è°ƒè¯•å™¨ã€‚å¦‚æœä½ åšä¸¤ä»¶äº‹ï¼Œè¯·é˜…è¯»ä¸‹é¢æˆ‘ä»¬å¦‚ä½•å»ºé€ å®ƒï¼</p><p>  Without a doubt the most &#34;useful&#34; aspect of any debugger or REPL is the editing experience. Since we&#39;re big fans of VS-code, we decided to use the  fantastic  monaco-editor library that powers it. Getting monaco up and running with your favorite libraries can be somewhat of a hassle, so we scoped back the amount of packages that are typed to just two for now:  node and  puppeteer. Given that both of these packages have typings already, it&#39;s simply a matter of loading them into the editor. Doing so is fairly straightforward once you have your editor object setup, so that&#39;s our first step!</p><p>  æ¯«æ— ç–‘é—®ï¼Œæœ€å¤šï¼†ï¼ƒ34;æœ‰ç”¨ï¼†ï¼ƒ34;ä»»ä½•è°ƒè¯•å™¨æˆ–replçš„æ–¹é¢æ˜¯ç¼–è¾‘ä½“éªŒã€‚è‡ªä»æˆ‘ä»¬ï¼†ï¼ƒ39;é‡å¤§ç²‰ä¸çš„VS-Codeï¼Œæˆ‘ä»¬å†³å®šä½¿ç”¨å¼ºå¤§çš„æ¢¦å¹»èˆ¬çš„æ‘©çº³å“¥ç¼–è¾‘åº“ã€‚é€šè¿‡æ‚¨æœ€å–œæ¬¢çš„åº“æ—‹è½¬å’Œè¿è¡Œæ‘©æ´›å°¼äºšå¯ä»¥æœ‰ç‚¹éº»çƒ¦ï¼Œå› æ­¤æˆ‘ä»¬ç°åœ¨å¤‡ä»½é”®å…¥ä¸ºä»…ä¸¤ä¸ªçš„è½¯ä»¶åŒ…ï¼šèŠ‚ç‚¹å’Œæœ¨å¶ã€‚é‰´äºè¿™ä¸¤ä¸ªåŒ…éƒ½æœ‰æ‰“å­—å·²ç»ï¼Œå®ƒåªæ˜¯å°†å®ƒä»¬åŠ è½½åˆ°ç¼–è¾‘å™¨ä¸­çš„é—®é¢˜ã€‚ä¸€æ—¦æ‚¨æ‹¥æœ‰ç¼–è¾‘å™¨å¯¹è±¡è®¾ç½®ï¼Œå°±è¿™æ ·åšæ˜¯ç›¸å½“ç®€å•çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥ï¼</p><p>  // Setup the environment for typescript/javascript supportself.MonacoEnvironment = { getWorkerUrl:  ( _moduleId:  any, label:  string) =&gt; {  if (label ===  &#39;typescript&#39; || label ===  &#39;javascript&#39;) {  return  &#39;./ts.worker.bundle.js&#39;; }  return  &#39;./editor.worker.bundle.js&#39;; }}; // Instantiate the editor const editor = monaco.editor.create( document.getElementById( &#39;code&#39;), { value: initialCode, language:  &#39;typescript&#39;, theme:  &#39;vs-dark&#39;, fontSize:  14, wordWrap:  &#39;on&#39;, scrollBeyondLastLine:  false, automaticLayout:  true, minimap: { enabled:  false }});</p><p>  //ä¸ºç±»å‹/ javascript supportself.monacoenvironment = {getworkerurl :( _moduleidï¼šä»»ä½•ï¼Œæ ‡ç­¾ï¼šå­—ç¬¦ä¸²ï¼‰=ï¼†gt;; {ifï¼ˆlabel ===ï¼†ï¼ƒ39; typescriptï¼†ï¼ƒ39; ||æ ‡ç­¾===ï¼†ï¼ƒ39; javascriptï¼†ï¼ƒ39;ï¼‰{returnï¼†ï¼ƒ39; ./ ts.worker.bundle.jsï¼†ï¼ƒ39 ;;è¿”å›ï¼†ï¼ƒ39; ./ editor.worker.bundle.jsï¼†ï¼ƒ39 ;; }}; //å®ä¾‹åŒ–ç¼–è¾‘å™¨constç¼–è¾‘å™¨= monaco.editor.createï¼ˆdocument.getelementByIdï¼ˆï¼†ï¼ƒ39;ä»£ç ï¼†ï¼ƒ39;ï¼‰ï¼Œ{valueï¼šinitialcodeï¼Œlanguageï¼šï¼†ï¼ƒ39; typectiftï¼†ï¼ƒ39 ;,ä¸»é¢˜ï¼šï¼†ï¼ƒ39; VS-Darkï¼†ï¼ƒ39;ï¼Œfontsizeï¼š14ï¼ŒWordWrapï¼šï¼†ï¼ƒ39;ï¼†ï¼ƒ39;ï¼Œscrollbeyondlastlineï¼šfalseï¼Œsucemainlaylayoutï¼štrueï¼Œminimapï¼š{å·²å¯ç”¨ï¼šfalse}}ï¼‰;</p><p> Once setup,  monaco has an API for injecting typings into it as well as the configuration for the TypeScript compiler. Setting up a new TS project is relatively straightforward:</p><p> ä¸€æ—¦è®¾ç½®ï¼Œæ‘©çº³å“¥æœ‰ä¸€ä¸ªç”¨äºå°†é”®å…¥æ³¨å…¥å…¶çš„APIä»¥åŠç±»å‹æ ‡æ³¨ç¼–è¯‘å™¨çš„é…ç½®ã€‚è®¾ç½®æ–°çš„TSé¡¹ç›®ç›¸å¯¹ç®€å•ï¼š </p><p> // Specify that this is a node-like environmentmonaco.languages.typescript.typescriptDefaults.setCompilerOptions({ allowNonTsExtensions:  true, target: monaco.languages.typescript.ScriptTarget.ES2020, moduleResolution: monaco.languages.typescript.ModuleResolutionKind.NodeJs,  module: monaco.languages.typescript.ModuleKind.CommonJS,});</p><p>//æŒ‡å®šè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼èŠ‚ç‚¹çš„neamentionmonaco.languages.typescript.typescriptdefaults.setCompilerOptionsï¼ˆ{allowNontsextensions.Stureï¼ŒTargetï¼šMonaco.languages.Typescript.scripttarget.es2020ï¼Œmoduleresolutionï¼šmonaco.languages.typescript.moduleresolutionkind.nodejsï¼Œmoduly.nodejs ï¼šmonaco.languages.typescript.modulekind.commonjsï¼Œ}ï¼‰;</p><p> Now that everything is setup it&#39;s simply a matter of loading our types into the editor. This part turned out to be a bit tricky, since  monaco wants types as a plain-string property. Thankfully, we&#39;re using WebPack to bundle up the project, so &#34;loading&#34; these types is as simple as requiring them as raw files:</p><p> ç°åœ¨ä¸€åˆ‡éƒ½æ˜¯è®¾ç½®å®ƒï¼†ï¼ƒ39; såªæ˜¯ä¸€ä¸ªå°†æˆ‘ä»¬ç±»å‹åŠ è½½åˆ°ç¼–è¾‘å™¨ä¸­çš„é—®é¢˜ã€‚è¿™éƒ¨åˆ†åŸæ¥æœ‰ç‚¹æ£˜æ‰‹ï¼Œå› ä¸ºæ‘©çº³å“¥æƒ³è¦ç±»å‹ä½œä¸ºæ™®é€šå­—ç¬¦ä¸²å±æ€§ã€‚è°¢å¤©è°¢åœ°ï¼Œæˆ‘ä»¬ï¼†ï¼ƒ39;é‡æ–°ä½¿ç”¨webpackæ†ç»‘é¡¹ç›®ï¼Œæ‰€ä»¥ï¼†ï¼ƒ34;åŠ è½½ï¼†ï¼ƒ34;è¿™äº›ç±»å‹ä¸è¦æ±‚å®ƒä»¬ä¸ºåŸå§‹æ–‡ä»¶ä¸€æ ·ç®€å•ï¼š</p><p> // First load the types as a plain string const puppeteerTypes =  require( &#39;!!raw-loader!puppeteer-core/lib/types.d.ts&#39;); // ... later, add the puppeteer types into the editormonaco.languages.typescript.typescriptDefaults.addExtraLib( puppeteerTypes.default,  &#39;node_modules/@types/puppeteer/index.d.ts&#39;,);</p><p> //é¦–å…ˆå°†ç±»å‹åŠ è½½ä¸ºæ™®é€šå­—ç¬¦ä¸²const puppeteertypes =è¦æ±‚ï¼ˆï¼†ï¼ƒ39; !!åŸå§‹è£…è½½æœºï¼æœ¨å¶æ ¸å¿ƒ/ lib / type.d.tsï¼†ï¼ƒ39;ï¼‰; //...åï¼Œå°†æœ¨å¶ä»ªå™¨ç±»å‹æ·»åŠ åˆ°editormonaco.languages.typescript.typescriptdefaults.addextralibï¼ˆpuppeteertypes.defaultï¼Œï¼†ï¼ƒ39; node_modules/@types/pppeteer/index.d.ts&#39 ;,ï¼‰;</p><p> For the purposes of our editor, we actually do some manipulation of the types so that they&#39;re globally exported (and don&#39;t need to be required).  The full source can be found here, for those who want to see the whole project.</p><p> å‡ºäºæˆ‘ä»¬çš„ç¼–è¾‘çš„ç›®çš„ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯ä»¥è¿›è¡Œä¸€äº›æ“ä½œï¼Œä»¥ä¾¿å®ƒä»¬å‡ºå£å…¨çƒèŒƒå›´å†…çš„ç±»å‹ï¼ˆå¹¶ä¸”ä¸éœ€è¦ï¼†ï¼ƒ39; T.å¯¹äºé‚£äº›æƒ³è¦æŸ¥çœ‹æ•´ä¸ªé¡¹ç›®çš„äººæ¥è¯´ï¼Œå¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°å®Œæ•´çš„æ¥æºã€‚</p><p>  Without a doubt, the second most helpful thing is actually seeing what the browser is up to â â€” especially in the environment it&#39;s running in. We&#39;ve seen cases where things worked just fine on local machines, but had issues in the cloud, so having the browser  actually execute in the cloud was important to us for full transparency. To do this we reached into Chrome&#39;s DevTools Protocol to screencast frames of video directly back to your browser. This means that  your browser is actually running the puppeteer code and viewing the session, meaning there&#39;s no other network hops being made.</p><p>  æ¯«æ— ç–‘é—®ï¼Œç¬¬äºŒä¸ªæœ€æœ‰å¸®åŠ©çš„äº‹æƒ…å®é™…ä¸Šçœ‹åˆ°äº†æµè§ˆå™¨è¾¾åˆ°äº†â çš„ä¸œè¥¿ - å°¤å…¶æ˜¯åœ¨ç¯å¢ƒä¸­è¿è¡Œçš„ç¯å¢ƒã€‚æˆ‘ä»¬åœ¨å½“åœ°æœºå™¨ä¸Šå·¥ä½œçš„æƒ…å†µå¾ˆå¥½ï¼Œä½†æ˜¯äº‘ä¸­çš„é—®é¢˜ï¼Œå› æ­¤æµè§ˆå™¨å®é™…ä¸Šåœ¨äº‘ä¸­æ‰§è¡Œçš„æµè§ˆå™¨å¯¹æˆ‘ä»¬æ¥è¯´å¾ˆé‡è¦ï¼Œä»¥ä¾¿å®Œå…¨é€æ˜åº¦ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¾¾åˆ°äº†Chromeï¼†ï¼ƒ39; s devtoolsåè®®ï¼Œç›´æ¥è¿”å›æµè§ˆå™¨çš„æˆªæ­¢è§†é¢‘å¸§ã€‚è¿™æ„å‘³ç€æ‚¨çš„æµè§ˆå™¨å®é™…ä¸Šæ­£åœ¨è¿è¡Œæœ¨å¶ä»£ç å¹¶æŸ¥çœ‹ä¼šè¯ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰å…¶ä»–ç½‘ç»œå•¤é…’èŠ±ã€‚</p><p>  const browser =  await puppeteer.connect({ browserWSEndpoint }) .catch( ( error) =&gt; {  console.error(error);  throw error; }); const page =  await browser.newPage(); // Use the page&#39;s client to start the screencast const client = (page  as  any)._client  as CDPSession; await client.send( &#39;Page.startScreencast&#39;, { format:  &#39;jpeg&#39;, quality:  100 }); // Wire up the screencast...client.on( &#39;Page.screencastFrame&#39;,   () =&gt;  console.log( &#34;TODO&#34;));</p><p>  constæµè§ˆå™¨= await poppeteer.connectï¼ˆ{browserwsendpoint}ï¼‰.catchï¼ˆï¼ˆé”™è¯¯ï¼‰=ï¼†gt; {console.errorï¼ˆé”™è¯¯ï¼‰;æŠ›å‡ºé”™è¯¯;}ï¼‰; const page = await browser.newpageï¼ˆï¼‰; //ä½¿ç”¨é¡µé¢ï¼†ï¼ƒ39; så®¢æˆ·ç«¯å¼€å§‹è·³æ–¯å¡constract =ï¼ˆé¡µé¢é¡µé¢é¡µé¢ï¼‰._å®¢æˆ·ç«¯ä½œä¸ºcdpsession; await client.sendï¼ˆï¼†ï¼ƒ39; page.startscreencastï¼†ï¼ƒ39; {æ ¼å¼ï¼šï¼†ï¼ƒ39; jpegï¼†ï¼ƒ39;è´¨é‡ï¼š100}ï¼‰; //è¿æ¥å±å¹•CastCast ... Client.onï¼ˆï¼†ï¼ƒ39;é¡µé¢.CEreencyFrameï¼†ï¼ƒ39;ï¼Œï¼ˆï¼‰=ï¼†gt; console.logï¼ˆï¼†ï¼ƒ34; todoï¼†ï¼ƒ34;ï¼‰ï¼‰;</p><p> Now that we&#39;ve got our browser and page boilerplate setup, it&#39;s just a matter of wiring up the screencast even so that we can draw it on the we-browser locally. Doing so isn&#39;t that complicated, however requires a bit of setup. For this particular case, we&#39;ll actually be drawing onto a  &lt;canvas&gt; element inside the browser.</p><p> ç°åœ¨ï¼Œæˆ‘ä»¬ï¼†ï¼ƒ39; vere getæˆ‘ä»¬çš„æµè§ˆå™¨å’Œé¡µé¢æ ·æ¿è®¾ç½®ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ¥çº¿çš„é—®é¢˜ï¼Œå³ä½¿æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°æµè§ˆå™¨ä¸Šç»˜åˆ¶å®ƒã€‚è¿™æ ·åšçš„æ˜¯ï¼†ï¼ƒ39;ç„¶è€Œï¼Œå¤æ‚çš„æ˜¯ï¼Œéœ€è¦ä¸€äº›è®¾ç½®ã€‚å¯¹äºè¿™ç§ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘ä»¬ï¼†ï¼ƒ39; LLå®é™…ä¸Šæ˜¯ç»˜åˆ¶åœ¨ï¼†lt;å¸†å¸ƒï¼†gtä¸Š;æµè§ˆå™¨å†…çš„å…ƒç´ ã€‚ </p><p> const $canvas =  document.querySelector( &#39;#screencast&#39;) const ctx = $canvas.getContext( &#39;2d&#39;); const img =  new Image();onScreencastFrame( ( { data }) =&gt; { img.onload =   () =&gt; ctx.drawImage(img,  0,  0, $canvas.width, $canvas.height); img.src =  &#39;data:image/png;base64,&#39; + data;});</p><p>const $ canvas = document.querySelectorï¼ˆï¼†ï¼ƒ39;ï¼ƒ39;ï¼ƒ39;ï¼‰const ctx = $ canvas.getcontextï¼ˆï¼†ï¼ƒ39; 2dï¼†ï¼ƒ39;ï¼‰; const img = new imageï¼ˆï¼‰; onscreencastframeï¼ˆï¼ˆ{data}ï¼‰=ï¼†gt; {img.onload =ï¼ˆï¼‰=ï¼†gt; ctx.drawimageï¼ˆimgï¼Œ0,0ï¼Œ$ canvas.widthï¼Œ$ canvas.heightï¼‰; img .src =ï¼†ï¼ƒ39;æ•°æ®ï¼šå›¾åƒ/ png; base64ï¼Œï¼†ï¼ƒ39; +æ•°æ®;}ï¼‰;</p><p> Once both are all setup, you can do the following in the browser (assuming you have a  &lt;canvas id=&#34;screencast&#34;&gt; in your page):</p><p> ä¸€æ—¦ä¸¤ä¸ªéƒ½è®¾ç½®äº†ï¼Œæ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼ˆå‡è®¾æ‚¨æœ‰ä¸€ä¸ªï¼†lt; canvas id =ï¼†ï¼ƒ34; screencastï¼†ï¼ƒ34;ï¼†gt;åœ¨æ‚¨çš„é¡µé¢ä¸­ï¼‰ï¼š</p><p> const $canvas =  document.querySelector( &#39;#screencast&#39;) const ctx = $canvas.getContext( &#39;2d&#39;); const img =  new Image(); const browser =  await puppeteer.connect({ browserWSEndpoint }) .catch( ( error) =&gt; {  console.error(error);  throw error; }); const page =  await browser.newPage(); const client = (page  as  any)._client  as CDPSession; await client.send( &#39;Page.startScreencast&#39;, { format:  &#39;jpeg&#39;, quality:  100});client.on( &#39;Page.screencastFrame&#39;, onScreencastFrame);onScreencastFrame( ( { data }) =&gt; { img.onload =   () =&gt; ctx.drawImage(img,  0,  0, $canvas.width, $canvas.height); img.src =  &#39;data:image/png;base64,&#39; + data;});</p><p> const $ canvas = document.querySelectorï¼ˆï¼†ï¼ƒ39;ï¼ƒ39;ï¼ƒ39;ï¼‰const ctx = $ canvas.getcontextï¼ˆï¼†ï¼ƒ39; 2dï¼†ï¼ƒ39;ï¼‰; const img = new imageï¼ˆï¼‰; constæµè§ˆå™¨= await poppeteer.connectï¼ˆ{browserwsendpoint}ï¼‰.catchï¼ˆï¼ˆé”™è¯¯ï¼‰=ï¼†gt; {console.errorï¼ˆé”™è¯¯ï¼‰;æŠ›å‡ºé”™è¯¯;}ï¼‰; const page = await browser.newpageï¼ˆï¼‰; const client =ï¼ˆé¡µé¢é¡µé¢ï¼‰._å®¢æˆ·ä½œä¸ºcdpsession; await client.sendï¼ˆï¼†ï¼ƒ39; page.startscreencastï¼†ï¼ƒ39; {formatï¼šï¼†ï¼ƒ39; jpegï¼†ï¼ƒ39;è´¨é‡ï¼š100}ï¼‰; client.onï¼ˆï¼†ï¼ƒ39;é¡µé¢ã€‚é¡µé¢ã€‚ï¼Œonscreencastframe page.screencastframeï¼†ï¼ƒ39;ï¼Œonscreencastframe ï¼‰; onscreencastframeï¼ˆï¼ˆ{data}ï¼‰=ï¼†gt; {img.onload =ï¼ˆï¼‰=ï¼†gt; ctx.drawimageï¼ˆimgï¼Œ0,0ï¼Œ$ canvas.widthï¼Œ$ canvas.heightï¼‰; img.src =ï¼†ï¼ƒ39 ;æ•°æ®ï¼šå›¾åƒ/ png; base64ï¼Œï¼†ï¼ƒ39; +æ•°æ®;}ï¼‰;</p><p> This really is just the start: we don&#39;t talk much about how keyboard and mouse events are handled, but if you want to see the full code  feel free to do so here.</p><p> è¿™çœŸçš„åªæ˜¯å¼€å§‹ï¼šæˆ‘ä»¬ä¸è°ˆè®ºå¦‚ä½•å¤„ç†é”®ç›˜å’Œé¼ æ ‡äº‹ä»¶ï¼Œä½†å¦‚æœæ‚¨æƒ³çœ‹åˆ°å®Œæ•´çš„ä»£ç éšæ„è¿™æ ·åšã€‚</p><p>  The last bit of work is handling downloads: things that your code might run that produces some kind of static asset like a PDF or PNG file. To do that, we had to get a one more library in the project to help us out:  file-type. This module, at its core, accepts a binary blob of some kind and tells us what it is. For us this mostly helps the editor to discern from PDF and PNG images, but can potentially be expanded to other formats as well.</p><p>  æœ€åä¸€ç‚¹å·¥ä½œæ­£åœ¨å¤„ç†ä¸‹è½½ï¼šæ‚¨çš„ä»£ç å¯èƒ½è¿è¡Œçš„äº‹æƒ…ä¼šäº§ç”ŸæŸç§åƒPDFæˆ–PNGæ–‡ä»¶çš„é™æ€èµ„äº§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨é¡¹ç›®ä¸­è·å¾—ä¸€ä¸ªæ›´å¤šçš„å›¾ä¹¦é¦†æ¥å¸®åŠ©æˆ‘ä»¬ï¼šæ–‡ä»¶ç±»å‹ã€‚è¿™ä¸ªæ¨¡å—åœ¨å…¶æ ¸å¿ƒï¼Œæ¥å—äº†æŸç§äºŒè¿›åˆ¶æ–‘ç‚¹å¹¶å‘Šè¯‰æˆ‘ä»¬å®ƒæ˜¯ä»€ä¹ˆã€‚å¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œè¿™ä¸»è¦æœ‰åŠ©äºç¼–è¾‘ä»PDFå’ŒPNGå›¾åƒä¸­è¾¨åˆ«ï¼Œä½†ä¹Ÿå¯èƒ½æ‰©å±•åˆ°å…¶ä»–æ ¼å¼ã€‚</p><p> Once the page&#39;s code has ran, we look at what the script returns and make an educated guess as to what&#39;s supposed to happen. Since this is all being ran inside a WebWorker, we can  eval the code with some sand-boxing. Remember: this is all ran inside the user&#39;s browser  inside a WebWorker so while it&#39;s generally a bad idea to  eval most of the time, we made an exception here.</p><p> ä¸€æ—¦é¡µé¢ï¼†ï¼ƒ39; sä»£ç å·²ç»ranï¼Œæˆ‘ä»¬ä¼šæŸ¥çœ‹è„šæœ¬è¿”å›çš„å†…å®¹ï¼Œå¹¶å¯¹åº”è¯¥å‘ç”Ÿçš„äº‹æƒ…è¿›è¡Œå—è¿‡æ•™è‚²çš„çŒœæµ‹ã€‚ç”±äºè¿™ä¸€åˆ‡éƒ½åœ¨ç½‘ç»œå·¥ä½œä¸­éƒ½è·‘äº†ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›æ²™æ‹³æ¥è¯„ä¼°ä»£ç ã€‚è¯·è®°ä½ï¼šè¿™ä¸€åˆ‡éƒ½åœ¨ç”¨æˆ·ï¼†ï¼ƒ39;åœ¨ç½‘ç»œä¸­çš„æµè§ˆå™¨ä¸­é‡åˆ°äº†å®ƒçš„æµè§ˆå™¨ï¼Œæ‰€ä»¥å½“å®ƒå¤§å¤šæ•°æ—¶é—´éƒ½æ˜¯ä¸€ä¸ªåä¸»æ„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé€ æˆäº†ä¾‹å¤–ã€‚</p><p> const browser =  await puppeteer.connect({ browserWSEndpoint }); const page =  await browser.newPage(); // Code is written in an encapsulated function, so we invoke it with the // proper arguments in order for it to run. eval(code)({ page }) .then( async (res:  any) =&gt; {  // Need to handle res here as it could be anything the function returns... }) .catch( ( e:  Error) =&gt; {  // Inject errors into the page so that they show up in the cloud browser&#39;s devtools... neat! page &amp;&amp; page.evaluate( ( err) =&gt;  console.error(err), e.toString()); });</p><p> const browser = await puppeteer.connectï¼ˆ{browserwsendpoint}ï¼‰; const page = await browser.newpageï¼ˆï¼‰; //ä»£ç ä»¥å°è£…çš„å‡½æ•°ç¼–å†™ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶ä¸//æ­£ç¡®çš„å‚æ•°è°ƒç”¨å®ƒï¼Œä»¥ä¾¿å®ƒè¿è¡Œã€‚ evalï¼ˆä»£ç ï¼‰ï¼ˆ{é¡µé¢}ï¼‰.thenï¼ˆasyncï¼ˆresï¼šdomenceï¼‰=ï¼†gt; {//éœ€è¦åœ¨è¿™é‡Œå¤„ç†resï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯å‡½æ•°è¿”å›çš„ä»»ä½•ä¸œè¥¿...}ï¼‰.catchï¼ˆï¼ˆeï¼šé”™è¯¯ï¼‰ =ï¼†gt; {//å°†é”™è¯¯æ³¨å…¥é¡µé¢ï¼Œä»¥ä¾¿å®ƒä»¬æ˜¾ç¤ºåœ¨äº‘æµè§ˆå™¨ä¸­æ˜¾ç¤ºï¼†ï¼ƒ39; s devtools ...... neatï¼é¡µé¢ï¼†amp; page.evaluateï¼ˆï¼ˆerrï¼‰=ï¼†gt; console.errorï¼ˆé”™è¯¯ï¼‰ï¼Œe.tostringï¼ˆï¼‰ï¼‰;}ï¼‰; </p><p> For handling of downloads, we have a pretty simple function that checks what it is:</p><p>ä¸ºäº†å¤„ç†ä¸‹è½½ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªéå¸¸ç®€å•çš„åŠŸèƒ½ï¼Œæ£€æŸ¥å®ƒæ˜¯ä»€ä¹ˆï¼š</p><p> import FileType  from  &#39;file-type/browser&#39;; async   function  ( response?:  string |  Uint8Array):  &lt;{  type:  string, payload:  any,} |  null&gt; {  // Nothing being returned triggers no actions  if (!response) {  return  null; }  // PDF/PNG are Uint8Arrays in the browser  // If no type is determined, don&#39;t do anything  if (response  instanceof  Uint8Array) {  const  type = ( await FileType.fromBuffer(response) || { mime:  undefined }).mime;  if (! type) {  return  null; }  return {  type, payload: response}; }  // Here we check for page.content responses (html) via a simple check that it starts with the &#34;&lt;&#34; character  if ( typeof response ===  &#39;string&#39;) {  return {  type: response.startsWith( &#39;&lt;&#39;) ?  &#39;text/html&#39; :  &#39;text/plain&#39;, payload: response, } }  // Check if it&#39;s a JSON blob that we should download instead  if ( typeof response ===  &#39;object&#39;) {  return {  type:  &#39;application/json&#39;, payload:  JSON.stringify(response,  null,  &#39; &#39;), }; }  return {  type:  &#39;text/plain&#39;, payload: response, };}</p><p> ä»ï¼†ï¼ƒ39å¯¼å…¥æ–‡ä»¶ç±»å‹;æ–‡ä»¶ç±»å‹/æµè§ˆå™¨ï¼†ï¼ƒ39 ;; asyncå‡½æ•°ï¼ˆå“åº”ï¼Ÿï¼šstring | uint8Arrayï¼‰ï¼šï¼†lt; {typeï¼šstringï¼Œpayloadï¼šdomï¼Œ} | nullï¼†gt; {//æ²¡æœ‰ä»»ä½•è¿”å›çš„è§¦å‘å™¨å¦‚æœï¼ˆï¼å“åº”ï¼‰{return null; } // pdf / pngæ˜¯æµè§ˆå™¨ä¸­çš„uInt8Arrays //å¦‚æœæ²¡æœ‰ç¡®å®šç±»å‹ï¼Œå¦‚æœï¼ˆå“åº”instanceof uint8Arrayï¼‰{constç±»å‹=ï¼ˆç­‰å¾…fileType.flbufferï¼ˆå“åº”ï¼‰|| {mimeï¼šæœªå®šä¹‰}ï¼‰ã€‚å“‘å‰§; ifï¼ˆï¼typeï¼‰{è¿”å›null; }è¿”å›{ç±»å‹ï¼Œæœ‰æ•ˆè½½è·ï¼šå“åº”}; } //åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ç®€å•çš„æ£€æŸ¥æ¥æ£€æŸ¥Page.Contentå“åº”ï¼ˆHTMLï¼‰å®ƒä»¥ï¼†ï¼ƒ34å¼€å¤´;ï¼†lt;ï¼†ï¼ƒ34;å­—ç¬¦ifï¼ˆrespaction ===ï¼†ï¼ƒ39; stringï¼†ï¼ƒ39;ï¼‰{return {typeï¼šresponse.startswithï¼ˆï¼†ï¼ƒ39;ï¼†ï¼ƒ39;ï¼‰ï¼Ÿ ï¼†ï¼ƒ39; text / htmlï¼†ï¼ƒ39; ï¼šï¼†ï¼ƒ39;æ–‡æœ¬/ plainï¼†ï¼ƒ39;ï¼Œæœ‰æ•ˆè½½è·ï¼šå“åº”ï¼Œ}} //æ£€æŸ¥å®ƒï¼†ï¼ƒ39; sa json blobï¼Œæˆ‘ä»¬åº”è¯¥ä¸‹è½½ï¼ˆtypeof response ===ï¼†ï¼ƒ39;å¯¹è±¡ï¼†ï¼ƒ39;ï¼‰ {return {typeï¼šï¼†ï¼ƒ39;åº”ç”¨ç¨‹åº/ jsonï¼†ï¼ƒ39;ï¼Œpayloadï¼šjson.stringifyï¼ˆå“åº”ï¼Œnullï¼Œï¼†ï¼ƒ39;ï¼†ï¼ƒ39;ï¼‰ï¼Œ}; }è¿”å›{typeï¼šï¼†ï¼ƒ39;æ–‡æœ¬/ plainï¼†ï¼ƒ39;ï¼Œæœ‰æ•ˆè½½è·ï¼šå“åº”ï¼Œ};}</p><p> Finally, once we have the type of file that&#39;s being returned, we can trigger the browser to download it:</p><p> æœ€åï¼Œä¸€æ—¦æˆ‘ä»¬æœ‰è¿”å›çš„æ–‡ä»¶ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥è§¦å‘æµè§ˆå™¨ä¸‹è½½å®ƒï¼š</p><p> import FileType  from  &#39;file-type/browser&#39;; import pupeteer  from  &#39;puppeteer&#39;; const browser =  await puppeteer.connect({ browserWSEndpoint }); const page =  await browser.newPage(); async   function  ( response?:  string |  Uint8Array):  &lt;{  type:  string, payload:  any} |  null&gt; {  if (!response) {  return  null; }  if (response  instanceof  Uint8Array) {  const  type = ( await FileType.fromBuffer(response) || { mime:  undefined }).mime;  if (! type) {  return  null; }  return {  type, payload: response}; }  if ( typeof response ===  &#39;string&#39;) {  return {  type: response.startsWith( &#39;&lt;&#39;) ?  &#39;text/html&#39; :  &#39;text/plain&#39;, payload: response, } }  if ( typeof response ===  &#39;object&#39;) {  return {  type:  &#39;application/json&#39;, payload:  JSON.stringify(response,  null,  &#39; &#39;), }; }  return {  type:  &#39;text/plain&#39;, payload: response, };} const downloadFile =  ( download) =&gt; {  const fileName =  &#39;my-download&#39;;  const blob =  new Blob([download.payload], {  type: download.type });  const link =  document.createElement( &#39;a&#39;); link.href =  window.URL.createObjectURL(blob); link.download = fileName;  return link.click();}; eval(code)({ page }) .then( async (res:  any) =&gt; {  const payload = makeDownload(res);  if (payload) { downloadFile(payload); } }) .catch( ( e:  Error) =&gt; { page &amp;&amp; page.evaluate( ( err) =&gt;  console.error(err), e.toString()); });</p><p> ä»ï¼†ï¼ƒ39å¯¼å…¥æ–‡ä»¶ç±»å‹;æ–‡ä»¶ç±»å‹/æµè§ˆå™¨ï¼†ï¼ƒ39 ;;ä»ï¼†ï¼ƒ39å¯¼å…¥è›¹;æœ¨å¶ï¼†ï¼ƒ39 ;; const browser = await puppeteer.connectï¼ˆ{browserwsendpoint}ï¼‰; const page = await browser.newpageï¼ˆï¼‰;å¼‚æ­¥å‡½æ•°ï¼ˆå“åº”ï¼Ÿï¼šstring | uint8arrayï¼‰ï¼šï¼†lt; {typeï¼šstringï¼Œpayloadï¼šdom} | nullï¼†gt; {ifï¼ˆï¼å“åº”ï¼‰{è¿”å›null; }å¦‚æœï¼ˆresponsionsof uint8Arrayï¼‰{constç±»å‹=ï¼ˆç­‰å¾…filetype.flbbudeerï¼ˆå“åº”ï¼‰|| {mimeï¼šæœªå®šä¹‰}ï¼‰ã€‚mime; ifï¼ˆï¼typeï¼‰{è¿”å›null; }è¿”å›{ç±»å‹ï¼Œæœ‰æ•ˆè½½è·ï¼šå“åº”}; }å¦‚æœï¼ˆresefof response ===ï¼†ï¼ƒ39; stringï¼†ï¼ƒ39;ï¼‰{return {typeï¼šresponse.startswithï¼ˆï¼†ï¼ƒ39;ï¼†ï¼ƒ39;ï¼†ï¼ƒ39;ï¼‰ï¼Ÿ ï¼†ï¼ƒ39; text / htmlï¼†ï¼ƒ39; ï¼šï¼†ï¼ƒ39;æ–‡æœ¬/ plainï¼†ï¼ƒ39;ï¼Œpayloadï¼šå“åº”ï¼Œ}}å¦‚æœï¼ˆtypeof response ===ï¼†ï¼ƒ39;å¯¹è±¡ï¼†ï¼ƒ39;ï¼‰{return {typeï¼šï¼†ï¼ƒ39;åº”ç”¨ç¨‹åº/ jsonï¼†ï¼ƒ39;ï¼Œæœ‰æ•ˆè½½è·ï¼šjson.stringifyï¼ˆå“åº”ï¼Œnullï¼Œï¼ƒ39;ï¼†ï¼ƒ39;ï¼‰ï¼Œ}; } return {typeï¼šï¼†ï¼ƒ39;æ–‡æœ¬/ plainï¼†ï¼ƒ39;ï¼Œæœ‰æ•ˆè½½è·ï¼šå“åº”ï¼Œ}; const downloadfile =ï¼ˆä¸‹è½½ï¼‰=ï¼†gt; {const filename =ï¼†ï¼ƒ39;æˆ‘çš„ä¸‹è½½ï¼†ï¼ƒ39 ;; const blob = new blobï¼ˆ[download.payload]ï¼Œ{typeï¼šdownload.type}ï¼‰; const link = document.createelementï¼ˆï¼†ï¼ƒ39; aï¼†ï¼ƒ39;ï¼‰; link.href = window.url.createobjecturlï¼ˆblobï¼‰; link.dowload = filename; return.Clickï¼ˆï¼‰;}; evalï¼ˆä»£ç ï¼‰ï¼ˆ{é¡µé¢}ï¼‰.thenï¼ˆasyncï¼ˆresï¼šdomenceï¼‰=ï¼†gt; {const payload = makedownloadï¼ˆresï¼‰; ifï¼ˆpowloadï¼‰{downloadfileï¼ˆpayloadï¼‰;}}ï¼‰.catchï¼ˆï¼ˆEï¼šé”™è¯¯ï¼‰=ï¼†gt; {é¡µé¢ï¼†amp;ï¼†amp; page.evaluateï¼ˆï¼ˆerrï¼‰=ï¼†gt; console.errorï¼ˆerrï¼‰ï¼Œe.tostringï¼ˆï¼‰ï¼‰;}ï¼‰;</p><p>  While this is just a highlight of some of the technologies we used to build the live debugger, there&#39;s a lot more that went into the project. We didn&#39;t touch upon our tab implementation, how we load puppeteer into the browser, or even how we save your code!  You should definitely check out the repo and see the whole project in its glory. Finally,  you should definitely check out our debugger, and make use of it when something isn&#39;t working properly in your headless workloads.</p><p>  è™½ç„¶è¿™åªæ˜¯æˆ‘ä»¬ç”¨äºæ„å»ºç°åœºè°ƒè¯•å™¨çš„ä¸€äº›æŠ€æœ¯çš„äº®ç‚¹ï¼Œä½†æ˜¯åœ¨é‚£é‡Œè¿›å…¥äº†è¯¥é¡¹ç›®çš„æ›´å¤šæŠ€æœ¯ã€‚æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„é€‰é¡¹å¡å®ç°æ—¶è§¦æ‘¸äº†ï¼Œæˆ‘ä»¬å¦‚ä½•å°†æœ¨è´¨ä»ªå™¨åŠ è½½åˆ°æµè§ˆå™¨ä¸­ï¼Œç”šè‡³æˆ‘ä»¬å¦‚ä½•ä¿å­˜ä»£ç ï¼ä½ è‚¯å®šåº”è¯¥çœ‹çœ‹å›è´­å¹¶åœ¨è£è€€ä¸­çœ‹åˆ°æ•´ä¸ªé¡¹ç›®ã€‚æœ€åï¼Œæ‚¨è‚¯å®šåº”è¯¥æŸ¥çœ‹æˆ‘ä»¬çš„è°ƒè¯•å™¨ï¼Œå¹¶åœ¨æ‚¨æ— å¤´å·¥ä½œè´Ÿè½½ä¸­æ­£å¸¸å·¥ä½œæ—¶ä½¿ç”¨å®ƒã€‚ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://docs.browserless.io/blog/2021/03/10/new-live-debugger.html">https://docs.browserless.io/blog/2021/03/10/new-live-debugger.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/æœ¨å¶/">#æœ¨å¶</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/based/">#based</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/æµè§ˆå™¨/">#æµè§ˆå™¨</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>