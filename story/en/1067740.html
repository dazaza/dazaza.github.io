<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>URLï¼šè¿™å¾ˆå¤æ‚ URLs: It's Complicated</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">URLs: It's Complicated<br/>URLï¼šè¿™å¾ˆå¤æ‚ </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-23 23:49:52</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/af7a637d99185879ec11c14772d6b17f.png"><img src="http://img2.diglog.com/img/2021/6/af7a637d99185879ec11c14772d6b17f.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Punycode.)        But note that there is no requirement for the hostname component (when it  is ahostname and not an IP address) to be a fully-qualified domain name ( FQDN);a partially qualified domain name is also possible,as resolution follows the usual local stub resolver&#39;slogic and likely  involving /etc/nsswitch.conf,  /etc/hosts,and  /etc/resolv.conf.</p><p>punycodeã€‚ï¼‰ä½†è¯·æ³¨æ„ï¼ŒHostnameç»„ä»¶ï¼ˆå½“AhostNameè€Œä¸æ˜¯IPåœ°å€æ—¶ï¼‰æ²¡æœ‰è¦æ±‚æ˜¯å®Œå…¨é™å®šçš„åŸŸåï¼ˆFQDNï¼‰;ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªéƒ¨åˆ†åˆæ ¼çš„åŸŸåï¼Œå› ä¸ºå†³è®®éµå¾ªé€šå¸¸çš„æœ¬åœ°å­˜æ ¹resolverï¼†ï¼ƒ39;æ–œè¯­å’Œå¯èƒ½æ¶‰åŠ/etc/nsswitch.confï¼Œ/ etc / hostså’Œ/etc/resolv.confã€‚</p><p> This is actually quite useful, and severalcompanies use this as a neat little trick to provide acompany-internal link-shortener / bookmarkingredirector like  golinks without theneed for a browser plugin or anything like that:</p><p> è¿™å®é™…ä¸Šéå¸¸æœ‰ç”¨ï¼Œå‡ ç§ç¾¤ä½“ä½¿ç”¨è¿™æ˜¯ä¸€ä¸ªæ•´æ´çš„å°æŠ€å·§ï¼Œä»¥æä¾›acompany-internall-shortener / bookmarkingredirectorï¼Œå¦‚golinksï¼Œæ²¡æœ‰ä¸ºæµè§ˆå™¨æ’ä»¶æˆ–ç±»ä¼¼äºè¿™æ ·çš„ä¸œè¥¿ï¼š</p><p>   Now the only slightly confusing part here is thatunless you run your own CA, you can&#39;t get acertificate for &#34; go&#34;, so the short links mustbe accessed using plain http. But either way, you seethat the &#34; hostname&#34; component in a URL neednot be fully qualified.</p><p>   ç°åœ¨ï¼Œè¿™é‡Œå”¯ä¸€æœ‰ç‚¹ä»¤äººå›°æƒ‘çš„éƒ¨åˆ†æ˜¯æ— è®ºä½ è¿è¡Œè‡ªå·±çš„CAï¼Œä½ å¯ä»¥ï¼†ï¼ƒ39; tè·å¾—ï¼†ï¼ƒ34çš„actericate; Goï¼†ï¼ƒ34 ;,,,,,,,,,,,,,,,,,,,,,,,,,,,,ä½†æ˜¯ï¼Œæ— è®ºå“ªç§æ–¹å¼ï¼Œä½ éƒ½ä¼šçœ‹åˆ°ï¼†ï¼ƒ34; hostnameï¼†ï¼ƒ34; URLéœ€è¦çš„ç»„ä»¶æ˜¯å®Œå…¨åˆæ ¼çš„ã€‚</p><p>  The &#34; authority&#34; component may further containa &#34; port&#34; subcomponent. I&#39;m sure you&#39;ve seenthat in action when a server uses a non-default port,so there isn&#39;t really much that&#39;s surprising here.Leaving out the port simply means that you&#39;ll use thedefault port associated with the scheme.</p><p>  ï¼†ï¼ƒ34;æƒå¨ï¼†ï¼ƒ34;ç»„åˆ†å¯ä»¥è¿›ä¸€æ­¥å®¹çº³ï¼†ï¼ƒ34;ç«¯å£ï¼†ï¼ƒ34;å­ç»„ä»¶ã€‚å½“æœåŠ¡å™¨ä½¿ç”¨éé»˜è®¤ç«¯å£æ—¶ï¼Œæˆ‘è‚¯å®šæœ‰æ•ˆåœ°ï¼†ï¼ƒ39; ve seenthatåœ¨è¡ŒåŠ¨ä¸­ï¼Œæ‰€ä»¥ï¼†ï¼ƒ39;å®ƒçœŸçš„å¾ˆå¤šã€‚ä»¤äººæƒŠè®¶çš„æ˜¯ã€‚ç æ‰æ¸¯å£åªæ˜¯æ„å‘³ç€ä½ ï¼†ï¼ƒ 39; LLä½¿ç”¨ä¸è¯¥æ–¹æ¡ˆç›¸å…³è”çš„Thedefaultç«¯å£ã€‚</p><p> One edge condition here is that you can leave theport blank, but still include the &#34; :&#34;:</p><p> è¿™é‡Œçš„ä¸€ä¸ªè¾¹ç¼˜æ¡ä»¶æ˜¯æ‚¨å¯ä»¥å°†æ³¢æ–¯ç‰¹ç©ºç™½ç•™ä¸‹ï¼Œä½†ä»ç„¶åŒ…æ‹¬ï¼†ï¼ƒ34; ï¼šï¼†ï¼ƒ34 ;:</p><p>  The other edge condition is that  RFC3986does not specify a maximum value on the port number(which per  RFC1340/  RFC6335is in the range of  0 - 65535) or how e.g.,zero-padding is handled, as that of course depends onthe client processing the URL. Which makes this avalid URL:</p><p>  å¦ä¸€ä¸ªè¾¹ç¼˜æ¡ä»¶æ˜¯RFC3986DOESæœªåœ¨ç«¯å£å·ä¸ŠæŒ‡å®šæœ€å¤§å€¼ï¼ˆæ¯ä¸ªRFC1340 / RFC6335ISåœ¨0  -  65535çš„èŒƒå›´å†…ï¼‰æˆ–è€…å¦‚ä½•å¤„ç†é›¶å¡«å……ï¼Œå› ä¸ºå½“ç„¶å–å†³äºå®¢æˆ·ç«¯å¤„ç†URLçš„å®¢æˆ·ç«¯ã€‚è¿™ä½¿å¾—è¿™æ˜¯ä¸€ä¸ªå¯æ€•çš„URLï¼š</p><p>   Now for the &#34; pathname&#34;. This one&#39;s fun.It looks like... well, a pathname. Just like on yourfile system. Putting aside the server&#39;s prerogativeto interpret it any way it likes, this means that allthe various edge conditions for file system path namesapply here, too.</p><p>   ç°åœ¨ä¸ºï¼†ï¼ƒ34; Pathnameï¼†ï¼ƒ34;è¿™ä¸ªï¼†ï¼ƒ39; s fun.itçœ‹èµ·æ¥åƒ......å¥½å§ï¼Œä¸€ä¸ªè·¯å¾„åã€‚å°±åƒåœ¨ä½ çš„ç³»ç»Ÿä¸Šã€‚å°†æœåŠ¡å™¨åˆ é™¤ï¼ŒPrerogativeToä»¥å…¶å–œæ¬¢çš„æ–¹å¼è§£é‡Šå®ƒï¼Œè¿™æ„å‘³ç€ï¼Œæ–‡ä»¶ç³»ç»Ÿè·¯å¾„çš„æ‰€æœ‰è¾¹ç¼˜æ¡ä»¶ä¹Ÿåœ¨æ­¤å¤„ä½¿ç”¨ã€‚ </p><p> A &#34; pathname&#34; has a different set ofallowed characters from the &#34; hostname&#34;component, since it is not bound by the hostname orDNS limitations. That also means that within a URL,we&#39;re now switching the meaning of certain characters,such as &#34; .&#34;. Pretty much the only character not allowed in a &#34; pathname&#34;component are  NUL and  /; all othercharacters are allowed either explicitly orimplicitly as  percentencoded data, which the server may then decodeagain before resolving the local path.</p><p>Aï¼†ï¼ƒ34; Pathnameï¼†ï¼ƒ34;æœ‰ä¸€ä¸ªæ¥è‡ªï¼†ï¼ƒ34çš„ä¸åŒä¹Œå¢å…¶å­—ç¬¦; hostnameï¼†ï¼ƒ34;ç»„ä»¶ï¼Œå› ä¸ºå®ƒä¸å—ä¸»æœºåordnsé™åˆ¶çš„ç»‘å®šã€‚è¿™ä¹Ÿæ„å‘³ç€åœ¨URLä¸­ï¼Œæˆ‘ä»¬ï¼†ï¼ƒ39;ç°åœ¨åˆ‡æ¢æŸäº›å­—ç¬¦çš„å«ä¹‰ï¼Œä¾‹å¦‚ï¼†ï¼ƒ34; ã€‚ï¼†ï¼ƒ34 ;.å‡ ä¹æ˜¯ä¸€ä¸ªï¼†ï¼ƒ34ä¸­å”¯ä¸€ä¸å…è®¸çš„è§’è‰²; pathnameï¼†ï¼ƒ34;ç»„ä»¶æ˜¯nulå’Œ/;å…è®¸æ‰€æœ‰å…¶ä»–ç±»åˆ«æ˜ç¡®åœ°å•çº¯å±äºç™¾åˆ†æ¯”çš„æ•°æ®ï¼Œç„¶ååœ¨è§£ææœ¬åœ°è·¯å¾„ä¹‹å‰ï¼ŒæœåŠ¡å™¨å¯ä»¥åœ¨è¯¥æ•°æ®ä¸­è¿›è¡Œè§£ç ã€‚</p><p> This includes spaces, and the following two URLslead to the same file located in a directory that&#39;snamed &#34; &#34;:</p><p> è¿™åŒ…æ‹¬ç©ºæ ¼ï¼Œä»¥åŠä»¥ä¸‹ä¸¤ä¸ªURLSLEADåˆ°ä½äºç›®å½•ä¸­çš„åŒä¸€æ–‡ä»¶; SNAMEDï¼†ï¼ƒ34; ï¼†ï¼ƒ34 ;:</p><p>   $ pwd/htdocs/www.netmeister.org$ ls -la &#34;blog/urls/ &#34; total 12drwxr-xr-x 2 jschauma wheel 512 Jun 19 14:58 .drwxr-xr-x 6 jschauma wheel 1024 Jun 20 16:26 ..-rw-r--r-- 1 jschauma wheel 85 Jun 19 14:59 f$ curl -i &#34;https://www.netmeister.org/blog/urls/ /f&#34;HTTP/2 200 date: Mon, 21 Jun 2021 15:45:31 GMTserver: Apache/2.4.43 (Unix) OpenSSL/1.1.1klast-modified: Sat, 19 Jun 2021 18:59:53 GMTcontent-length: 85This file is in a directory named &#34; &#34;.See https://www.netmeister.org/blog/urls.html$</p><p>   $ pwd / htdocs / www.netmeister.org $ ls -laï¼†ï¼ƒ34;åšå®¢/ urls /ï¼†ï¼ƒ34;æ€»è®¡12drwxr-xr-x 2 jschaumaæ»šè½®512 19æœˆ19æ—¥14:58 .drwxr-xr-x 6 jschaumaæ»šè½®1024 6æœˆ20æ—¥16:26 ..- rw-r  -  r-- 1 jschaumaè½®å­85 Jun 19 14:59 f $ curl -iï¼†ï¼ƒ34; httpsï¼š//www.netmeister.org/blog/urls/ / fï¼†ï¼ƒ34; http / 2 200æ—¥æœŸï¼šæ˜ŸæœŸä¸€ï¼Œ21æ—¥2021 15:45:31 gmtserverï¼šapache / 2.4ã€‚ 43ï¼ˆUNIXï¼‰openssl / 1.1.1klast-modifiedï¼šSATï¼Œ19å…­æœˆ2021 18:59:53 GMTContent-Lengthï¼š85è¿™ä¸ªæ–‡ä»¶ä½äºåä¸ºï¼†ï¼ƒ34çš„ç›®å½•ä¸­; ï¼†ï¼ƒ34; .see https://www.netmeister.org/blog/urls.html$$</p><p> And yes, of course you can give the path name component any valid name, such as &#34;ğŸ’©&#34;:</p><p> æ˜¯çš„ï¼Œå½“ç„¶ï¼Œæ‚¨å¯ä»¥ç»™å‡ºè·¯å¾„åç»„ä»¶ä»»ä½•æœ‰æ•ˆåç§°ï¼Œä¾‹å¦‚ï¼†ï¼ƒ34;ğŸ’©ï¼†ï¼ƒ34 ;:</p><p>  The pathname may be empty, or consist entirely ofempty subcomponents, making all of these go to the same place:</p><p>  è·¯å¾„åå¯èƒ½æ˜¯ç©ºçš„ï¼Œæˆ–è€…å®Œå…¨ç”±emptemyå­ç»„ä»¶ç»„æˆï¼Œä½¿æ‰€æœ‰è¿™äº›éƒ½è½¬åˆ°åŒä¸€ä¸ªåœ°æ–¹ï¼š</p><p>  But the &#34; pathname&#34; component of a URL sentin the HTTP request once you&#39;ve already made aconnection to the server may also be the full URLitself, not just the &#34; pathname&#34; component. RFC7230in fact mandates this when talking to a proxy:</p><p>  ä½†æ˜¯ï¼†ï¼ƒ34; Pathnameï¼†ï¼ƒ34; URLå‘é€HTTPè¯·æ±‚çš„ç»„ä»¶ä¸€æ—¦æ‚¨å·²å°†ACè¿æ¥åˆ°æœåŠ¡å™¨ï¼Œä¹Ÿå¯èƒ½æ˜¯å®Œæ•´çš„URLittitelfï¼Œè€Œä¸ä»…ä»…æ˜¯ï¼†ï¼ƒ34; Pathnameï¼†ï¼ƒ34;æˆåˆ†ã€‚ RFC7230INäº‹å®åœ¨ä¸ä»£ç†äº¤è°ˆæ—¶æˆæƒæ­¤é¡¹ï¼š</p><p> $ openssl s_client -connect www.netmeister.org:443 -quiet -crlf 2&gt;/dev/null HEAD https://www.netmeister.org/blog/urls.html HTTP/1.0HTTP/1.1 200 OKDate: Mon, 21 Jun 2021 18:36:39 GMTServer: Apache/2.4.43 (Unix) OpenSSL/1.1.1kLast-Modified: Mon, 21 Jun 2021 18:24:38 GMTContent-Length: 29963Content-Type: text/html; charset=utf-8</p><p> $ openssl s_client -connect www.netmeister.org:443 -quiet -crlf 2ï¼†gt; / dev / null head https://www.netmeister.org/blog/urls.html http / 1.0http / 1.1 200 Okdateï¼šMonï¼Œ21 2021å¹´6æœˆ2021å¹´6æœˆ18æ—¥GMTserverï¼šApache / 2.4.43ï¼ˆUNIXï¼‰openssl / 1.1.1klast-Modifiedï¼šMonï¼Œ21 Jun 2021 18:24:38 GMTContent-Lengthï¼š29963Contentå‹ï¼šText / HTML; charset = UTF-8 </p><p> And if you&#39;re not talking to a proxy, you can justput  any  scheme://authority into the&#34; Request-URI&#34;,which is what this now has become in this context, andat least Apache ignores everything up to the pathnamecomponent:</p><p>å¦‚æœä½ ï¼†ï¼ƒ39;é‡æ–°ä¸ä»£ç†å•†äº¤è°ˆï¼Œä½ å¯ä»¥åˆšåˆšå‡ºç°ä»»ä½•æ–¹æ¡ˆï¼š//è¿›å…¥ï¼†ï¼ƒ34çš„æƒé™; Request-Uriï¼†ï¼ƒ34;ï¼Œè¿™æ˜¯ç°åœ¨ç°åœ¨å·²æˆä¸ºæ­¤ä¸Šä¸‹æ–‡çš„æƒ…å†µï¼ŒAndatæœ€å°‘Apacheå¿½ç•¥äº†è·¯å¾„åä¸­çš„æ‰€æœ‰å†…å®¹ï¼š</p><p> $ openssl s_client -connect www.netmeister.org:443 -quiet -crlf 2&gt;/dev/null GET gopher://facebook.com/blog/urls.html HTTP/1.0HTTP/1.1 200 OKDate: Mon, 21 Jun 2021 18:43:28 GMTServer: Apache/2.4.43 (Unix) OpenSSL/1.1.1kContent-Type: text/html; charset=utf-8Content-Language: en[...]</p><p> $ openssl s_client -connect www.netmeister.org:443 -quiet -crlf 2ï¼†gt; / dev / null get gopherï¼š//facebook.com/blog/urls.html http / 1.0http / 1.1 200 okdateï¼šmonï¼Œ21 2021 18:43:28 GMTserverï¼šApache / 2.4.43ï¼ˆUNIXï¼‰openssl / 1.1.1kContentå‹ï¼šText / HTML; Charset = UTF-8Contentè¯­è¨€ï¼šen [...]</p><p>  Dots are funny. If your web server runs on aUnix-like system, then for a pathname, a single dotmeans &#34;this directory&#34;, and two dots means &#34;my parentdirectory&#34;, which is why you see requests for e.g.,&#34; /../../../../../../../../../etc/passwd&#34; inyour web server&#39;s logs, trying to break out of yourweb servers document root.</p><p>  ç‚¹å¾ˆæœ‰è¶£ã€‚å¦‚æœæ‚¨çš„WebæœåŠ¡å™¨åœ¨ç±»ä¼¼AUNIXçš„ç³»ç»Ÿä¸Šè¿è¡Œï¼Œåˆ™ä¸ºè·¯å¾„åï¼Œå•ä¸ªDOTMeansï¼†ï¼ƒ34;æ­¤ç›®å½•ï¼†ï¼ƒ34;å’Œä¸¤ä¸ªç‚¹æ„å‘³ç€ï¼†ï¼ƒ34;æˆ‘çš„parentdirectoryï¼†ï¼ƒ34;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ çœ‹åˆ°è¯·æ±‚çš„åŸå› ä¾‹å¦‚ï¼Œï¼†ï¼ƒ34; /../../../../../../../../../../../../../1.. / ...... inyour webæœåŠ¡å™¨å’Œï¼ƒ39; sæ—¥å¿—ï¼Œè¯•å›¾çªç ´æ‚¨çš„æˆ‘ä»¬çš„æœåŠ¡å™¨æ–‡æ¡£æ ¹ç›®å½•ã€‚</p><p>   Now a decent web server does not allow a request tobe made outside of its document root, but what&#39;sperhaps more interesting here is that this resolutionof  dot-segments happens (well, should happen)  prior to localfilesystem path resolution per  RFC3986,which means that you can pretend-&#34; ../&#34; aroundnon-existent directories:</p><p>   ç°åœ¨ï¼Œä¸€ä¸ªä½“é¢çš„WebæœåŠ¡å™¨ä¸å…è®¸è¯·æ±‚åœ¨å…¶æ–‡æ¡£æ ¹ç›®å½•å¤–çš„è¯·æ±‚ï¼Œä½†æ˜¯è¿™é‡Œï¼†ï¼ƒ39;è¿™é‡Œæ›´æœ‰æ„æ€çš„æ˜¯ï¼Œæ­¤åˆ†è¾¨ç‡å‘ç”Ÿåœ¨æ¯ä¸ªRFC3986çš„LocalFileSystemè·¯å¾„åˆ†è¾¨ç‡ä¹‹å‰ï¼ˆå—¯ï¼Œåº”è¯¥å‘ç”Ÿï¼‰æ„å‘³ç€ä½ å¯ä»¥å‡è£… - ï¼†ï¼ƒ34; ../&#34;å‘¨æœ«å­˜åœ¨çš„ç›®å½•ï¼š</p><p> $ pwd/htdocs/www.netmeister.org$ ls -ld t d n e ls: d: No such file or directoryls: e: No such file or directoryls: n: No such file or directoryls: t: No such file or directory$ ls -ld t/h/e/s/e/../../../../../d/i/r/e/c/t/o/r/i/e/s/../../../../../../../../../../../d/o/../../n/o/t/../../../e/x/i/s/t/../../../../../blog/urls.htmlls: t/h/e/s/e/../../../../../d/i/r/e/c/t/o/r/i/e/s/../../../../../../../../../../../d/o/../../n/o/t/../../../e/x/i/s/t/../../../../../blog/urls.html: No such file or directory$ curl -I https://www.netmeister.org/t/h/e/s/e/../../../../../d/i/r/e/c/t/o/r/i/e/s/../../../../../../../../../../../d/o/../../n/o/t/../../../e/x/i/s/t/../../../../../blog/urls.htmlHTTP/2 200 date: Mon, 21 Jun 2021 16:07:35 GMTserver: Apache/2.4.43 (Unix) OpenSSL/1.1.1klast-modified: Mon, 21 Jun 2021 16:03:41 GMTcontent-length: 24107content-type: text/html; charset=utf-8content-language: en$</p><p> $ pwd / htdocs / www.netmeister.org $ ls -ld tdne lsï¼šdï¼šæ²¡æœ‰è¿™æ ·çš„æ–‡ä»¶æˆ–directorylsï¼šeï¼šæ²¡æœ‰è¿™æ ·çš„æ–‡ä»¶æˆ–directorylsï¼šnï¼šæ²¡æœ‰è¿™æ ·çš„æ–‡ä»¶æˆ–directorylsï¼štï¼šæ²¡æœ‰è¿™æ ·çš„æ–‡ä»¶æˆ–ç›®å½•$ ls -ld t / h / e / s / e / d d / I / R / E / C / T / O / R / I / E / S /ã€‚ ã€‚/../../../../../../../../../../ä¸è¦/.. /../../e/x/i/s/t/../../../../../.. / blog / urls.htmllsï¼št / h / e / s / e / / ...../../../../d/i / r/e/c/t/o/r/i/e/s/d/../../../ ... ../../../../../../d/../../n/o/t/../../../t/../../'o/x/i/s. /t/../../../../../../.. /bog/urls.htmlï¼šæ²¡æœ‰è¿™æ ·çš„æ–‡ä»¶æˆ–ç›®å½•$ curl -i https://www.netmeister.org/t/h/e/s /e/../../../../../../../../1../i/r/e/c/t/or/r/i/e/s/../../ ... ./../../../../../../d/o/../../n/t/t/../../../t/ X / I / S / T / d / ...åšå®¢/ urls.htmlhttp / 2 200æ—¥æœŸï¼šMonï¼Œ21 Jun 2021 16:07:35 GmTserverï¼šApache / 2.4.43 ï¼ˆUNIXï¼‰openssl / 1.1.1klast-modifiedï¼šmonï¼Œ21æ—¥2021å¹´6æœˆ21æ—¥16:03:41 GMTContent-Lengthï¼š24107Contentå‹ï¼šText / HTML; Charset = UTF-8 Contentè¯­è¨€ï¼šEN $</p><p> But of course you can have files or directoriesnamed &#34; ...&#34; or &#34; ....&#34; etc., so thefollowing will get you an actual file:</p><p> ä½†å½“ç„¶ä½ å¯ä»¥æ‹¥æœ‰æ–‡ä»¶æˆ–ç›®å½•åå’Œï¼ƒ34; ...ï¼†ï¼ƒ34;æˆ–ï¼†ï¼ƒ34; ....ï¼†ï¼ƒ34;ç­‰ç­‰ï¼Œæ‰€ä»¥å…³æ³¨ä¼šç»™ä½ ä¸€ä¸ªå®é™…æ–‡ä»¶ï¼š</p><p>     Hmm, but this morse code pathname component isgetting pretty long. How long can we make those? Ifit&#39;s a path name, then it should be subject to theoperating systems limits, and sure enough, I can&#39;tcreate a directory that&#39;s longer than FFS_MAXNAMLEN = 255 characters. But I can create nested subdirs to ultimately builda full path that hits the operating system&#39;s PATH_MAX = 1024:</p><p>     å—¯ï¼Œä½†è¿™ä¸ªè«å°”æ–¯ä»£ç Pathnameç»„ä»¶å¾ˆé•¿ã€‚æˆ‘ä»¬å¯ä»¥åˆ¶ä½œå¤šä¹…ï¼Ÿ IFITï¼†ï¼ƒ39; sè·¯å¾„åç§°ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥å—åˆ°ç‰¹å·¥ç³»ç»Ÿçš„é™åˆ¶ï¼Œå¹¶ç†Ÿæ‚‰ï¼Œæˆ‘å¯ä»¥ï¼†ï¼ƒ39; tCreateä¸€ä¸ªåå½•ï¼†ï¼ƒ39; sé•¿äºffs_maxnamlen = 255ä¸ªå­—ç¬¦ã€‚ä½†æˆ‘å¯ä»¥åˆ›å»ºåµŒå¥—çš„å­æ¨¡å‹ï¼Œæœ€ç»ˆæ„å»ºå‡»ä¸­æ“ä½œç³»ç»Ÿçš„å®Œæ•´è·¯å¾„ï¼†ï¼ƒ39; s path_max = 1024ï¼š </p><p> $ pwd/htdocs/www.netmeister.org$ cd blog/urls $ ls -ld ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddrwxr-xr-x 3 jschauma wheel 512 Jun 19 17:40 ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd/$ cd dd*$ cd dd*$ cd dd*$ cd dd*ksh: cd: dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd: bad directory$ pwd/htdocs/www.netmeister.org/blog/urls/ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd/ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd/ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd$</p><p>$ PWD / htdocsä¸­/ www.netmeister.org $ CDåšå®¢/ URL $ LS -ld ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddrwx-XR-X 19å¹´6æœˆ3æ—¥17:40 ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd jschauåˆ°è½¦è½®512 / $ CD CD DD DD * $ * $ * $ CD CD DD DD * KSHï¼šCDï¼šddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddï¼šåç›®å½•$ PWD / htdocsä¸­/ www.netmeister.org /åšå®¢/ URL / ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd / ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd / $ ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd</p><p>     &#34; ~&#34; is special, except when it&#39;s not. Inthis regard, it&#39;s a lot like tilde expansion in yourshell -- it only takes place if it&#39;s the firstcharacter after the &#34; /&#34; that begins the&#34; pathname&#34;. If this first segment beginswith &#34; /~username/, then many web serversdefault (or can be configured) to resolving theremainder of the &#34; pathname&#34; from under thatuser&#39;s &#34;web space&#34;, often times ~username/public_html.</p><p>     ï¼†ï¼ƒ34; ã€œï¼ƒ34;æ˜¯ç‰¹æ®Šçš„ï¼Œé™¤äº†å®ƒï¼†ï¼ƒ39; s noteã€‚ INTHISï¼ŒITï¼†ï¼ƒ39;å¾ˆå¤šåƒä½ è°¢å°”çš„TINDEæ‰©å¼ ä¸€æ · - å®ƒåªæ˜¯å¦‚æœå®ƒï¼†ï¼ƒ39;ï¼†ï¼ƒ34ä¹‹åçš„ç¬¬ä¸€ç‰¹å¾æ‰ä¼šå‘ç”Ÿ; /ï¼†ï¼ƒ34;è¿™æ˜¯ï¼†ï¼ƒ34; Pathnameï¼†ï¼ƒ34;ã€‚å¦‚æœè¿™ä¸ªç¬¬ä¸€ä¸ªæ®µå¼€å§‹ï¼†ï¼ƒ34; /ã€œç”¨æˆ·å/ï¼Œç„¶åæ˜¯è®¸å¤šWeb ServersDefaultï¼ˆæˆ–å¯ä»¥é…ç½®ï¼‰ä»¥è§£å†³å’Œï¼ƒ34çš„Theremaine; Pathnameï¼†ï¼ƒ34;ä»æœ¬å‘æ˜ï¼†ï¼ƒ39; sï¼†ï¼ƒ34; webç©ºé—´ï¼†ï¼ƒ34;å¸¸å¸¸ã€œç”¨æˆ·å/ public_htmlã€‚</p><p>   But it&#39;s worth noting that the expansion to auser&#39;s personal web space is convention only: the RFCsdon&#39;t appear to discuss this, although support for a&#34; UserDir&#34; appears to go as far back as  CERNhttpd and  ncsa_httpd.But there is really nothing special about the&#34; ~&#34; character at all. You can, of course,have a directory or file named &#34; ~&#34;:</p><p>   ä½†å®ƒå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¯¹Auserçš„æ‰©å¼ ï¼†ï¼ƒ39;åªæœ‰å¸¸è§„çš„ä¸ªäººç½‘ç©ºé—´æ˜¯å…¬çº¦ï¼šrfcsdonï¼†ï¼ƒ39; tippsè®¨è®ºäº†è¿™ä¸€ç‚¹ï¼Œå°½ç®¡æ”¯æŒAï¼†ï¼ƒ34; Userdirï¼†ï¼ƒ34;ä¼¼ä¹æ˜¯å¤´ç¯å›æ¥ä½œä¸ºcernhttpdå’Œncsa_httpd.ä½†æ˜¯ï¼Œå…³äºï¼†ï¼ƒ34çš„é€Ÿåº¦æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ç‰¹åˆ«ä¹‹å¤„; ã€œï¼ƒ34;å­—ç¬¦æ ¹æœ¬ã€‚å½“ç„¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åä¸ºï¼†ï¼ƒ34çš„ç›®å½•æˆ–æ–‡ä»¶; ã€œï¼†ï¼ƒ34;ï¼š</p><p>  So far, so good. But what happens if you either donot have a user named &#34; username&#34; or you do,and there is a file name &#34; ~username&#34; in yourweb server&#39;s root? Let&#39;s give it a try:</p><p>  åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚ä½†æ˜¯å¦‚æœæèµ è€…æœ‰ä¸€ä¸ªåä¸ºï¼†ï¼ƒ34çš„ç”¨æˆ·ä¼šå‘ç”Ÿä»€ä¹ˆ;ç”¨æˆ·åï¼†ï¼ƒ34;æˆ–è€…ä½ è¿™æ ·åšï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæ–‡ä»¶åå’Œï¼ƒ34; ã€œç”¨æˆ·åï¼†ï¼ƒ34;åœ¨ä½ çš„æˆ‘ä»¬çš„æ ¹ç›®å½•ä¸­ï¼†ï¼ƒ39;è®©ï¼†ï¼ƒ39; sè¯•ä¸€è¯•ï¼š</p><p> $ pwd/htdocs/www.netmeister.org$ id nobody uid=32767(nobody) gid=39(nobody) groups=39(nobody)$ ls -ld ~nobody/public_html \~nobodyls: /nonexistent//public_html: No such file or directory-rw-r--r-- 1 jschauma wheel 4 Jun 20 15:22 ~nobody$ cat \~nobodyThis is a file named &#34;~nobody&#34; with a symlink of &#34;~notauser&#34; pointing to it.See https://www.netmeister.org/blog/urls.html$ curl -I https://www.netmeister.org/~nobodyHTTP/2 404 date: Mon, 21 Jun 2021 20:12:21 GMTserver: Apache/2.4.43 (Unix) OpenSSL/1.1.1kcontent-type: text/html; charset=iso-8859-1$ id notauserid: notauser: No such user$ ls -ld ~notauser/public_html \~notauser ls: ~notauser/public_html: Not a directorylrwx------ 1 jschauma wheel 7 Jun 20 15:23 ~notauser -&gt; ~nobody$ cat \~notauserThis is a file named &#34;~nobody&#34; with a symlink of &#34;~notauser&#34; pointing to it.See https://www.netmeister.org/blog/urls.html$ curl -I https://www.netmeister.org/~notauserHTTP/2 200 date: Mon, 21 Jun 2021 20:17:09 GMTserver: Apache/2.4.43 (Unix) OpenSSL/1.1.1kcontent-length: 124content-language: en$</p><p> $ pwd / htdocs / www.netmeister.org $ id nobody uid = 32767ï¼ˆnobodyï¼‰go = 39ï¼ˆnobodyï¼‰ç»„= 39ï¼ˆnobodyï¼‰$ ls -ldã€œnobody / public_html \ã€œnobodylsï¼š/ nonexistent // public_htmlï¼šå¦è¿™æ ·çš„æ–‡ä»¶æˆ–ç›®å½•-RW-R  -  R-- 1 Jschaumaæ»šè½®4æœˆ20æ—¥15:22ã€œNobody $ Cat \ã€œnobodythisæ˜¯ä¸€ä¸ªåä¸ºï¼†ï¼ƒ34;ã€œnobodyï¼†ï¼ƒ34;ç¬¦åˆï¼†ï¼ƒ34;ã€œnotauserï¼†ï¼ƒ34;æŒ‡å‘å®ƒ.see https://www.netmeister.org/blog/urls.html$$å·æ›²-i httpsï¼š//www.netmeister.org/~nobodyhttp/2 404æ—¥æœŸï¼šæ˜ŸæœŸä¸€ï¼Œ21æ—¥2021 20:12ï¼š 21 GmTserverï¼šApache / 2.4.43ï¼ˆUNIXï¼‰openssl / 1.1.1kcontent yextï¼štext / html; Charset = ISO-8859-1 $ ID NotaUserIDï¼šNOTAUSERï¼šæ²¡æœ‰è¿™æ ·çš„ç”¨æˆ·$ ls -ldã€œnotaUser / public_html \ã€œnotauser lsï¼šã€œnotauser / public_htmlï¼šæ³¨æ„ä¸€ä¸ªdirectorylwx ------ 1 jschaumaæ»šè½®7æœˆ20æ—¥ï¼š23ã€œNOTAUSER  - ï¼†gt; ã€œæ²¡æœ‰äºº$ cat \ã€œnotauserthisæ˜¯ä¸€ä¸ªåä¸ºï¼†ï¼ƒ34;ã€œæ²¡æœ‰äººå’Œï¼ƒ34;ç¬¦åˆï¼†ï¼ƒ34;ã€œnotauserï¼†ï¼ƒ34;æŒ‡å‘å®ƒ.see https://www.netmeister.org/blog/urls.html$$å·æ›²-i httpsï¼š//www.netmeister.org/2notauserhttp/2 200æ—¥æœŸï¼šå‘¨ä¸€ï¼Œ21æ—¥2021 20:17ï¼š 09 GmTserverï¼šApache / 2.4.43ï¼ˆUNIXï¼‰openssl / 1.1.1kcontent-lengthï¼š124content-languageï¼šen $</p><p> That is, if your web server supports (and hasenabled) user directories, and you submit a requestfor &#34; ~username&#34;:</p><p> ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ‚¨çš„WebæœåŠ¡å™¨æ”¯æŒï¼ˆå’Œå“ˆå¸Œä¸ºï¼‰ç”¨æˆ·ç›®å½•ï¼Œå¹¶ä¸”æ‚¨æäº¤è¯·æ±‚ï¼†ï¼ƒ34; ã€œç”¨æˆ·åï¼†ï¼ƒ34;ï¼š</p><p> if &#34; username&#34; is a valid user, the serverlooks for &#34; ~username/public_html&#34;, evenif that directory does  not exist, but the file ~username  does exist</p><p> å¦‚æœï¼†ï¼ƒ34;ç”¨æˆ·åï¼†ï¼ƒ34;æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç”¨æˆ·ï¼Œï¼†ï¼ƒ34çš„serverlooks; ã€œç”¨æˆ·å/ public_htmlï¼†ï¼ƒ34; open openè¯¥ç›®å½•ä¸å­˜åœ¨ï¼Œä½†æ–‡ä»¶ã€œç”¨æˆ·åç¡®å®å­˜åœ¨ </p><p> if &#34; username&#34; is  not a validuser, then normal pathname resolution takes place,meaning if the file &#34; ~username&#34; exists in theweb server&#39;s document root, it is served</p><p>å¦‚æœï¼†ï¼ƒ34;ç”¨æˆ·åï¼†ï¼ƒ34;ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äººï¼Œç„¶åå‘ç”Ÿæ­£å¸¸çš„è·¯å¾„åå†³è®®ï¼Œæ„å‘³ç€æ–‡ä»¶ï¼†ï¼ƒ34; ã€œç”¨æˆ·åï¼†ï¼ƒ34;å­˜åœ¨äºWEBæœåŠ¡å™¨å’Œï¼ƒ39; Sæ–‡æ¡£æ ¹ç›®å½•ä¸­ï¼Œå®ƒæ˜¯æœåŠ¡çš„</p><p>   A &#34; query&#34; component in a URL follows a&#34; ?&#34; characters and... is basically not welldefined at all. You could put just about anything into the query, including charactersthat would otherwise not be possible, such as&#34; /&#34; and &#34; ?&#34;:</p><p>   Aï¼†ï¼ƒ34;æŸ¥è¯¢ï¼†ï¼ƒ34; URLä¸­çš„ç»„ä»¶éµå¾ªAï¼†ï¼ƒ34; ï¼Ÿï¼†ï¼ƒ34;å­—ç¬¦å’Œ......åŸºæœ¬ä¸Šæ²¡æœ‰å®Œå…¨èåˆã€‚ä½ å¯ä»¥æŠŠä»»ä½•ä¸œè¥¿æ”¾å…¥æŸ¥è¯¢ä¸­ï¼ŒåŒ…æ‹¬å¦åˆ™æ— æ³•å®ç°çš„äººç‰©ï¼Œå¦‚ï¼†ï¼ƒ34; /ï¼†ï¼ƒ34;å’Œï¼ƒ34; ï¼Ÿï¼†ï¼ƒ34 ;:</p><p>  Now by convention, queries tend to use a&#34; key1=value1&amp;key2=value2&#34; syntax,although of course nothing requires you to do that, oreven to use the &#34; &amp;&#34; as a separator; somesystems also (used to) use &#34; ;&#34;.</p><p>  ç°åœ¨æŒ‰ç…§æƒ¯ä¾‹ï¼ŒæŸ¥è¯¢å¾€å¾€ä½¿ç”¨Aï¼†ï¼ƒ34; key1 = value1ï¼†amp; key2 = value2ï¼†ï¼ƒ34;è¯­æ³•ï¼Œè™½ç„¶å½“ç„¶æ²¡æœ‰ä»€ä¹ˆéœ€è¦ä½ è¿™æ ·åšï¼Œä½†æ˜¯orevenè¦ä½¿ç”¨ï¼†ï¼ƒ34; ï¼†amp;ï¼†ï¼ƒ34;ä½œä¸ºåˆ†éš”ç¬¦; SomeSystemsä¹Ÿï¼ˆç”¨äºï¼‰ä½¿ç”¨ï¼†ï¼ƒ34; ;ï¼†ï¼ƒ34;</p><p> But that&#39;s really all there is to the query. It&#39;spart of the HTTP request and the server may put itinto the environment as &#34; QUERY_STRING&#34;.</p><p> ä½†æ˜¯ï¼Œå®ƒçœŸçš„éƒ½æœ‰æŸ¥è¯¢ã€‚å®ƒï¼†ï¼ƒ39; HTTPè¯·æ±‚çš„SPARTå’ŒæœåŠ¡å™¨å¯ä»¥å°†ITINTOæ”¾ç½®ä¸ºï¼†ï¼ƒ34; query_stringï¼†ï¼ƒ34;</p><p>  The last component of the URL is the &#34; fragmentidentifier&#34;. This one&#39;s weird in that, whileit&#39;s obviously part of the URL, it is intended to bescoped entirely to the  client, not the server. In fact, common HTTP clients do notsend the fragment to the server, a fact that is thenused by systems like e.g.,  https://privatebin.info/,whereby the decryption key is placed into the fragmentcomponent of the URL, ensuring that the server doesnot see the key.</p><p>  URLçš„æœ€åä¸€ä¸ªç»„æˆéƒ¨åˆ†æ˜¯ï¼†ï¼ƒ34;ç¢ç‰‡identifierï¼†ï¼ƒ34;è¿™ä¸ªï¼†ï¼ƒ39;å¾ˆå¥‡æ€ªï¼Œè™½ç„¶ï¼†ï¼ƒ39;æ˜¾ç„¶æ˜¯ä¸€ä¸ªURLï¼Œå®ƒæ—¨åœ¨å®Œå…¨å‘å®¢æˆ·ç«¯Bescopedï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨ã€‚å®é™…ä¸Šï¼Œå¸¸è§çš„HTTPå®¢æˆ·ç«¯ç¡®è®¤å°†ç‰‡æ®µå½’åŠŸäºæœåŠ¡å™¨ï¼Œè¯¥äº‹å®æ˜¯ç”±egï¼Œhttps://privatebin.info/ï¼Œdecryptioné”®æ”¾å…¥URLçš„Fragment Componentä¸­çš„ç³»ç»Ÿï¼Œç„¶åç¡®ä¿æœåŠ¡å™¨ä¸çŸ¥é“é”®ã€‚</p><p> Your common web browsers and even e.g., curl(1) will strip the fragment prior tosending the HTTP request, but of course nothingprevents you from sending a  GET requestwith a  Request-URI containing a fragment, andyou can of course create a file name containinga &#34; #&#34;.</p><p> æ‚¨çš„å¸¸è§Webæµè§ˆå™¨ç”šè‡³ä¾‹å¦‚ï¼ŒCurlï¼ˆ1ï¼‰å°†åœ¨æå‰è°ƒæ•´HTTPè¯·æ±‚ä¹‹å‰ç»‘ä½ç‰‡æ®µï¼Œä½†å½“ç„¶æ‚¨ä»å‘é€Get RequestWithåŒ…å«ä¸€ä¸ªç‰‡æ®µçš„è¯·æ±‚æ—¶ï¼Œæ‚¨å½“ç„¶å¯ä»¥åˆ›å»ºåŒ…å«Açš„æ–‡ä»¶åï¼Œå¹¶ä¸”å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«Açš„æ–‡ä»¶åã€‚ ï¼ƒ34; ï¼ƒï¼†ï¼ƒ34;</p><p> Now Apache httpd treats a &#34; #&#34; in theRequest-URI as a  400 Bad Request, but  RFC2616does not mandate this.  bozohttpd,for example, does not treat &#34; #&#34; in theRequest-URI as special, so you can, for example, makethis request:</p><p> ç°åœ¨Apache httpdå¤„ç†Aï¼†ï¼ƒ34; ï¼ƒï¼†ï¼ƒ34;åœ¨é‚£é‡Œï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­ä½œä¸º400ä¸ªä¸è‰¯è¯·æ±‚ï¼Œä½†RFC2616DOESä¸æˆæƒè¿™ä¸€ç‚¹ã€‚ä¾‹å¦‚ï¼ŒBozohttpdä¸æ²»ç–—ï¼†ï¼ƒ34; ï¼ƒï¼†ï¼ƒ34;åœ¨é‚£é‡Œï¼Œuriest-uriï¼Œæ‰€ä»¥æ‚¨å¯ä»¥ä¾‹å¦‚makethisè¯·æ±‚ï¼š </p><p> $ echo -ne &#34;GET /blog/urls/urls.html#fragment HTTP/1.0\r\n\r\n&#34; | \ nc www.netmeister.org 8080HTTP/1.0 200 OKDate: Tue, 22 Jun 2021 00:12:22 GMTServer: bozohttpd/20170201Accept-Ranges: bytesLast-Modified: Sat, 19 Jun 2021 12:58:28 GMTContent-Type: text/plainContent-Length: 113Just a normal file that just happens to contain a &#39;#&#39; in its name.See https://www.netmeister.org/blog/urls.html</p><p>$ echo -neï¼†ï¼ƒ34; get /blog/urls/urls.html#fragment http / 1.0 \ r \ n \ r \ nï¼†ï¼ƒ34; | \ nc www.netmeister.org 8080http / 1.0 200 okdateï¼štueï¼Œ22 jun 2021 00:12:22 GmTserverï¼šBozohttpd / 20170201Accept-rangesï¼šByteslast-Modifiedï¼šByteslast-Modifiedï¼šByteslast-Modifiedï¼šSatï¼Œ19 Jun 2021 12:58:28 GMTContentå‹ï¼šæ–‡æœ¬/ plaincontent-lengthï¼š113åˆšåˆšæ°å¥½åŒ…å«ä¸€ä¸ªï¼†ï¼ƒ39çš„æ™®é€šæ–‡ä»¶;ï¼ƒï¼†ï¼ƒ39;åœ¨å®ƒçš„å§“å.see https://www.netmeister.org/blog/urls.html</p><p>  Now with all of this long discussion, let&#39;s go backto that silly URL from above:</p><p>  ç°åœ¨ä¸æ‰€æœ‰è¿™ä¸€é•¿çš„è®¨è®ºï¼Œè®©ï¼†ï¼ƒ39; sä»ä¸Šé¢å›åˆ°é‚£ä¸ªæ„šè ¢çš„ç½‘å€ï¼š</p><p>  Now this really looks like the  Buffalobuffalo equivalent of a URL. Let&#39;s untangle howthis becomes a valid link.</p><p>  ç°åœ¨è¿™çœ‹èµ·æ¥åƒæ˜¯æ°´è±šé¼ ç­‰åŒäºURLã€‚ Letï¼†ï¼ƒ39; s Untangleè±ªäº†æ‰¬å£°å™¨æˆä¸ºä¸€ä¸ªæœ‰æ•ˆçš„é“¾æ¥ã€‚</p><p> The first &#34; https://&#34; is nothing out of theordinary, just your usual scheme and start ofauthority</p><p> ç¬¬ä¸€ä¸ªï¼†ï¼ƒ34; httpsï¼š//ï¼ƒ34;æ²¡æœ‰è¿çº¦ï¼Œåªæ˜¯ä½ å¹³å¸¸çš„è®¡åˆ’å’Œå¥‰æ‰¿</p><p>   Now we start to play silly tricks:&#34; â„ â„www.netmeister.org&#34; uses the fractionslash characters as part of the  password.Percent-encoded, this would look like so: %E2%81%84%E2%81%84www%2Enetmeister%2Eorg</p><p>   ç°åœ¨æˆ‘ä»¬å¼€å§‹å‘æŒ¥æ„šè ¢çš„æŠ€å·§ï¼šï¼†ï¼ƒ34; / www wetmeister.orgï¼†ï¼ƒ34;ä½¿ç”¨å°éƒ¨åˆ†å†Œå­—ç¬¦ä½œä¸ºå¯†ç çš„ä¸€éƒ¨åˆ†ã€‚ç¼–ç ï¼Œè¿™çœ‹èµ·æ¥å¦‚æ­¤ï¼šï¼…E2ï¼…81ï¼…84ï¼…E2ï¼…81ï¼…84wwwï¼…2enetmeisterï¼…2eorg</p><p>  The next &#34; https&#34; now is the hostname component of the  authority: a  partially qualified hostname, that relies on  /etc/hosts containing an entry pointing  https to the right IP address.</p><p>  ä¸‹ä¸€ä¸ªï¼†ï¼ƒ34; httpsï¼†ï¼ƒ34;ç°åœ¨æ˜¯æƒé™çš„ä¸»æœºåç»„ä»¶ï¼šä¾èµ–äº/ etc / hostsçš„éƒ¨åˆ†é™å®šä¸»æœºåï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæŒ‡å‘httpsåˆ°æ­£ç¡®çš„IPåœ°å€çš„æ¡ç›®ã€‚</p><p> The next &#34; :&#34; now is the separator of the hostname and the  port components.Only here, it is followed by an empty port, so wedefault to the scheme-specific port, 443 in thiscase.</p><p> ä¸‹ä¸€ä¸ªï¼†ï¼ƒ34; ï¼šï¼†ï¼ƒ34;ç°åœ¨æ˜¯ä¸»æœºåå’Œç«¯å£ç»„ä»¶çš„åˆ†éš”ç¬¦ã€‚åœ¨è¿™é‡Œï¼Œå®ƒåè·Ÿä¸€ä¸ªç©ºç«¯å£ï¼Œä½¿Wedefaultåˆ°ç‰¹å®šäºæ–¹æ¡ˆçš„ç«¯å£ï¼Œ443åœ¨è¯¥é…ç½®ã€‚ </p><p> The next &#34; //&#34; then is merely the end ofthe  authority followed by an empty pathcomponent.</p><p>ä¸‹ä¸€ä¸ªï¼†ï¼ƒ34; //ï¼ƒ34;ç„¶åä»…ä»…æ˜¯æƒå¨çš„ç»“æŸï¼Œåè·Ÿä¸€ä¸ªç©ºçš„è·¯å¾„ç»„æˆã€‚</p><p> The next &#34; www.netmeister.org&#34; now issimply a directory by that name, followed by a normaldirectory separator,&#34; /</p><p> ä¸‹ä¸€ä¸ªï¼†ï¼ƒ34; www.netmeister.orgï¼†ï¼ƒ34;ç°åœ¨é€šè¿‡è¯¥åç§°æä¾›ç›®å½•ï¼Œå…¶æ¬¡æ˜¯æ ‡å‡†çš„åˆ†éš”ç¬¦ï¼Œï¼†ï¼ƒ34; /</p><p> Following that, we find a file name &#34; https:â„â„www.netmeister.orgâ„â„&#34; again using the fraction slash character.</p><p> åœ¨æ­¤ä¹‹åï¼Œæˆ‘ä»¬æ‰¾åˆ°æ–‡ä»¶åå’Œï¼ƒ34; httpsï¼š//www.netmeister.org//ï¼†ï¼ƒ34;å†æ¬¡ä½¿ç”¨åˆ†æ•°æ–œæ å­—ç¬¦ã€‚</p><p>  Queries allow just about any characters, so here we get a key named &#34; https://www.netmeister.org&#34; with a &#34; =&#34; assigned value of &#34; https://www.netmeister.org&#34;.</p><p>  æŸ¥è¯¢å…è®¸ä»»ä½•å­—ç¬¦ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªåä¸ºï¼†ï¼ƒ34; httpsï¼š//www.netmeister.org&#34;ä¸ä¸€ä¸ªï¼†ï¼ƒ34; =ï¼†ï¼ƒ34;åˆ†é…å€¼ï¼†ï¼ƒ34; httpsï¼š//www.netmeister.org&#34;</p><p>  And finally, we have a fragment, which may containjust about any character as well, so we stuff another&#34; https://www.netmeister.org&#34; in there aswell.</p><p>  æœ€åï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç¢ç‰‡ï¼Œå¯èƒ½ä¼šåŒ…å«ä»»ä½•è§’è‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬å¡«å……äº†å¦ä¸€ä¸ªè§’è‰²å’Œï¼ƒ34; httpsï¼š//www.netmeister.org&#34;åœ¨é‚£é‡Œã€‚</p><p>    Ok, so what&#39;s the big deal? Why did I bother withall of the above, when I didn&#39;t even breakanything?</p><p>    å¥½çš„ï¼Œæ‰€ä»¥ä»€ä¹ˆï¼†ï¼ƒ39;è¿™æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆæˆ‘åœ¨ä¸Šé¢çš„æƒ…å†µä¸‹æ‰“æ‰°äº†ä¸Šé¢çš„æƒ…å†µï¼Œå½“æˆ‘ç”šè‡³æ˜¯å±è‚¡ï¼Ÿ</p><p> I call it &#34; brain fuzzing&#34; or &#34; logicalfuzzing&#34;: I try to understand what something thatI use every single day does, what it&#39;s supposed todo, how it&#39;s defined, and then sometimes I go &#34;Huh, Iwonder what happens if I put  X in hereinstead.&#34;</p><p> æˆ‘ç§°ä¹‹ä¸ºï¼†ï¼ƒ34;è„‘è¢‹æ¨¡ç³Šï¼†ï¼ƒ34;æˆ–ï¼†ï¼ƒ34; logicalfuzzingï¼†ï¼ƒ34 ;:æˆ‘è¯•å›¾äº†è§£æ¯ä¸€å¤©ä½¿ç”¨çš„ä¸œè¥¿ï¼Œå®ƒæ˜¯ä»€ä¹ˆï¼†ï¼ƒ39; scapting todoï¼Œå®ƒå¦‚ä½•å®šä¹‰ï¼Œç„¶åæœ‰æ—¶æˆ‘å»ï¼†ï¼ƒ34;å‘µå‘µï¼Œæˆ‘ä¼šå‘ç”Ÿä»€ä¹ˆæˆ‘æŠŠxæ”¾åœ¨æ—è¾¹ã€‚ï¼†ï¼ƒ34; </p><p> I also find it interesting how URLs haveimplications beyond just the normal browser context,and how we depend on both clients and servers tobehave a certain way, even if that is not clearlyspecified.</p><p>æˆ‘ä¹Ÿå‘ç°å®ƒæœ‰è¶£çš„æ˜¯ç½‘å€å¦‚ä½•è¶…è¶Šæ­£å¸¸æµè§ˆå™¨ä¸Šä¸‹æ–‡ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•ä¾èµ–äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œå³ä½¿è¿™ä¸æ¸…æ¥šã€‚ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.netmeister.org/blog/urls.html">https://www.netmeister.org/blog/urls.html</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/url/">#url</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/urls/">#urls</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/æœåŠ¡å™¨/">#æœåŠ¡å™¨</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>