<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>æ„å»ºä¸°å¯Œçš„ç»ˆç«¯ä»ªè¡¨æ¿ Building Rich Terminal Dashboards</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Building Rich Terminal Dashboards<br/>æ„å»ºä¸°å¯Œçš„ç»ˆç«¯ä»ªè¡¨æ¿ </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-02-17 18:18:56</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/2/86c48af973eeb1705b91f3a152880c09.jpeg"><img src="http://img2.diglog.com/img/2021/2/86c48af973eeb1705b91f3a152880c09.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Rich has become a popular (20K stars on GH) way of beautifying CLIs, and I&#39;m pleased to see a number of projects using it.</p><p>Richå·²æˆä¸ºç¾åŒ–CLIçš„æµè¡Œæ–¹å¼ï¼ˆåœ¨GHä¸Šä¸º2ä¸‡é¢—æ˜Ÿï¼‰ï¼Œæˆ‘å¾ˆé«˜å…´çœ‹åˆ°è®¸å¤šé¡¹ç›®æ­£åœ¨ä½¿ç”¨å®ƒã€‚</p><p> Since Rich is mature and battle-tested now, I had considered winding-down development. Until, I saw this tweet:</p><p> ç”±äºRichç°åœ¨å·²ç»æˆç†Ÿå¹¶ç»è¿‡äº†è€ƒéªŒï¼Œå› æ­¤æˆ‘è€ƒè™‘äº†é€æ­¥å‘å±•ã€‚ç›´åˆ°æˆ‘çœ‹åˆ°æ­¤æ¨æ–‡ï¼š</p><p>  Do you want to see something really cool you can do with  @willmcgugan &#39;s rich library?   Checkout ghtop  https://t.co/mn7oLbpw8e. It&#39;s a really fun CLI tool that demonstrates the power of rich (and other things).  Examples below ğŸ§µğŸ‘‡ (1/8)</p><p>  æ‚¨æ˜¯å¦æƒ³ä½¿ç”¨@willmcgugançš„ä¸°å¯Œåº“æ¥åšä¸€äº›éå¸¸é…·çš„äº‹æƒ…ï¼Ÿæ£€å‡ºghtop https://t.co/mn7oLbpw8eã€‚å®ƒæ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£çš„CLIå·¥å…·ï¼Œå¯æ¼”ç¤ºä¸°å¯ŒåŠŸèƒ½ï¼ˆåŠå…¶ä»–åŠŸèƒ½ï¼‰çš„å¼ºå¤§åŠŸèƒ½ã€‚ ğŸ§µğŸ‘‡ï¼ˆ1/8ï¼‰ä»¥ä¸‹çš„ä¾‹å­</p><p>â€” Hamel Husain (@HamelHusain)  February 5, 2021</p><p>-å“ˆæ¢…å°”Â·ä¾¯èµ›å› ï¼ˆ@HamelHusainï¼‰2021å¹´2æœˆ5æ—¥</p><p>  @HamelHusain and  @jeremyphoward used Rich to enhance  ghtop (a repo owned by the CEO of Github, no less). Ghtop shows a realtime a stream of events from the Github platform. And it looks good! So good that I realised how much potential Rich has for these type of htop-like applications.</p><p>  @HamelHusainå’Œ@jeremyphowardä½¿ç”¨Richæ¥å¢å¼ºghtopï¼ˆGithubé¦–å¸­æ‰§è¡Œå®˜æ‹¥æœ‰çš„ä¸€ä¸ªä»“åº“ï¼‰ã€‚ Ghtopå®æ—¶æ˜¾ç¤ºæ¥è‡ªGithubå¹³å°çš„äº‹ä»¶æµã€‚è€Œä¸”çœ‹èµ·æ¥ä¸é”™ï¼å¤ªå¥½äº†ï¼Œä»¥è‡³äºæˆ‘æ„è¯†åˆ°Richå¯¹äºæ­¤ç±»ç±»ä¼¼htopçš„åº”ç”¨ç¨‹åºæœ‰å¤šå°‘æ½œåŠ›ã€‚</p><p> Hamel and Jeremy had to overcome a few technical hurdles to make that work. Fortunately this will no longer be required as the latest version of Rich has first-class support for full-screen interfaces via a new Layout system.</p><p> å“ˆé»˜å°”ï¼ˆHamelï¼‰å’Œæ°é‡Œç±³ï¼ˆJeremyï¼‰å¿…é¡»å…‹æœä¸€äº›æŠ€æœ¯éšœç¢æ‰èƒ½å®Œæˆè¿™é¡¹å·¥ä½œã€‚å¹¸è¿çš„æ˜¯ï¼Œç”±äºæœ€æ–°ç‰ˆæœ¬çš„Riché€šè¿‡æ–°çš„Layoutç³»ç»Ÿå¯¹å…¨å±ç•Œé¢æä¾›äº†ä¸€æµçš„æ”¯æŒï¼Œå› æ­¤ä¸å†éœ€è¦æ­¤åŠŸèƒ½ã€‚</p><p>     The API to create a flexible layout is surprisingly simple. You construct a  Layout() object, then call  split() to create sub-layouts. These sub-layouts may then be further divided. Layouts have a small number of settings which define their size relative to the terminal window. It&#39;s a simple system that can create terminal interfaces that almost resemble modern web apps.</p><p>     åˆ›å»ºçµæ´»å¸ƒå±€çš„APIéå¸¸ç®€å•ã€‚æ‚¨æ„é€ ä¸€ä¸ªLayoutï¼ˆï¼‰å¯¹è±¡ï¼Œç„¶åè°ƒç”¨splitï¼ˆï¼‰åˆ›å»ºå­å¸ƒå±€ã€‚ç„¶åå¯ä»¥è¿›ä¸€æ­¥åˆ’åˆ†è¿™äº›å­å¸ƒå±€ã€‚å¸ƒå±€å…·æœ‰å°‘é‡è®¾ç½®ï¼Œè¿™äº›è®¾ç½®å®šä¹‰äº†ç›¸å¯¹äºç»ˆç«¯çª—å£çš„å¤§å°ã€‚å®ƒæ˜¯ä¸€ä¸ªç®€å•çš„ç³»ç»Ÿï¼Œå¯ä»¥åˆ›å»ºå‡ ä¹ç±»ä¼¼äºç°ä»£Webåº”ç”¨ç¨‹åºçš„ç»ˆç«¯ç•Œé¢ã€‚ </p><p>   Here&#39;s how you would create a basic layout with a header, a footer, and two side-panels.</p><p>è¿™æ˜¯åˆ›å»ºå¸¦æœ‰é¡µçœ‰ï¼Œé¡µè„šå’Œä¸¤ä¸ªä¾§é¢æ¿çš„åŸºæœ¬å¸ƒå±€çš„æ–¹æ³•ã€‚</p><p> from rich.console import Consolefrom rich.layout import Layoutconsole = Console()layout = Layout()# Divide the &#34;screen&#34; in to three partslayout.split( Layout(name=&#34;header&#34;, size=3), Layout(ratio=1, name=&#34;main&#34;), Layout(size=10, name=&#34;footer&#34;),)# Divide the &#34;main&#34; layout in to &#34;side&#34; and &#34;body&#34;layout[&#34;main&#34;].split( Layout(name=&#34;side&#34;), Layout(name=&#34;body&#34;, ratio=2), direction=&#34;horizontal&#34;)# Divide the &#34;side&#34; layout in to twolayout[&#34;side&#34;].split(Layout(), Layout())console.print(layout)</p><p> ä»rich.consoleå¯¼å…¥æ§åˆ¶å°ä»rich.layoutå¯¼å…¥Layoutconsole = Consoleï¼ˆï¼‰layout = Layoutï¼ˆï¼‰ï¼ƒåˆ’åˆ†ï¼†ï¼ƒ34;å±å¹•ï¼†ï¼ƒ34;åˆ†ä¸ºä¸‰éƒ¨åˆ†layout.splitï¼ˆLayoutï¼ˆname =ï¼†ï¼ƒ34; headerï¼†ï¼ƒ34 ;, size = 3ï¼‰ï¼ŒLayoutï¼ˆratio = 1ï¼Œname =ï¼†ï¼ƒ34; mainï¼†ï¼ƒ34;ï¼‰ï¼ŒLayoutï¼ˆsize = 10ï¼Œname =ï¼†ï¼ƒ34; footerï¼†ï¼ƒ34;ï¼‰ï¼Œï¼‰ï¼ƒåˆ’åˆ†ï¼†ï¼ƒ34; mainï¼†ï¼ƒ34;å¸ƒå±€åˆ°ï¼†ï¼ƒ34; sideï¼†ï¼ƒ34;å’Œï¼†ï¼ƒ34; bodyï¼†ï¼ƒ34; layout [ï¼†ï¼ƒ34; mainï¼†ï¼ƒ34;]ã€‚splitï¼ˆLayoutï¼ˆname =ï¼†ï¼ƒ34; sideï¼†ï¼ƒ34;ï¼‰ï¼ŒLayoutï¼ˆname =ï¼†ï¼ƒ34; bodyï¼†ï¼ƒ34 ;,æ¯”= 2ï¼‰ï¼Œæ–¹å‘=ï¼†ï¼ƒ34;æ°´å¹³ï¼ƒï¼‰å°†ï¼†ï¼ƒ34;è¾¹ï¼†ï¼ƒ34;å¸ƒå±€åˆ°twolayout [ï¼†side]ï¼ƒ34.splitï¼ˆLayoutï¼ˆï¼‰ï¼ŒLayoutï¼ˆï¼‰ï¼‰console.printï¼ˆlayoutï¼‰</p><p>    We can now use the  Live class to create an application that adapts itself to the terminal window:</p><p>    ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Liveç±»æ¥åˆ›å»ºä¸€ä¸ªé€‚åˆç»ˆç«¯çª—å£çš„åº”ç”¨ç¨‹åºï¼š</p><p>  In a real app, that do-nothing loop will be doing something useful like pulling data from the network to update contents.</p><p>  åœ¨çœŸå®çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä»€ä¹ˆéƒ½ä¸åšçš„å¾ªç¯å°†åšä¸€äº›æœ‰ç”¨çš„äº‹æƒ…ï¼Œä¾‹å¦‚ä»ç½‘ç»œä¸­æå–æ•°æ®ä»¥æ›´æ–°å†…å®¹ã€‚</p><p>   I think it&#39;s clear that Rich is acquiring more TUI (text user interface) features, and I&#39;ve decided not to fight it. Rich&#39;s core purpose is still to beautify CLI output, but I think there is an opportunity here for a new way to create terminal apps. Ultimately it will be less like curses and more like HTML in a browser.</p><p>   æˆ‘è®¤ä¸ºå¾ˆæ˜æ˜¾ï¼ŒRichæ­£åœ¨è·å¾—æ›´å¤šçš„TUIï¼ˆæ–‡æœ¬ç”¨æˆ·ç•Œé¢ï¼‰åŠŸèƒ½ï¼Œå› æ­¤æˆ‘å†³å®šä¸ä¸ä¹‹æŠ—äº‰ã€‚ Richçš„æ ¸å¿ƒç›®çš„ä»ç„¶æ˜¯ç¾åŒ–CLIè¾“å‡ºï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºè¿™é‡Œæä¾›äº†ä¸€ç§æ–°çš„æ–¹å¼æ¥åˆ›å»ºç»ˆç«¯åº”ç”¨ç¨‹åºã€‚æœ€ç»ˆï¼Œå®ƒå°†ä¸å†åƒè¯…å’’ï¼Œè€Œæ›´åƒæ˜¯æµè§ˆå™¨ä¸­çš„HTMLã€‚</p><p> There are a number of things to do before Rich could replace a full TUI library (keyboard and mouse input for one) but the potential is there. Stay tuned for progress.</p><p> åœ¨Richå¯ä»¥æ›¿æ¢å®Œæ•´çš„TUIåº“ï¼ˆä¸€ä¸ªé”®ç›˜å’Œé¼ æ ‡è¾“å…¥ï¼‰ä¹‹å‰ï¼Œæœ‰å¾ˆå¤šäº‹æƒ…è¦åšï¼Œä½†æ˜¯æ½œåŠ›ä»ç„¶å­˜åœ¨ã€‚æ•¬è¯·æœŸå¾…è¿›æ­¥ã€‚ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://www.willmcgugan.com/blog/tech/post/building-rich-terminal-dashboards/">https://www.willmcgugan.com/blog/tech/post/building-rich-terminal-dashboards/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ç»ˆç«¯/">#ç»ˆç«¯</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/rich/">#rich</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/layout/">#layout</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>