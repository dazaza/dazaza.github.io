<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ä»Firefox iOSåˆ é™¤cookieåŒæ„è¯·æ±‚Removing cookie consent requests from Firefox iOS</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Removing cookie consent requests from Firefox iOS<br/>ä»Firefox iOSåˆ é™¤cookieåŒæ„è¯·æ±‚</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-19 01:52:16</div><div class="page_narrow text-break page_content"><p>One thing that has been bothering me since forever in mobile web is how much clutter there is, from everything, but specially cookies. In europe, all websites require you to accept cookies, ALL of them, which makes you add an extra click forever, for your whole life. Thatâ€™s too many extra clicks for me!</p><p>åœ¨ç§»åŠ¨ç½‘ç»œä¸­ï¼Œæœ‰ä¸€ä»¶äº‹ä¸€ç›´å›°æ‰°ç€æˆ‘ï¼Œé‚£å°±æ˜¯é™¤äº†cookiesä¹‹å¤–ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æœ‰é‚£ä¹ˆå¤šçš„æ‚ä¹±ã€‚åœ¨æ¬§æ´²ï¼Œæ‰€æœ‰çš„ç½‘ç«™éƒ½è¦æ±‚ä½ æ¥å—cookiesï¼Œæ‰€æœ‰çš„cookieséƒ½ä¼šè®©ä½ åœ¨ä¸€ç”Ÿä¸­å¢åŠ ä¸€æ¬¡é¢å¤–çš„ç‚¹å‡»ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œç‚¹å‡»æ¬¡æ•°å¤ªå¤šäº†ï¼</p><p>  Donâ€™t get me wrong, I admire the spirit of the law, that people should know how they are being tracked, but I donâ€™t know why decades later after this law came into play, nobody at Mozilla or Chrome teams thought of pushing that as a web standard, it just seems so obvious to me: if itâ€™s something every website has to build it over and over again, letâ€™s make it a standard. This way the browser itself could handle it, and so much better, Iâ€™m thinking like how iOS manages what each app can or canâ€™t do, the browser could do the same for the websites, at the very least we could have a standardized pop-up so I wouldnâ€™t need to search a different button each time!</p><p>åˆ«è¯¯ä¼šæˆ‘çš„æ„æ€ï¼Œæˆ‘å¾ˆé’¦ä½©æ³•å¾‹çš„ç²¾ç¥ï¼Œäººä»¬åº”è¯¥çŸ¥é“ä»–ä»¬æ˜¯å¦‚ä½•è¢«è·Ÿè¸ªçš„ï¼Œä½†æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆå‡ åå¹´åï¼Œåœ¨è¿™é¡¹æ³•å¾‹ç”Ÿæ•ˆåï¼ŒMozillaæˆ–Chromeå›¢é˜Ÿæ²¡æœ‰äººæƒ³è¿‡å°†å…¶ä½œä¸ºä¸€ç§ç½‘ç»œæ ‡å‡†ï¼Œè¿™å¯¹æˆ‘æ¥è¯´å¤ªæ˜æ˜¾äº†ï¼šå¦‚æœæ¯ä¸ªç½‘ç«™éƒ½éœ€è¦ä¸€æ¬¡åˆä¸€æ¬¡åœ°æ„å»ºå®ƒï¼Œé‚£å°±è®©å®ƒæˆä¸ºä¸€ä¸ªæ ‡å‡†ã€‚è¿™æ ·æµè§ˆå™¨æœ¬èº«å°±å¯ä»¥å¤„ç†å®ƒï¼Œè€Œä¸”æ›´å¥½ï¼Œæˆ‘åœ¨æƒ³iOSå¦‚ä½•ç®¡ç†æ¯ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥åšä»€ä¹ˆæˆ–ä¸èƒ½åšä»€ä¹ˆï¼Œæµè§ˆå™¨å¯ä»¥å¯¹ç½‘ç«™åšåŒæ ·çš„äº‹æƒ…ï¼Œè‡³å°‘æˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªæ ‡å‡†åŒ–çš„å¼¹å‡ºçª—å£ï¼Œè¿™æ ·æˆ‘å°±ä¸éœ€è¦æ¯æ¬¡æœç´¢ä¸åŒçš„æŒ‰é’®äº†ï¼</p><p> At the computer, this is a solved problem for me, Iâ€™ve installed the extension  i-dont-care-about-cookies.eu, great extension, works wonderfully. But on iOS, I canâ€™t install it, because Apple wanted to control the ecosystem, it kept the browser powerless for a good amount of time, recently it added possibility to install add-ons to Safari, but only in a specific way with apps, and only in Safari because Apple always launch stuff for its own products first to get a head-start, classic Apple.</p><p>åœ¨ç”µè„‘ä¸Šï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªå·²è§£å†³çš„é—®é¢˜ï¼Œæˆ‘å·²ç»å®‰è£…äº†æ‰©å±•åI-Don-care-cookiesã€‚æ¬§ç›Ÿï¼ˆeuï¼‰æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„å»¶ä¼¸ï¼Œå®ƒè¿è¡Œå¾—éå¸¸å¥½ã€‚ä½†åœ¨iOSä¸Šï¼Œæˆ‘æ— æ³•å®‰è£…å®ƒï¼Œå› ä¸ºè‹¹æœæƒ³æ§åˆ¶ç”Ÿæ€ç³»ç»Ÿï¼Œå®ƒè®©æµè§ˆå™¨åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…å¤„äºæ— èƒ½ä¸ºåŠ›çŠ¶æ€ï¼Œæœ€è¿‘å®ƒå¢åŠ äº†åœ¨Safariä¸Šå®‰è£…é™„åŠ ç»„ä»¶çš„å¯èƒ½æ€§ï¼Œä½†åªèƒ½é€šè¿‡åº”ç”¨ç¨‹åºä»¥ç‰¹å®šçš„æ–¹å¼å®‰è£…ï¼Œè€Œä¸”åªæœ‰åœ¨Safariä¸­ï¼Œå› ä¸ºè‹¹æœæ€»æ˜¯å…ˆä¸ºè‡ªå·±çš„äº§å“å‘å¸ƒä¸œè¥¿ï¼Œä»¥è·å¾—é¢†å…ˆï¼Œç»å…¸çš„è‹¹æœã€‚</p><p> Anyway, there is actually a very good open-source add-on for Safari iOS that blocks cookies requests, called  Hush, itâ€™s not as great as i-dont-care-about-cookies but good enough that my annoyance while using mobile web is gone! Unfortunately I cannot use it on Firefox for iOS, but I think I hate cookie requests more than I hate Safari or love Firefox, so very sadly I switched browsers for the time being.</p><p>ä¸ç®¡æ€æ ·ï¼ŒSafari iOSå®é™…ä¸Šæœ‰ä¸€ä¸ªéå¸¸å¥½çš„å¼€æºæ’ä»¶ï¼Œå¯ä»¥é˜»æ­¢cookiesè¯·æ±‚ï¼Œå«åšHushï¼Œå®ƒæ²¡æœ‰æˆ‘ä¸åœ¨ä¹cookiesé‚£ä¹ˆå¥½ï¼Œä½†æ˜¯è¶³å¤Ÿå¥½äº†ï¼Œæˆ‘åœ¨ä½¿ç”¨ç§»åŠ¨ç½‘ç»œæ—¶çš„çƒ¦æ¼æ¶ˆå¤±äº†ï¼ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä¸èƒ½åœ¨Firefox for iOSä¸Šä½¿ç”¨å®ƒï¼Œä½†æˆ‘è§‰å¾—æˆ‘æ›´è®¨åŒcookieè¯·æ±‚ï¼Œè€Œä¸æ˜¯Safariæˆ–Firefoxï¼Œæ‰€ä»¥éå¸¸é—æ†¾ï¼Œæˆ‘æš‚æ—¶åˆ‡æ¢äº†æµè§ˆå™¨ã€‚</p><p> But I have a plan, which Iâ€™m going to put in practice today: I will clone Firefox iOS from GitHub, patch i-dont-care-about-cookies together with it and build to my iPhone, so I can happily go back to my favorite browser. Letâ€™s do it!</p><p>ä½†æˆ‘æœ‰ä¸€ä¸ªè®¡åˆ’ï¼Œæˆ‘ä»Šå¤©è¦ä»˜è¯¸å®è·µï¼šæˆ‘å°†ä»GitHubå…‹éš†Firefox iOSï¼Œå¹¶å°†å…¶ä¸I-dont-care-about-cookiesä¸€èµ·ä¿®è¡¥ï¼Œç„¶åæ„å»ºåˆ°æˆ‘çš„iPhoneä¸Šï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥æ„‰å¿«åœ°å›åˆ°æˆ‘æœ€å–œæ¬¢çš„æµè§ˆå™¨ã€‚æ¥å§ï¼</p><p> To my surprise, instructions on firefox-ios GitHub page are super straight-forward, you only need python, nodejs and Xcode (of course) but thatâ€™s it! I really like how they kept such a huge project as this with such small dependency requirements, while much smaller projects require you to spend a whole afternoon installing stuff to make it work. Kudos to the firefox team!</p><p>è®©æˆ‘æƒŠè®¶çš„æ˜¯ï¼Œfirefox ios GitHubé¡µé¢ä¸Šçš„è¯´æ˜éå¸¸ç®€å•ï¼Œä½ åªéœ€è¦pythonã€nodejså’ŒXcodeï¼ˆå½“ç„¶ï¼‰å°±å¯ä»¥äº†ï¼æˆ‘çœŸçš„å¾ˆå–œæ¬¢ä»–ä»¬ç”¨å¦‚æ­¤å°çš„ä¾èµ–æ€§éœ€æ±‚æ¥ç»´æŒå¦‚æ­¤åºå¤§çš„é¡¹ç›®ï¼Œè€Œå°å¾—å¤šçš„é¡¹ç›®éœ€è¦ä½ èŠ±ä¸€æ•´ä¸ªä¸‹åˆçš„æ—¶é—´æ¥å®‰è£…ä¸œè¥¿æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚æ„Ÿè°¢firefoxå›¢é˜Ÿï¼</p><p> Also, to my second surprise, the very next section after installation on the README is â€œBuilding User Scriptsâ€, and where to put them, exactly what I need, they just made my life so easy!</p><p>å¦å¤–ï¼Œè®©æˆ‘ç¬¬äºŒä¸ªæƒŠè®¶çš„æ˜¯ï¼Œåœ¨è‡ªè¿°æ–‡ä»¶ä¸Šå®‰è£…ä¹‹åçš„ä¸‹ä¸€ä¸ªéƒ¨åˆ†æ˜¯â€œæ„å»ºç”¨æˆ·è„šæœ¬â€ï¼Œä»¥åŠå°†å®ƒä»¬æ”¾åœ¨å“ªé‡Œï¼Œè¿™æ­£æ˜¯æˆ‘æ‰€éœ€è¦çš„ï¼Œå®ƒä»¬è®©æˆ‘çš„ç”Ÿæ´»å˜å¾—å¦‚æ­¤è½»æ¾ï¼</p><p>   Classic! What better way to test something is working than our good old friendly alert amirite</p><p>ç»å…¸è¿˜æœ‰ä»€ä¹ˆæ¯”æˆ‘ä»¬çš„å‹å¥½è­¦æŠ¥é˜¿ç±³ä¸½ç‰¹æ›´æœ‰æ•ˆçš„æµ‹è¯•æ–¹æ³•å‘¢</p><p> So I kept following the installing instructions, opened it on Xcode, found somewhere where I can change to the â€œFennec schemeâ€ under the Product menu, and tried to build it, this got me some certificate errors which I were expecting already. Fortunately I already have a team and certificate set up for my other side project apps, so I can just use mine right?</p><p>æ‰€ä»¥æˆ‘ä¸€ç›´éµå¾ªå®‰è£…è¯´æ˜ï¼Œåœ¨Xcodeä¸Šæ‰“å¼€å®ƒï¼Œåœ¨äº§å“èœå•ä¸‹æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥åˆ‡æ¢åˆ°â€œFennecæ–¹æ¡ˆâ€çš„åœ°æ–¹ï¼Œå¹¶å°è¯•æ„å»ºå®ƒï¼Œè¿™è®©æˆ‘å‘ç°äº†ä¸€äº›æˆ‘å·²ç»é¢„æ–™åˆ°çš„è¯ä¹¦é”™è¯¯ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘å·²ç»ä¸ºæˆ‘çš„å…¶ä»–é¡¹ç›®åº”ç”¨ç¨‹åºå»ºç«‹äº†ä¸€ä¸ªå›¢é˜Ÿå’Œè¯ä¹¦ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘çš„ï¼Œå¯¹å—ï¼Ÿ</p><p>  Okay, I spent more time trying to fix certificates issues than I thought, fortunately at the end I found an easy solution: instead of trying to fix them manually, I opened the project on SublimeText (faster to open than VSCode) and did a search and replace all over for 43AQ936H96 (their team code) to my own team code, also I replaced all â€œorg.mozilla.iosâ€ with â€œapp.rchaves.iosâ€, this finally allowed the app to compile!</p><p>å¥½å§ï¼Œæˆ‘èŠ±äº†æ¯”æˆ‘æƒ³è±¡çš„æ›´å¤šçš„æ—¶é—´è¯•å›¾ä¿®å¤è¯ä¹¦é—®é¢˜ï¼Œå¹¸è¿çš„æ˜¯ï¼Œæœ€åæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆï¼šæˆ‘æ²¡æœ‰å°è¯•æ‰‹åŠ¨ä¿®å¤å®ƒä»¬ï¼Œè€Œæ˜¯åœ¨SublimiteTextï¼ˆæ¯”VSCodeæ‰“å¼€æ›´å¿«ï¼‰ä¸Šæ‰“å¼€äº†é¡¹ç›®ï¼Œæœç´¢å¹¶å°†43AQ936H96ï¼ˆä»–ä»¬çš„å›¢é˜Ÿä»£ç ï¼‰æ›¿æ¢ä¸ºæˆ‘è‡ªå·±çš„å›¢é˜Ÿä»£ç ï¼Œæˆ‘è¿˜ç”¨â€œapp.rchaves.iosâ€æ›¿æ¢äº†æ‰€æœ‰çš„â€œorg.mozilla.iosâ€ï¼Œè¿™æœ€ç»ˆå…è®¸åº”ç”¨ç¨‹åºç¼–è¯‘ï¼</p><p>   Woow was it really that easy? Certificates thingie but thatâ€™s it? Cool!! It seems like I can ğŸ¥ğŸ¥ğŸ¥ iterate!</p><p>å“‡ï¼ŒçœŸçš„é‚£ä¹ˆå®¹æ˜“å—ï¼Ÿè¯ä¹¦ä¹‹ç±»çš„ä½†å°±è¿™æ ·ï¼Ÿå‡‰çš„çœ‹æ¥æˆ‘èƒ½ğŸ¥ğŸ¥ğŸ¥ è¿­ä»£</p><p> If I just update the javascript to â€œhello world 2â€ and run the app again, does it work?</p><p>å¦‚æœæˆ‘åªæ˜¯å°†javascriptæ›´æ–°ä¸ºâ€œhello world 2â€ï¼Œç„¶åå†æ¬¡è¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œå®ƒèƒ½å·¥ä½œå—ï¼Ÿ</p><p> â€¦ iteration is slow, building and installing the app again takes time, even though I just changed one tiny javascript, I guess you canâ€™t escape that with mobile apps. But the answer is no, it does not work, I need to run webpack by hand. Okay, no problem, letâ€™s try again, build webpack aaaand, interesting! On the third time it didnâ€™t recompile anything and installation was much faster! Cool, now it works:</p><p>â€¦è¿­ä»£é€Ÿåº¦å¾ˆæ…¢ï¼Œé‡æ–°æ„å»ºå’Œå®‰è£…åº”ç”¨ç¨‹åºéœ€è¦æ—¶é—´ï¼Œå°½ç®¡æˆ‘åˆšåˆšæ›´æ”¹äº†ä¸€ä¸ªå°å°çš„javascriptï¼Œä½†æˆ‘æƒ³ä½ æ— æ³•ç”¨ç§»åŠ¨åº”ç”¨ç¨‹åºæ‘†è„±è¿™ä¸€ç‚¹ã€‚ä½†ç­”æ¡ˆæ˜¯ä¸ï¼Œå®ƒä¸å·¥ä½œï¼Œæˆ‘éœ€è¦æ‰‹åŠ¨è¿è¡Œwebpackã€‚å¥½çš„ï¼Œæ²¡é—®é¢˜ï¼Œè®©æˆ‘ä»¬å†è¯•ä¸€æ¬¡ï¼Œåˆ›å»ºç½‘é¡µåŒ…aaaï¼Œå¾ˆæœ‰è¶£ï¼ç¬¬ä¸‰æ¬¡ï¼Œå®ƒæ²¡æœ‰é‡æ–°ç¼–è¯‘ä»»ä½•ä¸œè¥¿ï¼Œå®‰è£…é€Ÿåº¦æ›´å¿«ï¼é…·ï¼Œç°åœ¨å®ƒå¯ä»¥å·¥ä½œäº†ï¼š</p><p>  Okay, so next step is to inject the javascript from i-dont-care-about-cookies here on the same place where I have my hello world. To do that I downloaded the extension .xpi package, unziped it, and I plan to copy those javascripts inside, mostly as is.</p><p>å¥½çš„ï¼Œä¸‹ä¸€æ­¥æ˜¯å°†i-dont-care-about-cookiesä¸­çš„javascriptæ³¨å…¥åˆ°æˆ‘çš„hello worldæ‰€åœ¨çš„åŒä¸€ä¸ªåœ°æ–¹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä¸‹è½½äº†æ‰©å±•åã€‚xpiåŒ…ï¼Œè§£å‹äº†å®ƒï¼Œæˆ‘è®¡åˆ’åœ¨é‡Œé¢å¤åˆ¶è¿™äº›Javaè„šæœ¬ï¼ŒåŸºæœ¬ä¸Šæ˜¯åŸæ ·çš„ã€‚</p><p> â€¦not as easy as I thought, i-dont-care-about-cookies code actually relies a lot on chrome.tabs and other APIs only available to extensions, those donâ€™t work inside UserScripts, so I will have to remove all this and extract just the core of it, which hides the cookies boxes.</p><p>â€¦ä¸åƒæˆ‘æƒ³çš„é‚£ä¹ˆç®€å•ï¼Œæˆ‘ä¸åœ¨ä¹cookiesä»£ç å®é™…ä¸Šéå¸¸ä¾èµ–chromeã€‚é€‰é¡¹å¡å’Œå…¶ä»–APIåªå¯¹æ‰©å±•å¯ç”¨ï¼Œå®ƒä»¬åœ¨ç”¨æˆ·è„šæœ¬ä¸­ä¸èµ·ä½œç”¨ï¼Œæ‰€ä»¥æˆ‘å¿…é¡»åˆ é™¤æ‰€æœ‰è¿™äº›å†…å®¹ï¼Œåªæå–å…¶æ ¸å¿ƒï¼Œè¿™ä¼šéšè—cookiesæ¡†ã€‚</p><p> So here is what I understand to be the main trigger of the original code:</p><p>ä»¥ä¸‹æ˜¯æˆ‘ç†è§£ä¸ºåŸå§‹ä»£ç çš„ä¸»è¦è§¦å‘å› ç´ ï¼š</p><p> function  ( tabId, frameId, anotherTry)   {  	 if (!tab_list[tabId] || tab_list[tabId].url.indexOf( &#39;http&#39;) !=  0)  		 return;    	 if (tab_list[tabId].whitelisted)  		 return;    	 // Common CSS rules  	chrome.tabs.insertCSS(tabId, { :  &#34;data/css/common.css&#34;,  : frameId ||  0,  : xml_tabs[tabId] ?  &#39;document_idle&#39; :  &#39;document_start&#39;},   function( ) {    		 // A failure? Retry.    		 if (chrome.runtime.lastError) {  			 let currentTry = (anotherTry ||  1);    			 if (currentTry ==  5)  				 return;    			 setTimeout(  function( ) {  				doTheMagic(tabId, frameId ||  0, currentTry +  1)  			},  300);    			 return;  		}      		 // Common social embeds  		chrome.tabs.executeScript(tabId, { : &#39;data/js/embeds.js&#39;,  : frameId ||  0,  : xml_tabs[tabId] ?  &#39;document_idle&#39; :  &#39;document_end&#39;},   function( ) {});    		 if (activateDomain(tab_list[tabId].hostname, tabId, frameId ||  0))  			 return;    		 for ( var level  in tab_list[tabId].host_levels)  			 if (activateDomain(tab_list[tabId].host_levels[level], tabId, frameId ||  0))  				 return  true;    		 // Common JS rules when custom rules don&#39;t exist  		chrome.tabs.executeScript(tabId, { : &#39;data/js/common.js&#39;,  : frameId ||  0,  : xml_tabs[tabId] ?  &#39;document_idle&#39; :  &#39;document_end&#39;},   function( ) {});  	});  }</p><p>å‡½æ•°ï¼ˆtabIdï¼ŒframeIdï¼Œå¦ä¸€ä¸ªï¼‰{ifï¼ˆï¼tab#list[tabId]| tab#list[tabId].url.indexOfï¼ˆ&#39ï¼›http&#39ï¼›ï¼‰ï¼=0ï¼‰è¿”å›ï¼›å¦‚æœï¼ˆtab_list[tabId].whitelistedï¼‰è¿”å›ï¼›//å¸¸è§çš„CSSè§„åˆ™ã€‚æ ‡ç­¾ã€‚insertCSSï¼ˆtabIdï¼Œ{ï¼š&#34ï¼›data/css/common.css&#34ï¼›ï¼Œï¼šframeId | 0ï¼Œï¼šxml_tabs[tabId]ï¼Ÿ&#39ï¼›document_idle&#39ï¼›ï¼š&#39ï¼›document_start&#39ï¼›ï¼‰ï¼Œå‡½æ•°ï¼ˆï¼‰{//A failureï¼ŸRetry.ifï¼ˆchrome.runtime.lastErrorï¼‰{let currentTry=ï¼ˆå¦ä¸€ä¸ªtry | | 1ï¼‰ï¼›ifï¼ˆcurrentTry==5ï¼‰è¿”å›ï¼›setTimeoutï¼ˆå‡½æ•°ï¼ˆï¼‰{doTheMagicï¼ˆtabIdï¼ŒframeId | | 0ï¼ŒcurrentTry+1ï¼‰}ï¼Œ300ï¼‰ï¼›å›æ¥}//Common socialåµŒå…¥äº†chromeã€‚æ ‡ç­¾ã€‚executeScriptï¼ˆtabIdï¼Œ{ï¼š&#39ï¼›data/js/embeds.js&#39ï¼›ï¼Œï¼šframeId | 0ï¼Œï¼šxml_tabs[tabId]ï¼Ÿ&#39ï¼›document_idle&#39ï¼›ï¼š&#39ï¼›document_end&#39ï¼›}ï¼Œå‡½æ•°ï¼ˆï¼‰{}ï¼‰ï¼›ifï¼ˆactivateDomainï¼ˆtab_list[tabId].hostnameï¼ŒtabIdï¼ŒframeId | | 0ï¼‰ï¼‰è¿”å›ï¼›forï¼ˆtab_list[tabId]ä¸­çš„var level.ä¸»æœºçº§åˆ«ï¼‰ifï¼ˆactivateDomainï¼ˆtab_list[tabId].ä¸»æœºçº§åˆ«[level]ï¼ŒtabIdï¼ŒframeId | | 0ï¼‰ï¼‰è¿”å›trueï¼›//å½“è‡ªå®šä¹‰è§„åˆ™ä¸&#39æ—¶çš„é€šç”¨JSè§„åˆ™ï¼›ä¸å­˜åœ¨é“¬ã€‚æ ‡ç­¾ã€‚executeScriptï¼ˆtabIdï¼Œ{ï¼š&#39ï¼›data/js/common.js&#39ï¼›ï¼Œï¼šframeId | 0ï¼Œï¼šxml_tabs[tabId]ï¼Ÿ&#39ï¼›document_idle&#39ï¼›ï¼š&#39ï¼›document_end&#39ï¼›}ï¼Œå‡½æ•°ï¼ˆï¼‰{}ï¼‰ï¼›	});  }</p><p>   After some fiddling around, some alerts here and there, Iâ€™ve got it successfully working! For example, here is Reuters website on regular firefox</p><p>ç»è¿‡ä¸€äº›æ‘†å¼„ï¼Œä¸€äº›è­¦æŠ¥åœ¨è¿™é‡Œå’Œé‚£é‡Œï¼Œæˆ‘å·²ç»æˆåŠŸåœ°å·¥ä½œäº†ï¼ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯è·¯é€ç¤¾åœ¨å¸¸è§„firefoxä¸Šçš„ç½‘ç«™</p><p>       Iâ€™ve now been playing for a while with this firefox, and it seems to work perfectly, a full-fledged firefox! The only thing that is not working is allowing to set it as my default browser, duckduckgoing more for it, it seems that I need to beg for Apple to allow me to do that ğŸ™„. So I sent them an email, letâ€™s see what they reply, meanwhile, I think I can already enjoy my firefox without cookies ğŸ¤—</p><p>æˆ‘å·²ç»ç”¨è¿™ä¸ªç«ç‹ç©äº†ä¸€æ®µæ—¶é—´äº†ï¼Œå®ƒä¼¼ä¹å·¥ä½œå¾—å¾ˆå¥½ï¼Œä¸€ä¸ªæˆç†Ÿçš„ç«ç‹ï¼å”¯ä¸€ä¸èµ·ä½œç”¨çš„æ˜¯å…è®¸å°†å…¶è®¾ç½®ä¸ºæˆ‘çš„é»˜è®¤æµè§ˆå™¨ï¼Œä½†æˆ‘è¦åšçš„æ›´å¤šï¼Œä¼¼ä¹æˆ‘éœ€è¦è¯·æ±‚è‹¹æœå…è®¸æˆ‘è¿™ä¹ˆåšğŸ™„. æ‰€ä»¥æˆ‘ç»™ä»–ä»¬å‘äº†ä¸€å°ç”µå­é‚®ä»¶ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä»–ä»¬å›å¤äº†ä»€ä¹ˆï¼ŒåŒæ—¶ï¼Œæˆ‘æƒ³æˆ‘å·²ç»å¯ä»¥äº«å—æˆ‘çš„firefoxè€Œä¸éœ€è¦cookiesäº†ğŸ¤—</p><p> Iâ€™ve made a fork from firefox-ios and pushed the code, if you have Xcode, go get it and build your own copy ğŸ˜ƒ</p><p>æˆ‘å·²ç»ç”¨firefox iosåˆ¶ä½œäº†ä¸€ä¸ªforkï¼Œå¹¶æ¨é€äº†ä»£ç ï¼Œå¦‚æœä½ æœ‰Xcodeï¼Œå°±å»è·å–å®ƒï¼Œå¹¶æ„å»ºä½ è‡ªå·±çš„å‰¯æœ¬ğŸ˜ƒ</p><p>  ps.: Iâ€™ve contacted Daniel, the creator of i-dont-care-about-cookies, and he didnâ€™t mind that I published this firefox-ios embeded version with his extension, just asked me to keep it up to date ğŸ˜Š</p><p>æ³¨ï¼šæˆ‘å·²ç»è”ç³»äº†I-Don-care-about-cookiesçš„åˆ›å»ºè€…ä¸¹å°¼å°”ï¼Œä»–ä¸ä»‹æ„æˆ‘å‘å¸ƒè¿™ä¸ªfirefox iosåµŒå…¥ç‰ˆæœ¬åŠå…¶æ‰©å±•ï¼Œåªæ˜¯è¦æ±‚æˆ‘ä¿æŒæœ€æ–°ğŸ˜Š</p><p>  If youâ€™d like to add a comment, please  send a merge request adding your comment here, copying this block as an example</p><p>å¦‚æœä½ æƒ³æ·»åŠ è¯„è®ºï¼Œè¯·å‘é€ä¸€ä¸ªåˆå¹¶è¯·æ±‚ï¼Œåœ¨æ­¤å¤„æ·»åŠ ä½ çš„è¯„è®ºï¼Œå¤åˆ¶æ­¤å—ä½œä¸ºç¤ºä¾‹</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ios/">#ios</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/cookie/">#cookie</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/å®‰è£…/">#å®‰è£…</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>