<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>å°æ—å¯ºä¸¸æ¯”è¾ƒæ—¥æœŸå’Œæ—¶é—´The Kobayashi Maru of comparing dates with times</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">The Kobayashi Maru of comparing dates with times<br/>å°æ—å¯ºä¸¸æ¯”è¾ƒæ—¥æœŸå’Œæ—¶é—´</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2022-02-15 00:51:13</div><div class="page_narrow text-break page_content"><p>We just had a lengthy, one hour discussion with  @leoeuclids and  @uibreakfast in the  @userlist Slack about comparing dates with timesâ€¦ ğŸ™ˆ  Does anyone have opinions on this? ğŸ¤ª  pic.twitter.com/G0muPbOhS9</p><p>æˆ‘ä»¬åˆšåˆšåœ¨@userlist Slackä¸­ä¸@leoeuclidså’Œ@UIBreakenå°±æ¯”è¾ƒæ—¥æœŸå’Œæ—¶é—´è¿›è¡Œäº†ä¸€ä¸ªé•¿æ—¶é—´çš„ä¸€å°æ—¶è®¨è®ºâ€¦ğŸ™ˆ  æœ‰äººå¯¹æ­¤æœ‰æ„è§å—ï¼ŸğŸ¤ª  ç…§ç‰‡ã€‚å•å•¾com/G0muPbOhS9</p><p>â€” Benedikt Deicke (@benediktdeicke)  February 11, 2022</p><p>-Benedikt Deickeï¼ˆ@benediktdeickeï¼‰2022å¹´2æœˆ11æ—¥</p><p>   At a minimum, one hundred replies in a Slack thread is the going rate for asking a question about an edge case about times and dates in programming. Just for future reference.</p><p>åœ¨ä¸€ä¸ªæ¾å¼›çº¿ç¨‹ä¸­ï¼Œè‡³å°‘æœ‰100ä¸ªå›å¤æ˜¯è¯¢é—®å…³äºç¼–ç¨‹ä¸­æ—¶é—´å’Œæ—¥æœŸçš„è¾¹ç¼˜æ¡ˆä¾‹çš„ç°è¡Œé€Ÿç‡ã€‚ä»…ä¾›å°†æ¥å‚è€ƒã€‚</p><p> Since Twitter embedding crops things a bit aggressively, hereâ€™s the image in the tweet directly:</p><p>ç”±äºTwitterçš„åµŒå…¥æœ‰ç‚¹å’„å’„é€¼äººï¼Œä¸‹é¢æ˜¯æ¨æ–‡ä¸­çš„å›¾ç‰‡ï¼š</p><p>  Immediately, the tweet replies were chaos. The answers included â€œYes/Yes/Noâ€, â€œNo/No/Noâ€ (which was my initial response, but Iâ€™ve also chaotically changed my mind since then), â€œNo/No/Yesâ€, â€œDates are the worstâ€, and â€œHave you tried using ğŸº? Maybe lots and lots of ğŸ» and then maybe just like pretending this never happened?â€</p><p>æ¨ç‰¹ä¸Šçš„å›å¤ç«‹åˆ»å˜å¾—æ··ä¹±ã€‚ç­”æ¡ˆåŒ…æ‹¬â€œæ˜¯/æ˜¯/å¦â€ã€â€œå¦/å¦â€ï¼ˆè¿™æ˜¯æˆ‘æœ€åˆçš„å›ç­”ï¼Œä½†ä»é‚£æ—¶èµ·æˆ‘ä¹Ÿæ··ä¹±åœ°æ”¹å˜äº†ä¸»æ„ï¼‰ã€â€œå¦/å¦/æ˜¯â€ã€â€œæ—¥æœŸæœ€ç³Ÿç³•â€å’Œâ€œä½ è¯•è¿‡ä½¿ç”¨ğŸº? ä¹Ÿè®¸å¾ˆå¤šå¾ˆå¤šğŸ» ç„¶åå°±å¥½åƒå‡è£…æ²¡å‘ç”Ÿè¿‡ä¸€æ ·ï¼Ÿ"</p><p> As someone who wrote  entirely too much about dates and times and edge cases, I found this discussion to be an exciting, total waste of time, and I really couldnâ€™t wait to dig into it some more.</p><p>ä½œä¸ºä¸€ä¸ªå†™äº†å¤ªå¤šå…³äºæ—¥æœŸã€æ—¶é—´å’Œè¾¹ç¼˜æ¡ˆä¾‹çš„äººï¼Œæˆ‘å‘ç°è¿™æ¬¡è®¨è®ºä»¤äººå…´å¥‹ï¼Œå®Œå…¨æ˜¯æµªè´¹æ—¶é—´ï¼Œæˆ‘çœŸçš„è¿«ä¸åŠå¾…åœ°æƒ³å†æ·±å…¥æ¢è®¨ä¸€ä¸‹ã€‚</p><p>  If you find yourself in this position, clearly something has gone wrong. And I say this without judgement, because unless you work in a clean room on a product that has no users and the code is no more than one hour old, youâ€™re going to have issues with inconsistent data, and inconsistent storage of datestamps and timestamps is incredibly common. I ran into a similar problem this  just this week with a multitude of inconsistent datestamps and timestamps I had inherited.</p><p>å¦‚æœä½ å‘ç°è‡ªå·±å¤„äºè¿™ç§çŠ¶æ€ï¼Œå¾ˆæ˜æ˜¾å‡ºäº†é—®é¢˜ã€‚æˆ‘è¿™æ ·è¯´æ˜¯ä¸åŠ è¯„åˆ¤çš„ï¼Œå› ä¸ºé™¤éä½ åœ¨ä¸€ä¸ªæ²¡æœ‰ç”¨æˆ·çš„æ´å‡€å®¤é‡Œå¼€å‘ä¸€ä¸ªäº§å“ï¼Œè€Œä¸”ä»£ç çš„ä½¿ç”¨æ—¶é—´ä¸è¶…è¿‡ä¸€ä¸ªå°æ—¶ï¼Œå¦åˆ™ä½ ä¼šé‡åˆ°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œè€Œä¸”ä¸ä¸€è‡´çš„æ—¥æœŸæˆ³å’Œæ—¶é—´æˆ³å­˜å‚¨æ˜¯éå¸¸å¸¸è§çš„ã€‚å°±åœ¨æœ¬å‘¨ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ï¼Œæˆ‘ç»§æ‰¿äº†å¤§é‡ä¸ä¸€è‡´çš„é‚®æˆ³å’Œæ—¶é—´æˆ³ã€‚</p><p>   These are inputs from the user interface and data from a database. So itâ€™s also very much about what (both technical and non-technical) people expect to happen.</p><p>è¿™äº›æ˜¯æ¥è‡ªç”¨æˆ·ç•Œé¢çš„è¾“å…¥å’Œæ¥è‡ªæ•°æ®åº“çš„æ•°æ®ã€‚å› æ­¤ï¼Œè¿™ä¹Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºäººä»¬æœŸæœ›å‘ç”Ÿä»€ä¹ˆï¼ˆæŠ€æœ¯å’ŒéæŠ€æœ¯ï¼‰ã€‚</p><p>â€” Benedikt Deicke (@benediktdeicke)  February 12, 2022</p><p>-Benedikt Deickeï¼ˆ@benediktdeickeï¼‰2022å¹´2æœˆ12æ—¥</p><p>   Whatâ€™s more, thereâ€™s an additional issue in the original question that was left out, which astute readers of  UTC is Enough for Everyone, Right? might have picked up on already: thereâ€™s no timezone data! Thatâ€™s fairly understandable for the date values, since timezones donâ€™t tend to be needed (which, like most things in this realm, is not always true), but it would be needed for the time values to ensure a valid comparison (conceivably a comparison of  00:00:00 and  12:00:00 on the same â€œdayâ€ could be off by as much as a couple of actual days, depending on the timezone). And, of course, youâ€™d need to store  more than just the offset if you properly wanted to account for historical daylight saving time.</p><p>æ›´é‡è¦çš„æ˜¯ï¼ŒåŸå§‹é—®é¢˜ä¸­è¿˜æœ‰ä¸€ä¸ªè¢«é—æ¼çš„é—®é¢˜ï¼ŒUTCçš„å“ªäº›ç²¾æ˜è¯»è€…å¯¹æ¯ä¸ªäººæ¥è¯´éƒ½è¶³å¤Ÿäº†ï¼Œå¯¹å—ï¼Ÿå¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼šæ²¡æœ‰æ—¶åŒºæ•°æ®ï¼å¯¹äºæ—¥æœŸå€¼æ¥è¯´ï¼Œè¿™æ˜¯å¯ä»¥ç†è§£çš„ï¼Œå› ä¸ºæ—¶åŒºé€šå¸¸æ˜¯ä¸éœ€è¦çš„ï¼ˆè¿™å’Œè¿™ä¸ªé¢†åŸŸçš„å¤§å¤šæ•°äº‹æƒ…ä¸€æ ·ï¼Œå¹¶ä¸æ€»æ˜¯æ­£ç¡®çš„ï¼‰ï¼Œä½†æ˜¯ï¼Œéœ€è¦æ—¶é—´å€¼æ¥ç¡®ä¿æœ‰æ•ˆçš„æ¯”è¾ƒï¼ˆå¯ä»¥æƒ³è±¡ï¼ŒåŒä¸€â€œå¤©â€çš„00:00:00å’Œ12:00:00çš„æ¯”è¾ƒå¯èƒ½ä¼šä¸­æ–­å‡ å¤©ï¼Œå…·ä½“å–å†³äºæ—¶åŒºï¼‰ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æƒ³æ­£ç¡®åœ°è®¡ç®—å†å²å¤ä»¤æ—¶ï¼Œä½ éœ€è¦å­˜å‚¨çš„ä¸ä»…ä»…æ˜¯åç§»é‡ã€‚</p><p>  So this is kind of a no-win solution. I can make a valid argument for pretty much every answer in the tweet replies (especially the one about beer). The reason why itâ€™s particularly frustrating is because we make these snap decisions all the time in our day-to-day lives, and itâ€™s pretty easy. When I tell you to meet me for lunch at noon today, thereâ€™s a highly likely possibility that weâ€™re talking about being in the same place, the same timezone, and the same day as each other, so we donâ€™t have to spend a lot of time thinking about this.</p><p>æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰åŒèµ¢çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘å¯ä»¥ä¸ºæ¨ç‰¹å›å¤ä¸­çš„å‡ ä¹æ¯ä¸€ä¸ªç­”æ¡ˆï¼ˆå°¤å…¶æ˜¯å…³äºå•¤é…’çš„ç­”æ¡ˆï¼‰æä¾›æœ‰æ•ˆçš„è®ºæ®ã€‚ä¹‹æ‰€ä»¥ç‰¹åˆ«ä»¤äººæ²®ä¸§ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­æ€»æ˜¯åšå‡ºè¿™äº›ä»“ä¿ƒçš„å†³å®šï¼Œè€Œä¸”éå¸¸å®¹æ˜“ã€‚å½“æˆ‘å‘Šè¯‰ä½ ä»¬ä»Šå¤©ä¸­åˆå’Œæˆ‘å…±è¿›åˆé¤æ—¶ï¼Œå¾ˆå¯èƒ½æˆ‘ä»¬è°ˆè®ºçš„æ˜¯å½¼æ­¤åœ¨åŒä¸€ä¸ªåœ°æ–¹ã€åŒä¸€æ—¶åŒºã€åŒä¸€å¤©ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¿…èŠ±å¤ªå¤šæ—¶é—´æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚</p><p> The issue is that dates and times are kind of supersets of each other. Which is a bit of a paradox. But letâ€™s look at it further:</p><p>é—®é¢˜æ˜¯æ—¥æœŸå’Œæ—¶é—´æ˜¯å½¼æ­¤çš„è¶…é›†ã€‚è¿™æœ‰ç‚¹è‡ªç›¸çŸ›ç›¾ã€‚ä½†è®©æˆ‘ä»¬è¿›ä¸€æ­¥çœ‹ä¸€ä¸‹ï¼š</p><p> A  Date can be thought of a superset of a  Time, because all hours and minutes and seconds naturally belong to a certain day.</p><p>ä¸€ä¸ªæ—¥æœŸå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ—¶é—´çš„è¶…é›†ï¼Œå› ä¸ºæ‰€æœ‰çš„å°æ—¶ã€åˆ†ã€ç§’è‡ªç„¶éƒ½å±äºæŸä¸€å¤©ã€‚</p><p>  A  Time can be thought of a superset of a  Date, if you consider timespans to be an extention of a particular  Time. Noon to noon spans two separate days. Or, well, just one day, if itâ€™s a 24 hour day instead of calendar day. Even my paradox explanations have paradoxes in them.</p><p>å¦‚æœä½ è®¤ä¸ºæ—¶é—´æ˜¯ä¸€ä¸ªç‰¹å®šæ—¶é—´çš„æ‰©å±•ï¼Œé‚£ä¹ˆæ—¶é—´å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ—¥æœŸçš„è¶…é›†ã€‚ä»æ­£åˆåˆ°æ­£åˆè·¨è¶Šä¸¤ä¸ªä¸åŒçš„æ—¥å­ã€‚æˆ–è€…ï¼Œåªè¦ä¸€å¤©ï¼Œå¦‚æœæ˜¯24å°æ—¶åˆ¶è€Œä¸æ˜¯æ—¥å†æ—¥ã€‚å°±è¿æˆ‘å¯¹æ‚–è®ºçš„è§£é‡Šä¹Ÿæœ‰æ‚–è®ºã€‚</p><p> Both of these are kind of wrong definitions, and also kind of right, which is why you can make these justifications for so many answers here. It really comes down to  what you value.</p><p>è¿™ä¸¤ç§å®šä¹‰éƒ½æ˜¯é”™è¯¯çš„ï¼Œä¹Ÿéƒ½æ˜¯æ­£ç¡®çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¯ä»¥åœ¨è¿™é‡Œä¸ºè¿™ä¹ˆå¤šç­”æ¡ˆè¾©æŠ¤ã€‚è¿™å®é™…ä¸Šå–å†³äºä½ çš„ä»·å€¼ã€‚</p><p>  This is the crux of why I find this stuff so fucking fascinating. We programmers famously tend to view the world in a real binary sense: the code runs or it doesnâ€™t. The tests pass or they donâ€™t. The record is valid or it isnâ€™t. Itâ€™s a very helpful way of looking at the worldâ€¦ until it isnâ€™t. Usually itâ€™s not baked directly into the system, though.</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘è§‰å¾—è¿™äº›ä¸œè¥¿å¦‚æ­¤è¿·äººçš„å…³é”®ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘ä»¬ç¨‹åºå‘˜å€¾å‘äºä»¥çœŸæ­£çš„äºŒå…ƒæ„ä¹‰æ¥çœ‹å¾…ä¸–ç•Œï¼šä»£ç è¿è¡Œæˆ–ä¸è¿è¡Œã€‚æµ‹è¯•é€šè¿‡æˆ–ä¸é€šè¿‡ã€‚è®°å½•æœ‰æ•ˆæˆ–æ— æ•ˆã€‚è¿™æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„çœ‹å¾…ä¸–ç•Œçš„æ–¹å¼â€¦â€¦ç›´åˆ°å®ƒä¸å­˜åœ¨ã€‚ä¸è¿‡ï¼Œé€šå¸¸å®ƒä¸ä¼šç›´æ¥çƒ˜ç„™åˆ°ç³»ç»Ÿä¸­ã€‚</p><p> There are certain examples where inherently correct answers donâ€™t exist. My favorite example of this â€” and yes, I have favorite examples of time issues â€” is recurring events over a location-dependent daylight saving boundary.</p><p>æœ‰äº›ä¾‹å­æ ¹æœ¬ä¸å­˜åœ¨æ­£ç¡®çš„ç­”æ¡ˆã€‚æˆ‘æœ€å–œæ¬¢çš„ä¾‹å­â€”â€”æ˜¯çš„ï¼Œæˆ‘ä¹Ÿæœ€å–œæ¬¢æ—¶é—´é—®é¢˜çš„ä¾‹å­â€”â€”æ˜¯åœ¨ä¾èµ–äºä½ç½®çš„å¤ä»¤æ—¶è¾¹ç•Œä¸Šé‡å¤å‘ç”Ÿçš„äº‹ä»¶ã€‚</p><p> Say you have a weekly 10am Pacific Time recurring calendar event with the rest of your dev team. Like a proper remote-first company, youâ€™re  broadly distributed instead of just having a main team in one city and one rando working â€œremoteâ€. Thatâ€™s great, but it also increases the odds of having one city or region or country having different daylight saving policies than the others (if they even have one at all).</p><p>å‡è®¾æ‚¨ä¸å¼€å‘å›¢é˜Ÿçš„å…¶ä»–æˆå‘˜æ¯å‘¨åœ¨å¤ªå¹³æ´‹æ—¶é—´ä¸Šåˆ10ç‚¹ä¸¾è¡Œä¸€æ¬¡å®šæœŸæ—¥å†æ´»åŠ¨ã€‚å°±åƒä¸€å®¶çœŸæ­£çš„è¿œç¨‹ç¬¬ä¸€å…¬å¸ä¸€æ ·ï¼Œä½ çš„å…¬å¸åˆ†å¸ƒå¹¿æ³›ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªä¸»è¦å›¢é˜Ÿåœ¨ä¸€ä¸ªåŸå¸‚ï¼Œä¸€ä¸ªå…°å¤šåœ¨â€œè¿œç¨‹â€å·¥ä½œã€‚è¿™å¾ˆå¥½ï¼Œä½†å®ƒä¹Ÿå¢åŠ äº†ä¸€ä¸ªåŸå¸‚ã€åœ°åŒºæˆ–å›½å®¶ä¸å…¶ä»–åŸå¸‚ã€åœ°åŒºæˆ–å›½å®¶ï¼ˆå¦‚æœå®ƒä»¬ç”šè‡³æœ‰ä¸€ä¸ªå¤ä»¤æ—¶æ”¿ç­–çš„è¯ï¼‰æœ‰ä¸åŒå¤ä»¤æ—¶æ”¿ç­–çš„å¯èƒ½æ€§ã€‚</p><p> You keep having your 10am call for a few months, and then Virginia, who lives in West Virginia, starts her daylight saving time in March. So now the 10am Pacific meeting time, which was 1pm her time, would still be 1pm for her since Pacific time always follows DST, too (except for Yukon, in Canada, which decided in 2020 to stop following DST, of course). But your teammate Brooklyn, who lives in Phoenix, doesnâ€™t have daylight saving time because she lives in Arizona, which doesnâ€™t follow daylight saving time (but donâ€™t forget that the Navajo Nation in the northern part of Arizona  does follow DST, so be sure to keep that in mind, too).</p><p>å‡ ä¸ªæœˆæ¥ï¼Œä½ ä¸€ç›´åœ¨æ‰“ä¸Šåˆ10ç‚¹çš„ç”µè¯ï¼Œç„¶åä½åœ¨è¥¿å¼—å‰å°¼äºšå·çš„ç»´å‰å°¼äºšåœ¨3æœˆä»½å¼€å§‹å¤ä»¤æ—¶ã€‚æ‰€ä»¥ç°åœ¨ä¸Šåˆ10ç‚¹çš„å¤ªå¹³æ´‹ä¼šè®®æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å¥¹ä¸‹åˆ1ç‚¹çš„æ—¶é—´ï¼Œå¯¹å¥¹æ¥è¯´ä»ç„¶æ˜¯ä¸‹åˆ1ç‚¹ï¼Œå› ä¸ºå¤ªå¹³æ´‹æ—¶é—´ä¹Ÿæ€»æ˜¯éµå¾ªDSTï¼ˆåŠ æ‹¿å¤§è‚²ç©ºåœ°åŒºé™¤å¤–ï¼Œè¯¥åœ°åŒºåœ¨2020å¹´å†³å®šåœæ­¢éµå¾ªDSTï¼‰ã€‚ä½†ä½ çš„é˜Ÿå‹å¸ƒé²å…‹æ—ä½åœ¨å‡¤å‡°åŸï¼Œå¥¹æ²¡æœ‰å¤ä»¤æ—¶ï¼Œå› ä¸ºå¥¹ä½åœ¨äºšåˆ©æ¡‘é‚£å·ï¼Œé‚£é‡Œä¸éµå¾ªå¤ä»¤æ—¶ï¼ˆä½†åˆ«å¿˜äº†ï¼Œäºšåˆ©æ¡‘é‚£å·åŒ—éƒ¨çš„çº³ç“¦éœæ°‘æ—ä¹Ÿéµå¾ªDSTï¼Œæ‰€ä»¥ä¸€å®šè¦è®°ä½è¿™ä¸€ç‚¹ï¼‰ã€‚</p><p> So: does Brooklyn keep at her normal 11am meeting time, or does she move forward with Brooklyn and have to start meeting at noon? Nothing in her life changed. Itâ€™s weird for a meeting to suddenly span her lunch break when it didnâ€™t before.</p><p>é‚£ä¹ˆï¼šå¸ƒé²å…‹æ—æ˜¯å¦ä¿æŒæ­£å¸¸çš„ä¸Šåˆ11ç‚¹ä¼šè®®æ—¶é—´ï¼Œæˆ–è€…å¥¹æ˜¯å¦ç»§ç»­ä¸å¸ƒé²å…‹æ—ä¼šé¢ï¼Œå¿…é¡»åœ¨ä¸­åˆå¼€å§‹å¼€ä¼šï¼Ÿå¥¹çš„ç”Ÿæ´»æ²¡æœ‰ä»»ä½•æ”¹å˜ã€‚ä¸€æ¬¡ä¼šè®®çªç„¶åœ¨å¥¹çš„åˆé¤ä¼‘æ¯æ—¶é—´ç»“æŸï¼Œè€Œä¹‹å‰æ²¡æœ‰ï¼Œè¿™æ˜¯å¾ˆå¥‡æ€ªçš„ã€‚</p><p> The answer is: there is no answer. Weâ€™re just making it up. And  thatâ€™s the answer. Google has a writeup on their  developer API docs for Calendar broadly talking about how recurring events interact with invited attendees. One aspect:</p><p>ç­”æ¡ˆæ˜¯ï¼šæ²¡æœ‰ç­”æ¡ˆã€‚æˆ‘ä»¬åªæ˜¯åœ¨å¼¥è¡¥ã€‚è¿™å°±æ˜¯ç­”æ¡ˆã€‚è°·æ­Œåœ¨å…¶å¼€å‘è€…APIæ–‡æ¡£ä¸­æœ‰ä¸€ä¸ªå…³äºæ—¥å†çš„ä¹¦é¢æ–‡ä»¶ï¼Œå¹¿æ³›è®¨è®ºäº†é‡å¤äº‹ä»¶å¦‚ä½•ä¸å—é‚€å‚ä¸è€…äº’åŠ¨ã€‚ä¸€ä¸ªæ–¹é¢ï¼š</p><p>  This is really the only reasonable approach that can be taken here. They decided that the creator of the original event wins out, and the effects of that permeate out to attendees as well.</p><p>è¿™æ˜¯å”¯ä¸€åˆç†çš„æ–¹æ³•ã€‚ä»–ä»¬è®¤ä¸ºï¼Œæœ€åˆæ´»åŠ¨çš„åˆ›é€ è€…è·èƒœï¼Œå…¶å½±å“ä¹Ÿæ¸—é€åˆ°ä¸ä¼šè€…èº«ä¸Šã€‚</p><p>  * The â€œDTSTARTâ€ and the â€œTZOFFSETFROMâ€ properties MUST be used when generating the onset DATE-TIME values (instances) from the â€œRRULEâ€.</p><p>*ä»â€œRRULEâ€ç”Ÿæˆèµ·å§‹æ—¥æœŸæ—¶é—´å€¼ï¼ˆå®ä¾‹ï¼‰æ—¶ï¼Œå¿…é¡»ä½¿ç”¨â€œDTSTARTâ€å’Œâ€œTZOFFSETFROMâ€å±æ€§ã€‚</p><p> (RFC 5545 is a great, titillating read, too. Thought I was reading a Harlequin romance novel with how vividly they describe all the  RRULE specifications and permutations.)</p><p>ï¼ˆRFC 5545ä¹Ÿæ˜¯ä¸€æœ¬å¾ˆæ£’çš„ã€ä»¤äººå…´å¥‹çš„ä¹¦ã€‚æˆ‘è¿˜ä»¥ä¸ºæˆ‘åœ¨è¯»ä¸€æœ¬å°ä¸‘çš„çˆ±æƒ…å°è¯´ï¼Œä¹¦ä¸­ç”ŸåŠ¨åœ°æè¿°äº†æ‰€æœ‰çš„è§„åˆ™å’Œæ’åˆ—ã€‚ï¼‰</p><p>  So: bringing it back to the original topic at handâ€¦ I think this is a case where we get to just make the arbitrary decision. Thereâ€™s no â€œrightâ€ or â€œwrongâ€ answer.</p><p>æ‰€ä»¥ï¼šå›åˆ°æ‰‹å¤´çš„åŸå§‹è¯é¢˜â€¦â€¦æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥éšæ„åšå‡ºå†³å®šçš„æ¡ˆä¾‹ã€‚æ²¡æœ‰â€œå¯¹â€æˆ–â€œé”™â€çš„ç­”æ¡ˆã€‚</p><p> I was curious how others broadly thought about the question, so I looked into it some more.</p><p>æˆ‘å¾ˆå¥½å¥‡å…¶ä»–äººæ˜¯å¦‚ä½•å¹¿æ³›åœ°æ€è€ƒè¿™ä¸ªé—®é¢˜çš„ï¼Œæ‰€ä»¥æˆ‘è¿›ä¸€æ­¥ç ”ç©¶äº†ä¸€ä¸‹ã€‚</p><p> Ruby has a  lovely treatise about Shakespeare while they discuss using  Time versus  DateTime which touch on some of these issues- itâ€™s worth reading the whole section, but this part is most relevant here:</p><p>Rubyæœ‰ä¸€ç¯‡å…³äºèå£«æ¯”äºšçš„å¯çˆ±è®ºæ–‡ï¼Œä»–ä»¬è®¨è®ºäº†ä½¿ç”¨æ—¶é—´ä¸æ—¥æœŸæ—¶é—´çš„å…³ç³»ï¼Œè¿™æ¶‰åŠåˆ°äº†å…¶ä¸­ä¸€äº›é—®é¢˜â€”â€”å€¼å¾—é˜…è¯»æ•´ä¸ªç« èŠ‚ï¼Œä½†è¿™ä¸€éƒ¨åˆ†åœ¨è¿™é‡Œæœ€ç›¸å…³ï¼š</p><p> So when should you use  DateTime in Ruby and when should you use  Time? Almost certainly youâ€™ll want to use  Time since your app is probably dealing with current dates and times. However, if you need to deal with dates and times in a historical context youâ€™ll want to use DateTime to avoid making the same mistakes as UNESCO. If you also have to deal with timezones then best of luck - just bear in mind that youâ€™ll probably be dealing with local solar times, since it wasnâ€™t until the 19th century that the introduction of the railways necessitated the need for Standard Time and eventually timezones.</p><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™åº”è¯¥åœ¨Rubyä¸­ä½¿ç”¨DateTimeï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨Timeå‘¢ï¼Ÿå‡ ä¹å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œä½ ä¼šæƒ³ä½¿ç”¨æ—¶é—´ï¼Œå› ä¸ºä½ çš„åº”ç”¨ç¨‹åºå¯èƒ½æ­£åœ¨å¤„ç†å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚ç„¶è€Œï¼Œå¦‚æœä½ éœ€è¦åœ¨å†å²èƒŒæ™¯ä¸‹å¤„ç†æ—¥æœŸå’Œæ—¶é—´ï¼Œä½ ä¼šå¸Œæœ›ä½¿ç”¨DateTimeæ¥é¿å…çŠ¯ä¸UNESCOç›¸åŒçš„é”™è¯¯ã€‚å¦‚æœä½ è¿˜éœ€è¦å¤„ç†æ—¶åŒºé—®é¢˜ï¼Œé‚£ä¹ˆç¥ä½ å¥½è¿â€”â€”è¯·è®°ä½ï¼Œä½ å¯èƒ½ä¼šå¤„ç†å½“åœ°çš„å¤ªé˜³æ—¶ï¼Œå› ä¸ºç›´åˆ°19ä¸–çºªï¼Œé“è·¯çš„å¼•å…¥æ‰éœ€è¦æ ‡å‡†æ—¶é—´ï¼Œæœ€ç»ˆéœ€è¦æ—¶åŒºã€‚</p><p> .NET also kind of goes with a  â€œoh god just try to avoid any of this type of thingâ€ philosophy:</p><p>NETä¹Ÿæœ‰ä¸€ç§â€œå“¦ï¼Œä¸Šå¸ï¼Œå°½é‡é¿å…ä»»ä½•è¿™ç±»äº‹æƒ…â€çš„ç†å¿µï¼š</p><p> To determine the relationship of  t1 to  t2, the Compare method compares the Ticks property of  t1 and  t2 but ignores their  Kind property. [Ed. note:  Kind here is effectively timezone-related data.] Before comparing  DateTime objects, ensure that the objects represent times in the same time zone.</p><p>ä¸ºäº†ç¡®å®št1å’Œt2ä¹‹é—´çš„å…³ç³»ï¼Œæ¯”è¾ƒæ–¹æ³•ä¼šæ¯”è¾ƒt1å’Œt2çš„æ»´ç­”å£°ç‰¹æ€§ï¼Œä½†ä¼šå¿½ç•¥å®ƒä»¬çš„ç§ç±»ç‰¹æ€§ã€‚[Ed.æ³¨ï¼šè¿™é‡Œçš„Kindå®é™…ä¸Šæ˜¯ä¸æ—¶åŒºç›¸å…³çš„æ•°æ®ã€‚]åœ¨æ¯”è¾ƒDateTimeå¯¹è±¡ä¹‹å‰ï¼Œè¯·ç¡®ä¿è¿™äº›å¯¹è±¡ä»£è¡¨åŒä¸€æ—¶åŒºä¸­çš„æ—¶é—´ã€‚</p><p>  The method still works if the date/times are more than 14 hours apart, but if they are less than 14 hours apart, the result is deemed to be indeterminate.</p><p>å¦‚æœæ—¥æœŸ/æ—¶é—´é—´éš”è¶…è¿‡14å°æ—¶ï¼Œè¯¥æ–¹æ³•ä»ç„¶æœ‰æ•ˆï¼Œä½†å¦‚æœé—´éš”å°äº14å°æ—¶ï¼Œåˆ™ç»“æœè¢«è§†ä¸ºä¸ç¡®å®šã€‚</p><p>  As the second parameter determines the precision, and not just a single value to check, using day will check for year, month and day. [Ed. note: this basically means you have to choose which precision to decide- in the case of the original tweet, youâ€™d pick either days or seconds.]</p><p>ç”±äºç¬¬äºŒä¸ªå‚æ•°å†³å®šç²¾åº¦ï¼Œè€Œä¸ä»…ä»…æ˜¯è¦æ£€æŸ¥çš„å•ä¸ªå€¼ï¼Œå› æ­¤ä½¿ç”¨dayå°†æ£€æŸ¥å¹´ã€æœˆå’Œæ—¥ã€‚[Ed.æ³¨ï¼šè¿™åŸºæœ¬ä¸Šæ„å‘³ç€ä½ å¿…é¡»é€‰æ‹©è¦å†³å®šçš„ç²¾åº¦â€”â€”å¯¹äºåŸå§‹æ¨æ–‡ï¼Œä½ å¯ä»¥é€‰æ‹©å‡ å¤©æˆ–å‡ ç§’é’Ÿã€‚]</p><p>    If the two moments have different timezones, the timezone of the first moment will be used for the comparison.</p><p>å¦‚æœä¸¤ä¸ªæ—¶åˆ»çš„æ—¶åŒºä¸åŒï¼Œåˆ™å°†ä½¿ç”¨ç¬¬ä¸€ä¸ªæ—¶åˆ»çš„æ—¶åŒºè¿›è¡Œæ¯”è¾ƒã€‚</p><p>  This whole post is basically a long-winded way of reiterating that humans create some very weird scenarios when it comes to dates and times. Raphael Schaad, founder of the fantastic  Cron calendar, has a  long-running thread on broken assumptions of calendaring that, frankly, donâ€™t always have logical solutions. Itâ€™s all a bunch of trade-offs.</p><p>è¿™ç¯‡æ–‡ç« åŸºæœ¬ä¸Šæ˜¯ä¸€ç§å†—é•¿çš„æ–¹å¼ï¼Œé‡ç”³äººç±»åœ¨æ—¥æœŸå’Œæ—¶é—´ä¸Šåˆ›é€ äº†ä¸€äº›éå¸¸å¥‡æ€ªçš„åœºæ™¯ã€‚Raphael Schaadæ˜¯ç¥å¥‡çš„Cronæ—¥å†çš„åˆ›å§‹äººï¼Œä»–æœ‰ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„æ€è·¯ï¼Œå…³äºæ—¥å†çš„é”™è¯¯å‡è®¾ï¼Œå¦ç‡åœ°è¯´ï¼Œå¹¶ä¸æ€»æ˜¯æœ‰åˆä¹é€»è¾‘çš„è§£å†³æ–¹æ¡ˆã€‚è¿™éƒ½æ˜¯ä¸€ç³»åˆ—çš„æƒè¡¡ã€‚</p><p> And thatâ€™s why I found the original tweet so interesting. Weâ€™ve all had situations where the data wasnâ€™t consistent, or a third party munged data incorrectly for us, or where weâ€™ve inherited data that was saved under incorrect assumptions (correct as they might have been at the time). The thought process can lead to a hundred-reply Slack thread. Or an entirely too-long and too-detailed Saturday morning post about dates and times.</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘å‘ç°åŸæ¥çš„æ¨ç‰¹å¦‚æ­¤æœ‰è¶£ã€‚æˆ‘ä»¬éƒ½é‡åˆ°è¿‡æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œæˆ–è€…ç¬¬ä¸‰æ–¹ä¸ºæˆ‘ä»¬é”™è¯¯åœ°å±è”½äº†æ•°æ®ï¼Œæˆ–è€…æˆ‘ä»¬ç»§æ‰¿äº†åœ¨é”™è¯¯å‡è®¾ä¸‹ä¿å­˜çš„æ•°æ®ï¼ˆå°½ç®¡å½“æ—¶å¯èƒ½æ˜¯æ­£ç¡®çš„ï¼‰ã€‚æ€è€ƒçš„è¿‡ç¨‹å¯èƒ½ä¼šå¯¼è‡´100æ¡çº¿ç´¢ã€‚æˆ–è€…ä¸€ç¯‡å…³äºæ—¥æœŸå’Œæ—¶é—´çš„å¤ªé•¿å¤ªè¯¦ç»†çš„å‘¨å…­æ—©æŠ¥ã€‚</p><p>  Just kidding. I know some of you are on to Sunday already. And some of you will â€” gasp â€” read it years from now! Pretty sure no one read this a week ago, though. If you did, please remind me a few days ago that I will need to write this a few hours ago from now.</p><p>å¼€ç©ç¬‘ã€‚æˆ‘çŸ¥é“ä½ ä»¬æœ‰äº›äººå·²ç»åˆ°æ˜ŸæœŸå¤©äº†ã€‚ä½ ä»¬ä¸­çš„ä¸€äº›äººå‡ å¹´åä¼šè¯»åˆ°å®ƒï¼ä¸è¿‡ï¼Œæˆ‘æ•¢è‚¯å®šä¸€å‘¨å‰æ²¡äººè¯»è¿‡è¿™ç¯‡æ–‡ç« ã€‚å¦‚æœä½ å†™äº†ï¼Œè¯·å‡ å¤©å‰æé†’æˆ‘ï¼Œä»ç°åœ¨èµ·ï¼Œæˆ‘éœ€è¦åœ¨å‡ ä¸ªå°æ—¶å‰å†™è¿™ç¯‡æ–‡ç« ã€‚</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/å°æ—/">#å°æ—</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/maru/">#maru</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/æ—¶é—´/">#æ—¶é—´</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>