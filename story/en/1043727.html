<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>åœ¨Hushboardæ‰“å­—æ—¶ä½¿éº¦å…‹é£é™éŸ³ Mute Your Microphone While Typing with Hushboard</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Mute Your Microphone While Typing with Hushboard<br/>åœ¨Hushboardæ‰“å­—æ—¶ä½¿éº¦å…‹é£é™éŸ³ </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-01-09 17:38:05</div><div class="page_narrow text-break page_content"><p>Yesterday while surfing the ASCII highways of IRC (yes, IRC) a URL linking to a MacOS application scrolled by my screen.  Unclack is a small MacOS utility which silences the microphone of the user when theyâ€™re typing. The purpose is to prevent the noise of typing being passed through to other participants when on a Zoom / Skype / Jitsi call. Neat.</p><p>æ˜¨å¤©ï¼Œåœ¨æµè§ˆIRCçš„ASCIIç é«˜é€Ÿå…¬è·¯ï¼ˆæ˜¯IRCï¼‰æ—¶ï¼Œä¸€ä¸ªURLé“¾æ¥åˆ°äº†æˆ‘çš„å±å¹•ä¸Šæ»šåŠ¨çš„MacOSåº”ç”¨ç¨‹åºã€‚ Unclackæ˜¯ä¸€ä¸ªå°å‹çš„MacOSå®ç”¨ç¨‹åºï¼Œå¯åœ¨ç”¨æˆ·é”®å…¥æ—¶ä½¿ç”¨æˆ·çš„éº¦å…‹é£é™éŸ³ã€‚ç›®çš„æ˜¯é˜²æ­¢åœ¨è¿›è¡ŒZoom / Skype / Jitsié€šè¯æ—¶å°†æ‰“å­—çš„å™ªéŸ³ä¼ é€’ç»™å…¶ä»–å‚ä¸è€…ã€‚æ•´é½ã€‚</p><p> They donâ€™t make a Linux version, and I couldnâ€™t see anything similar, so I did what I usually do in this instance, throw the idea towards my friendly local coder, Stuart Langridge. He was, as ever, initially bemused and then dismissive.</p><p> ä»–ä»¬æ²¡æœ‰åˆ¶ä½œLinuxç‰ˆæœ¬ï¼Œè€Œä¸”æˆ‘çœ‹ä¸åˆ°ä»»ä½•ç±»ä¼¼çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æˆ‘åšäº†è¿™ç§æƒ…å†µä¸‹çš„å¹³å¸¸å·¥ä½œï¼Œå°†æƒ³æ³•äº¤ç»™äº†æˆ‘å‹å¥½çš„æœ¬åœ°ç¼–ç å™¨Stuart Langridgeã€‚ä¸€å¦‚æ—¢å¾€ï¼Œä»–ä¸€å¼€å§‹å°±æ„Ÿåˆ°å›°æƒ‘ï¼Œç„¶ååˆä¸å±‘ä¸€é¡¾ã€‚</p><p>  Alan: I reckon thatâ€™s an app which could exist on linux - unclack.app - â€œUnclack is the small but mighty Mac utility that mutes your keyboard while you type!â€</p><p>  è‰¾ä¼¦ï¼šæˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨linuxä¸Šå­˜åœ¨çš„åº”ç”¨ç¨‹åº-unclack.app-â€œ Unclackæ˜¯ä½“ç§¯å°ä½†åŠŸèƒ½å¼ºå¤§çš„Macå®ç”¨ç¨‹åºï¼Œå¯åœ¨æ‚¨é”®å…¥æ—¶ä½¿é”®ç›˜é™éŸ³ï¼â€</p><p>    Stuart: I thought: the answer here is donâ€™t be popey with the stupid noisy keyboard ;)</p><p>    æ–¯å›¾å°”ç‰¹ï¼šæˆ‘æƒ³ï¼šç­”æ¡ˆä¸æ˜¯ç¬¨ç¬¨çš„å˜ˆæ‚é”®ç›˜;ï¼‰</p><p>  Alan: I reckon a little python thing that sits in the corner and can be toggled on/off would be neat</p><p>  è‰¾ä¼¦ï¼šæˆ‘è®¤ä¸ºååœ¨è§’è½é‡Œå¯ä»¥æ‰“å¼€/å…³é—­çš„ä¸€äº›å°pythonä¸œè¥¿ä¼šå¾ˆæ•´æ´</p><p>     Stuart provided me with the first iteration, able to detect keypresses, you know, like a keylogger. We spent approximately 30 seconds brainstorming a name. I came up with  automute and  unkeeb. Stuart expressed with some vigor that  unkeeb was under no circumstances going to be the name.</p><p>     Stuartä¸ºæˆ‘æä¾›äº†ç¬¬ä¸€ä¸ªè¿­ä»£ï¼Œèƒ½å¤Ÿåƒé”®ç›˜è®°å½•å™¨ä¸€æ ·æ£€æµ‹æŒ‰é”®ã€‚æˆ‘ä»¬èŠ±äº†å¤§çº¦30ç§’é’Ÿæ¥é›†æ€å¹¿ç›Šã€‚æˆ‘æƒ³å‡ºäº†è‡ªåŠ¨é™éŸ³åŠŸèƒ½ã€‚æ–¯å›¾å°”ç‰¹ï¼ˆStuartï¼‰å……æ»¡æ´»åŠ›åœ°è¡¨ç¤ºï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œæ¸©åŸºå¸ƒéƒ½ä¸æ˜¯è¿™ä¸ªåå­—ã€‚</p><p>   By late afternoon Stuart had the basics of the utility working. We tested over a Google Meet. It would detect keypresses, mute and unmute the microphone, and display the status in the indicator area. This smelled like a Minimum Viable Product!</p><p>   åˆ°å‚æ™šï¼ŒStuartæ‹¥æœ‰äº†è¯¥å®ç”¨ç¨‹åºçš„åŸºæœ¬çŸ¥è¯†ã€‚æˆ‘ä»¬é€šè¿‡Google Meetè¿›è¡Œäº†æµ‹è¯•ã€‚å®ƒä¼šæ£€æµ‹æŒ‰é”®ï¼Œä½¿éº¦å…‹é£é™éŸ³å’Œå–æ¶ˆé™éŸ³ï¼Œå¹¶åœ¨æŒ‡ç¤ºå™¨åŒºåŸŸä¸­æ˜¾ç¤ºçŠ¶æ€ã€‚è¿™é—»èµ·æ¥åƒæœ€ä½é™åº¦çš„å¯è¡Œäº§å“ï¼ </p><p> With Stuarts veto on the  unkeeb name, as the Ideas Man, I had to think of something else. I checked a thesaurus and came up with  calm-ivories which was even dumber than  unkeeb. Then it hit me!</p><p>Stuartså¦å†³æƒæ˜¯Uneebebï¼Œå³Ideas Manï¼Œæˆ‘ä¸å¾—ä¸è€ƒè™‘å…¶ä»–äº‹æƒ…ã€‚æˆ‘æ£€æŸ¥äº†ä¸€ä¸ªè¯åº“ï¼Œæƒ³å‡ºäº†é•‡é™çš„è±¡ç‰™è‰²ï¼Œç”šè‡³æ¯”unkeebè¿˜æš—ã€‚ç„¶åæ‰“æˆ‘ï¼</p><p>  30 seconds of Internet due diligence later, and the name was settled. â€œ Hushboardâ€ it is. Who says naming things is hard? Stuart does. All the time. Thatâ€™s why he relies on me for these parts of the project lifecycle. That, and packaging. We were getting close to sharing the creation with the world. We decided, with no surprise to anyone, to make a snap!</p><p>  ç»è¿‡30ç§’é’Ÿçš„Internetå°½èŒè°ƒæŸ¥ï¼Œè¯¥åç§°å¾—ä»¥ç¡®å®šã€‚æ˜¯â€œæ»‘æ¿â€ã€‚è°è¯´å¾ˆéš¾å‘½åï¼Ÿæ–¯å›¾å°”ç‰¹åšåˆ°äº†ã€‚æ¯æ—¶æ¯åˆ»ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä»–åœ¨é¡¹ç›®ç”Ÿå‘½å‘¨æœŸçš„è¿™äº›é˜¶æ®µéƒ½ä¾èµ–æˆ‘ã€‚é‚£å’ŒåŒ…è£…ã€‚æˆ‘ä»¬å³å°†ä¸ä¸–ç•Œåˆ†äº«åˆ›ä½œã€‚æˆ‘ä»¬å†³å®šæ¯«ä¸æ„å¤–åœ°åšå‡ºå†³å®šï¼</p><p> So hereâ€™s what I did to package whatâ€™s essentially a tiny bit of python, and a few dependencies as a snap, so Stuart could build and  publish it in the Snap Store.</p><p> å› æ­¤ï¼Œè¿™å°±æ˜¯æˆ‘æ‰“åŒ…åŸºæœ¬pythonå’Œä¸€äº›ä¾èµ–é¡¹çš„å·¥ä½œï¼Œå› æ­¤Stuartå¯ä»¥åœ¨Snap Storeä¸­æ„å»ºå’Œå‘å¸ƒå®ƒã€‚</p><p>  This is straightforward. The  version tag uses  git so whenever a build is published, you can refer back to the tag which it was built from. Itâ€™s going to be strictly confined. We donâ€™t want it doing anything narfarious with all those keypresses itâ€™s collecting!</p><p>  è¿™å¾ˆç®€å•ã€‚ç‰ˆæœ¬æ ‡ç­¾ä½¿ç”¨gitï¼Œå› æ­¤æ¯å½“å‘å¸ƒæ„å»ºæ—¶ï¼Œæ‚¨éƒ½å¯ä»¥å‚è€ƒå…¶æ„å»ºçš„æ ‡ç­¾ã€‚è¿™å°†ä¸¥æ ¼é™åˆ¶ã€‚æˆ‘ä»¬ä¸å¸Œæœ›å®ƒå¯¹æ”¶é›†åˆ°çš„æ‰€æœ‰æŒ‰é”®è¿›è¡Œä»»ä½•ä»¤äººæ¯›éª¨æ‚šç„¶çš„äº‹æƒ…ï¼</p><p>  Weâ€™re using  core18 which means itâ€™s using packages from Ubuntu 18.04 for  stage-packages later, which are older than the packages used when we tested on our 20.04 / 20.10 systems.  Foreshadowing</p><p>  æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨core18ï¼Œè¿™æ„å‘³ç€å®ƒå°†ç¨åä½¿ç”¨Ubuntu 18.04ä¸­çš„è½¯ä»¶åŒ…ä½œä¸ºé˜¶æ®µè½¯ä»¶åŒ…ï¼Œè¿™æ¯”æˆ‘ä»¬åœ¨20.04 / 20.10ç³»ç»Ÿä¸Šæµ‹è¯•æ—¶ä½¿ç”¨çš„è½¯ä»¶åŒ…è¦æ—§ã€‚é“ºå«</p><p> name: hushboardbase: core18version: &#39;git&#39;summary: Mute your microphone while typingdescription: | Save your friends and colleagues from the noise of your keyboard while on audio or video calls. Hushboard detects keypresses and automatically mutes your microphone, unmuting shortly after you finish typing.grade: stableconfinement: strict</p><p> åç§°ï¼šhushboardbaseï¼šcore18ç‰ˆæœ¬ï¼šï¼†ï¼ƒ39; gitï¼†ï¼ƒ39;æ‘˜è¦ï¼šé”®å…¥æ—¶ä½¿éº¦å…‹é£é™éŸ³è¯´æ˜ï¼š|åœ¨è¿›è¡ŒéŸ³é¢‘æˆ–è§†é¢‘é€šè¯æ—¶ï¼Œå¯ä»¥ä¿æŠ¤æ‚¨çš„æœ‹å‹å’ŒåŒäº‹å…å—é”®ç›˜å™ªéŸ³çš„å½±å“ã€‚ Hushboardä¼šæ£€æµ‹åˆ°æŒ‰é”®å¹¶è‡ªåŠ¨ä½¿æ‚¨çš„éº¦å…‹é£é™éŸ³ï¼Œå¹¶åœ¨å®Œæˆè¾“å…¥åç«‹å³å°†å…¶é™éŸ³ã€‚ç­‰çº§ï¼šç¨³å®šé™åˆ¶ï¼šä¸¥æ ¼</p><p>  First is hushboard itself. As I plan to land this in the upstream repo, the  source is  . - the current directory. Iâ€™m not using the  python plugin, because the project doesnâ€™t have all the necessary python bits like a  setup.py. Weâ€™re literally dumping the python files into the snap and running them.</p><p>  é¦–å…ˆæ˜¯æ»‘æ¿æœ¬èº«ã€‚å½“æˆ‘è®¡åˆ’å°†å…¶æ”¾ç½®åœ¨ä¸Šæ¸¸ä»“åº“ä¸­æ—¶ï¼Œæ¥æºæ˜¯ã€‚ -å½“å‰ç›®å½•ã€‚æˆ‘æ²¡æœ‰ä½¿ç”¨pythonæ’ä»¶ï¼Œå› ä¸ºè¯¥é¡¹ç›®æ²¡æœ‰æ‰€æœ‰å¿…éœ€çš„pythonä½ï¼Œä¾‹å¦‚setup.pyã€‚æˆ‘ä»¬å®é™…ä¸Šæ˜¯å°†pythonæ–‡ä»¶è½¬å‚¨åˆ°snapä¸­å¹¶è¿è¡Œå®ƒä»¬ã€‚ </p><p> Weâ€™re staging  gir1.2-appindicator3-0.1 so it can place a little indicator icon in the top right of the screen, so you can see what the app is doing. We also need  python3-xlib which is needed by Hushboard to hook into X11 to detect keypresses. Yes, this uses X11, no, it hasnâ€™t been tested on Wayland. No, it almost certainly wonâ€™t work there. Patches may be welcome, so long as it doesnâ€™t break X11 stuff.</p><p>æˆ‘ä»¬å°†æš‚å­˜gir1.2-appindicator3-0.1ï¼Œä»¥ä¾¿å®ƒå¯ä»¥åœ¨å±å¹•çš„å³ä¸Šæ–¹æ”¾ç½®ä¸€ä¸ªå°æŒ‡ç¤ºå™¨å›¾æ ‡ï¼Œä»¥ä¾¿æ‚¨æŸ¥çœ‹åº”ç”¨ç¨‹åºçš„è¿è¡Œæƒ…å†µã€‚æˆ‘ä»¬è¿˜éœ€è¦Hushboardéœ€è¦ä½¿ç”¨python3-xlibæ¥æŒ‚æ¥åˆ°X11ä»¥æ£€æµ‹æŒ‰é”®ã€‚æ˜¯çš„ï¼Œå®ƒä½¿ç”¨X11ï¼Œå¦ï¼Œå°šæœªåœ¨Waylandä¸Šè¿›è¡Œè¿‡æµ‹è¯•ã€‚ä¸ï¼Œå‡ ä¹å¯ä»¥è‚¯å®šé‚£é‡Œæ˜¯è¡Œä¸é€šçš„ã€‚åªè¦ä¸ç ´åX11çš„ä¸œè¥¿ï¼Œè¡¥ä¸å¯èƒ½æ˜¯å—æ¬¢è¿çš„ã€‚</p><p> The  prime section is pretty neat. This means â€œonly put these things in the snap, and nothing elseâ€. That way we strip the snap down to the absolute minimum needed to make it run. The Xlib library is about the biggest thing in the snap, which ends up being under 200K in size.</p><p> ä¸»è¦éƒ¨åˆ†éå¸¸æ•´æ´ã€‚è¿™æ„å‘³ç€â€œä»…å°†è¿™äº›ä¸œè¥¿æ”¾åœ¨ç¬é—´ï¼Œåˆ«æ— å…¶ä»–â€ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ä¾¿ä¼šå°†å¿«ç…§é™ä½åˆ°äº†ä½¿å…¶è¿è¡Œæ‰€éœ€çš„ç»å¯¹æœ€å°å€¼ã€‚ Xlibåº“æ˜¯å¿«ç…§ä¸­æœ€å¤§çš„äº‹æƒ…ï¼Œæœ€ç»ˆå¤§å°ä¸åˆ°200Kã€‚</p><p> parts: hushboard: plugin: dump source: . stage-packages: - gir1.2-appindicator3-0.1 - python3-xlib prime: - usr/lib/girepository-1.0/AppIndicator3-0.1.typelib - usr/lib/*/libappindicator3.so.* - usr/lib/python3/dist-packages/* - hushboard/* - bin/*</p><p> é›¶ä»¶ï¼šhushboardï¼šæ’ä»¶ï¼šdumpæºï¼šã€‚é˜¶æ®µè½¯ä»¶åŒ…ï¼š-gir1.2-appindicator3-0.1-python3-xlibç´ æ•°ï¼š-usr / lib / girepository-1.0 / AppIndicator3-0.1.typelib-usr / lib / * / libappindicator3.soã€‚*-usr / lib / python3 / dist-packages / *-hushboard / *-bin / *</p><p>   Hereâ€™s the launcher script. All it does is ensure python can find the dependencies we bundled (xlib) and launches the application. I could probably move the  PYTHONPART line to the  apps section as an  environment stanza, and may well have done by the time you read this.</p><p>   è¿™æ˜¯å¯åŠ¨å™¨è„šæœ¬ã€‚å®ƒæ‰€åšçš„åªæ˜¯ç¡®ä¿pythonå¯ä»¥æ‰¾åˆ°æˆ‘ä»¬æ†ç»‘çš„ä¾èµ–é¡¹ï¼ˆxlibï¼‰å¹¶å¯åŠ¨åº”ç”¨ç¨‹åºã€‚æˆ‘å¯èƒ½ä¼šå°†PYTHONPARTè¡Œä½œä¸ºç¯å¢ƒèŠ‚ç§»åŠ¨åˆ°appséƒ¨åˆ†ï¼Œå¹¶ä¸”åœ¨æ‚¨é˜…è¯»æœ¬æ–‡æ—¶å¯èƒ½å·²ç»å®Œæˆã€‚</p><p>   Here we specify the binary we are going to expose to the outside world as  hushboard, which in fact launches  $SNAP/bin/launcher, that we just saw above. I definitely should add that  PYTHONPATH to the  environment section. Hang on. Ok,  done.</p><p>   åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŒ‡å®šå°†è¦å…¬å¼€ç»™å¤–éƒ¨ä¸–ç•Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒå®é™…ä¸Šå¯åŠ¨äº†æˆ‘ä»¬ä¸Šé¢åˆšåˆšçœ‹åˆ°çš„$ SNAP / bin / launcherã€‚æˆ‘ç»å¯¹åº”è¯¥å°†PYTHONPATHæ·»åŠ åˆ°ç¯å¢ƒéƒ¨åˆ†ã€‚ä¸æŒ‚æ–­ã€‚ OKå®Œæˆã€‚</p><p> Weâ€™re leveraging the GNOME extension here. It means a ton of stuff is done and bundled for us.</p><p> æˆ‘ä»¬åœ¨è¿™é‡Œåˆ©ç”¨GNOMEæ‰©å±•ã€‚è¿™æ„å‘³ç€è¦ä¸ºæˆ‘ä»¬å®Œæˆå¤§é‡å·¥ä½œå¹¶å°†å…¶æ‰“åŒ…ã€‚</p><p>  Thatâ€™s it. I threw a PR over to Stuart who hooked it all up to the snapcraft build system. Within an hour or so</p><p>  è€Œå·²ã€‚æˆ‘æŠŠå…¬å…³äº¤ç»™äº†Stuartï¼Œåè€…æŠŠè¿™ä¸€åˆ‡éƒ½æŒ‚åˆ°äº†snapcraftæ„å»ºç³»ç»Ÿä¸Šã€‚ä¸€å°æ—¶å·¦å³ </p><p>   When I first built the snap, the yaml looked pretty much as it does now, but without the  prime section. This caused a library conflict between GNOME libraries in the GNOME Platform Snap (gnome-3-34) and what was pulled in by my  stage-packages definition. Thanks to Ken VanDine on the Ubuntu Desktop Team and Chris Patterson from the Snapcraft team at work for helping me better understand this. We ndeeded to bundle the appindicator library, but didnâ€™t want all the other dependencies, which caused the conflict. Using the  prime section we could allowlist only the things we want, which has a side-effect that the snap is nice and tight.</p><p>å½“æˆ‘ç¬¬ä¸€æ¬¡æ„å»ºå¿«ç…§æ—¶ï¼Œyamlçœ‹èµ·æ¥ä¸ç°åœ¨éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯æ²¡æœ‰ä¸»è¦éƒ¨åˆ†ã€‚è¿™åœ¨GNOMEå¹³å°å¿«ç…§ï¼ˆgnome-3-34ï¼‰ä¸­çš„GNOMEåº“å’Œæˆ‘çš„é˜¶æ®µåŒ…å®šä¹‰ä¸­å¼•å…¥çš„åº“ä¹‹é—´å¼•èµ·äº†åº“å†²çªã€‚æ„Ÿè°¢Ubuntuæ¡Œé¢å›¢é˜Ÿçš„Ken VanDineå’ŒSnapcraftå›¢é˜Ÿçš„Chris Pattersonçš„å·¥ä½œï¼Œä»–ä»¬å¸®åŠ©æˆ‘æ›´å¥½åœ°ç†è§£äº†è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬å¸Œæœ›æ†ç»‘appindicatoråº“ï¼Œä½†ä¸å¸Œæœ›æ‰€æœ‰å…¶ä»–ä¾èµ–é¡¹å¼•èµ·å†²çªã€‚ä½¿ç”¨è´¨æ•°éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥åªåˆ—å‡ºæˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿ï¼Œè¿™æœ‰ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå³æŒ‰æ‰£å¾ˆå¥½è€Œä¸”å¾ˆç´§ã€‚</p><p>  When Stuart first landed the yaml and hooked up the snapcraft build service, we had build failures on the s390x and ppc64el architecture builders. Thatâ€™s because the  gnome-3-34-1804-sdk component used at build time isnâ€™t built for those architectures. So I added an  architectures stanza to limit the builds weâ€™d support. Now the build service doesnâ€™t even try to build s390x, ppc64el. Sorry all of you doing video calls on your IBM mainframes!</p><p>  å½“Stuarté¦–æ¬¡ç™»é™†yamlå¹¶è¿æ¥äº†snapcraftæ„å»ºæœåŠ¡æ—¶ï¼Œæˆ‘ä»¬åœ¨s390xå’Œppc64elä½“ç³»ç»“æ„æ„å»ºå™¨ä¸Šå‘ç”Ÿäº†æ„å»ºæ•…éšœã€‚è¿™æ˜¯å› ä¸ºæ„å»ºæ—¶æœªä½¿ç”¨gnome-3-34-1804-sdkç»„ä»¶ã€‚å› æ­¤ï¼Œæˆ‘æ·»åŠ äº†ä¸€ä¸ªæ¶æ„èŠ‚ä»¥é™åˆ¶æˆ‘ä»¬æ”¯æŒçš„æ„å»ºã€‚ç°åœ¨ï¼Œæ„å»ºæœåŠ¡ç”šè‡³æ²¡æœ‰å°è¯•æ„å»ºs390xï¼Œppc64elã€‚æŠ±æ­‰ï¼Œåœ¨IBMå¤§å‹æœºä¸Šè¿›è¡Œè§†é¢‘é€šè¯çš„æ‰€æœ‰äººï¼</p><p>   $ snap run hushboard Gtk-Message: 16:12:36.769: Failed to load module &#34;canberra-gtk-module&#34; Traceback (most recent call last): File &#34;/usr/lib/python3.6/runpy.py&#34;, line 193, in _run_module_as_main &#34;__main__&#34;, mod_spec) File &#34;/usr/lib/python3.6/runpy.py&#34;, line 85, in _run_code exec(code, run_globals) File &#34;/snap/hushboard/x19/hushboard/__main__.py&#34;, line 204, in &lt;module&gt; HushboardIndicator().run() File &#34;/snap/hushboard/x19/hushboard/__main__.py&#34;, line 150, in __init__ self.queue = queue.SimpleQueue() AttributeError: module &#39;queue&#39; has no attribute &#39;SimpleQueue&#39;</p><p>   $ snap run hushboard Gtk-æ¶ˆæ¯ï¼š16ï¼š12ï¼š36.769ï¼šæ— æ³•åŠ è½½æ¨¡å—ï¼†ï¼ƒ34; canberra-gtk-moduleï¼†ï¼ƒ34;è¿½æº¯ï¼ˆæœ€è¿‘ä¸€æ¬¡é€šè¯ï¼‰ï¼šæ–‡ä»¶ï¼†ï¼ƒ34; /usr/lib/python3.6/runpy.py&#34 ;ï¼Œç¬¬193è¡Œï¼Œåœ¨_run_module_as_mainï¼†ï¼ƒ34; __ main __ï¼†ï¼ƒ34;ï¼Œmod_specä¸­ï¼‰æ–‡ä»¶ï¼†ï¼ƒ34; /usr/lib/python3.6/runpy.py&#34 ;ï¼Œç¬¬85è¡Œï¼Œåœ¨_run_code execï¼ˆcodeï¼Œrun_globalsï¼‰æ–‡ä»¶ï¼†ï¼ƒ34; / snap / hushboard / x19 / hushboard / __ main __ã€‚pyï¼†ï¼ƒ34 ;ï¼Œç¬¬204è¡Œï¼Œåœ¨ï¼†lt; moduleï¼†gt;ä¸­HushboardIndicatorï¼ˆï¼‰ã€‚runï¼ˆï¼‰æ–‡ä»¶ï¼†ï¼ƒ34; / snap / hushboard / x19 / hushboard / __ main __ã€‚pyï¼†ï¼ƒ34;è¡Œ__init__ self.queue = queue.SimpleQueueï¼ˆï¼‰AttributeErrorï¼šmoduleï¼†ï¼ƒ39; queueï¼† ï¼ƒ39;æ²¡æœ‰å±æ€§ï¼†ï¼ƒ39; SimpleQueueï¼†ï¼ƒ39;</p><p> A quick search online revealed SimpleQueue which Stuart used in hushboard, was introduced in Python 3.7. Weâ€™re building on Ubuntu 18.04 due to the use of  core18 as a  base (callback). I worried this might be a significant problem. Stuart pointed out it was a  one line fix to use a different method to achieve the same thing, and be compliant with the features in Python 3.6. Awesomesauce!</p><p> åœ¨çº¿å¿«é€Ÿæœç´¢æ˜¾ç¤ºäº†Python 3.7ä¸­å¼•å…¥äº†Stuartåœ¨hushboardä¸­ä½¿ç”¨çš„SimpleQueueã€‚ç”±äºä½¿ç”¨core18ä½œä¸ºåŸºç¡€ï¼ˆå›è°ƒï¼‰ï¼Œå› æ­¤æˆ‘ä»¬åœ¨Ubuntu 18.04ä¸Šè¿›è¡Œæ„å»ºã€‚æˆ‘æ‹…å¿ƒè¿™å¯èƒ½æ˜¯ä¸€ä¸ªé‡å¤§é—®é¢˜ã€‚ StuartæŒ‡å‡ºï¼Œä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥å®ŒæˆåŒä¸€ä»¶äº‹å¹¶ä¸Python 3.6ä¸­çš„åŠŸèƒ½å…¼å®¹æ˜¯ä¸€ç«™å¼ä¿®å¤ã€‚å¾ˆæ£’çš„é…±ï¼</p><p>  I had a couple of meetings today in which I could test the newly minted  hushboard. Hushboard has an internal timer which essential starts whenever the user presses a key and the microphone is muted. If you donâ€™t press anything for a certain period, youâ€™re unmuted. We initially settled on 2 seconds as the delay. But this seemed weird, as the typer would have to wait 2 seconds after typing to be able to say anything. It stilted conversations.</p><p>  ä»Šå¤©æˆ‘æœ‰å‡ æ¬¡ä¼šè®®å¯ä»¥æµ‹è¯•æ–°é“¸é€ çš„æ»‘æ¿ã€‚ Hushboardå…·æœ‰ä¸€ä¸ªå†…éƒ¨è®¡æ—¶å™¨ï¼Œæ¯å½“ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªé”®ä¸”éº¦å…‹é£è¢«é™éŸ³æ—¶ï¼Œè¯¥è®¡æ—¶å™¨ä¾¿å¿…ä¸å¯å°‘ã€‚å¦‚æœæ‚¨åœ¨ä¸€æ®µæ—¶é—´å†…ä¸æŒ‰ä»»ä½•æŒ‰é’®ï¼Œåˆ™ä¸ä¼šè¢«é™éŸ³ã€‚æˆ‘ä»¬æœ€åˆå°†å»¶è¿Ÿå®šä¸º2ç§’ã€‚ä½†è¿™ä¼¼ä¹å¾ˆå¥‡æ€ªï¼Œå› ä¸ºæ‰“å­—å‘˜å¿…é¡»åœ¨æ‰“å­—åç­‰å¾…2ç§’é’Ÿæ‰èƒ½è¯´å‡ºä»»ä½•è¯ã€‚å®ƒé«˜è°ˆé˜”è®ºã€‚</p><p> We tried  150ms but that was seen as too short a time. People in the meeting could hear my microphone strobing off and on as I typed, because I donâ€™t necessarily type super fast all the time. We finally settled on  250ms but I expect Stuart is open to  feedback on this topic ğŸ˜ƒ.</p><p> æˆ‘ä»¬å°è¯•äº†150æ¯«ç§’ï¼Œä½†è¿™è¢«è®¤ä¸ºå¤ªçŸ­äº†ã€‚å‚åŠ ä¼šè®®çš„äººå¯ä»¥å¬åˆ°æˆ‘åœ¨é”®å…¥æ—¶æ‰“å¼€å’Œå…³é—­æˆ‘çš„éº¦å…‹é£çš„å£°éŸ³ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä¸ä¸€å®šä¸€ç›´éƒ½åœ¨å¿«é€Ÿé”®å…¥ã€‚æˆ‘ä»¬ç»ˆäºåœ¨250msä¸Šè¾¾æˆåè®®ï¼Œä½†æˆ‘å¸Œæœ›Stuartæ„¿æ„å°±æ­¤è¯é¢˜è¿›è¡Œåé¦ˆã€‚</p><p>  This was a fun little project. Within about 24 hours we went from idea to prototype, implementation, testing, building for multiple architectures,  publishing, made a tutorial video and a promotional blog post about this simple little utility. Do feel free to  install it and let us know your  thoughts.</p><p>  è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„å°é¡¹ç›®ã€‚åœ¨å¤§çº¦24å°æ—¶å†…ï¼Œæˆ‘ä»¬ä»æ„æ€åˆ°åŸå‹ï¼Œå®æ–½ï¼Œæµ‹è¯•ï¼Œä¸ºå¤šç§ä½“ç³»ç»“æ„æ„å»ºï¼Œå‘å¸ƒï¼Œåˆ¶ä½œäº†æœ‰å…³æ­¤ç®€å•å®ç”¨ç¨‹åºçš„æ•™ç¨‹è§†é¢‘å’Œå®£ä¼ åšå®¢ã€‚è¯·éšæ—¶å®‰è£…å®ƒï¼Œå¹¶è®©æˆ‘ä»¬çŸ¥é“æ‚¨çš„æƒ³æ³•ã€‚ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://popey.com/blog/2021/01/hush-keyboards-with-hushboard/">https://popey.com/blog/2021/01/hush-keyboards-with-hushboard/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/éº¦å…‹é£/">#éº¦å…‹é£</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/æ„å»º/">#æ„å»º</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>