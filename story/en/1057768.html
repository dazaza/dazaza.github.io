<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>å¦‚æœæ‚¨æ˜¯JavaScriptçš„æ–°æ‰‹ï¼Œè¯·ä¸ç”¨æˆ·å¡«å……ç‰©ä¿®è¡¥ Tinker with userscripts, if you are new to JavaScript</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">Tinker with userscripts, if you are new to JavaScript<br/>å¦‚æœæ‚¨æ˜¯JavaScriptçš„æ–°æ‰‹ï¼Œè¯·ä¸ç”¨æˆ·å¡«å……ç‰©ä¿®è¡¥ </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-04-12 15:28:59</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/4/d2a905bc7906f1d6b94676707a0f2e26.jpeg"><img src="http://img2.diglog.com/img/2021/4/d2a905bc7906f1d6b94676707a0f2e26.jpeg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Hello stranger! So this might come as an unexpected advice. But if you&#39;re new to JavaScript or Web development in general, you really should consider playing around with userscripts.</p><p>ä½ å¥½ï¼Œé™Œç”Ÿäººï¼æ‰€ä»¥è¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„å»ºè®®ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ï¼†ï¼ƒ39;ä¸€èˆ¬æ¥è¯´ï¼Œä½ åº”è¯¥è€ƒè™‘ä¸usercriptsä¸€èµ·ç©çš„ã€‚</p><p> In this article, I will try to explain what are userscripts, why I feel they are still relevant, and why you should try to make your own.</p><p> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä¼šå°è¯•è§£é‡Šä»€ä¹ˆæ˜¯ç”¨æˆ·å¡«å……ç‰©ï¼Œä¸ºä»€ä¹ˆæˆ‘è§‰å¾—å®ƒä»¬ä»ç„¶æ˜¯ç›¸å…³çš„ï¼Œä¸ºä»€ä¹ˆä½ åº”è¯¥å°è¯•è‡ªå·±åˆ¶ä½œã€‚</p><p>  UserScripts are JavaScript programs that let you alter the behavior of a Web page. If you want the full definition, you can checkout the  Wikipedia definition. In a nutshell, they let you customize any webpage you want.</p><p>  ç”¨æˆ·åæ˜¯JavaScriptç¨‹åºï¼Œå¯è®©æ‚¨æ›´æ”¹ç½‘é¡µçš„è¡Œä¸ºã€‚å¦‚æœæ‚¨æƒ³è¦å®Œæ•´çš„å®šä¹‰ï¼Œæ‚¨å¯ä»¥æ£€æŸ¥ç»´åŸºç™¾ç§‘å®šä¹‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œä»–ä»¬è®©æ‚¨è‡ªå®šä¹‰æ‰€éœ€çš„ä»»ä½•ç½‘é¡µã€‚</p><p> But now you might wonder;  &#34;what&#39;s so useful about this?&#34; well, they are a gamechanger. Think about it, you can inject any JavaScript code you like. This means you can also inject CSS and HTML. Practically, any website you visit can be altered the way you want it!</p><p> ä½†ç°åœ¨ä½ å¯èƒ½æƒ³çŸ¥é“; ï¼†ï¼ƒ34;ä»€ä¹ˆï¼†ï¼ƒ39;è¿™å¯¹æ­¤æœ‰ç”¨ï¼Ÿï¼†ï¼ƒ34;å¥½å§ï¼Œä»–ä»¬æ˜¯ä¸€ä¸ªæ¸¸æˆæœºã€‚è€ƒè™‘ä¸€ä¸‹ï¼Œæ‚¨å¯ä»¥æ³¨å…¥æ‚¨å–œæ¬¢çš„JavaScriptä»£ç ã€‚è¿™æ„å‘³ç€æ‚¨è¿˜å¯ä»¥æ³¨å…¥CSSå’ŒHTMLã€‚å®é™…ä¸Šï¼Œæ‚¨è®¿é—®çš„ä»»ä½•ç½‘ç«™éƒ½å¯ä»¥æ”¹å˜æ‚¨æƒ³è¦çš„æ–¹å¼ï¼</p><p> Let&#39;s suppose you&#39;re learning Web development, and you want to add dark mode to Instagram. Well you can! You just need to fire up your dev tools, write the CSS you want and inject it via JavaScript. One interesting example is this  translate-json userscript I made you can checkout.</p><p> è®©ï¼†ï¼ƒ39; så‡è®¾ä½ å’Œï¼ƒ39;é‡æ–°å­¦ä¹ Webå¼€å‘ï¼Œå¹¶ä¸”æƒ³è¦å°†é»‘æš—æ¨¡å¼æ·»åŠ åˆ°Instagramã€‚å¥½å§ï¼Œä½ å¯ä»¥ï¼æ‚¨åªéœ€è§¦å‘DEVå·¥å…·ï¼Œè¯·ç¼–å†™æ‰€éœ€çš„CSSå¹¶é€šè¿‡JavaScriptæ³¨å…¥å®ƒã€‚ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­æ˜¯è¿™ç§ç¿»è¯‘-JSOSç”¨æˆ·è„šæœ¬ï¼Œæˆ‘è®©ä½ å¯ä»¥ç»“è´¦ã€‚</p><p> The true strength of userscripts through is that you can install 3rd party userscripts. Usually if you think of something, there might be a developer who sank some time developing a userscript for it. You can find really useful  userscripts in Github or  Greasyfork.</p><p> é€šè¿‡çš„çœŸæ­£å®åŠ›é€šè¿‡å®ƒå¯ä»¥å®‰è£…ç¬¬ä¸‰æ–¹ç”¨æˆ·è„šæœ¬ã€‚é€šå¸¸ï¼Œå¦‚æœæ‚¨æƒ³åˆ°æŸäº›äº‹æƒ…ï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œä»–ä»¬é™·å…¥äº†ä¸€äº›æ—¶é—´ä¸ºå®ƒå¼€å‘ç”¨æˆ·è„šæœ¬ã€‚æ‚¨å¯ä»¥åœ¨Githubæˆ–Greasyforkæ‰¾åˆ°çœŸæ­£æœ‰ç”¨çš„ç”¨æˆ·è„šæœ¬ã€‚</p><p>      Of course, the main subject here is that we want to create our own userscripts. So now that we got this out of the way let&#39;s have some fun.</p><p>      å½“ç„¶ï¼Œè¿™é‡Œçš„ä¸»è¦ç§‘ç›®æ˜¯æˆ‘ä»¬æƒ³è¦åˆ›å»ºè‡ªå·±çš„ç”¨æˆ·è„šæœ¬ã€‚æ‰€ä»¥ç°åœ¨æˆ‘ä»¬æŠŠå®ƒèµ¶åˆ°äº†è®©ï¼†ï¼ƒ39;ç¥ä½ æœ‰ä¸€äº›ä¹è¶£ã€‚ </p><p>  Userscripts are executed by a specific extension, it will let you manage your installed userscripts and help you understand where they will be ran for example.</p><p>ç”¨æˆ·æ ‡è®°ç”±ç‰¹å®šçš„æ‰©å±•æ‰§è¡Œï¼Œå®ƒå°†è®©æ‚¨ç®¡ç†å·²å®‰è£…çš„ç”¨æˆ·å¡«å……ç‰©å¹¶å¸®åŠ©æ‚¨äº†è§£å®ƒä»¬å°†åœ¨rançš„ä½ç½®ã€‚</p><p> If you&#39;re a Chrome ( or other Chromium-based browser) user, you&#39;ll have to install  TamperMonkey ğŸ”³. Once installed, it will open a page with a disclaimer just in case.</p><p> å¦‚æœä½ ï¼†ï¼ƒ39;é‡æ–°é“¬ï¼ˆæˆ–å…¶ä»–åŸºäºé“¬çš„æµè§ˆå™¨ï¼‰ç”¨æˆ·ï¼Œä½ ï¼†ï¼ƒ39; llå¿…é¡»å®‰è£…tampermonkeyğŸ”³ã€‚ä¸€æ—¦å®‰è£…ï¼Œå®ƒå°†åœ¨æ¡ˆä»¶ä¸­æ‰“å¼€ä¸€ä¸ªå…è´£å£°æ˜çš„é¡µé¢ã€‚</p><p>  Once it&#39;s done, locate the GreaseMonkey/TamperMonkey icon in the extension bar and click on it and choose the  &#34;New user script...&#34;/ &#34;Add a new script...&#34;, you will be greeted with a window as below:</p><p>  ä¸€æ—¦å®ƒå®Œæˆï¼Œå°±å®Œæˆäº†æ‰©å±•æ ä¸­çš„Greasemonkey / Tampermonkeyå›¾æ ‡ï¼Œç„¶åç‚¹å‡»å®ƒå¹¶é€‰æ‹©ï¼†ï¼ƒ34;æ–°ç”¨æˆ·è„šæœ¬...ï¼†ï¼ƒ34; /ï¼†ï¼ƒ34;æ·»åŠ ä¸€ä¸ªæ–°è„šæœ¬.. ã€‚ï¼†ï¼ƒ34;ï¼Œæ‚¨å°†è¢«æ‰“æ‹›å‘¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>     Now that you are all set, letâ€™s examine this generated code and try to make something simple.</p><p>     æ—¢ç„¶æ‚¨éƒ½è®¾ç½®äº†ï¼Œè®©æˆ‘ä»¬æ¥æ£€æŸ¥è¿™ä¸ªç”Ÿæˆçš„ä»£ç å¹¶å°è¯•ç®€å•ã€‚</p><p>  You will notice that GreaseMonkey and TamperMonkey have already added you a small header of comments to your userscript. This is the most important part of your script. It will define the name, version, description and other info. I&#39;ll be talking about the script auto-generated by Tampermonkey since it&#39;s more complete.</p><p>  æ‚¨ä¼šæ³¨æ„åˆ°Greasemonkeyå’ŒTampermonkeyå·²ç»å‘æ‚¨çš„ç”¨æˆ·è„šæœ¬æ·»åŠ äº†ä¸€å°éƒ¨åˆ†è¯„è®ºã€‚è¿™æ˜¯æ‚¨è„šæœ¬ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ã€‚å®ƒå°†å®šä¹‰åç§°ï¼Œç‰ˆæœ¬ï¼Œæè¿°å’Œå…¶ä»–ä¿¡æ¯ã€‚æˆ‘ï¼†ï¼ƒ39; llè°ˆè®ºç”±tampermonkeyè‡ªåŠ¨ç”Ÿæˆçš„è„šæœ¬è‡ªï¼†ï¼ƒ39æ›´å®Œæ•´ã€‚</p><p> // ==UserScript== // @name My cool userscript // @namespace https://backup-blog.tarekjellali.com/ // @version 0.1 // @description try to take over the world! // @author You // @match https://backup-blog.tarekjellali.com/ // @grant none // ==/UserScript==(  function( ) { ;  console.log( &#39;Hello world! This is some injected JS!&#39;); })();</p><p> // == userscript == // @nameæˆ‘çš„cool userscript // @namespace https://backup-blog.tarekjelli.com/ // @version 0.1 // @descriptionå°è¯•æ¥ç®¡ä¸–ç•Œï¼ // @authorä½ // @match httpsï¼š//backup-blog.tarekjellali.com/ // @grant none // == / userscript ==ï¼ˆfunctionï¼ˆï¼‰{; console.logï¼ˆï¼†ï¼ƒ39;æ‚¨å¥½ä¸–ç•Œï¼è¿™æ˜¯ä¸€äº›æ³¨å°„çš„JSï¼ï¼†ï¼ƒ39;ï¼‰;}ï¼‰ï¼ˆï¼‰;</p><p> Below the Tampermoneky code auto-generated that I&#39;ve altered to run on my blog, you can safely copy-paste it and refresh this page. If you then look at your console, you will see that  console.log.</p><p> ä¸‹é¢çš„Tampermonekyä»£ç è‡ªåŠ¨ç”Ÿæˆæˆ‘ï¼†ï¼ƒ39; veæ›´æ”¹ä¸ºåœ¨æˆ‘çš„åšå®¢ä¸Šè¿è¡Œï¼Œæ‚¨å¯ä»¥å®‰å…¨åœ°å¤åˆ¶å®ƒå¹¶åˆ·æ–°æ­¤é¡µé¢ã€‚å¦‚æœä½ çœ‹çœ‹ä½ çš„æ§åˆ¶å°ï¼Œä½ ä¼šçœ‹åˆ°console.logã€‚ </p><p> As you can see, everything looks straightforward. If you want to learn more about each of these userscript header variables you  can check the TamperMonkey documentation.</p><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä¸€åˆ‡éƒ½å¾ˆç›´æˆªäº†å½“ã€‚å¦‚æœæ‚¨æƒ³äº†è§£æœ‰å…³è¿™äº›usercriptæ ‡å¤´å˜é‡ä¸­çš„æ¯ä¸€ä¸ªçš„æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æ£€æŸ¥Tampermonkeyæ–‡æ¡£ã€‚</p><p> The most important value to look for is  @match which tells TamperMonkey where to run your script. For this specific situation, we&#39;ve set  https://blog.tarekjellali.com as the domain we want this script to be ran at. You can also use  @include which will give you a more granular control. The difference between the two is that  @include can work with regular expressions while  @match doesn&#39;t,  as pointed out here.</p><p> å¯»æ‰¾æœ€é‡è¦çš„ä»·å€¼æ˜¯@matchï¼Œå®ƒå‘Šè¯‰Tampermonkeyåœ¨å“ªé‡Œè¿è¡Œè„šæœ¬ã€‚å¯¹äºè¿™ä¸ªå…·ä½“æƒ…å†µï¼Œæˆ‘ä»¬ï¼†ï¼ƒ39; Ve Set https://blog.tarekjellai.comä½œä¸ºæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªè„šæœ¬çš„åŸŸåæ˜¯ranã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨@includeï¼Œä¸ºæ‚¨æä¾›æ›´ç²’åº¦çš„æ§åˆ¶ã€‚ä¸¤è€…ä¹‹é—´çš„å·®å¼‚æ˜¯@Includeå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œè€Œ@Matchåˆ™ä¸è¿™é‡ŒæŒ‡å‡ºã€‚</p><p> Okay, now let&#39;s get into the real deal. After the header, you can notice a function ( more accurately IIFE) that is supposed to contain the code you want to inject. In our case, I&#39;ve just added a  console.log.</p><p> å¥½çš„ï¼Œç°åœ¨è®©ï¼†ï¼ƒ39è¿›å…¥çœŸæ­£çš„äº¤æ˜“ã€‚æ ‡é¢˜ä¹‹åï¼Œæ‚¨å¯ä»¥æ³¨æ„åˆ°åº”è¯¥åŒ…å«è¦æ³¨å…¥çš„ä»£ç çš„å‡½æ•°ï¼ˆæ›´å‡†ç¡®çš„iifeï¼‰ã€‚åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œæˆ‘åˆšåˆšæ·»åŠ äº†ä¸€ä¸ªconsole.logã€‚</p><p>  Now you might ask yourself a lot of questions, I&#39;ll try to guess some of them;</p><p>  ç°åœ¨ä½ å¯èƒ½ä¼šé—®è‡ªå·±æœ‰å¾ˆå¤šé—®é¢˜ï¼Œæˆ‘è¯•å›¾çŒœæƒ³å…¶ä¸­ä¸€äº›;</p><p>  Okay you might not have asked yourself the last question,  but I did. I wrote some userscripts mostly for work or for fun, but I found it daunting if the script became complicated. Plus since I&#39;m invested a lot into TypeScript, I didn&#39;t like working without the luxury of type checking.</p><p>  å¥½çš„ï¼Œä½ å¯èƒ½æ²¡æœ‰é—®è‡ªå·±æ˜¯æœ€åä¸€ä¸ªé—®é¢˜ï¼Œä½†æˆ‘åšåˆ°äº†ã€‚æˆ‘ä¸»è¦ä¸ºå·¥ä½œæˆ–å¨±ä¹æä¾›äº†ä¸€äº›ç”¨æˆ·æ†ï¼Œä½†å¦‚æœå‰§æœ¬å˜å¾—å¤æ‚ï¼Œæˆ‘å‘ç°å®ƒä»¤äººç”Ÿç•ã€‚åŠ ä¸Šè‡ªIï¼†ï¼ƒ39; MæŠ•å…¥äº†å¾ˆå¤šç±»å‹çš„ç±»å‹ï¼Œæˆ‘æ²¡æœ‰å–œæ¬¢å·¥ä½œè€Œæ²¡æœ‰ç±»å‹æ£€æŸ¥çš„å·¥ä½œã€‚</p><p> This is where I present to you my humble  greasemonkey-webpack-typescript-boilerplate (yes I know, the name is not original at all). But the main purpose of this boilerplate is to provide you with enough convenient tools to start building. You can import SASS/SCSS/CSS files easily and inject them. You can also import HTML as modules then easily inject them into a page.</p><p> è¿™æ˜¯æˆ‘å‘ˆç°ç»™ä½ æˆ‘çš„æ„šè ¢çš„greasemonkey-webpack-typescript-batherplateï¼ˆæ˜¯çš„ï¼Œæˆ‘çŸ¥é“ï¼Œè¿™ä¸ªåå­—æ ¹æœ¬ä¸æ˜¯åŸåˆ›çš„ï¼‰ã€‚ä½†æ˜¯è¿™æ¬¾æ°´æ¿çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºæ‚¨æä¾›è¶³å¤Ÿçš„æ–¹ä¾¿å·¥å…·æ¥å¼€å§‹å»ºè®¾ã€‚æ‚¨å¯ä»¥è½»æ¾å¯¼å…¥SASS / SCS / CSSæ–‡ä»¶å¹¶æ³¨å…¥å®ƒä»¬ã€‚æ‚¨ä¹Ÿå¯ä»¥å°†HTMLå¯¼å…¥æ¨¡å—ï¼Œç„¶åè½»æ¾å°†å®ƒä»¬æ³¨å…¥é¡µé¢ã€‚</p><p>  If you&#39;re interested to get started with this boilerplate, just head to  my repository and locate the button  &#34;Use this template&#34; on the right corner just next the  About box. You&#39;ll be able to create your own repo, based on the boilerplate and without anything superfluous.</p><p>  å¦‚æœä½ ï¼†ï¼ƒ39;é—å˜±å…´è¶£å¼€å§‹ä½¿ç”¨è¿™ä¸ªæ ·æ¿ï¼Œåªéœ€å‘æˆ‘çš„å­˜å‚¨åº“å¼€å§‹ï¼Œæ‰¾åˆ°æŒ‰é’®ï¼†ï¼ƒ34;ä½¿ç”¨æ­¤æ¨¡æ¿ï¼†ï¼ƒ34;åœ¨å³ä¸Šè§’ï¼Œä¸‹ä¸€ä¸ªæ¡†ã€‚ä½ ï¼†ï¼ƒ39; llèƒ½å¤Ÿæ ¹æ®æ ·æ¿ï¼Œæ²¡æœ‰ä»»ä½•å¤šä½™çš„ä¸œè¥¿åˆ›å»ºè‡ªå·±çš„å›è´­ã€‚ </p><p> Once you&#39;ve created it, just clone your repo locally, open a terminal and input  npm i. This will install for you the few dependencies the project needs to build. Don&#39;t worry, by the time you build the script, the project will  not use external dependencies. Once npm finished, just open your project with your favorite code editor.</p><p>ä¸€æ—¦æ‚¨åˆ›å»ºäº†å®ƒï¼Œå°±ä¼šåœ¨æœ¬åœ°å…‹éš†æ‚¨çš„å›è´­ï¼Œæ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥NPM iã€‚è¿™å°†ä¸ºæ‚¨å®‰è£…é¡¹ç›®éœ€è¦æ„å»ºçš„å°‘æ•°ä¾èµ–å…³ç³»ã€‚æ‹…å¿ƒï¼Œå½“æ‚¨æ„å»ºè„šæœ¬æ—¶ï¼Œé¡¹ç›®ä¸ä¼šä½¿ç”¨å¤–éƒ¨ä¾èµ–é¡¹ã€‚ NPMå®Œæˆåï¼Œåªéœ€ä½¿ç”¨æ‚¨å–œæ¬¢çš„ä»£ç ç¼–è¾‘å™¨æ‰“å¼€æ‚¨çš„é¡¹ç›®ã€‚</p><p>  â”œğŸ“‚dist/â”œâ”€ğŸŸ¨ greasemonkey-webpack-typescript-boilerplate. user.jsâ”œğŸ“‚src/â”œâ”€ğŸ“‚html/â”‚ â””ğŸ“„main-content.htmlâ”œâ”€ğŸ“‚scss/â”‚ â””ğŸ¨style.scssâ””ğŸŸ¦ index.tsğŸŸ¨post-build.jsğŸŸ©package.jsonğŸ“¦webpack.config.js</p><p>  â”œğŸ“‚dist/â”œ - ğŸŸ¨greasemonkey-webpack-typescript-batherplateã€‚ user.jsâ”œğŸ“‚src/â”œ - ğŸ“‚html/â”‚â”‚main-content.htmlâ”œ - ğŸ“‚scss/â”‚â”‚â”‚style.scssâ””ğŸŸ¦index.tsige.taÅ¾post-build.jsğŸŸ©package.jsonğŸ“¦webpack.config .js.</p><p> Though I hope it&#39;s self explanatory, let&#39;s go through the files to quickly understand the structure;</p><p> è™½ç„¶æˆ‘å¸Œæœ›å®ƒï¼†ï¼ƒ39; sè‡ªæˆ‘è§£é‡Šï¼Œè®©ï¼†ï¼ƒ39; sé€šè¿‡æ–‡ä»¶å¿«é€Ÿç†è§£ç»“æ„;</p><p> The  dist/ folder will contain your userscript. What&#39;s convenient about this is that you can just link the raw file via Github TamperMonkey/GreaseMonkey will recognize it and prompt you if you want to install it.</p><p> Dist /æ–‡ä»¶å¤¹å°†åŒ…å«æ‚¨çš„ç”¨æˆ·è„šæœ¬ã€‚ä»€ä¹ˆï¼†ï¼ƒ39;æ–¹ä¾¿çš„æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡github tampermonkey / greasemonkeyå°†åŸå§‹æ–‡ä»¶é“¾æ¥è¯†åˆ«å®ƒå¹¶æç¤ºæ‚¨å¦‚æœè¦å®‰è£…å®ƒã€‚</p><p> Under the  src /folder it&#39;s straightforward: main-content.html contains your HTML to inject. You can add whatever you want or simply omit it if you don&#39;t need it.</p><p> åœ¨SRC /æ–‡ä»¶å¤¹ä¸‹ï¼Œå®ƒç›´æˆªäº†å½“ï¼šmain-content.htmlåŒ…å«æ‚¨çš„HTMLæ¥æ³¨å…¥ã€‚å¦‚æœæ‚¨ä¸éœ€è¦å®ƒï¼Œæ‚¨å¯ä»¥æ·»åŠ ä»»ä½•æ‚¨æƒ³è¦çš„æˆ–åªæ˜¯çœç•¥å®ƒã€‚</p><p> style.scss contains all your styles. If you want, you can write CSS there but I highly advice you to try to write SCSS, it&#39;s fun ğŸ˜€ !</p><p> style.scssåŒ…å«æ‰€æœ‰é£æ ¼ã€‚å¦‚æœä½ æƒ³è¦çš„è¯ï¼Œä½ å¯ä»¥åœ¨é‚£é‡Œå†™ä¸‹CSSï¼Œä½†æˆ‘éå¸¸å»ºè®®ä½ è¯•å›¾å†™å…¥SCSSï¼Œå®ƒï¼†ï¼ƒ39;å¾ˆæœ‰è¶£â™¥ï¼</p><p> index.ts contains your main entry point. You can add more TS files and import them and so on. As you might have noticed, I&#39;ve just included the bare minimum as follows:</p><p> index.tsåŒ…å«æ‚¨çš„ä¸»è¦å…¥å£ç‚¹ã€‚æ‚¨å¯ä»¥æ·»åŠ æ›´å¤šTSæ–‡ä»¶å¹¶å¯¼å…¥å®ƒä»¬ç­‰ã€‚æ­£å¦‚æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°çš„é‚£æ ·ï¼Œæˆ‘ï¼†ï¼ƒ39; veåªæ˜¯åŒ…æ‹¬ä¸‹é¢çš„æœ€ä½é™åº¦å¦‚ä¸‹ï¼š </p><p> import  &#34;./scss/style.scss&#34;;  // Nothing else needed, the compiled CSS will be injected automatically import APP_HTML  from  &#34;./html/main-content.html&#34;;  // Your HTML you want to inject export  class App {  constructor( ) {  this.injectHTML(APP_HTML);  // A console log to see if it&#39;s working  console.log( &#34;If you see this message, it means that the script has been injected :)&#34;); }  /** * A simple method that will append your HTML at the end of the body tag */  private injectHTML(htmlContent:  string) {  document.querySelector( &#34;body&#34;).insertAdjacentHTML( &#34;beforeend&#34;, htmlContent); }} // Create the app instance to run everything const yourAppInstance =  new App(); // A test log here too console.log(yourAppInstance);</p><p>è¿›å£ï¼†ï¼ƒ34; ./ scss / style.scssï¼†ï¼ƒ34 ;; //æ²¡æœ‰å…¶ä»–éœ€è¦çš„ï¼Œç¼–è¯‘çš„CSSå°†è‡ªåŠ¨æ³¨å…¥ä»ï¼†ï¼ƒ34ä¸­å¯¼å…¥app_html; ./ html / main-content.htmlï¼†ï¼ƒ34 ;; //æ‚¨æƒ³è¦æ³¨å…¥çš„HTMLå¯¼å‡ºç±»APP {Constructorï¼ˆï¼‰{this.injecthtmlï¼ˆapp_htmlï¼‰; //æ§åˆ¶å°æ—¥å¿—çœ‹å®ƒï¼†ï¼ƒ39; så·¥ä½œconsole.logï¼ˆï¼†ï¼ƒ34;å¦‚æœæ‚¨çœ‹åˆ°æ­¤æ¶ˆæ¯ï¼Œè¿™æ„å‘³ç€è„šæœ¬å·²è¢«æ³¨å…¥:)ï¼‰ï¼†ï¼ƒ34;ï¼‰; } / ** *ä¸€ä¸ªç®€å•çš„æ–¹æ³•å°†åœ¨æ­£æ–‡æ ‡ç­¾* / private injecthtmlï¼ˆhtmlContentï¼šStringï¼‰{document.querySelectorï¼ˆï¼†ï¼ƒ34;èº«ä½“ï¼†ï¼ƒ34;ï¼‰{document.quercertectorï¼ˆhtmlcontentï¼šstringï¼‰{document.queryselectorï¼ˆï¼†ï¼ƒ34;ï¼‰ã€‚InsterAdjententhtmlï¼ˆï¼†ï¼ƒ34;ä¹‹å‰ï¼†ï¼ƒ34;ï¼Œhtmlcontentï¼‰; }} //åˆ›å»ºåº”ç”¨ç¨‹åºå®ä¾‹æ¥è¿è¡Œæ‰€æœ‰å†…å®¹const alappinstance = new appï¼ˆï¼‰; //ä¸€ä¸ªæµ‹è¯•æ—¥å¿—å¤ªçª¥æ¢äº†</p><p>  Edit the  ğŸŸ©package.json and change the  name, version, description, author, licence, bugs.url and homepage values to your liking.</p><p>  ç¼–è¾‘ğŸŸ©Package.jsonå¹¶å°†åç§°ï¼Œç‰ˆæœ¬ï¼Œæè¿°ï¼Œä½œè€…ï¼Œè®¸å¯è¯ï¼Œé”™è¯¯.URLå’Œä¸»é¡µå€¼æ›´æ”¹ä¸ºæ‚¨çš„å–œå¥½ã€‚</p><p> In  ğŸŸ¨post-build.js change line 24 and 25 ( @match and @grant) to fit your needs. The other values as you might notice in the script are extracted from your  ğŸŸ©package.json.</p><p> åœ¨ğŸŸ¨post-build.jsæ›´æ”¹ç¬¬24è¡Œå’Œ25ï¼ˆ@matchå’Œ@grantï¼‰ä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚æ‚¨å¯ä»¥åœ¨è„šæœ¬ä¸­æ³¨æ„åˆ°çš„å…¶ä»–å€¼æ˜¯ä»ğŸŸ©Package.jsonä¸­æå–çš„ã€‚</p><p> To build your script, simply run  npm run build and your script will be generated in the  dist/ folder. If you&#39;ve named your package correctly, your userscript will be named  [your_package_name].user.js.</p><p> è¦æ„å»ºè„šæœ¬ï¼Œåªéœ€è¿è¡ŒNPMè¿è¡Œæ„å»ºï¼Œæ‚¨çš„è„šæœ¬å°†åœ¨Dist /æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆã€‚å¦‚æœæ‚¨æ­£ç¡®åœ°å‘½åäº†æ‚¨çš„åŒ…è£¹ï¼Œæ‚¨çš„ç”¨æˆ·è„šæœ¬å°†è¢«å‘½åä¸º[your_package_name] .user.jsã€‚</p><p>  In this article I&#39;ve tried to present you userscripts and why they can help you learn Web development and JavaScript in a different way. What I really like about this approach is that you go in the filed and start hacking things. This helps you understand how a lot of websites and web-apps work. I really hope this was helpful for you and I wish you the best in your development journey.</p><p>  åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘è¯•å›¾å‘æ‚¨å±•ç¤ºæ‚¨çš„ç”¨æˆ·è„šæœ¬ä»¥åŠä¸ºä»€ä¹ˆå¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å¸®åŠ©æ‚¨å­¦ä¹ Webå¼€å‘å’ŒJavaScriptã€‚æˆ‘çœŸæ­£å–œæ¬¢è¿™ç§æ–¹æ³•æ˜¯ä½ è¿›å…¥æäº¤å¹¶å¼€å§‹é»‘å®¢çš„ä¸œè¥¿ã€‚è¿™æœ‰åŠ©äºæ‚¨äº†è§£å¤§é‡ç½‘ç«™å’ŒWebåº”ç”¨ç¨‹åºçš„å·¥ä½œã€‚æˆ‘çœŸçš„å¸Œæœ›è¿™å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œç¥ä½ åœ¨å¼€å‘ä¹‹æ—…ä¸­æ˜¯æœ€å¥½çš„ã€‚</p><p> As usual, if I made some mistake or forgot to mention something, you know the drill.</p><p> åƒå¾€å¸¸ä¸€æ ·ï¼Œå¦‚æœæˆ‘çŠ¯äº†ä¸€äº›é”™è¯¯æˆ–å¿˜äº†æåˆ°çš„ä¸œè¥¿ï¼Œä½ å°±ä¼šçŸ¥é“é’»å¤´ã€‚ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.tarekjellali.com/new-to-javascript-you-should-tinker-with-userscripts">https://blog.tarekjellali.com/new-to-javascript-you-should-tinker-with-userscripts</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/æ–°æ‰‹/">#æ–°æ‰‹</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>