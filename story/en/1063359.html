<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>PWASä½œä¸ºURLå¤„ç†ç¨‹åº PWAs as URL Handlers</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">PWAs as URL Handlers<br/>PWASä½œä¸ºURLå¤„ç†ç¨‹åº </h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2021-06-04 04:11:32</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2021/6/6647c523e0c399813ea5704998c4eba5.jpg"><img src="http://img2.diglog.com/img/2021/6/6647c523e0c399813ea5704998c4eba5.jpg" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>PWAs as URL Handlers is part of the  capabilities projectand is currently in development. This post will be updated as the implementation progresses.</p><p>ä½œä¸ºURLå¤„ç†ç¨‹åºçš„PWAæ˜¯Projectsandçš„ä¸€éƒ¨åˆ†ï¼Œç›®å‰æ­£åœ¨å¼€å‘ä¸­ã€‚è¿™ç¯‡æ–‡ç« å°†åœ¨æ‰§è¡Œè¿›å±•æƒ…å†µæ—¶æ›´æ–°ã€‚</p><p>  Imagine you are chatting with a friend using an instant messenger application like Messages on macOSand you are talking about music. Further imagine you both have the  music.example.com PWA installedon your devices. If you want to share your favorite track for your friend to enjoy, you can sendthem a deep link like  https://music.example.com/rick-astley/never-gonna-give-you-up. Since thislink is pretty long, the developers of  music.example.com may have decided to add an additionalshort link to each track, like, for example,  https://ğŸµ.example.com/r-a/n-g-g-y-u.</p><p>  æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨ä¸æœ‹å‹èŠå¤©ä½¿ç”¨å³æ—¶é€šä¿¡åº”ç”¨ç¨‹åºï¼Œå¦‚éº¦æ–¯å…°ç¾¤å²›ä¸Šçš„æ¶ˆæ¯ä½ æ­£åœ¨è°ˆè®ºéŸ³ä¹ã€‚è¿›ä¸€æ­¥æƒ³è±¡ä½ éƒ½æœ‰Music.example.com PWA Signdonä½ çš„è®¾å¤‡ã€‚å¦‚æœæ‚¨æƒ³ä¸ºæ‚¨çš„æœ‹å‹åˆ†äº«æ‚¨æœ€å–œæ¬¢çš„æ›²ç›®æ¥äº«å—ï¼Œæ‚¨å¯ä»¥æ´¾é£ä¸€ä¸ªåƒhttps://music.example.com/rick-astley/never-gonna-give-you-upè¿™æ ·çš„æ·±å±‚é“¾æ¥ã€‚ç”±äºThislinkå¾ˆé•¿ï¼ŒMusic.example.comçš„å¼€å‘äººå‘˜å¯èƒ½å·²ç»å†³å®šå°†AdformalShorté“¾æ¥æ·»åŠ åˆ°æ¯ä¸ªè½¨é“ï¼Œä¾‹å¦‚ï¼ŒHttpsï¼š//.example.com/r-a/n-g-g-y-uã€‚</p><p> PWA as URL Handlers allows apps like  music.example.com to register themselves as URL handlers forURLs that match patterns like  music.example.com,  *.music.example.com, or  ğŸµ.example.com, sothat links from outside of the PWA, for example, from an instant messenger application or an emailclient, open in the installed PWA rather than in a browser tab.</p><p> PWAä½œä¸ºURLå¤„ç†ç¨‹åºå…è®¸åƒMusic.example.comè¿™æ ·çš„åº”ç”¨ç¨‹åºä½œä¸ºURLå¤„ç†ç¨‹åºæ‰˜ç®¡ï¼Œè¯¥ç½‘å€è‡´æ„ä¸Music.example.comï¼Œ* .music.example.comï¼Œæˆ–ğŸµ.example.comï¼Œæ¥è‡ªå¤–é¢çš„sothaté“¾æ¥ä¾‹å¦‚ï¼ŒPWAä»å³æ—¶é€šä¿¡åº”ç”¨ç¨‹åºæˆ–ç”µå­é‚®ä»¶é“¾æ¥ï¼Œåœ¨å·²å®‰è£…çš„PWAä¸­æ‰“å¼€è€Œä¸æ˜¯åœ¨æµè§ˆå™¨é€‰é¡¹å¡ä¸­ã€‚</p><p>     Music or video streaming sites so track links or playlist links open in the player experience ofthe app.</p><p>     éŸ³ä¹æˆ–è§†é¢‘æµåª’ä½“ç«™ç‚¹ï¼Œä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºçš„æ’­æ”¾å™¨ä½“éªŒä¸­æ’­æ”¾é“¾æ¥æˆ–æ’­æ”¾åˆ—è¡¨é“¾æ¥ã€‚</p><p> News or RSS readers so followed or subscribed-to sites open in the app&#39;s reader mode.</p><p> æ–°é—»æˆ–RSSè¯»è€…å¦‚æ­¤éµå¾ªæˆ–è®¢é˜…åˆ°Appï¼†ï¼ƒ39; Sè¯»å¡å™¨æ¨¡å¼ä¸‹çš„ç½‘ç«™ã€‚</p><p>     To experiment with PWAs as URL Handlers locally, without an origin trial token, enable the #enable-desktop-pwas-url-handling flag in  about://flags.</p><p>     è¦åœ¨æœ¬åœ°ä½œä¸ºURLå¤„ç†ç¨‹åºè¿›è¡Œå®éªŒï¼Œåœ¨æ²¡æœ‰åŸå§‹è¯•ç”¨ä»¤ç‰Œçš„æƒ…å†µä¸‹ï¼Œè¯·å¯ç”¨#endent-Desktop-PWAS-URLå¤„ç†æ ‡å¿—ï¼š//æ ‡å¿—ã€‚</p><p> Support for the PWAs as URL Handlers feature is limited to desktop operating systemslike Windows, macOS, and Linux. On Android, Chromium browsers install PWAs by generating a WebAPK, which can register aset of intent filters for all URLs within the scope of the app. This means that PWAs already handleassociated URLs on Android at the operating system level using intent filters.</p><p> æ”¯æŒPWAä½œä¸ºURLå¤„ç†ç¨‹åºåŠŸèƒ½ä»…é™äºæ¡Œé¢æ“ä½œç³»ç»Ÿçš„Windowsï¼ŒMacOSå’ŒLinuxã€‚åœ¨Androidä¸­ï¼ŒChromiumæµè§ˆå™¨é€šè¿‡ç”ŸæˆWebApkæ¥å®‰è£…PWAï¼Œè¿™å¯ä»¥ä¸ºåº”ç”¨èŒƒå›´å†…çš„æ‰€æœ‰URLæ³¨å†ŒASET Intentè¿‡æ»¤å™¨ã€‚è¿™æ„å‘³ç€PWAä½¿ç”¨æ„å›¾è¿‡æ»¤å™¨åœ¨æ“ä½œç³»ç»Ÿçº§åˆ«å¤„ç†äº†Androidçš„URLã€‚ </p><p>  To associate an installed PWA with URL patterns, these patterns need to be specified in the web appmanifest. This happens through the  &#34;url_handlers&#34; member. It accepts an array of objects with an origin property, which is a required  string that is a pattern for matching origins. Thesepatterns are allowed to have a wildcard ( *) prefix in order to include multiple sub-domains (like *.example.com). URLs that match these origins could be handled by this web app. The scheme isalways assumed to be  https://.</p><p>è¦å°†å®‰è£…çš„PWAä¸URLæ¨¡å¼ç›¸å…³è”ï¼Œéœ€è¦åœ¨Web AppManifestä¸­æŒ‡å®šè¿™äº›æ¨¡å¼ã€‚è¿™å‘ç”Ÿåœ¨ï¼†ï¼ƒ34; url_handlersï¼†ï¼ƒ34;æˆå‘˜ã€‚å®ƒæ¥å—å…·æœ‰åŸå§‹å±æ€§çš„ä¸€ç³»åˆ—å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…éœ€çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯åŒ¹é…èµ·æºçš„æ¨¡å¼ã€‚å…è®¸TheSepatternså…·æœ‰é€šé…ç¬¦ï¼ˆ*ï¼‰å‰ç¼€ä»¥åŒ…æ‹¬å¤šä¸ªå­åŸŸï¼ˆå¦‚* .example.comï¼‰ã€‚åŒ¹é…è¿™äº›èµ·æºçš„URLå¯ä»¥ç”±æ­¤Webåº”ç”¨ç¨‹åºå¤„ç†ã€‚è¯¥æ–¹æ¡ˆIsalwaysè®¤ä¸ºæ˜¯httpsï¼š//ã€‚</p><p> The excerpt of a web app manifest below shows how the music PWA example from the introductoryparagraph could set this up. The second entry with the wildcard ( &#34;*.music.example.com&#34;) makes surethat the app also gets activated for  www.music.example.com or potential other examples like marketing-activity.music.example.com.</p><p> ä¸‹é¢çš„Webåº”ç”¨ç¨‹åºçš„æ‘˜å½•æ˜¾ç¤ºäº†æ¥è‡ªä»‹ç»orderparagraphçš„éŸ³ä¹PWAç¤ºä¾‹å¦‚ä½•è®¾ç½®ä¸ºæ­¤ã€‚ä¸é€šé…ç¬¦çš„ç¬¬äºŒä¸ªæ¡ç›®ï¼ˆï¼†ï¼ƒ34; *ã€‚Music.example.comï¼†ï¼ƒ34;ï¼‰ä½¿å¾—åº”ç”¨ç¨‹åºä¹Ÿè¢«æ¿€æ´»ä¸ºwww.music.example.comæˆ–æ½œåœ¨çš„å…¶ä»–ä¾‹å­ï¼Œå¦‚è¥é”€æ´»åŠ¨ã€‚ä¾‹å­ã€‚ COMã€‚</p><p>  {   &#34;url_handlers&#34; :  [   {   &#34;origin&#34; :  &#34;music.example.com&#34;   } ,   {   &#34;origin&#34; :  &#34;*.music.example.com&#34;   } ,   {   &#34;origin&#34; :  &#34;ğŸµ.example.com&#34;   }   ]  }</p><p>  {ï¼†ï¼ƒ34; url_handlersï¼†ï¼ƒ34; ï¼š[{ï¼†ï¼ƒ34;èµ·æºï¼†ï¼ƒ34; ï¼šï¼†ï¼ƒ34; music.example.comï¼†ï¼ƒ34; }ï¼Œ{ï¼†ï¼ƒ34;èµ·æºï¼†ï¼ƒ34; ï¼šï¼†ï¼ƒ34; *ã€‚Music.example.comï¼†ï¼ƒ34; }ï¼Œ{ï¼†ï¼ƒ34;èµ·æºï¼†ï¼ƒ34; ï¼šï¼†ï¼ƒ34;ğŸµ.example.comï¼†ï¼ƒ34; }]}</p><p> While in an online scenario, short links from  ğŸµ.example.com would typically beredirected to  music.example.com. Such navigation redirection is not a good alternative withrespect to offline scenarios. Therefore the app needs to register for both origins.</p><p> åœ¨åœ¨çº¿åœºæ™¯ä¸­ï¼ŒğŸµ.example.comçš„çŸ­é“¾æ¥é€šå¸¸ä¼šè¢«å‡»è´¥åˆ°Music.example.comã€‚æ­¤ç±»å¯¼èˆªé‡å®šå‘ä¸æ˜¯åç¦»çº¿ç¨‹æ–¹æ¡ˆçš„æ›¿ä»£æ–¹æ¡ˆã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºéœ€è¦æ³¨å†Œä¸¤é¡¹èµ·æºã€‚</p><p>  Since the PWA lives on a different origin ( music.example.com) than some of the URLs it needs tohandle (e.g.,  ğŸµ.example.com), the app needs to verify ownership of these other origins. Thishappens in a  web-app-origin-association file hosted on the other origins.</p><p>  ç”±äºPWAç”Ÿå­˜åœ¨ä¸åŒçš„åŸç‚¹ï¼ˆMusic.example.comï¼‰ä¸Šçš„æŸäº›URLï¼ˆä¾‹å¦‚ï¼ŒğŸµ.example.comï¼‰ï¼Œå› æ­¤è¯¥åº”ç”¨ç¨‹åºéœ€è¦éªŒè¯è¿™äº›å…¶ä»–é—®é¢˜çš„æ‰€æœ‰æƒã€‚åœ¨å¦ä¸€ä¸ªèµ·æºä¸Šæ‰˜ç®¡çš„Webåº”ç”¨ç¨‹åºæºå…³è”æ–‡ä»¶ä¸­çš„æ­¤Happensã€‚</p><p> This file must contain valid JSON. The top-level structure is an object, with a member named &#34;web_apps&#34;. This member is an array of objects and each object represents an entry for a uniqueweb app. Each object contains:</p><p> æ­¤æ–‡ä»¶å¿…é¡»åŒ…å«æœ‰æ•ˆçš„JSONã€‚é¡¶çº§ç»“æ„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…·æœ‰åä¸ºï¼†ï¼ƒ34; web_appsï¼†ï¼ƒ34;æ­¤æˆå‘˜æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½è¡¨ç¤ºuniqueebåº”ç”¨ç¨‹åºçš„æ¡ç›®ã€‚æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«ï¼š</p><p>    An example  web-app-origin-association file for the music PWA example from above is given below. Itwould be hosted on the origin  ğŸµ.example.com and establishes the association with the music.example.com PWA, identified by its web app manifest URL.</p><p>    ä¸‹é¢ç»™å‡ºäº†ä¸Šé¢çš„éŸ³ä¹PWAç¤ºä¾‹çš„ç¤ºä¾‹Web-App-æºå…³è”æ–‡ä»¶ã€‚å®ƒä¼šæ‰˜ç®¡åœ¨åŸäº§åœ°ğŸµ.example.comä¸Šï¼Œå¹¶å»ºç«‹ä¸Music.example.com PWAçš„å…³è”ï¼Œç”±å…¶Webåº”ç”¨ç¨‹åºæ¸…å•URLæ ‡è¯†ã€‚ </p><p>  {   &#34;web_apps&#34; :  [   {   &#34;manifest&#34; :  &#34;https://music.example.com/manifest.json&#34; ,   &#34;details&#34; :  {   &#34;paths&#34; :  [ &#34;/*&#34; ] ,   &#34;exclude_paths&#34; :  [ &#34;/internal/*&#34; ]   }   }   ]  }</p><p>{ï¼†ï¼ƒ34; web_appsï¼†ï¼ƒ34; ï¼š[{ï¼†ï¼ƒ34;æ¸…å•ï¼†ï¼ƒ34; ï¼šï¼†ï¼ƒ34; httpsï¼š//music.example.com/manifest.json&#34; ï¼Œï¼ƒ34;ç»†èŠ‚ï¼†ï¼ƒ34; ï¼š{ï¼†ï¼ƒ34;è·¯å¾„ï¼†ï¼ƒ34; ï¼š[ï¼†ï¼ƒ34; / *ï¼†ï¼ƒ34; ]ï¼Œï¼†ï¼ƒ34;æ’é™¤_pathsï¼†ï¼ƒ34; ï¼š[ï¼†ï¼ƒ34; /å†…éƒ¨/ *ï¼†ï¼ƒ34; ]}}]}}</p><p> The  web-app-origin-association file is similar to Apple&#39;s associated domain file, Android&#39;s  assetlinks.json file,and Windows&#39;  windows-app-web-link file.What differs is that the  web-app-origin-association file does not reference PWAs using aplatform-specific app ID, but by their web app manifest URL.</p><p> Web-App-Origineå…³è”æ–‡ä»¶ç±»ä¼¼äºAppleï¼†ï¼ƒ39; så…³è”åŸŸæ–‡ä»¶ï¼Œandroidï¼†ï¼ƒ39; s assetlinks.jsonæ–‡ä»¶ï¼Œä»¥åŠWindowsï¼†ï¼ƒ39; Windows-app-web-link file.Whatçš„ä¸åŒä¹‹å¤„åœ¨äºWeb-App-æº - å…³è”æ–‡ä»¶ä¸ä½¿ç”¨ç‰¹å®šäºAplatformçš„åº”ç”¨ç¨‹åºIDå¼•ç”¨PWAï¼Œè€Œæ˜¯ç”±å…¶Webåº”ç”¨ç¨‹åºæ¸…å•URLã€‚</p><p>  A PWA matches a URL for handling if both of the following conditions are fulfilled:</p><p>  å¦‚æœæ»¡è¶³ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼ŒPWAåŒ¹é…ç”¨äºå¤„ç†çš„URLï¼š</p><p> The browser is able to validate via the respective  web-app-origin-association file that eachorigin agrees to let this app handle such a URL.</p><p> æµè§ˆå™¨èƒ½å¤Ÿé€šè¿‡ç›¸åº”çš„Webåº”ç”¨ç¨‹åºæºå…³è”æ–‡ä»¶è¿›è¡ŒéªŒè¯ï¼Œæ¯ä¸ªGyp-app-æºå…³è”æ–‡ä»¶éƒ½åŒæ„è®©æ­¤åº”ç”¨ç¨‹åºå¤„ç†æ­¤ç±»URLã€‚</p><p>   Add a  &lt;link rel=&#34;web-app-origin-association&#34;&gt; element in the header section of the main documentat the origin&#39;s root path that points at the  web-app-origin-association file via the  hrefattribute.</p><p>   æ·»åŠ ï¼†lt;é“¾æ¥rel =ï¼†ï¼ƒ34; web-app-æº - åä¼šï¼†ï¼ƒ34;ï¼†gt;ä¸»æ–‡æ¡£çš„æ ‡é¢˜éƒ¨åˆ†ä¸­çš„å…ƒç´ ï¼†ï¼ƒ39; sé€šè¿‡hRefAttributeæŒ‡å‘Web-App-æºå…³è”æ–‡ä»¶çš„æ ¹è·¯å¾„ã€‚</p><p> Place the  web-app-origin-association file in the  /.well-known/ folder at the root of the app.For this to work, the file name must exactly be  web-app-origin-association.</p><p> å°†Webåº”ç”¨ç¨‹åºæºå…³è”æ–‡ä»¶æ”¾åœ¨åº”ç”¨ç¨‹åºçš„rootçš„/.well-known/æ–‡ä»¶å¤¹ä¸­ã€‚æ­¤é¡¹å·¥ä½œï¼Œæ–‡ä»¶åå¿…é¡»å®Œå…¨æ˜¯Web-App-æºå…³è”ã€‚</p><p>  To test PWAs as URL Handlers, be sure to  set the browser flag asoutlined above and then install the PWA at https://mandymsft.github.io/pwa/. By looking at its web app manifest, you can see that ithandles URLs with the following URL patterns:  https://mandymsft.github.io and https://luhuangmsft.github.io. Since the latter is on a different origin ( luhuangmsft.github.io)than the PWA, the PWA on  mandymsft.github.io needs to prove ownership, which happens via the web-app-origin-association file hosted at https://luhuangmsft.github.io/.well-known/web-app-origin-association.</p><p>  è¦å°†PWASè§†ä¸ºURLå¤„ç†ç¨‹åºï¼Œè¯·åŠ¡å¿…å°†æµè§ˆå™¨æ ‡å¿—æ”¾åœ¨ä¸Šé¢çš„æµè§ˆå™¨æ ‡å¿—ï¼Œç„¶ååœ¨https://mandymsft.github.io/pwa//ä¸Šå®‰è£…PWAã€‚é€šè¿‡æŸ¥çœ‹å…¶Webåº”ç”¨ç¨‹åºæ¸…å•ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å…·æœ‰ä»¥ä¸‹URLæ¨¡å¼çš„Ithands URLï¼šhttps://mandymsft.github.ioå’Œhttps://luhuangmsft.github.ioã€‚ç”±äºåè€…åœ¨ä¸åŒçš„åŸç‚¹ï¼ˆLuhuangmsft.githuit.ioï¼‰ï¼Œè€Œä¸æ˜¯PWAï¼ŒMandymsft.Github.ioä¸Šçš„PWAéœ€è¦è¯æ˜æ‰€æœ‰æƒï¼Œå®ƒé€šè¿‡HTTPSæ‰˜ç®¡çš„Web-App-æºå…³è”æ–‡ä»¶å‘ç”Ÿäº†æ‰€æœ‰æƒï¼š// luhuangmsft.github.io/.well-known/web-app-origin-associationã€‚ </p><p> To test that it is indeed working, send yourself a test message using an instant messaging app ofyour choice or an email viewed in an email client that is not web-based like Mail on macOS. Theemail or text message should contain either of the links  https://mandymsft.github.io or https://luhuangmsft.github.io. Both should open in the installed PWA.</p><p>è¦æµ‹è¯•å®ƒç¡®å®å·¥ä½œï¼Œè¯·ä½¿ç”¨å³æ—¶é‚®ä»¶åº”ç”¨ç¨‹åºçš„Inty Messagingåº”ç”¨ç¨‹åºå‘é€æµ‹è¯•æ¶ˆæ¯ï¼Œæˆ–è€…åœ¨ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä¸­æŸ¥çœ‹çš„ç”µå­é‚®ä»¶ï¼Œè¯¥ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä¸æ˜¯åŸºäºWebçš„é‚®ä»¶ã€‚ç”µå­é‚®ä»¶æˆ–çŸ­ä¿¡åº”åŒ…å«é“¾æ¥https://mandymsft.github.ioæˆ–https://luhuangmsft.github.ioã€‚ä¸¤è€…éƒ½åº”è¯¥åœ¨å®‰è£…çš„PWAä¸­æ‰“å¼€ã€‚</p><p>   The Chromium team has designed and implemented PWAs as URL Handlers using the core principlesdefined in  Controlling Access to Powerful Web Platform Features, including usercontrol, transparency, and ergonomics.</p><p>   Chromiumå›¢é˜Ÿä½¿ç”¨æ ¸å¿ƒåŸç†è®¾è®¡å’Œå®æ–½PWASä½œä¸ºURLå¤„ç†ç¨‹åºï¼Œä½¿ç”¨æ ¸å¿ƒåŸç†è¿›è¡Œæ§åˆ¶ï¼Œæ§åˆ¶æƒé™çš„è®¿é—®æƒé™ï¼ŒåŒ…æ‹¬UserControlï¼Œé€æ˜åº¦å’Œäººä½“å·¥ç¨‹å­¦ã€‚</p><p>  If more than one PWA registers as a URL handler for a given URL pattern, the user will be promptedto choose which PWA they want to handle the pattern withâ€”if any at all. Navigations that start in abrowser tab are not handled by this proposal, it is explicitly aimed at navigations that startoutside of the browser.</p><p>  å¦‚æœå¤šä¸ªPWAå¯„å­˜å™¨ä½œä¸ºç»™å®šURLæ¨¡å¼çš„URLå¤„ç†ç¨‹åºï¼Œåˆ™ä¼šæç¤ºç”¨æˆ·é€‰æ‹©å®ƒä»¬æƒ³è¦å¤„ç†å“ªäº›PWAï¼Œå¦‚æœæœ‰çš„è¯ - å¦‚æœæœ‰çš„è¯ã€‚åœ¨Aravereré€‰é¡¹å¡ä¸­å¼€å§‹çš„å¯¼èˆªæœªé€šè¿‡æ­¤æè®®å¤„ç†ï¼Œå®ƒæ˜ç¡®åœ°é’ˆå¯¹æµè§ˆå™¨å¯åŠ¨ä¸­æ–­çš„å¯¼èˆªã€‚</p><p>  If the necessary association validation cannot be completed successfully during PWA installation forany reason, the browser will not register the app as an active URL handler for the affected URLs.URL handlers, if improperly implemented, can be used to hijack traffic for websites. This is why theapp association mechanism is an important part of the scheme.</p><p>  å¦‚æœåœ¨PWAå®‰è£…æœŸé—´æ— æ³•æˆåŠŸå®Œæˆå¿…è¦çš„å…³è”éªŒè¯ï¼Œåˆ™æµè§ˆå™¨å°†ä¸ä¼šå°†åº”ç”¨ç¨‹åºæ³¨å†Œä¸ºå—å½±å“çš„URLS.URLå¤„ç†ç¨‹åºçš„æ´»åŠ¨URLå¤„ç†ç¨‹åºï¼Œå¦‚æœå®æ–½ä¸æ­£ç¡®ï¼Œå¯ç”¨äºä¸ºç½‘ç«™åŠ«æŒæµé‡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆTHEAPPåä¼šæœºåˆ¶æ˜¯è¯¥è®¡åˆ’çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p><p> Platform-specific applications can already use operating system APIs to enumerate installedapplications on the user&#39;s system. For example, applications on Windows can use the  FindAppUriHandlersAsyncAPI to enumerate URL handlers. If PWAs register as OS level URL handlers in Windows, their presencewould be visible to other applications.</p><p> ç‰¹å®šäºå¹³å°çš„åº”ç”¨ç¨‹åºå·²ç»å¯ä»¥ä½¿ç”¨æ“ä½œç³»ç»ŸAPIæšä¸¾ç”¨æˆ·ï¼†ï¼ƒ39; Sç³»ç»Ÿä¸Šçš„å·²æ›´æ”¹åº”ç”¨ç¨‹åºã€‚ä¾‹å¦‚ï¼ŒWindowsä¸Šçš„åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨FindAppUriHandLersAsAncapiæ¥æšä¸¾URLå¤„ç†ç¨‹åºã€‚å¦‚æœPWASåœ¨Windowsä¸­æ³¨å†Œä¸ºOSçº§åˆ«URLå¤„ç†ç¨‹åºï¼Œåˆ™å®ƒä»¬çš„å­˜åœ¨ä¼šå¯¹å…¶ä»–åº”ç”¨ç¨‹åºå¯è§ã€‚</p><p>  An origin could modify its associations with PWAs at any time. Browsers will regularly attempt torevalidate the associations of installed web apps. If a URL handler registration fails to revalidatebecause the association data has changed or is no longer available, the browser will removeregistrations.</p><p>  èµ·æºå¯ä»¥éšæ—¶ä¿®æ”¹å…¶å…³è”ä¸PWAã€‚æµè§ˆå™¨å°†å®šæœŸå°è¯•Torevalateå·²å®‰è£…çš„Webåº”ç”¨ç¨‹åºçš„å…³è”ã€‚å¦‚æœURLå¤„ç†ç¨‹åºæ³¨å†Œæœªèƒ½é‡æ–°éªŒè¯ï¼Œå› æ­¤å…³è”æ•°æ®å·²æ›´æ”¹æˆ–ä¸å†å¯ç”¨ï¼Œåˆ™æµè§ˆå™¨å°†é‡æ–°å¯åŠ¨ã€‚</p><p>  The Chromium team wants to hear about your experiences with the PWAs as URL Handlers.</p><p>  é“¬å›¢é˜Ÿå¸Œæœ›å¬åˆ°æ‚¨ä¸PWASä½œä¸ºURLå¤„ç†ç¨‹åºçš„ç»å†ã€‚ </p><p>  Is there something about the API that doesn&#39;t work like you expected? Or are there missing methodsor properties that you need to implement your idea? Have a question or comment on the securitymodel? File a spec issue on the corresponding  GitHub repo, or add your thoughts to anexisting issue.</p><p>æ˜¯å¦æœ‰å…³äºAPIçš„äº‹æƒ…ï¼Œè¿™ä¹Ÿåƒä½ ä¸€æ ·çš„å·¥ä½œï¼Ÿæˆ–è€…æ˜¯å¦æœ‰ç¼ºå°‘çš„æ–¹æ³•oréœ€è¦å®ç°æ‚¨çš„æƒ³æ³•ï¼Ÿå¯¹SecurityModelæœ‰ä¸€ä¸ªé—®é¢˜æˆ–è¯„è®ºï¼Ÿåœ¨ç›¸åº”çš„GitHub repoä¸Šæäº¤è§„æ ¼é—®é¢˜ï¼Œæˆ–å°†æ‚¨çš„æƒ³æ³•æ·»åŠ åˆ°Anexistingé—®é¢˜ã€‚</p><p>  Did you find a bug with Chromium&#39;s implementation? Or is the implementation different from the spec?File a bug at  new.crbug.com. Be sure to include as much detail as you can,simple instructions for reproducing, and enter  UI&gt;Browser&gt;WebAppInstalls in the  Componentsbox.  Glitch works great for sharing quick and easy repros.</p><p>  ä½ å‘ç°é“¬çš„è™«å­ï¼†ï¼ƒ39; sçš„å®æ–½å—ï¼Ÿæˆ–è€…ä»è§„èŒƒçš„å®ç°æ˜¯ä»€ä¹ˆä¸åŒï¼Ÿåœ¨new.crbug.comä¸Šæ–‡ä»¶ä¸€ä¸ªé”™è¯¯ã€‚è¯·åŠ¡å¿…å°½å¯èƒ½è¯¦ç»†åœ°åŒ…å«ï¼Œå†ç°ç®€å•çš„å†ç°è¯´æ˜ï¼Œå¹¶è¾“å…¥UIï¼†gt;æµè§ˆå™¨ï¼†gt;é›¶ä»¶æ¡†ä¸­çš„webappinstallsã€‚æ¯›åˆºå¾ˆé«˜å…´åˆ†äº«å¿«é€Ÿå’Œç®€å•çš„Reprosã€‚</p><p>  Are you planning to use PWAs as URL Handlers? Your public support helps the Chromium team prioritizefeatures and shows other browser vendors how critical it is to support them.</p><p>  æ‚¨æ˜¯å¦è®¡åˆ’ä½¿ç”¨PWAä½œä¸ºURLå¤„ç†ç¨‹åºï¼Ÿæ‚¨çš„å…¬å…±æ”¯æŒå¸®åŠ©Chromium Team ReforitizeFeatureså¹¶å±•ç¤ºäº†å…¶ä»–æµè§ˆå™¨ä¾›åº”å•†æ”¯æŒå®ƒä»¬çš„é‡è¦æ„ä¹‰ã€‚</p><p> Send a tweet to  @ChromiumDev using the hashtag  #URLHandlers and letus know where and how you&#39;re using it.</p><p> ä½¿ç”¨hashtag #urlhandlerså’Œletuså‘é€Tweetåˆ°@ChromiumDevå’ŒLetusäº†è§£æ‚¨çš„ä½ç½®å’Œï¼ƒ39;é‡æ–°ä½¿ç”¨å®ƒã€‚</p><p>    PWAs as URL Handlers was specified and implemented by  Lu Huangfrom the Microsoft Edge team. This article was reviewed by Joe Medley.Hero image by  Bryson Hammer on Unsplash.</p><p>    PWAæ˜¯URLå¤„ç†ç¨‹åºç”±Lu Huangomç”±Microsoft Edgeå›¢é˜ŸæŒ‡å®šå’Œå®æ–½ã€‚è¿™ç¯‡æ–‡ç« ç”±Joe Medley.Hero Imageé€šè¿‡Bryson Hammerè¿›è¡Œå®¡æŸ¥ã€‚ </p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://web.dev/pwa-url-handler/">https://web.dev/pwa-url-handler/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/ç¨‹åº/">#ç¨‹åº</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/url/">#url</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/åº”ç”¨ç¨‹åº/">#åº”ç”¨ç¨‹åº</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>