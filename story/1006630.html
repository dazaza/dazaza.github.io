<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>基于随机代码执行的Monero工作证明算法</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">基于随机代码执行的Monero工作证明算法</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-15 15:35:21</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/6/fe3b2e40aadec8a1daa2ad44a0149f8b.png"><img src="http://img.diglog.com/img/2020/6/fe3b2e40aadec8a1daa2ad44a0149f8b.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>RandomX是一种针对通用CPU进行优化的工作证明(PoW)算法。RandomX使用随机代码执行(因此得名)和几种内存硬技术来最小化专用硬件的效率优势。</p><p>RandomX利用虚拟机执行由整数数学、浮点数学和分支组成的特殊指令集中的程序。这些程序可以即时转换为CPU的本机代码(例如：Program.asm)。最后，使用密码散列函数(Blake2b)将执行的程序的输出合并成256位结果。</p><p>这两种模式可以互换，因为它们产生相同的结果。快速模式适用于挖掘，而灯光模式预计仅用于证明验证。</p><p>第一次审计得到了Arweave的慷慨资助，Arweave是RandomX的早期采用者之一。剩下的三次审计是由莫内罗社区的捐款资助的。所有四项审计均由OSTIF协调。</p><p>所有四个审计的最终报告都可以在审计目录中找到。审计没有发现任何严重的漏洞，但是作为审计的直接结果，对算法和代码进行了几次更改。更多细节可以在OSTIF的最终报告中找到。</p><p>RandomX是用C++11编写的，它用头文件随机x.h提供的C API构建了一个静态库。api-example1.c中提供了最小API使用示例。参考代码包括用于测试的随机x基准和随机x测试可执行文件。</p><p>构建依赖：cmake(最低2.8.7)和GCC(最低4.8版，推荐7+版)。</p><p>在Windows上，可以使用MinGW(与Linux上相同的过程)或使用Visual Studio(提供解决方案文件)进行构建。</p><p>RandomX最初设计为Monero的PoW算法。推荐用法如下：</p><p>密钥K被选择作为区块链中的块的散列-该块被称为密钥块。为了获得最佳挖掘和验证性能，密钥应该每2048个块(~2.8天)更改一次，并且在密钥块和密钥K的更改之间应该有64个块(~2小时)的延迟。这可以通过在block Height%2048==64时更改密钥并选择密钥块以使keyBlockHeight%2048%==0来实现。</p><p>如果您希望使用RandomX作为您的加密货币的POW算法，请遵循配置指南。</p><p>注意：要实现ASIC阻力，键K必须改变，并且不能是矿工可选的。我们建议使用区块链数据作为密钥，方式与上面的Monero示例类似。如果区块链数据由于某种原因无法使用，请使用预定义的密钥序列。</p><p>下表列出了使用最佳线程数(T)和大页面数(如果可能)的选定CPU的性能，单位为每秒哈希数(H/s)。&#34；CNv4&#34；是指使用XMRig v2.14.1测量的CryptoNight变体4(CN/R)哈希率。快速模式和灯光模式是RandomX的两种模式。</p><p>请注意，RandomX当前包括用于x86-64和ARM64的JIT编译器。其他体系结构必须使用可移植解释器，这要慢得多。</p><p>SChernykh正在为RandomX开发GPU挖掘代码。基准包含在以下存储库中：</p><p>仅适用于AMD Vega和AMD Polaris GPU的OpenCL MINer(使用GCN机器代码)。</p><p>请注意，GPU在运行RandomX时处于劣势，因为该算法被设计为在CPU上高效。</p><p>自2011年以来生产的大多数英特尔和AMD CPU在RandomX上应该都相当高效。更具体地说，高效挖掘需要：</p><p>每个挖掘线程16 KiB的L1缓存、256 KiB的L2缓存和2 MiB的L3缓存。</p><p>可能需要多个内存通道：DDR3内存限制在每个通道1500-2000小时/秒左右(取决于频率和时序)。</p><p>DDR4内存限制为每个通道约4000-6000小时/秒(取决于频率和定时)。</p><p>由于算法的工作方式，挖掘恶意软件更容易检测。RandomX Sniffer是一个概念验证工具，可以检测Windows上的非法挖掘活动。</p><p>高效的挖掘需要超过2GiB的内存，这也使许多低端机器失去了资格，如物联网设备，这些设备通常是大型僵尸网络的一部分。</p><p>Web挖掘是不可行的，因为需要大量的内存，并且在Javascript和WebAssembly中都缺乏对浮点运算的定向舍入支持。</p><p>RandomX仅使用IEEE754标准保证能给出正确舍入结果的运算：加法、减法、乘法、除法和平方根。要特别注意避免出现拐角情况，如NaN值或非规格化。</p><p>RandomX为每个散列生成多个唯一程序，因此FPGA不能动态重新配置其电路，因为典型的FPGA需要数十秒来加载比特流。由于组合的数量太多(有2512个独特的节目)，也不可能预先生成RandomX节目的位流。</p><p>足够大的FPGA可以通过模拟CPU在软微处理器配置中挖掘RandomX。在这些情况下，FPGA的效率将远远低于CPU或专用芯片(ASIC)。</p><p>如果您想使用RandomX，请考虑捐款以帮助支付算法的开发费用。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/tevador/RandomX">https://github.com/tevador/RandomX</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/代码/">#代码</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/算法/">#算法</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/monero/">#monero</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/work/">#work</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1006595.html"><img src="http://img.diglog.com/img/2020/6/thumb_86a549fed57245186664c7cf556c14c6.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006595.html">Piranha：一个自动删除陈旧代码的开源工具</a></div><span class="my_story_list_date">2020-6-15 7:34</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006578.html"><img src="http://img.diglog.com/img/2020/6/thumb_2bac968bb384d1e29bcb27c2585a2a0d.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006578.html">用封闭图说服经理解决技术债务问题</a></div><span class="my_story_list_date">2020-6-15 5:46</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006506.html"><img src="http://img.diglog.com/img/2020/6/thumb_81bf5e040828749ba03f06d9e734c486.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006506.html">热插拔Python 3代码</a></div><span class="my_story_list_date">2020-6-14 13:59</span></div><div class="col-sm"><div><a target="_blank" href="/story/1006459.html"><img src="http://img.diglog.com/img/2020/6/thumb_59873a49dced6a237b2fc55016f38cb7.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1006459.html">开发人员也是您的用户--为“查看源代码”辩护</a></div><span class="my_story_list_date">2020-6-14 5:17</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>