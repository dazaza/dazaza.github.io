<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>è¾¹ç¼˜çš„ASICASICs at the Edge</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">ASICs at the Edge<br/>è¾¹ç¼˜çš„ASIC</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-27 21:59:18</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/81e11dac5d37c5e1dff86573f5129201.png"><img src="http://img2.diglog.com/img/2020/11/81e11dac5d37c5e1dff86573f5129201.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>At Cloudflare we pride ourselves in our global network that spans more than 200 cities in over 100 countries. To handle all the traffic passing through our network, there are multiple technologies at play. So letâ€™s have a look at one of the cornerstones that makes all of this workâ€¦ ASICs. No, not the running shoes.</p><p>åœ¨Cloudflareï¼Œæˆ‘ä»¬ä»¥éå¸ƒå…¨çƒ100å¤šä¸ªå›½å®¶200å¤šä¸ªåŸå¸‚çš„å…¨çƒç½‘ç»œæ„Ÿåˆ°è‡ªè±ªã€‚ä¸ºäº†å¤„ç†é€šè¿‡æˆ‘ä»¬ç½‘ç»œçš„æ‰€æœ‰æµé‡ï¼Œæœ‰å¤šç§æŠ€æœ¯åœ¨èµ·ä½œç”¨ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä½¿æ‰€æœ‰è¿™äº›å·¥ä½œéƒ½èµ·ä½œç”¨çš„åŸºçŸ³ä¹‹ä¸€ASICã€‚ä¸ï¼Œä¸æ˜¯è·‘é‹ã€‚</p><p>  ASIC stands for Application Specific Integrated Circuit. The name already says it, it&#39;s a chip with a very narrow use case, geared towards a single application. This is in stark contrast to a CPU (Central Processing Unit), or even a GPU (Graphics Processing Unit). A CPU is designed and built for general purpose computation, and does a lot of things reasonably well. A GPU is more geared towards graphics (it&#39;s in the name), but in the last 15 years, there&#39;s been a drastic shift towards GPGPU (General Purpose GPU), in which technologies such as  CUDA or  OpenCL allow you to use the highly parallel nature of the GPU to do general purpose computing. A good example of GPU use is video encoding, or more recently, computer vision, used in applications such as self-driving cars.</p><p>  ASICä»£è¡¨ä¸“ç”¨é›†æˆç”µè·¯ã€‚é¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯ä¸€ç§ç”¨ä¾‹éå¸¸ç‹­çª„çš„èŠ¯ç‰‡ï¼Œé€‚ç”¨äºå•ä¸ªåº”ç”¨ç¨‹åºã€‚è¿™ä¸CPUï¼ˆä¸­å¤®å¤„ç†å•å…ƒï¼‰ï¼Œç”šè‡³GPUï¼ˆå›¾å½¢å¤„ç†å•å…ƒï¼‰å½¢æˆäº†é²œæ˜çš„å¯¹æ¯”ã€‚ CPUæ˜¯ä¸ºé€šç”¨è®¡ç®—è€Œè®¾è®¡å’Œæ„å»ºçš„ï¼Œåœ¨å¾ˆå¤šæ–¹é¢åšå¾—ç›¸å½“å¥½ã€‚ GPUæ›´é€‚åˆå›¾å½¢ï¼ˆå³åç§°ï¼‰ï¼Œä½†æ˜¯åœ¨è¿‡å»çš„15å¹´ä¸­ï¼Œå·²ç»å‘ç”Ÿäº†å‘GPGPUï¼ˆé€šç”¨GPUï¼‰çš„æ€¥å‰§è½¬å˜ï¼Œå…¶ä¸­CUDAæˆ–OpenCLç­‰æŠ€æœ¯ä½¿æ‚¨å¯ä»¥ä½¿ç”¨é«˜åº¦å¹¶è¡Œçš„ç‰¹æ€§GPUè¿›è¡Œé€šç”¨è®¡ç®—ã€‚ GPUä½¿ç”¨çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯è§†é¢‘ç¼–ç ï¼Œæˆ–æ›´è¿‘çš„æ˜¯è®¡ç®—æœºè§†è§‰ï¼Œç”¨äºè‡ªåŠ¨é©¾é©¶æ±½è½¦ç­‰åº”ç”¨ä¸­ã€‚</p><p> Unlike CPUs or GPUs, ASICs are built with a single function in mind. Great examples are the Google Tensor Processing Units (TPU), used to accelerate machine learning functions  [1], or for orbital maneuvering  [2], in which specific orbital maneuvers are encoded, like the Hohmann Transfer, used to move rockets (and their payloads) to a new orbit at a different altitude. And they are also heavily used in the networking industry. Technically, the use case in the network industry should be called an ASSP (Application Specific Standard Product), but network engineers are simple people, so we prefer to call it an ASIC.</p><p> ä¸CPUæˆ–GPUä¸åŒï¼ŒASICåœ¨æ„å»ºæ—¶å°±è€ƒè™‘äº†å•ä¸ªåŠŸèƒ½ã€‚ Google Tensorå¤„ç†å•å…ƒï¼ˆTPUï¼‰å°±æ˜¯å¾ˆå¥½çš„ä¾‹å­ï¼Œç”¨äºåŠ é€Ÿæœºå™¨å­¦ä¹ åŠŸèƒ½[1]æˆ–ç”¨äºè½¨é“æ“çºµ[2]ï¼Œå…¶ä¸­ç¼–ç äº†ç‰¹å®šçš„è½¨é“æ“çºµï¼Œä¾‹å¦‚éœæ›¼è½¬ç§»ï¼Œç”¨äºç§»åŠ¨ç«ç®­ï¼ˆåŠå…¶ç«ç®­ï¼‰æœ‰æ•ˆè½½è·ï¼‰åˆ°ä¸åŒé«˜åº¦çš„æ–°è½¨é“ã€‚è€Œä¸”å®ƒä»¬åœ¨ç½‘ç»œè¡Œä¸šä¸­ä¹Ÿå¤§é‡ä½¿ç”¨ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œç½‘ç»œè¡Œä¸šä¸­çš„ç”¨ä¾‹åº”ç§°ä¸ºASSPï¼ˆä¸“ç”¨æ ‡å‡†äº§å“ï¼‰ï¼Œä½†æ˜¯ç½‘ç»œå·¥ç¨‹å¸ˆæ˜¯ç®€å•çš„äººï¼Œå› æ­¤æˆ‘ä»¬æ›´å–œæ¬¢å°†å…¶ç§°ä¸ºASICã€‚</p><p>  ASICs have the major benefit of being hyper-efficient. The more complex hardware is, the more it will need cooling and power. As ASICs only contain the hardware components needed for their function, their overall size can be reduced, and so are their power requirements. This has a positive impact on the overall physical size of the network (devices donâ€™t need to be as bulky to provide sufficient cooling), and helps reduce the power consumption of a data center.</p><p>  ASICçš„ä¸»è¦å¥½å¤„æ˜¯æ•ˆç‡é«˜ã€‚ç¡¬ä»¶è¶Šå¤æ‚ï¼Œå°±è¶Šéœ€è¦å†·å´å’Œç”µæºã€‚ç”±äºASICä»…åŒ…å«å…¶åŠŸèƒ½æ‰€éœ€çš„ç¡¬ä»¶ç»„ä»¶ï¼Œå› æ­¤å¯ä»¥å‡å°å…¶æ•´ä½“å°ºå¯¸ï¼Œå¹¶å‡å°å…¶åŠŸè€—è¦æ±‚ã€‚è¿™å¯¹ç½‘ç»œçš„æ•´ä½“ç‰©ç†å°ºå¯¸æœ‰ç§¯æçš„å½±å“ï¼ˆè®¾å¤‡ä¸å¿…å¤ªç¬¨é‡å³å¯æä¾›è¶³å¤Ÿçš„æ•£çƒ­ï¼‰ï¼Œå¹¶æœ‰åŠ©äºé™ä½æ•°æ®ä¸­å¿ƒçš„åŠŸè€—ã€‚</p><p> Reducing hardware complexity also reduces the failure rate of the manufacturing process, and allows for easier production.</p><p> é™ä½ç¡¬ä»¶å¤æ‚æ€§è¿˜å¯ä»¥é™ä½åˆ¶é€ è¿‡ç¨‹çš„æ•…éšœç‡ï¼Œå¹¶ç®€åŒ–ç”Ÿäº§ã€‚</p><p> The downside is that you need to embed a lot of your features in hardware, and once a new technology or specification comes around, any chips made without that technology baked in, wonâ€™t be able to support it ( VXLAN for example).</p><p> ç¼ºç‚¹æ˜¯æ‚¨éœ€è¦åœ¨ç¡¬ä»¶ä¸­åµŒå…¥å¾ˆå¤šåŠŸèƒ½ï¼Œä¸€æ—¦å‡ºç°äº†æ–°æŠ€æœ¯æˆ–æ–°è§„èŒƒï¼Œä»»ä½•æ²¡æœ‰é‡‡ç”¨è¯¥æŠ€æœ¯çš„èŠ¯ç‰‡éƒ½å°†æ— æ³•æ”¯æŒï¼ˆä¾‹å¦‚VXLANï¼‰ã€‚</p><p> For network equipment, this works perfectly. Overall, the networking industry is slow-moving, and considerable time is taken before new technologies make it to the market (as can be seen with IPv6, MPLS implementations, xDSL availability, â€¦). This means the chips don&#39;t need to evolve on a yearly basis, and can instead be created on a much slower cycle, with bigger leaps in technology. For example, it took Broadcom two years to go from Tomahawk 3 to Tomahawk 4, but in that process they doubled the throughput. The benefits listed earlier are super helpful for network equipment, as they allow for considerable throughput in a small form factor.</p><p> å¯¹äºç½‘ç»œè®¾å¤‡ï¼Œè¿™éå¸¸ç†æƒ³ã€‚æ€»ä½“è€Œè¨€ï¼Œç½‘ç»œè¡Œä¸šå‘å±•ç¼“æ…¢ï¼Œéœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´æ‰èƒ½å°†æ–°æŠ€æœ¯æ¨å‘å¸‚åœºï¼ˆå¦‚IPv6ï¼ŒMPLSå®æ–½ï¼ŒxDSLå¯ç”¨æ€§ç­‰ï¼‰ã€‚è¿™æ„å‘³ç€èŠ¯ç‰‡ä¸éœ€è¦æ¯å¹´è¿›è¡Œå¼€å‘ï¼Œè€Œå¯ä»¥åœ¨æ›´æ…¢çš„å‘¨æœŸå†…è¿›è¡Œåˆ¶é€ ï¼Œå¹¶ä¸”æŠ€æœ¯ä¸Šä¼šæœ‰æ›´å¤§çš„é£è·ƒã€‚ä¾‹å¦‚ï¼ŒBroadcomä»â€œæˆ˜æ–§3â€åˆ°â€œæˆ˜æ–§4â€èŠ±è´¹äº†ä¸¤å¹´çš„æ—¶é—´ï¼Œä½†åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä»¬çš„ååé‡å¢åŠ äº†ä¸€å€ã€‚å‰é¢åˆ—å‡ºçš„å¥½å¤„å¯¹äºç½‘ç»œè®¾å¤‡éå¸¸æœ‰å¸®åŠ©ï¼Œå› ä¸ºå®ƒä»¬ä»¥è¾ƒå°çš„å°ºå¯¸å…è®¸ç›¸å½“å¤§çš„ååé‡ã€‚</p><p>  As with chips of any kind, building an ASIC is a long-term process. Just like with CPUs, if there&#39;s a defect in the hardware design, you have to start from scratch, and scrap the entire build line. As such, the development lifecycle is incredibly long. It starts with prototyping in an FPGA (Field Programmable Gate Array), in which chip designers can program their required functionality and confirm compatibility. All of this is done in a HDL (Hardware Description Language), such as  Verilog.</p><p>ä¸ä»»ä½•ç±»å‹çš„èŠ¯ç‰‡ä¸€æ ·ï¼Œæ„å»ºASICæ˜¯ä¸€ä¸ªé•¿æœŸçš„è¿‡ç¨‹ã€‚ä¸CPUä¸€æ ·ï¼Œå¦‚æœç¡¬ä»¶è®¾è®¡å­˜åœ¨ç¼ºé™·ï¼Œåˆ™å¿…é¡»ä»å¤´å¼€å§‹ï¼Œå¹¶æŠ¥åºŸæ•´ä¸ªæ„å»ºçº¿ã€‚å› æ­¤ï¼Œå¼€å‘ç”Ÿå‘½å‘¨æœŸéå¸¸é•¿ã€‚å®ƒä»¥FPGAï¼ˆç°åœºå¯ç¼–ç¨‹é—¨é˜µåˆ—ï¼‰ä¸­çš„åŸå‹è®¾è®¡å¼€å§‹ï¼Œåœ¨è¯¥è®¾è®¡ä¸­ï¼ŒèŠ¯ç‰‡è®¾è®¡äººå‘˜å¯ä»¥ç¼–ç¨‹æ‰€éœ€çš„åŠŸèƒ½å¹¶ç¡®è®¤å…¼å®¹æ€§ã€‚æ‰€æœ‰è¿™äº›éƒ½æ˜¯é€šè¿‡HDLï¼ˆç¡¬ä»¶æè¿°è¯­è¨€ï¼‰ï¼ˆä¾‹å¦‚Verilogï¼‰å®Œæˆçš„ã€‚</p><p> Once the prototyping stage is over, they move to baking the new packet processing pipeline into the chip at a foundry. After that, no more changes can be made to the chip, as it&#39;s literally baked into the hardware (unlike an FPGA, which can be reprogrammed). Further difficulty is added by the fact that there are a very small number of hardware companies that will buy ASICs in bulk to build equipment with; as such the unit cost can increase drastically.</p><p> åŸå‹åˆ¶ä½œé˜¶æ®µç»“æŸåï¼Œä»–ä»¬å¼€å§‹å°†æ–°çš„æ•°æ®åŒ…å¤„ç†ç®¡é“çƒ˜ç„™åˆ°é“¸é€ å‚çš„èŠ¯ç‰‡ä¸­ã€‚æ­¤åï¼Œå°±ä¸èƒ½å†å¯¹èŠ¯ç‰‡è¿›è¡Œä»»ä½•æ›´æ”¹äº†ï¼Œå› ä¸ºå®ƒå®é™…ä¸Šå·²ç»çƒ˜ç„™åˆ°äº†ç¡¬ä»¶ä¸­ï¼ˆä¸åŒäºå¯ä»¥é‡æ–°ç¼–ç¨‹çš„FPGAï¼‰ã€‚ç”±äºå¾ˆå°‘æœ‰ç¡¬ä»¶å…¬å¸ä¼šæ‰¹é‡è´­ä¹°ASICæ¥æ„å»ºè®¾å¤‡ï¼Œè¿™è¿›ä¸€æ­¥å¢åŠ äº†å›°éš¾ã€‚å› æ­¤ï¼Œå•ä½æˆæœ¬å¯èƒ½ä¼šæ€¥å‰§å¢åŠ ã€‚</p><p> All of this means that the iteration cycle of an ASIC tends to be on the slower side of things (compared to the yearly refreshes in the Intel Process-Architecture-Optimization model for example), and will usually be smaller incremental updates: For example, increases in port-speeds are incremental (1G â†’ 10G â†’ 25G â†’ 40G â†’ 100G â†’ 400G â†’ 800G â†’ ...), and are tied into upgrades to the SerDes (Serialiser/Deserialiser) part of the chip.</p><p> æ‰€æœ‰è¿™äº›éƒ½æ„å‘³ç€ASICçš„è¿­ä»£å‘¨æœŸè¶‹å‘äºæ”¾æ…¢è„šæ­¥ï¼ˆä¾‹å¦‚ï¼Œä¸Intel Process-Architecture-Optimizationæ¨¡å‹ä¸­çš„å¹´åº¦æ›´æ–°ç›¸æ¯”ï¼‰ï¼Œå¹¶ä¸”é€šå¸¸æ˜¯è¾ƒå°çš„å¢é‡æ›´æ–°ï¼šä¾‹å¦‚ï¼Œç«¯å£é€Ÿåº¦çš„å¢åŠ æ˜¯é€’å¢çš„ï¼ˆ1Gâ†’10Gâ†’25Gâ†’40Gâ†’100Gâ†’400Gâ†’800Gâ†’...ï¼‰ï¼Œå¹¶ä¸”ä¸èŠ¯ç‰‡çš„SerDesï¼ˆSerialiser / Deserialiserï¼‰éƒ¨åˆ†çš„å‡çº§æ†ç»‘åœ¨ä¸€èµ·ã€‚</p><p> New protocol support is a lot harder, and might require multiple development cycles before it shows up in a chip.</p><p> æ–°åè®®çš„æ”¯æŒè¦å›°éš¾å¾—å¤šï¼Œåœ¨å°†å…¶æ˜¾ç¤ºåœ¨èŠ¯ç‰‡ä¸Šä¹‹å‰å¯èƒ½éœ€è¦å¤šä¸ªå¼€å‘å‘¨æœŸã€‚</p><p>  The ASICs in our network equipment are responsible for the switching and routing of packets, as well as being the first layer of defense (in the form of a stateless firewall). Due to the sheer nature of how fast packets get switched, fast memory access is a primary concern. Most ASICs will use a special sort of memory, called TCAM (Ternary Content-Addressable Memory). This memory will be used to store all sorts of lookup tables. These may be forwarding tables (where does this packet go), ACL (Access Control List) tables (is this packet allowed), or CoS (Class of Service) tables (which priority should be given to this packet)</p><p>  æˆ‘ä»¬ç½‘ç»œè®¾å¤‡ä¸­çš„ASICè´Ÿè´£æ•°æ®åŒ…çš„äº¤æ¢å’Œè·¯ç”±ï¼Œå¹¶ä¸”æ˜¯ç¬¬ä¸€å±‚é˜²å¾¡ï¼ˆä»¥æ— çŠ¶æ€é˜²ç«å¢™çš„å½¢å¼ï¼‰ã€‚ç”±äºå¦‚ä½•å¿«é€Ÿäº¤æ¢æ•°æ®åŒ…å…·æœ‰ç»å¯¹çš„æœ¬è´¨ï¼Œå› æ­¤å¿«é€Ÿçš„å†…å­˜è®¿é—®æ˜¯é¦–è¦è€ƒè™‘çš„é—®é¢˜ã€‚å¤§å¤šæ•°ASICå°†ä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨å™¨ï¼Œç§°ä¸ºTCAMï¼ˆä¸‰æ€å†…å®¹å¯å¯»å€å­˜å‚¨å™¨ï¼‰ã€‚è¯¥å†…å­˜å°†ç”¨äºå­˜å‚¨å„ç§æŸ¥æ‰¾è¡¨ã€‚è¿™äº›å¯èƒ½æ˜¯è½¬å‘è¡¨ï¼ˆæ­¤æ•°æ®åŒ…çš„å»å‘ï¼‰ï¼ŒACLï¼ˆè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰è¡¨ï¼ˆå…è®¸æ­¤æ•°æ®åŒ…ï¼‰æˆ–CoSï¼ˆæœåŠ¡ç­‰çº§ï¼‰è¡¨ï¼ˆåº”å°†æ­¤æ•°æ®åŒ…èµ‹äºˆä¼˜å…ˆçº§ï¼‰</p><p> CAM, and its more advanced sibling, TCAM, are fascinating kinds of memory, as they operate fundamentally different than traditional Random Access Memory (RAM). While you have to use a memory address to access data in RAM, with CAM and TCAM you can directly refer to the content you are looking for. It is a physical implementation of a key-value store.</p><p> CAMåŠå…¶æ›´é«˜çº§çš„åŒçº§TCAMä»¤äººç€è¿·ï¼Œå› ä¸ºå®ƒä»¬çš„æ“ä½œä¸ä¼ ç»Ÿçš„éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆRAMï¼‰æ ¹æœ¬ä¸åŒã€‚è™½ç„¶æ‚¨å¿…é¡»ä½¿ç”¨å­˜å‚¨åœ°å€æ¥è®¿é—®RAMä¸­çš„æ•°æ®ï¼Œä½†æ˜¯ä½¿ç”¨CAMå’ŒTCAMæ—¶ï¼Œæ‚¨å¯ä»¥ç›´æ¥å¼•ç”¨æ‚¨è¦æŸ¥æ‰¾çš„å†…å®¹ã€‚å®ƒæ˜¯é”®å€¼å­˜å‚¨çš„ç‰©ç†å®ç°ã€‚</p><p> In CAM you use the exact binary representation of a word, in a network application, that word is likely going to be an IP address, so 11001011.00000000.01110001.00000000 for example (203.0.113.0). While this is definitely useful, networks operate a big collection of IP addresses, and storing each individually would require significant memory. To remedy this memory requirement, TCAM can store three states, instead of the binary two. This third state, sometimes called â€˜ignoreâ€™ state, allows for the storage of multiple sequential data words as a single entry.</p><p> åœ¨CAMä¸­ï¼Œæ‚¨ä½¿ç”¨å•è¯çš„ç¡®åˆ‡äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼Œåœ¨ç½‘ç»œåº”ç”¨ç¨‹åºä¸­ï¼Œè¯¥å•è¯å¾ˆå¯èƒ½æ˜¯IPåœ°å€ï¼Œå› æ­¤ï¼Œä¾‹å¦‚11001011.00000000.01110001.00000000ï¼ˆ203.0.113.0ï¼‰ã€‚å°½ç®¡è¿™ç»å¯¹æœ‰ç”¨ï¼Œä½†æ˜¯ç½‘ç»œéœ€è¦å¤§é‡IPåœ°å€ï¼Œå¹¶ä¸”å•ç‹¬å­˜å‚¨æ¯ä¸ªIPåœ°å€éƒ½éœ€è¦å¤§é‡å†…å­˜ã€‚ä¸ºäº†è§£å†³æ­¤å†…å­˜è¦æ±‚ï¼ŒTCAMå¯ä»¥å­˜å‚¨ä¸‰ç§çŠ¶æ€ï¼Œè€Œä¸æ˜¯äºŒè¿›åˆ¶çš„ä¸¤ç§ã€‚ç¬¬ä¸‰ç§çŠ¶æ€ï¼ˆæœ‰æ—¶ç§°ä¸ºâ€œå¿½ç•¥â€çŠ¶æ€ï¼‰å…è®¸å°†å¤šä¸ªé¡ºåºæ•°æ®å­—å­˜å‚¨ä¸ºå•ä¸ªæ¡ç›®ã€‚</p><p> In networking, these sequential data words are IP prefixes. So for the previous example, if we wanted to store the collection of that IP address, and the 254 IPs following it, in TCAM it would as follows: 11001011.00000000.01110001.XXXXXXXX (203.0.113.0/24). This storage method means we can ask questions of the ASIC such as â€œwhere should I send packets with the destination IP address of 203.0.113.19â€, to which the ASIC can have a reply ready in a single clock cycle, as it does not need to run through all memory, but instead can directly reference the key. This reply will usually be a reference to a memory address in traditional RAM, where more data can be stored, such as output port, or firewall requirements for the packet.</p><p>åœ¨è”ç½‘ä¸­ï¼Œè¿™äº›é¡ºåºæ•°æ®å­—æ˜¯IPå‰ç¼€ã€‚å› æ­¤ï¼Œå¯¹äºå‰é¢çš„ç¤ºä¾‹ï¼Œå¦‚æœæˆ‘ä»¬è¦å­˜å‚¨è¯¥IPåœ°å€åŠå…¶åçš„254ä¸ªIPçš„é›†åˆï¼Œåˆ™åœ¨TCAMä¸­å°†å¦‚ä¸‹æ‰€ç¤ºï¼š11001011.00000000.01110001.XXXXXXXXï¼ˆ203.0.113.0/24ï¼‰ã€‚è¿™ç§å­˜å‚¨æ–¹æ³•æ„å‘³ç€æˆ‘ä»¬å¯ä»¥è¯¢é—®ASICé—®é¢˜ï¼Œä¾‹å¦‚â€œæˆ‘åº”è¯¥åœ¨å“ªé‡Œå‘é€ç›®æ ‡IPåœ°å€ä¸º203.0.113.19çš„æ•°æ®åŒ…â€ï¼ŒASICå¯ä»¥åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å‡†å¤‡å¥½å›å¤ï¼Œå› ä¸ºå®ƒä¸éœ€è¦è¿è¡Œæ‰€æœ‰å†…å­˜ï¼Œä½†æ˜¯å¯ä»¥ç›´æ¥å¼•ç”¨è¯¥é”®ã€‚è¯¥å›å¤é€šå¸¸å°†å¼•ç”¨ä¼ ç»ŸRAMä¸­çš„å†…å­˜åœ°å€ï¼Œåœ¨è¯¥å†…å­˜ä¸­å¯ä»¥å­˜å‚¨æ›´å¤šæ•°æ®ï¼Œä¾‹å¦‚è¾“å‡ºç«¯å£æˆ–æ•°æ®åŒ…çš„é˜²ç«å¢™è¦æ±‚ã€‚</p><p> To dig a bit deeper into what ASICs do in network equipment, let&#39;s briefly go over some fundamentals.</p><p> ä¸ºäº†æ›´æ·±å…¥åœ°äº†è§£ASICåœ¨ç½‘ç»œè®¾å¤‡ä¸­çš„ä½œç”¨ï¼Œè®©æˆ‘ä»¬ç®€è¦ä»‹ç»ä¸€ä¸‹ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚</p><p> Networking can be split into two primary components: routing and switching. Switching allows you to directly interconnect multiple devices, so they can talk with each other across the network. Itâ€™s what allows your phone to connect to your TV to play a new family video. Routing is the next level up. Itâ€™s the mechanism that interconnects all these switched networks into a network of networks, and eventually, the Internet.</p><p> ç½‘ç»œå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ï¼šè·¯ç”±å’Œäº¤æ¢ã€‚äº¤æ¢ä½¿æ‚¨å¯ä»¥ç›´æ¥äº’è¿å¤šä¸ªè®¾å¤‡ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥é€šè¿‡ç½‘ç»œç›¸äº’é€šä¿¡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨çš„æ‰‹æœºå¯ä»¥è¿æ¥ç”µè§†ï¼Œä»¥æ’­æ”¾æ–°çš„å®¶åº­è§†é¢‘ã€‚è·¯ç”±æ˜¯ä¸‹ä¸€ä¸ªå‡çº§ã€‚è¿™ç§æœºåˆ¶å°†æ‰€æœ‰è¿™äº›äº¤æ¢ç½‘ç»œäº’è¿æˆä¸€ä¸ªç½‘ç»œç½‘ç»œï¼Œæœ€åæ˜¯Internetã€‚</p><p> So routers are the devices responsible for steering traffic through this complex maze of networks, so it gets to its destination safely, and hopefully, as fast as possible. On the Internet, routers will usually use a routing protocol called BGP (Border Gateway Protocol) to exchange reachability information for a prefix (a collection of IP addresses), also called NLRI (Network Layer Reachability Information).</p><p> å› æ­¤ï¼Œè·¯ç”±å™¨æ˜¯è´Ÿè´£å¼•å¯¼æµé‡é€šè¿‡è¿™ç§å¤æ‚çš„ç½‘ç»œè¿·å®«çš„è®¾å¤‡ï¼Œå› æ­¤ï¼Œå®ƒå¯ä»¥å®‰å…¨ï¼Œå°½å¯èƒ½å¿«åœ°åˆ°è¾¾ç›®çš„åœ°ã€‚åœ¨Internetä¸Šï¼Œè·¯ç”±å™¨é€šå¸¸å°†ä½¿ç”¨ç§°ä¸ºBGPï¼ˆè¾¹ç•Œç½‘å…³åè®®ï¼‰çš„è·¯ç”±åè®®æ¥äº¤æ¢å‰ç¼€ï¼ˆIPåœ°å€çš„é›†åˆï¼‰çš„å¯è¾¾æ€§ä¿¡æ¯ï¼Œä¹Ÿç§°ä¸ºNLRIï¼ˆç½‘ç»œå±‚å¯è¾¾æ€§ä¿¡æ¯ï¼‰ã€‚</p><p> As with navigating the roads, there are multiple ways to get from point A to point B on the Internet. To make sure the router makes the right decision, it will store all of the reachability information in the RIB (Routing Information Base). That way, if anything changes with one route, the router still has other options immediately available.</p><p> ä¸åœ¨é“è·¯ä¸Šå¯¼èˆªä¸€æ ·ï¼Œäº’è”ç½‘ä¸Šæœ‰å¤šç§æ–¹æ³•å¯ä»¥ä»Aç‚¹åˆ°è¾¾Bç‚¹ã€‚ä¸ºäº†ç¡®ä¿è·¯ç”±å™¨åšå‡ºæ­£ç¡®çš„å†³å®šï¼Œå®ƒå°†æ‰€æœ‰å¯è¾¾æ€§ä¿¡æ¯å­˜å‚¨åœ¨RIBï¼ˆè·¯ç”±ä¿¡æ¯åº“ï¼‰ä¸­ã€‚è¿™æ ·ï¼Œå³ä½¿ä¸€æ¡è·¯ç”±å‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œè·¯ç”±å™¨ä»ç„¶å¯ä»¥ç«‹å³ä½¿ç”¨å…¶ä»–é€‰é¡¹ã€‚</p><p> With this information, a BGP daemon can calculate the ideal path to take for any given destination from its own point-of-view.  This Cisco documentation explains the decision process the daemon goes through to calculate that ideal path.</p><p> æœ‰äº†è¿™äº›ä¿¡æ¯ï¼ŒBGPå®ˆæŠ¤ç¨‹åºå°±å¯ä»¥ä»è‡ªå·±çš„è§’åº¦ä¸ºä»»ä½•ç»™å®šçš„ç›®çš„åœ°è®¡ç®—ç†æƒ³çš„è·¯å¾„ã€‚è¯¥æ€ç§‘æ–‡æ¡£è¯´æ˜äº†å®ˆæŠ¤ç¨‹åºè®¡ç®—è¯¥ç†æƒ³è·¯å¾„æ‰€ç»è¿‡çš„å†³ç­–è¿‡ç¨‹ã€‚</p><p> Once we have this ideal path for a given destination, we should store this information, as it would be very inefficient to calculate this every single time we need to go there. The storage database is called the FIB (Forwarding Information Base). The FIB will be a subset of the RIB, as it will only ever contain the best path for a destination at any given time, while the RIB keeps all the available paths, even the non-ideal ones.</p><p> ä¸€æ—¦æœ‰äº†ç»™å®šç›®çš„åœ°çš„ç†æƒ³è·¯å¾„ï¼Œå°±åº”è¯¥å­˜å‚¨æ­¤ä¿¡æ¯ï¼Œå› ä¸ºæ¯æ¬¡æˆ‘ä»¬éœ€è¦å»é‚£é‡Œæ—¶ï¼Œè®¡ç®—è¯¥ä¿¡æ¯çš„æ•ˆç‡éå¸¸ä½ã€‚è¯¥å­˜å‚¨æ•°æ®åº“ç§°ä¸ºFIBï¼ˆè½¬å‘ä¿¡æ¯åº“ï¼‰ã€‚ FIBå°†æ˜¯RIBçš„å­é›†ï¼Œå› ä¸ºå®ƒåœ¨ä»»ä½•ç»™å®šæ—¶é—´éƒ½åªä¼šåŒ…å«åˆ°è¾¾ç›®çš„åœ°çš„æœ€ä½³è·¯å¾„ï¼Œè€ŒRIBä¼šä¿ç•™æ‰€æœ‰å¯ç”¨è·¯å¾„ï¼Œç”šè‡³æ˜¯éç†æƒ³è·¯å¾„ã€‚</p><p> With these individual components, routers can make packets go from point A to point B in a blink of an eye.</p><p>æœ‰äº†è¿™äº›ç‹¬ç«‹çš„ç»„ä»¶ï¼Œè·¯ç”±å™¨å¯ä½¿çœ¨çœ¼é—´å°±ä½¿æ•°æ®åŒ…ä»Aç‚¹åˆ°è¾¾Bç‚¹ã€‚</p><p>  FIB install: Once the router has calculated its FIB, it&#39;s important the router can access this as quickly as possible. To do so, the ASIC will install (write) this calculated FIB into the TCAM, so any lookups can happen as quickly as possible.</p><p>  FIBå®‰è£…ï¼šè·¯ç”±å™¨è®¡ç®—å‡ºFIBåï¼Œè¯·åŠ¡å¿…å°½å¿«è®¿é—®å®ƒã€‚ä¸ºæ­¤ï¼ŒASICä¼šå°†è®¡ç®—å‡ºçš„FIBå®‰è£…ï¼ˆå†™å…¥ï¼‰åˆ°TCAMä¸­ï¼Œå› æ­¤ä»»ä½•æŸ¥æ‰¾éƒ½å¯ä»¥å°½å¿«è¿›è¡Œã€‚</p><p> Packet forwarding lookups: as we need to know where to send a received packet, we look up this information in TCAM, which is, as we mentioned, incredibly fast.</p><p> æ•°æ®åŒ…è½¬å‘æŸ¥æ‰¾ï¼šç”±äºæˆ‘ä»¬éœ€è¦çŸ¥é“å°†æ¥æ”¶åˆ°çš„æ•°æ®åŒ…å‘é€åˆ°ä½•å¤„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨TCAMä¸­æŸ¥æ‰¾æ­¤ä¿¡æ¯ï¼Œæ­£å¦‚æˆ‘ä»¬æåˆ°çš„é‚£æ ·ï¼Œè¿™æ˜¯éå¸¸å¿«çš„ã€‚</p><p> Stateless Firewall: while a router routes packets between destinations, you also want to ensure that certain packets don&#39;t reach a destination at all. This can be done using either a stateless or stateful firewall. â€œStateâ€ in this case refers to TCP state, so the router would need to understand if a connection is new, or already established. As maintaining state is a complex issue, which requires storing tables, and can quickly consume a lot of memory, most routers will only operate a stateless firewall. Instead, stateful firewalls often have their own appliances. At Cloudflare, we&#39;ve opted to move maintaining state to our compute nodes, as that severely reduces the state-table (one router for all state vs X metals for all state combined). A stateless firewall makes use of the TCAM again to store rules on what to do with specific types of packets. For example, one of the rules we employ at our edge is DENY-BOGON-RANGES , in which we discard traffic sourced from RFC1918 space (and other unroutable space). As this makes use of TCAM, it can all be done at line rate (the maximum speed of the interface).</p><p> æ— çŠ¶æ€é˜²ç«å¢™ï¼šå½“è·¯ç”±å™¨åœ¨ç›®æ ‡ä¹‹é—´è·¯ç”±æ•°æ®åŒ…æ—¶ï¼Œæ‚¨è¿˜æƒ³ç¡®ä¿æŸäº›æ•°æ®åŒ…æ ¹æœ¬ä¸ä¼šåˆ°è¾¾ç›®æ ‡ã€‚å¯ä»¥ä½¿ç”¨æ— çŠ¶æ€é˜²ç«å¢™æˆ–æœ‰çŠ¶æ€é˜²ç«å¢™æ¥å®Œæˆæ­¤æ“ä½œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€œçŠ¶æ€â€æ˜¯æŒ‡TCPçŠ¶æ€ï¼Œå› æ­¤è·¯ç”±å™¨å°†éœ€è¦äº†è§£è¿æ¥æ˜¯æ–°å»ºçš„è¿˜æ˜¯å·²ç»å»ºç«‹çš„ã€‚ç”±äºç»´æŠ¤çŠ¶æ€æ˜¯ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ï¼Œéœ€è¦å­˜å‚¨è¡¨ï¼Œå¹¶ä¸”ä¼šå¾ˆå¿«æ¶ˆè€—å¤§é‡å†…å­˜ï¼Œå› æ­¤å¤§å¤šæ•°è·¯ç”±å™¨åªä¼šè¿è¡Œæ— çŠ¶æ€é˜²ç«å¢™ã€‚ç›¸åï¼ŒçŠ¶æ€é˜²ç«å¢™é€šå¸¸å…·æœ‰è‡ªå·±çš„è®¾å¤‡ã€‚åœ¨Cloudflareï¼Œæˆ‘ä»¬é€‰æ‹©å°†ç»´æŠ¤çŠ¶æ€è½¬ç§»åˆ°æˆ‘ä»¬çš„è®¡ç®—èŠ‚ç‚¹ï¼Œå› ä¸ºè¿™ä¼šä¸¥é‡å‡å°‘çŠ¶æ€è¡¨ï¼ˆæ‰€æœ‰çŠ¶æ€ä¸€ä¸ªè·¯ç”±å™¨ï¼Œæ‰€æœ‰çŠ¶æ€ç›¸åŠ Xä¸ªé‡‘å±ï¼‰ã€‚æ— çŠ¶æ€é˜²ç«å¢™å†æ¬¡åˆ©ç”¨TCAMæ¥å­˜å‚¨æœ‰å…³å¤„ç†ç‰¹å®šç±»å‹æ•°æ®åŒ…çš„è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨è¾¹ç¼˜ä½¿ç”¨çš„è§„åˆ™ä¹‹ä¸€æ˜¯DENY-BOGON-RANGESï¼Œå…¶ä¸­æˆ‘ä»¬ä¸¢å¼ƒäº†æ¥è‡ªRFC1918ç©ºé—´ï¼ˆå’Œå…¶ä»–ä¸å¯è·¯ç”±çš„ç©ºé—´ï¼‰çš„æµé‡ã€‚ç”±äºè¿™åˆ©ç”¨äº†TCAMï¼Œå› æ­¤éƒ½å¯ä»¥ä»¥çº¿é€Ÿï¼ˆæ¥å£çš„æœ€å¤§é€Ÿåº¦ï¼‰å®Œæˆã€‚</p><p> Advanced features, such as GRE encapsulation: modern networking isn&#39;t just packet switching and packet routing anymore, and more advanced features are needed. One of these is encapsulation. With packet encapsulation, a system will put a data packet into another data packet. Using this technique, itâ€™s possible to build a network on top of an existing network (an overlay). Overlays can be used to build a virtual backbone for example, in which multiple locations can be virtually connected through the Internet. While you can encapsulate packets on a CPU (we do this for Magic Transit), there are considerable challenges in doing so in software. As such, the ASIC can have built-in functionality to encapsulate a packet in a multitude of protocols, such as GRE. You may not want encapsulated packets to have to take a second trip through your entire pipeline, as this adds latency, so these shortcuts can also be built into the chip.</p><p> è¯¸å¦‚GREå°è£…ä¹‹ç±»çš„é«˜çº§åŠŸèƒ½ï¼šç°ä»£ç½‘ç»œä¸å†åªæ˜¯åˆ†ç»„äº¤æ¢å’Œåˆ†ç»„è·¯ç”±ï¼Œè¿˜éœ€è¦æ›´å¤šé«˜çº§åŠŸèƒ½ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯å°è£…ã€‚ä½¿ç”¨æ•°æ®åŒ…å°è£…ï¼Œç³»ç»Ÿä¼šå°†ä¸€ä¸ªæ•°æ®åŒ…æ”¾å…¥å¦ä¸€ä¸ªæ•°æ®åŒ…ä¸­ã€‚ä½¿ç”¨æ­¤æŠ€æœ¯ï¼Œå¯ä»¥åœ¨ç°æœ‰ç½‘ç»œï¼ˆè¦†ç›–å›¾ï¼‰çš„é¡¶éƒ¨æ„å»ºç½‘ç»œã€‚ä¾‹å¦‚ï¼Œè¦†ç›–å±‚å¯ç”¨äºæ„å»ºè™šæ‹Ÿéª¨å¹²ç½‘ï¼Œå…¶ä¸­å¤šä¸ªä½ç½®å¯é€šè¿‡Internetè™šæ‹Ÿè¿æ¥ã€‚è™½ç„¶æ‚¨å¯ä»¥å°†æ•°æ®åŒ…å°è£…åœ¨CPUä¸Šï¼ˆå¯¹äºMagic Transitï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼‰ï¼Œä½†æ˜¯åœ¨è½¯ä»¶ä¸­è¿™æ ·åšå­˜åœ¨å¾ˆå¤§çš„æŒ‘æˆ˜ã€‚è¿™æ ·ï¼ŒASICå¯ä»¥å…·æœ‰å†…ç½®åŠŸèƒ½æ¥å°†æ•°æ®åŒ…å°è£…åœ¨å¤šç§åè®®ï¼ˆä¾‹å¦‚GREï¼‰ä¸­ã€‚æ‚¨å¯èƒ½ä¸å¸Œæœ›å°è£…çš„æ•°æ®åŒ…åœ¨æ•´ä¸ªç®¡é“ä¸­èµ°ç¬¬äºŒæ­¥ï¼Œå› ä¸ºè¿™ä¼šå¢åŠ å»¶è¿Ÿï¼Œå› æ­¤è¿™äº›å¿«æ·æ–¹å¼ä¹Ÿå¯ä»¥å†…ç½®åœ¨èŠ¯ç‰‡ä¸­ã€‚</p><p> MPLS, EVPN, VXLAN, SDWAN, SDN, ...: I ran out of buzzwords to enumerate here, but while MPLS isn&#39;t new (the first RFC was created in 2001), it&#39;s a rather advanced requirement, just as the others listed, which means not all ASIC vendors will implement this for all their chips due to the increased complexity.</p><p> MPLSï¼ŒEVPNï¼ŒVXLANï¼ŒSDWANï¼ŒSDN ......åˆ—å‡ºï¼Œè¿™æ„å‘³ç€ç”±äºå¤æ‚æ€§å¢åŠ ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ASICä¾›åº”å•†éƒ½ä¼šä¸ºå…¶æ‰€æœ‰èŠ¯ç‰‡å®ç°æ­¤åŠŸèƒ½ã€‚</p><p>  At Cloudflare, we interact with both hardware and software vendors on a daily basis while operating our global network. As weâ€™re talking about ASICs today, weâ€™ll explore the hardware landscape, but some hardware vendors also have their own NOS (Network Operating System). Thereâ€™s a vast selection of hardware out there, all with different features and pricing. It can become incredibly hard to see the wood for the trees, so weâ€™ll focus on 4 important distinguishing factors: Throughput (how many bits can the ASIC push through), buffer size (how many bits can the ASIC store in memory in case of resource contention), programmability (how easy is it for a third party programmer like Cloudflare to interact directly with the ASIC), feature set (how many advanced things outside of routing/switching can the ASIC do).</p><p>  åœ¨Cloudflareï¼Œæˆ‘ä»¬åœ¨è¿è¥å…¨çƒç½‘ç»œçš„åŒæ—¶æ¯å¤©ä¸ç¡¬ä»¶å’Œè½¯ä»¶ä¾›åº”å•†è¿›è¡Œäº’åŠ¨ã€‚åœ¨ä»Šå¤©è®¨è®ºASICçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢ç¡¬ä»¶æ ¼å±€ï¼Œä½†æ˜¯ä¸€äº›ç¡¬ä»¶ä¾›åº”å•†ä¹Ÿæ‹¥æœ‰è‡ªå·±çš„NOSï¼ˆç½‘ç»œæ“ä½œç³»ç»Ÿï¼‰ã€‚é‚£é‡Œæœ‰å¤§é‡çš„ç¡¬ä»¶å¯ä¾›é€‰æ‹©ï¼Œå®ƒä»¬éƒ½æœ‰ä¸åŒçš„åŠŸèƒ½å’Œä»·æ ¼ã€‚å¾ˆéš¾çœ‹åˆ°æ ‘æœ¨çš„æ ‘æœ¨ï¼Œå› æ­¤æˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨å››ä¸ªé‡è¦çš„åŒºåˆ«å› ç´ ï¼šååé‡ï¼ˆASICå¯ä»¥æ¨å…¥å¤šå°‘ä½ï¼‰ï¼Œç¼“å†²åŒºå¤§å°ï¼ˆASICå¯ä»¥åœ¨å†…å­˜ä¸­å­˜å‚¨å¤šå°‘ä½ï¼‰èµ„æºäº‰ç”¨ï¼‰ï¼Œå¯ç¼–ç¨‹æ€§ï¼ˆåƒCloudflareè¿™æ ·çš„ç¬¬ä¸‰æ–¹ç¨‹åºå‘˜ä¸ASICç›´æ¥äº¤äº’æœ‰å¤šå®¹æ˜“ï¼‰ï¼ŒåŠŸèƒ½é›†ï¼ˆASICå¯ä»¥åœ¨è·¯ç”±/äº¤æ¢ä¹‹å¤–è¿›è¡Œå¤šå°‘é«˜çº§æ“ä½œï¼‰ã€‚</p><p> The landscape is so varied because different companies have different requirements. A company like Cloudflare has different expectations for its network hardware than your typical corner shop. Even within our own network weâ€™ll have different requirements for the different layers that make up our network.</p><p>ç”±äºä¸åŒçš„å…¬å¸æœ‰ä¸åŒçš„è¦æ±‚ï¼Œå› æ­¤æƒ…å†µåƒå·®ä¸‡åˆ«ã€‚åƒCloudflareè¿™æ ·çš„å…¬å¸å¯¹ç½‘ç»œç¡¬ä»¶çš„æœŸæœ›ä¸å…¸å‹çš„ä¸€èˆ¬å•†åº—ä¸åŒã€‚å³ä½¿åœ¨æˆ‘ä»¬è‡ªå·±çš„ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å¯¹æ„æˆæˆ‘ä»¬ç½‘ç»œçš„ä¸åŒå±‚ä¹Ÿä¼šæœ‰ä¸åŒçš„è¦æ±‚ã€‚</p><p>  The elephant in the networking room (or is it the jumbo frame in the switch?) is Broadcom. Broadcom is a semiconductor company, with their primary revenue in the wired infrastructure segment (over 50% of revenue  [3]). While they&#39;ve been around since 1991, they&#39;ve become an unstoppable force in the last 10 years, in part due to their reliance on Apple (25% of revenue). As a semiconductor manufacturer, their market dominance is primarily achieved by acquiring other companies. A great example is the acquisition of Dune Networks, which has become an excellent revenue generator as the StrataDNX series of ASIC (Arad, QumranMX, Jericho). As such, they have become the biggest ASIC vendor by far, and own 59% of the entire Ethernet Integrated Circuits market  [4].</p><p>  è”ç½‘å®¤ä¸­çš„å¤§è±¡ï¼ˆæˆ–è€…æ˜¯äº¤æ¢æœºä¸­çš„å·¨å‹å¸§ï¼Ÿï¼‰æ˜¯Broadcomã€‚ Broadcomæ˜¯ä¸€å®¶åŠå¯¼ä½“å…¬å¸ï¼Œå…¶ä¸»è¦æ”¶å…¥åœ¨æœ‰çº¿åŸºç¡€è®¾æ–½é¢†åŸŸï¼ˆå æ”¶å…¥çš„50ï¼…ä»¥ä¸Š[3]ï¼‰ã€‚è‡ª1991å¹´ä»¥æ¥ä¸€ç›´å­˜åœ¨ï¼Œä½†åœ¨è¿‡å»10å¹´ä¸­ï¼Œå®ƒä»¬å·²æˆä¸ºä¸å¯é˜»æŒ¡çš„åŠ›é‡ï¼Œéƒ¨åˆ†åŸå› æ˜¯ä»–ä»¬ä¾èµ–Appleï¼ˆæ”¶å…¥çš„25ï¼…ï¼‰ã€‚ä½œä¸ºåŠå¯¼ä½“åˆ¶é€ å•†ï¼Œå…¶å¸‚åœºä¸»å¯¼åœ°ä½ä¸»è¦æ˜¯é€šè¿‡æ”¶è´­å…¶ä»–å…¬å¸æ¥å®ç°çš„ã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯å¯¹Dune Networksçš„æ”¶è´­ï¼Œè¯¥å…¬å¸æˆä¸ºStrataDNXç³»åˆ—ASICç³»åˆ—ï¼ˆAradï¼ŒQumranMXï¼ŒJerichoï¼‰çš„å‡ºè‰²æ”¶å…¥æ¥æºã€‚å› æ­¤ï¼Œå®ƒä»¬å·²æˆä¸ºè¿„ä»Šä¸ºæ­¢æœ€å¤§çš„ASICä¾›åº”å•†ï¼Œå¹¶æ‹¥æœ‰æ•´ä¸ªä»¥å¤ªç½‘é›†æˆç”µè·¯å¸‚åœºçš„59ï¼…[4]ã€‚</p><p> As such, they supply a lot of merchant silicon to Cisco, Juniper, Arista and others. Up until recently, if you wanted to use the Broadcom SDK to accelerate your packet forwarding, you have to sign so many NDAs you might get a hand cramp, which makes programming them a lot trickier. This changed recently when Broadcom open-sourced their  SDK. Let&#39;s have a quick look at some of their products.</p><p> å› æ­¤ï¼Œä»–ä»¬ä¸ºCiscoï¼ŒJuniperï¼ŒAristaå’Œå…¶ä»–å…¬å¸æä¾›äº†å¤§é‡å•†ä¸šèŠ¯ç‰‡ã€‚ç›´åˆ°æœ€è¿‘ï¼Œå¦‚æœæ‚¨æƒ³ä½¿ç”¨Broadcom SDKæ¥åŠ é€Ÿæ•°æ®åŒ…è½¬å‘ï¼Œæ‚¨å¿…é¡»ç­¾ç½²é‚£ä¹ˆå¤šNDAå¯èƒ½ä¼šæ‰‹æŠ½ç­‹ï¼Œè¿™ä½¿ç¼–å†™å®ƒä»¬å˜å¾—æ›´åŠ æ£˜æ‰‹ã€‚å½“Broadcomå¼€æºå…¶SDKæ—¶ï¼Œè¿™ç§æƒ…å†µæœ€è¿‘å‘ç”Ÿäº†å˜åŒ–ã€‚è®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹ä»–ä»¬çš„ä¸€äº›äº§å“ã€‚</p><p>  The Tomahawk line of ASICs are the bread-and-butter for the enterprise market. They&#39;re cheap and incredibly fast. The first generation of Tomahawk chips did 3.2Tbps linerate, with low-latency switching. The latest generation of this chip (Tomahawk 4) does 25.6Tbps in a 7nm transistor footprint  [5]). As you can&#39;t have a cheap, fast, and full feature set for a single package, this means you lose out on features. In this case, you&#39;re missing most of the more advanced networking technologies such as VXLAN, and you have no buffer to speak of. As an example of a different vendor using this silicon, you can have a look at the Juniper QFX5200 switching platform.</p><p>  å°ç¬¬å®‰æˆ˜æ–§ï¼ˆTomahawkï¼‰ASICç³»åˆ—æ˜¯ä¼ä¸šå¸‚åœºçš„å¤´ç­‰å¤§äº‹ã€‚å®ƒä»¬å¾ˆä¾¿å®œè€Œä¸”éå¸¸å¿«ã€‚ç¬¬ä¸€ä»£TomahawkèŠ¯ç‰‡çš„çº¿é€Ÿä¸º3.2Tbpsï¼Œå¹¶å…·æœ‰ä½å»¶è¿Ÿåˆ‡æ¢ã€‚è¯¥èŠ¯ç‰‡çš„æœ€æ–°ä¸€ä»£äº§å“ï¼ˆTomahawk 4ï¼‰åœ¨7nmæ™¶ä½“ç®¡å°è£…ä¸­çš„é€Ÿåº¦ä¸º25.6Tbps [5]ã€‚ç”±äºæ‚¨æ— æ³•ä¸ºå•ä¸ªè½¯ä»¶åŒ…æä¾›ä¾¿å®œï¼Œå¿«é€Ÿå’Œå®Œæ•´çš„åŠŸèƒ½ï¼Œè¿™æ„å‘³ç€æ‚¨å°†å¤±å»åŠŸèƒ½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†ç¼ºå°‘å¤§å¤šæ•°æ›´é«˜çº§çš„ç½‘ç»œæŠ€æœ¯ï¼ˆä¾‹å¦‚VXLANï¼‰ï¼Œå¹¶ä¸”æ²¡æœ‰ç¼“å†²å¯è¨€ã€‚ä½œä¸ºä½¿ç”¨è¯¥èŠ¯ç‰‡çš„å…¶ä»–ä¾›åº”å•†çš„ç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥çœ‹ä¸€ä¸‹Juniper QFX5200äº¤æ¢å¹³å°ã€‚</p><p>  These chipsets came through the acquisition of Dune Networks, and are a collection of high-bandwidth, deep buffer (large amount of memory available to store (buffer) packets) chips, allowing them to be deployed in versatile environments, including the Cloudflare edge. The Arista DCS-7280SR that we run in some of our edge locations as edge routers run on the Jericho chipset. Since then, the chips have evolved, and with Jericho2, Broadcom now have a 10Tbps deep buffer chip  [6]. With their fabric chip (this links multiple ASICs together), you can build switches with 48x400G ports  [7] without much effort. Cisco built their NCS5500 line of routers using the QumranMX  [8].</p><p>  è¿™äº›èŠ¯ç‰‡ç»„æ˜¯é€šè¿‡æ”¶è´­Dune Networksè·å¾—çš„ï¼Œå¹¶ä¸”æ˜¯é«˜å¸¦å®½æ·±ç¼“å†²åŒºï¼ˆå¯ç”¨äºå­˜å‚¨ï¼ˆç¼“å†²ï¼‰æ•°æ®åŒ…çš„å¤§é‡å†…å­˜ï¼‰èŠ¯ç‰‡çš„é›†åˆï¼Œä»è€Œå¯ä»¥å°†å®ƒä»¬éƒ¨ç½²åœ¨åŒ…æ‹¬Cloudflare edgeåœ¨å†…çš„å¤šç§ç¯å¢ƒä¸­ã€‚å½“è¾¹ç¼˜è·¯ç”±å™¨åœ¨JerichoèŠ¯ç‰‡ç»„ä¸Šè¿è¡Œæ—¶ï¼Œæˆ‘ä»¬åœ¨æŸäº›è¾¹ç¼˜ä½ç½®è¿è¡Œçš„Arista DCS-7280SRã€‚ä»é‚£æ—¶èµ·ï¼Œè¿™äº›èŠ¯ç‰‡å°±ä¸æ–­å‘å±•ï¼Œç°åœ¨æœ‰äº†Jericho2ï¼ŒBroadcomæœ‰äº†10Tbpsçš„æ·±åº¦ç¼“å†²èŠ¯ç‰‡[6]ã€‚åˆ©ç”¨å…¶ç»“æ„èŠ¯ç‰‡ï¼ˆå°†å¤šä¸ªASICé“¾æ¥åœ¨ä¸€èµ·ï¼‰ï¼Œæ‚¨å¯ä»¥è½»æ¾æ„å»ºå…·æœ‰48x400Gç«¯å£çš„äº¤æ¢æœº[7]ã€‚æ€ç§‘ä½¿ç”¨QumranMX [8]æ„å»ºäº†ä»–ä»¬çš„NCS5500è·¯ç”±å™¨ç³»åˆ—ã€‚</p><p>  This ASIC is an upgrade from the Tomahawk chipset, with a complex and extensive feature set, while maintaining high throughput rates. The latest Trident4 does 12.8Tbps at incredibly low latencies  [9], making it an incredibly flexible platform. It unfortunately has no buffer space to speak of, which limits its scope for Cloudflare, as we need the buffer space to be able to switch between the different port speeds we have on our edge routers. The Arista 7050X and 7300X are built on top of this.</p><p>  è¯¥ASICæ˜¯TomahawkèŠ¯ç‰‡ç»„çš„å‡çº§ç‰ˆï¼Œå…·æœ‰å¤æ‚è€Œå¹¿æ³›çš„åŠŸèƒ½é›†ï¼ŒåŒæ—¶ä¿æŒäº†é«˜ååç‡ã€‚æœ€æ–°çš„Trident4ä»¥æä½çš„å»¶è¿Ÿ[1]è¿›è¡Œäº†12.8Tbpsçš„ä¼ è¾“ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªéå¸¸çµæ´»çš„å¹³å°ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®ƒæ²¡æœ‰ç¼“å†²ç©ºé—´å¯è¨€ï¼Œè¿™é™åˆ¶äº†å®ƒåœ¨Cloudflareä¸­çš„é€‚ç”¨èŒƒå›´ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è¯¥ç¼“å†²ç©ºé—´æ‰èƒ½åœ¨æˆ‘ä»¬çš„è¾¹ç¼˜è·¯ç”±å™¨æ‰€å…·æœ‰çš„ä¸åŒç«¯å£é€Ÿåº¦ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚ Arista 7050Xå’Œ7300Xåœ¨æ­¤åŸºç¡€ä¸Šæ„å»ºã€‚</p><p>  Intel is well known in the network industry for building stable and high-performance 10G NICs (Network Interface Controller). They&#39;re not known for ASICs. They made an initial attempt with their acquisition of Fulcrum  [10], which built the FM6000  [11] series of ASIC, but nothing of note was really built with them. Intel decided to try again in 2019 with their acquisition of Barefoot. This small manufacturer is responsible for the Barefoot Tofino ASIC, which may well be a fundamental paradigm shift in the network industry.</p><p>  è‹±ç‰¹å°”åœ¨ç½‘ç»œè¡Œä¸šä¸­ä»¥æ„å»ºç¨³å®šä¸”é«˜æ€§èƒ½çš„10G NICï¼ˆç½‘ç»œæ¥å£æ§åˆ¶å™¨ï¼‰è€Œé—»åã€‚å®ƒä»¬ä¸ä»¥ASICé—»åã€‚ä»–ä»¬é€šè¿‡æ”¶è´­Fulcrum [10]è¿›è¡Œäº†åˆæ­¥å°è¯•ï¼Œè¯¥äº§å“æ„å»ºäº†FM6000 [11]ç³»åˆ—çš„ASICï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰çœŸæ­£å¼•èµ·æ³¨æ„ã€‚è‹±ç‰¹å°”å†³å®šåœ¨2019å¹´é€šè¿‡æ”¶è´­Barefootå†æ¬¡å°è¯•ã€‚è¿™ä¸ªå°åˆ¶é€ å•†è´Ÿè´£Barefoot Tofino ASICï¼Œè¿™å¾ˆå¯èƒ½æ˜¯ç½‘ç»œè¡Œä¸šçš„æ ¹æœ¬æ€§è½¬å˜ã€‚</p><p>  The Tofino  [12] is built using a PISA (Protocol Independent Switch Architecture), and using P4 (Programming Protocol-Independent Packet Processors)  [13], you can program the data-plane (packet forwarding) as you see fit. It&#39;s a drastic move away from the traditional method of networking, in which direct programming of the ASIC isn&#39;t easily possible, and definitely not through a standard programming language. As an added benefit, P4 also allows you to perform a formal verification of your forwarding program, and be sure that it will do what you expect it to. Caveat: OpenFlow tried this, but unfortunately never really got much traction.    [14]</p><p>Tofino [12]ä½¿ç”¨PISAï¼ˆä¸åè®®æ— å…³çš„äº¤æ¢æ¶æ„ï¼‰æ„å»ºï¼Œå¹¶ä½¿ç”¨P4ï¼ˆä¸ç¼–ç¨‹åè®®æ— å…³çš„åˆ†ç»„å¤„ç†å™¨ï¼‰[13]æ„å»ºï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¯¹æ•°æ®å¹³é¢ï¼ˆæ•°æ®åŒ…è½¬å‘ï¼‰è¿›è¡Œç¼–ç¨‹ã€‚è¿™æ˜¯å¯¹ä¼ ç»Ÿç½‘ç»œæ–¹æ³•çš„å·¨å¤§çªç ´ï¼Œåœ¨ä¼ ç»Ÿç½‘ç»œæ–¹æ³•ä¸­ï¼Œå¾ˆéš¾ç›´æ¥å¯¹ASICè¿›è¡Œç›´æ¥ç¼–ç¨‹ï¼Œè€Œä¸”ç»å¯¹ä¸èƒ½é€šè¿‡æ ‡å‡†ç¼–ç¨‹è¯­è¨€è¿›è¡Œã€‚ä½œä¸ºä¸€é¡¹é¢å¤–çš„å¥½å¤„ï¼ŒP4è¿˜å…è®¸æ‚¨å¯¹è½¬å‘ç¨‹åºè¿›è¡Œæ­£å¼éªŒè¯ï¼Œå¹¶ç¡®ä¿å®ƒä¼šæŒ‰é¢„æœŸæ‰§è¡Œæ“ä½œã€‚è­¦å‘Šï¼šOpenFlowå°è¯•è¿‡è¿™ç§æ–¹æ³•ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå®ƒä»æœªçœŸæ­£å¸å¼•è¿‡å¾ˆå¤šäººã€‚ [14]</p><p> There are multiple variations of the Tofino 1 available, but the top-end ASIC has a 6.5Tbps linerate capacity. As the ASIC is programmable, its featureset is as rich as you&#39;d want it to be. Unfortunately, the chip does not come with a lot of buffer memory, so we can&#39;t deploy these as edge devices (yet). Both Arista (7170 Series  [15]) and Cisco (Nexus 34180YC and 3464C series  [16]) have built equipment with the Tofino chip inside.</p><p> Tofino 1æœ‰å¤šç§å˜ä½“ï¼Œä½†é«˜ç«¯ASICçš„çº¿é€Ÿå®¹é‡ä¸º6.5Tbpsã€‚ç”±äºASICæ˜¯å¯ç¼–ç¨‹çš„ï¼Œå› æ­¤å®ƒçš„åŠŸèƒ½é›†åƒæ‚¨æƒ³è¦çš„é‚£æ ·ä¸°å¯Œã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¯¥èŠ¯ç‰‡æ²¡æœ‰å¾ˆå¤šç¼“å†²å­˜å‚¨å™¨ï¼Œå› æ­¤æˆ‘ä»¬è¿˜ä¸èƒ½å°†å®ƒä»¬éƒ¨ç½²ä¸ºè¾¹ç¼˜è®¾å¤‡ã€‚ Aristaï¼ˆ7170ç³»åˆ—[15]ï¼‰å’ŒCiscoï¼ˆNexus 34180YCå’Œ3464Cç³»åˆ—[16]ï¼‰éƒ½å†…ç½®äº†TofinoèŠ¯ç‰‡ã€‚</p><p>  As some of you may know, Mellanox is the vendor that recently got acquired by Nvidia, which also provides our 25G NICs in our compute nodes. Besides NICs, Mellanox has a well-established line of ASICs, mostly for switching.</p><p>  ä½ ä»¬ä¸­æœ‰äº›äººå¯èƒ½çŸ¥é“ï¼ŒMellanoxæ˜¯æœ€è¿‘è¢«Nvidiaæ”¶è´­çš„ä¾›åº”å•†ï¼Œè¯¥å…¬å¸è¿˜åœ¨æˆ‘ä»¬çš„è®¡ç®—èŠ‚ç‚¹ä¸­æä¾›äº†25G NICã€‚é™¤äº†NICï¼ŒMellanoxè¿˜æ‹¥æœ‰å®Œå–„çš„ASICç³»åˆ—ï¼Œä¸»è¦ç”¨äºäº¤æ¢ã€‚</p><p>  The latest iteration of this ASIC, Spectrum 3 offers 12.8Tbps switching capacity, with an extensive featureset, including Deep Packet Inspection and NAT. This chip allows for building dense high-speed port devices, going up to 25.6Tbps  [17]. Buffering wise, there&#39;s none to really speak of (64MB). Mellanox also builds their own hardware platforms. Unlike the other vendors below, they aren&#39;t shipped with the Mellanox Operating System, instead, they offer you a variety of choices to run on top, including Cumulus Linux (which was also acquired by Nvidia ğŸ¤”).</p><p>  Spectrum 3æ˜¯è¯¥ASICçš„æœ€æ–°ç‰ˆæœ¬ï¼Œå…·æœ‰12.8Tbpsçš„äº¤æ¢èƒ½åŠ›ï¼Œå…·æœ‰å¹¿æ³›çš„åŠŸèƒ½é›†ï¼ŒåŒ…æ‹¬æ·±åº¦æ•°æ®åŒ…æ£€æµ‹å’ŒNATã€‚è¯¥èŠ¯ç‰‡å…è®¸æ„å»ºå¯†é›†çš„é«˜é€Ÿç«¯å£è®¾å¤‡ï¼Œæœ€é«˜å¯è¾¾25.6Tbps [17]ã€‚åœ¨ç¼“å†²æ–¹é¢ï¼Œæ²¡æœ‰ä»€ä¹ˆå¯è¯´çš„ï¼ˆ64MBï¼‰ã€‚ Mellanoxè¿˜æ„å»ºè‡ªå·±çš„ç¡¬ä»¶å¹³å°ã€‚ä¸ä¸‹é¢çš„å…¶ä»–ä¾›åº”å•†ä¸åŒï¼Œå®ƒä»¬æ²¡æœ‰ä¸Mellanoxæ“ä½œç³»ç»Ÿä¸€èµ·æä¾›ï¼Œè€Œæ˜¯ä¸ºæ‚¨æä¾›äº†å¤šç§è¿è¡Œåœ¨é¡¶éƒ¨çš„é€‰æ‹©ï¼ŒåŒ…æ‹¬Cumulus Linuxï¼ˆNvidia iaè¿˜æ”¶è´­äº†å®ƒï¼‰ã€‚</p><p> As mentioned, while we use their NIC technology extensively, we currently don&#39;t have any Mellanox ASIC silicon in our network.</p><p> å¦‚å‰æ‰€è¿°ï¼Œå°½ç®¡æˆ‘ä»¬å¹¿æ³›ä½¿ç”¨å…¶NICæŠ€æœ¯ï¼Œä½†ç›®å‰æˆ‘ä»¬çš„ç½‘ç»œä¸­æ²¡æœ‰ä»»ä½•Mellanox ASICèŠ¯ç‰‡ã€‚</p><p>  Juniper is a network hardware supplier, and currently the biggest supplier of network equipment for Cloudflare. As previously mentioned in the Broadcom section, Juniper buys some of their silicon from Broadcom, but they also have a significant lineup of home-grown silicon, which can be split into 2 families: Trio and Express.</p><p>  Juniperæ˜¯ç½‘ç»œç¡¬ä»¶ä¾›åº”å•†ï¼Œç›®å‰æ˜¯Cloudflareçš„æœ€å¤§ç½‘ç»œè®¾å¤‡ä¾›åº”å•†ã€‚å°±åƒåœ¨Broadcomä¸€èŠ‚ä¸­å…ˆå‰æåˆ°çš„é‚£æ ·ï¼ŒJuniperä»Broadcomè´­ä¹°äº†ä¸€äº›ç¡…ï¼Œä½†æ˜¯ä»–ä»¬è¿˜æœ‰å¤§é‡çš„è‡ªäº§ç¡…äº§å“çº¿ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªç³»åˆ—ï¼šTrioå’ŒExpressã€‚</p><p>  The Express family is the switching-skewed family, where bandwidth is a priority, while still maintaining a broad range of feature capabilities. These chips live in the same application landscape as the Broadcom StrataDNX chips.</p><p>  Expressç³»åˆ—æ˜¯äº¤æ¢å‹ç³»åˆ—ï¼Œå¸¦å®½æ˜¯ä¼˜å…ˆè€ƒè™‘çš„é—®é¢˜ï¼ŒåŒæ—¶ä»ä¿æŒå¹¿æ³›çš„åŠŸèƒ½ã€‚è¿™äº›èŠ¯ç‰‡ä¸Broadcom StrataDNXèŠ¯ç‰‡çš„åº”ç”¨ç¯å¢ƒç›¸åŒã€‚</p><p>  The Q5 is the new generation of the Juniper switching ASIC  [18]. While by itself it doesn&#39;t boast high linerates (500Gbps), when combined into a chassis with a fabric chip ( Clos network in this case), they can produce switches (or line cards) with up to 12Tbps of throughput capacity  [19]. In addition to allowing for high-throughput, dense network appliances, the chip also comes with a staggering amount of buffer space (4GB per ASIC), provided by external  HMC (Hybrid Memory Cube). In this HMC, they&#39;ve also decided to put the FIB, MAC and other tables (so no TCAM). The Q5 chip is used in their QFX1000 lineup of switches, which include the QFX10002-36Q, QFX10002-60C, QFX10002-72Q and QFX10008, all of which are deployed in our datacenters, as either edge routers or core aggregation switches.</p><p>Q5æ˜¯æ–°ä¸€ä»£ç»åšç½‘ç»œäº¤æ¢ASIC [18]ã€‚è™½ç„¶å®ƒæœ¬èº«ä¸å…·æœ‰è¾ƒé«˜çš„çº¿æ€§ï¼ˆ500Gbpsï¼‰ï¼Œä½†æ˜¯å½“å°†å…¶ä¸å¸¦æœ‰ç»“æ„èŠ¯ç‰‡çš„æœºç®±ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºClosç½‘ç»œï¼‰ç»„åˆåœ¨ä¸€èµ·æ—¶ï¼Œå®ƒä»¬å¯ä»¥ç”Ÿäº§ååé‡é«˜è¾¾12Tbpsçš„äº¤æ¢æœºï¼ˆæˆ–çº¿å¡ï¼‰[19] ã€‚é™¤äº†æ”¯æŒé«˜ååé‡ï¼Œå¯†é›†çš„ç½‘ç»œè®¾å¤‡å¤–ï¼Œè¯¥èŠ¯ç‰‡è¿˜é…å¤‡äº†ç”±å¤–éƒ¨HMCï¼ˆæ··åˆå†…å­˜ç«‹æ–¹ä½“ï¼‰æä¾›çš„æƒŠäººçš„ç¼“å†²åŒºç©ºé—´ï¼ˆæ¯ä¸ªASIC 4GBï¼‰ã€‚åœ¨æ­¤HMCä¸­ï¼Œä»–ä»¬è¿˜å†³å®šæ”¾ç½®FIBï¼ŒMACå’Œå…¶ä»–è¡¨ï¼ˆå› æ­¤æ²¡æœ‰TCAMï¼‰ã€‚ Q5èŠ¯ç‰‡ç”¨äºå…¶QFX1000ç³»åˆ—äº¤æ¢æœºï¼Œå…¶ä¸­åŒ…æ‹¬QFX10002-36Qï¼ŒQFX10002-60Cï¼ŒQFX10002-72Qå’ŒQFX10008ï¼Œå®ƒä»¬éƒ½ä½œä¸ºè¾¹ç¼˜è·¯ç”±å™¨æˆ–æ ¸å¿ƒæ±‡èšäº¤æ¢æœºéƒ¨ç½²åœ¨æˆ‘ä»¬çš„æ•°æ®ä¸­å¿ƒä¸­ã€‚</p><p>  The </p><p>  çš„</p><p>......</p><p>......</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.cloudflare.com/asics-at-the-edge/">https://blog.cloudflare.com/asics-at-the-edge/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/è¾¹ç¼˜/">#è¾¹ç¼˜</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/asics/">#asics</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/asic/">#asic</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>