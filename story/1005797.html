<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>构建您自己的私有自托管全栈个人云系统</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">构建您自己的私有自托管全栈个人云系统</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-09 10:23:19</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/6/18b4e6b22707b7d5eb9f02790ac7ccb7.png"><img src="http://img.diglog.com/img/2020/6/18b4e6b22707b7d5eb9f02790ac7ccb7.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>您可能会惊讶地发现，使用您自己的设备在您自己的家中构建和维护自己的私有云系统不仅是可能的，而且相对容易，而且非常有趣和有价值。以下说明应提供从头开始构建支持多主机的个人云计算平台所需的一切。这个项目主要使用现成的技术，灵感来自于拱门方式(简约、现代、实用、以用户为中心、多功能性)，目的是只需要少量的技术关注，并允许广泛的表达和功能。在完成以下步骤之后，您将拥有一个功能齐全的个人私有云系统，可以根据您的需要将其塑造成您想要的服务。我不知道你怎么样，但我知道我很兴奋，所以我们开始吧。</p><p>[边缘节点VPS]|[LAN节点]|[Wireguard]&lt；。-+|。。|.。[-球童-]。|.。|。|.。V|V。|.。[APP]|[APP]。|.。v.。|.。[应用程序]。|.。。+。。。。。。。。。。。。。。。。。+**互联网*家庭网络云**。</p><p>通过这个平台，您可以从任何地方、任何设备安装、拥有、操作和访问您选择安装的任何云软件。</p><p>聊天*照片*呼叫*文件存储*音乐*笔记*天气*新闻*等。</p><p>你将拥有自己的公共域名，就像https://bobspersonalwebsite.com一样，解析来自你从零开始构建的云系统的数据和应用程序，该云系统在你自己的家庭网络内的设备上运行。</p><p>Raspberry PI(v3或更高版本，或采用PC或虚拟机的说明)。</p><p>如果您还不熟悉Wireguard和Docker，您可能需要先熟悉一下它们，因为它们在本项目中扮演着核心角色。这些说明假定您熟悉基于命令行的安装和配置。对于文本编辑，我们将使用vim，请随意使用您选择的文本编辑器替换vim。</p><p>如果这听起来像你喜欢的茶，亲爱的读者，继续往下看。或者，如果你更喜欢自动化一点的东西，可以考虑一下这些。</p><p>边缘节点充当轻量级、始终在线的公共接入网关，主要路由流量，提供保密层并缓解NAT问题。</p><p>在您喜欢的VPS服务(如Digital Ocean或Vultr)上创建一个VPS实例。(使用以下附属链接支持此项目：数字海洋|Vultr$100，30天免费信用。)。</p><p>出于本教程的目的，我们将假定您的边缘节点IP地址为198.51.100.1。</p><p>我们将使用Wireguard通过您的NAT来路由流量，并提供一层隐私来保护您的家庭IP地址的私密性。您可以认为这有点像反向VPN。</p><p>在docker中运行服务使事情保持整洁和可管理，我们将设置docker以包含我们的边缘服务，从反向代理Web服务器开始。</p><p>Caddy超级易于使用，自动支持let的加密https证书，并将用于将我们的域请求路由到我们的主节点网络。</p><p>使用您自己的现有域或注册一个新的域。|Namecheap--使用此关联链接支持此项目。</p><p>使用CloudFlare作为您的名称服务器(将您的域名服务器设置为您的CloudFlare帐户指示的名称服务器名称。)</p><p>DNS配置A记录以指向您的VPS的IP。启用CloudFlare代理的情况下。例如A@198.51.100.1(将example.com替换为您的域名，198.51.100.1是示例地址，无论何时看到198.51.100.1地址，请使用您的边缘节点的IP地址。)。</p><p>将CloudFlare配置为CNAME记录edge.example.com(将.example.com替换为您的域名，例如edge.youdomain.com)，将其指向您的域名，而不使用CloudFlare代理(单击可生成灰云)。例如CNAME edge example.com。</p><p>做得好!。此时，您拥有一个具有公开分配域名的工作边缘节点，可以接受Web流量并将其转发到您的本地网络。现在可能是休息一下，出去散散步的好时机。下一个就是..。本地节点！</p><p>本地节点位于您的家庭网络中。在这个系统中，本地节点几乎就是一切存在和发生的地方。云系统可以从一个或多个主机构建，但为了简单起见，我们将只从一个节点开始，即Raspberry PI。</p><p>PI套件$100这是一个套件，请随意获取任何PI设置v3或更高版本。</p><p>注意：如果您没有PI，您可以使用虚拟机或笔记本电脑，如果是这样，请注意您可能需要根据您的情况调整这些说明。</p><p>在这里，我们将设置本地侧布线。当本地节点引导并获得Internet连接时，它将自动连接到您的边缘节点，并且可以虚拟地访问外部请求。</p><p>本地节点服务在码头容器内设置。Web请求通过Cady(在容器中运行)被路由到其他容器化进程，但都映射到您的域名内的URL。</p><p>当web请求到达您的边缘节点时，它会命中您的边缘节点Caddy实例，该实例通过wireguard将请求路由到您的本地Cdy，然后本地Cdy再将其路由到在该url上运行服务的docker容器。</p><p>太棒了！！一切都是相连的！您现在拥有一个公有域，该公有域由您的本地网络中的设备提供服务。凉爽的。接下来，让该节点执行操作。</p><p>云需要做一些事情，您将能够将您的云构建成任何适合您的东西。在这里，您将找到几个示例来帮助您入门，我们将从一个简单的静态文件服务器开始，然后再转到动态应用程序。</p><p>在这里，您可能还会注意到，如果您输入http://example.com，您将被转发到安全链接https://example.com.。</p><p>这里有几个可以尝试的应用程序安装程序，请单击其中一个或跳转到更多页面查看扩展列表。</p><p>好了。你自己的云。让我们知道你怎么处理你的！</p><p>有时情况会发生变化，或者可能存在键入错误的命令。这里有一些提示和小贴士，可以让错误的事情重回正轨。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://github.com/technomada/cloud-from-scratch">https://github.com/technomada/cloud-from-scratch</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/全栈/">#全栈</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/private/">#private</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/节点/">#节点</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>