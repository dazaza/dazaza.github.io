<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>关键帧、帧间和视频压缩(2016)</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">关键帧、帧间和视频压缩(2016)</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-07 19:56:33</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/5/11c9b04e1ecee11fac42027a651dac8e.png"><img src="http://img.diglog.com/img/2020/5/11c9b04e1ecee11fac42027a651dac8e.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>视频压缩的默认心理图像包含不需要的视频伪像，如图像中的像素化和块状。然而，这低估了压缩视频内容的实际复杂性。特别是，它忽略了一个称为帧间的有趣过程，该过程涉及关键帧和增量帧，以便以一种意在不被注意的方式智能地压缩内容。</p><p>本文详细描述了这个过程，同时还给出了最佳实践和理想的编码器设置，您可以将它们应用于IBM Cloud Video的实况流。该特定建议中的大部分涉及由于自适应比特率而导致的流传输。要了解有关该技术的更多信息，请参考我们的《自适应流如何解决查看器带宽问题》白皮书。</p><p>流媒体技术有很多术语和方面是理所当然的。随着一些人成为一名成熟的播音员，更详细地了解元素以了解为什么要进行流程以及最佳设置是值得的。</p><p>例如，关键帧是一些广播公司以前提到过的东西，或者在Wirecast这样的编码器中看到过设置，但没有完全意识到它是什么，以及这个过程对流媒体有多大好处。关键帧是一个重要元素，但实际上只是帮助降低视频所需带宽的较长过程的一部分。要理解这种关系，首先需要理解视频帧。</p><p>从高层次开始，很可能会意识到视频内容是由一系列帧组成的。通常表示为FPS(每秒帧数)，每帧都是静止图像，当按顺序播放时会创建运动图像。因此，使用FPS为30创建的内容意味着每秒钟将播放30个“静止图像”。</p><p>在一段平均视频中，如果有人拍摄90个连续的帧并将其展开，他们将看到许多几乎相同的元素。例如，如果有人站在一株静止的植物旁边说话，那么与该植物有关的信息就不太可能改变。结果，这就浪费了大量带宽，仅仅是用来传达某些东西没有改变的信息。</p><p>因此，当寻找有效的方法来压缩视频内容时，帧管理就成为了一个重要的原则。因此，如果示例中的植物不会改变，为什么不在后续的一些帧中继续使用相同的元素来减少空间呢？</p><p>这种认识催生了帧间预测的想法。这是一种视频压缩技术，它将帧划分为宏块，然后查找块之间的冗余。此过程通过使用关键帧(也称为I帧或帧内帧)和增量帧来工作，这些帧仅存储图像中的更改以减少冗余信息。这些帧集合通常由缩写为GOP的“图片组”的相当非技术性的名称来指代。用于编码或解码数字数据流的视频编解码器都具有某种形式的帧间管理。H.264、MPEG-2和MPEG-4都使用三帧方法，包括：关键帧、p帧和b帧。</p><p>关键帧(I帧)是视频中图像的完整帧。后续帧(增量帧)仅包含已更改的信息。关键帧将在一个流中多次出现，这取决于它是如何创建的，或者它是如何流式传输的。</p><p>如果有人用谷歌搜索“关键帧”，他们很可能会找到一些与动画和视频编辑相关的结果。在本例中，我们使用关键帧一词来说明它与视频压缩的关系及其与增量帧的关系。</p><p>也称为预测帧或预测帧，p帧跟随另一帧，并且在视频中仅包含图像的一部分。因此，它被归类为增量框架。P-帧向后查看前一个P-帧或关键帧(I-帧)以查找冗余。在P帧中呈现的图像量取决于帧之间包含的新信息量。</p><p>例如，某人在静态背景前对着摄像机讲话，可能只包含与其运动相关的信息。然而，当摄像机摇摄时，某人在田野中奔跑时，每个p帧都会有更多的信息，以匹配他们的运动和变化的背景。</p><p>也称为双向预测帧，b帧跟随另一帧，并且在视频中仅包含图像的一部分。包含在B帧中的图像量取决于帧之间的新信息量。</p><p>与P帧不同，B帧可以向后或向后查看前面或后面的P帧或关键帧(I帧)以查找冗余。这使得B帧比P帧更有效，因为它们更有可能找到冗余。但是，当编码器内部的编码配置文件设置为基线时，不使用b帧。这意味着编码器必须设置在基线之上的编码配置文件，例如“Main”或“HIGH”。</p><p>关于用于实况流的视频压缩，在编码器内部设置关键帧。这是由编码器内部有时称为“关键帧间隔”的选项配置的。</p><p>关键帧间隔控制在视频中创建关键帧(I帧)的频率。通常情况下，关键帧间隔越大，应用于内容的压缩程度越高，尽管这并不意味着质量会明显降低。有关关键帧间隔如何工作的示例，如果将间隔设置为每2秒一次，并且帧速率为每秒30帧，这将意味着大约每60帧生成一个关键帧。</p><p>术语“关键帧间隔”不是通用的，大多数编码器对此都有自己的术语。例如，Adobe Flash Media Live编码器(FMLE)和vMix使用术语“关键帧频率”来描述此过程。其他程序和服务可能将该间隔称为“GOP大小”或“GOP长度”，回到“图片组”的缩写。</p><p>对于FMLE，通过单击Format(格式)右侧的扳手图标，可以在软件编码器中找到此选项，表示为“Keyframe Frequency”(关键帧频率)。</p><p>在Wirecast中，这是从编码器预设菜单中设置的，该选项称为“关键帧间隔”。有线广播则不同，因为间隔实际上是以帧表示的。因此，对于30 FPS的广播，将“关键帧间隔”设置为60帧将大致得到2秒的关键帧间隔，因为您每秒有30帧。</p><p>对于vMix编码器，需要首先单击流式处理附近的齿轮图标，这将打开流式处理设置。在这里的质量选项附近是另一个齿轮图标，单击此图标将打开一个菜单，该菜单可以修改“关键帧频率”。</p><p>在开放式广播软件(OBS)中，对于版本0.55b之后的版本，可以在高级下的设置区域中设置关键帧间隔。对于v0.542b之前的OBS版本，如何修改关键帧间隔并不是很清楚，但这实际上是设置的一个组成部分。在那里，转到高级，然后选择“自定义X264编码器设置”。在该字段中，需要输入以下字符串：“keyint=XX”，XX是触发关键帧之前的帧数。与Wirecast类似，如果希望关键帧间隔为2秒，而FPS为30秒，请输入以下内容：“keyint=60”。</p><p>对于XSplit，关键帧间隔是通道属性的一个组成部分。在视频编码区域下，可以找到一个列表，上面写着“关键帧间隔(秒)”。最右边是齿轮图标。单击齿轮将启动“Video Encoding Setup”(视频编码设置)弹出窗口。这将允许用户以秒为单位指定关键帧间隔。</p><p>此解释中的里程可能有所不同，因为编码器管理比特率和关键帧的方式不同。使用像Wirecast这样的编码器，人们可能会注意到，与广播在移动背景下上下跳跃的人相比，广播在静止背景下讲话的人具有“更高的质量”。当在它们之间使用完全相同的平均比特率和关键帧间隔时，这可以被重现。其原因部分是由于增量帧在跳跃示例中有大量信息要共享的事实。冗余非常少，这意味着需要在每个增量帧上传输的数据要多得多。</p><p>如果你有一个像Wirecast这样的编码器，它会尽最大努力使码流保持在选择的平均比特率附近。因此，增量帧中包含的附加信息所需的增加的带宽导致质量降低，以试图将平均比特率保持在相同水平附近。</p><p>从来没有一个行业标准，尽管10秒经常被认为是一个很好的关键帧间隔，尽管不再建议流媒体使用10秒。建议这样做的原因是，对于标准的29.97FPS文件，生成的内容具有足够的响应性，可以支持从预览滑块轻松导航。为了解释更多，播放器不能在p帧或b帧上开始播放。因此，使用10秒的示例，如果有人试图导航到提要中的5秒的点，它实际上会将5秒移回最近的关键帧并开始播放。这被认为是一个较小的带宽消耗的很好的权衡，尽管作为参考，DVD选择使用比10秒小得多的东西。</p><p>然而，对于直播来说，推荐级别却大幅下降。其原因是自适应比特率流的出现。对于那些不熟悉自适应流式传输的人，该技术使视频播放器能够基于试图观看的观众在可用分辨率和/或比特率之间动态改变。因此，下载速度较慢的用户将获得较低的比特率版本(如果有)。其他标准，如回放窗口大小，也将影响给定的比特率。</p><p>然而，真正的自适应流媒体不仅在视频内容最初加载时进行这种检查，而且还可以根据观众端的变化来改变比特率。例如，如果观众在他们的手机上移动到Wi-Fi网络的范围之外，他们将开始使用正常的蜂窝服务，这可能会导致下载速度变慢。因此，观众可能试图观看比特率相对于其下载速度过高的内容。自适应流传输技术应该意识到这种差异，并使其切换到不同的比特率。</p><p>关键帧间隔在此生效，因为切换发生在下一个关键帧期间。因此，如果有人以10秒的间隔进行广播，这意味着可能需要长达10秒的时间才能改变比特率和分辨率。这段时间意味着内容可能会在更改发生之前缓冲在观众一方，这可能会导致观众放弃。</p><p>因此，建议将直播的关键帧间隔设置为2秒。这产生了这样的结果，其中视频轨道可以经常在用户可能由于其下载速度的降低而经历缓冲之前有效地改变比特率。</p><p>我们在这里循环，但在讨论什么是IDR帧或即时解码刷新帧之前，了解p帧、b帧并学习自适应流传输速成课程是值得的。这些实际上是关键帧，每个关键帧可以是基于IDR的，也可以不是基于IDR的。两者的不同之处在于，基于IDR的关键帧起到了硬停止的作用。IDR帧防止P帧和B帧引用发生在IDR帧之前的帧。非IDR关键帧将允许这些帧更远地向后查找冗余。</p><p>从理论上讲，非IDR关键帧听起来很理想：它允许查看更大的帧样本以进行冗余，从而极大地减小了文件大小。不幸的是，导航出现了很多问题，而且该功能在自适应流媒体中不能很好地发挥作用。以导航为例，假设某人开始观看6分钟后的一条流。这将导致问题，因为P帧和B帧可能引用的信息从未被查看器实际访问过。对于自适应流式传输，如果更改比特率和分辨率，可能会出现类似的问题。这是因为新选择可能引用查看器在不同质量设置下观看的不再平行的数据。出于这些原因，始终建议将关键帧设置为基于IDR。</p><p>通常，编码器要么提供打开或关闭基于IDR的关键帧的选项，要么根本不提供该选项。对于那些不提供该选项的编码器，几乎可以肯定是这样的，因为编码器被设置为只使用IDR帧。</p><p>原则上，自动关键帧设置相当不错。它们将在场景更改期间手动强制执行关键帧。例如，如果您从PowerPoint幻灯片切换到某人在相机前讲话的图像，则会强制使用新的关键帧。这是可取的，因为三角框不会有太多的工作，无法找到PowerPoint幻灯片和相机图像之间的冗余。</p><p>不幸的是，此过程不适用于某些自适应流传输技术，尤其是HLS。HLS过程要求关键帧是可预测的且同步。使用“自动”设置将在关键帧之间创建可变间隔。例如，如果场景更改发生得很快，则关键帧之间的时间可能是7秒，然后可能是2秒。</p><p>对于大多数编码器来说，要禁用“自动更改”或“场景更改检测”功能，这通常只是表示关键帧间隔。例如，在OBS中，如果关键帧间隔设置为0秒，则自动功能将生效。在其中放置任何数字，如1或2，都将禁用自动功能。</p><p>如果编码器和Wirecast一样，有一个“关键帧对齐”选项，那么应该知道这不是一个相同的过程。使关键帧对齐是用于创建特定时间戳的过程，并且最适合于使广播者通过编码器发送的多个比特率保持同步。</p><p>随着自适应比特率的出现，该行业正处于一个奇怪的关头，关键帧和直播的最佳实践有一个相当明确的答案。该策略包括：</p><p>此策略允许轻松导航内容，以便在广播后按需观看，同时仍可获得帧管理的好处，并在减少冗余方面节省带宽。它还支持自适应比特率流，这是成功直播的重要元素，并且能够支持连接速度较慢的观众。</p><p>有关帧间的更多问题以及IBM Cloud Video如何通过云转码帮助您在提供更低码率选项的同时提供高质量视频，请联系销售人员。</p><p>免责声明：这篇文章的目的是帮助直播公司，或者至少是那些计划健康的视频点播策略的人，而不是流媒体。当然，根据播放方法的不同，这些问题的答案会有所不同。例如，对于创建可能通过视频文件播放的视频内容的意图，“场景改变”选项只是理想的选项之一。当使用自适应技术时，这些技术中的一些技术仅在与流传输相关的情况下变得不可取。</p><p>IBM可能会使用我的联系数据让我随时了解产品、服务和产品。</p><p>您可以通过发送电子邮件至NETSUPP@us.ibm.com随时撤回您的营销同意。此外，您还可以通过单击任何此类电子邮件中的取消订阅链接来取消接收营销电子邮件。</p><p>有关我们的处理的更多信息可以在IBM隐私声明中找到。通过提交此表格，我承认我已经阅读并理解了IBM隐私声明。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://blog.video.ibm.com/streaming-video-tips/keyframes-interframe-video-compression/">https://blog.video.ibm.com/streaming-video-tips/keyframes-interframe-video-compression/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/关键帧/">#关键帧</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>