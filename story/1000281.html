<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SSH黑客攻击-远程员工的一点理智</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">SSH黑客攻击-远程员工的一点理智</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-05-02 18:04:04</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/5/efcfd4d38b9caa03b20a374e4c3f9f77.png"><img src="http://img.diglog.com/img/2020/5/efcfd4d38b9caa03b20a374e4c3f9f77.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>以下是我们更有效地使用SSH的一些最好的提示和技巧。本帖子将介绍如何执行以下操作：</p><p>升级您的OpenSSH并使用安全密钥。在2020年2月，OpenSSH增加了对FIDO U2F(通用第二因子)安全密钥的支持。这是一个很棒的新功能，但有一个警告：因为此升级为安全密钥引入了新的密钥类型，所以只有在客户端和服务器都升级到OpenSSH 8.2+的情况下，您才能使用安全密钥。您可以使用ssh-V检查您的客户端版本，使用NC[ServerName]22检查远程sshd版本。</p><p>添加了两种新的密钥类型-ecdsa-ska和ed25519-sk(以及相应的证书类型)。要生成密钥文件，请插入安全密钥并运行：</p><p>这将创建绑定到您的U2F设备的公钥和私钥。当安全密钥被激活时，U2F设备上的私钥被用来解密盘上私钥“密钥句柄”。</p><p>OpenSSH还支持一种不同风格的生成SK类型的密钥：驻留密钥。使用驻留密钥方法，密钥句柄存储在U2F设备上。这样，当您需要时，您将始终将其放在安全密钥上。使用以下选项创建驻留密钥：</p><p>然后，要将密钥句柄重新放回新计算机的内存中，请插入安全密钥并运行：</p><p>使用PIV+PKCS11和Yubikey。如果您想要连接到运行旧版本sshd的计算机，您仍然可以使用安全密钥-使用不同的方法。YUBICO有一个使用U2F+SSH和PIV/PKCS11的指南。这与FIDO U2F不是一回事。它很管用，但使用起来很神秘。</p><p>使用定制的Yubikey-agent ssh-agent。Filippo Valsorda为Yubikey写了一个SSH代理。它是全新的，功能很少。</p><p>使用Touch ID和SEKEY。Sekey是一个开源的SSH代理，它将私钥存储在Mac的安全飞地中，并通过Touch ID提供签名功能。</p><p>使用单点登录SSH。我写了一个教程来帮助你设置这个。单点登录SSH的一个优势是，您可以利用身份提供商的安全策略-包括多因素身份验证(MFA)支持。</p><p>SSH中的代理转发允许远程主机访问本地计算机的SSH代理。当您在打开代理转发的情况下使用SSH(通常使用ssh-A)时，连接将有两个通道：交互式会话和用于代理转发的通道。本地SSH代理创建的Unix域套接字通过此通道连接到远程主机。这是有风险的，因为在远程计算机上具有root访问权限的用户可以访问您的本地SSH代理，并可能冒充您……。</p><p>即使有了这样的预防措施，谨慎使用代理转发仍然是个好主意。不要在所有会话中都使用它-当您知道特定的SSH会话需要它时才使用它。</p><p>SSH会话通常会由于网络中断、程序失控或锁定键盘输入的终端转义序列之一而挂起。🤦‍♂️。</p><p>SSH将通过每隔ServerAliveInterval秒向远程主机发送回应来检查连接。如果发送的回显超过ServerAliveCountMax而没有响应，则ssh将超时并退出。</p><p>中断会议。默认情况下，SSH包含转义字符~。命令~。关闭打开的连接并将您带回终端。(您只能在新行输入转义序列。)~？列出了在会话期间可以使用的所有命令。在国际键盘上，您可能需要按两次~键才能发送~字符。</p><p>为什么会出现停滞的会话？在互联网发明时，计算机并没有太多的移动。当您使用笔记本电脑在IPv4 WiFi网络之间移动时，您的IP地址会发生变化。因为SSH依赖于TCP连接，而TCP连接依赖于具有稳定IP地址的端点，所以每当您更改网络时，您的SSH连接都将成为孤立的并有效地丢失。当您的IP地址更改时，您的网络堆栈需要一段时间才能发现连接具有.。</p><p>当您在网络之间移动或想要暂时断开连接时，这里有两种不同的方法来保持会话正常进行：</p><p>如果您确实需要一个即使在网络之间移动也不会断开的连接，请使用MOSH-移动外壳。MOSH是一种安全外壳，它使用SSH进行握手，然后为会话切换到自己的加密通道。这个独立的通道非常有弹性。由于UDP的魔力和Mosh使用的同步协议，它可以处理断开的互联网连接、笔记本电脑IP地址的更改、主要的网络延迟等等。</p><p>要使用MOSH，您需要将其安装在客户端和服务器上，并为进入远程主机的UDP通信打开端口60000-61000。然后只需使用mosh user@server进行连接。</p><p>MOSH在屏幕和击键级别上运行，这使它比SSH有很多优点，SSH可以传送Stan的二进制流</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://smallstep.com/blog/ssh-tricks-and-tips/">https://smallstep.com/blog/ssh-tricks-and-tips/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/黑客/">#黑客</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/黑客攻击/">#黑客攻击</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/hacks/">#hacks</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/ssh/">#ssh</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1000195.html"><img src="http://img.diglog.com/img/2020/5/thumb_1557bf7ef06d1c345fbdce966c599d57.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1000195.html">特朗普以黑客威胁为由禁止收购外国电网设备</a></div><span class="my_story_list_date">2020-5-2 17:57</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_internet_766140.html"><img src="http://img.diglog.com/img/2013/9/thumb_8f191af8-ab14-4981-8f51-345be6502b95.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_internet_766140.html">揭秘全美第一黑客组织Anonymous</a></div><span class="my_story_list_date">2013-9-6 23:17</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_internet_762969.html"><img src="http://img.diglog.com/img/2013/7/thumb_cbec8a2b-6c75-4282-92f6-cfbd9137b559.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_internet_762969.html">ATM取款机黑客暴毙 年仅35岁</a></div><span class="my_story_list_date">2013-7-29 10:10</span></div><div class="col-sm"><div><a target="_blank" href="/story/technology_games_423479.html"><img src="http://img.diglog.com/img/2011/5/thumb_cfe11b47c91d4d35bdc4731942bf4677.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/technology_games_423479.html">更坏的消息来临-PSN用户的信用卡资料也被盗</a></div><span class="my_story_list_date">2011-5-1 23:2</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>