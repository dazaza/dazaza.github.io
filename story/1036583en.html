<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>FreeBSDæ¡Œé¢â€“ç¬¬3éƒ¨åˆ†â€“ X11çª—å£ç³»ç»Ÿâ€“ğšŸğšğš›ğš–ğšŠğšğšğš—FreeBSD Desktop â€“ Part 3 â€“ X11 Window System â€“ ğšŸğšğš›ğš–ğšŠğšğšğš—</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">FreeBSD Desktop â€“ Part 3 â€“ X11 Window System â€“ ğšŸğšğš›ğš–ğšŠğšğšğš—<br/>FreeBSDæ¡Œé¢â€“ç¬¬3éƒ¨åˆ†â€“ X11çª—å£ç³»ç»Ÿâ€“ğšŸğšğš›ğš–ğšŠğšğšğš—</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-26 03:08:16</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/1ae4ed2aed676b7d3d6f91e6e83be2f9.png"><img src="http://img2.diglog.com/img/2020/11/1ae4ed2aed676b7d3d6f91e6e83be2f9.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>In this article I would like to cover setting up the X11 Window System on FreeBSD.</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»åœ¨FreeBSDä¸Šè®¾ç½®X11 Window Systemã€‚</p><p>  You may want to check other articles in the  FreeBSD Desktop series on the  FreeBSD Desktop â€“ Global Page where you will find links to all episodes of the series along with table of contents for each episodeâ€™s contents.</p><p>  æ‚¨å¯èƒ½æƒ³æŸ¥çœ‹FreeBSDæ¡Œé¢-å…¨å±€é¡µé¢ä¸Šçš„FreeBSDæ¡Œé¢ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼Œåœ¨è¿™é‡Œæ‚¨å¯ä»¥æ‰¾åˆ°è¯¥ç³»åˆ—æ‰€æœ‰ç‰‡æ®µçš„é“¾æ¥ä»¥åŠæ¯ä¸ªç‰‡æ®µå†…å®¹çš„ç›®å½•ã€‚</p><p> I always get the impression that the X11 configuration/setup seems to be the seen as hard or weird. I will try to gather all useful information about that topic regarding the FreeBSD operating system. A lot of that is covered in the  FreeBSD Handbook â€“ 5.4. Xorg Configuration â€“ section.</p><p> æˆ‘æ€»æ˜¯è§‰å¾—X11çš„é…ç½®/è®¾ç½®ä¼¼ä¹æœ‰äº›å›°éš¾æˆ–å¥‡æ€ªã€‚æˆ‘å°†å°è¯•æ”¶é›†æœ‰å…³FreeBSDæ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æœ‰ç”¨ä¿¡æ¯ã€‚ FreeBSDæ‰‹å†Œ5.4ä¸­æœ‰å¾ˆå¤šå†…å®¹ã€‚ Xorgé…ç½®â€“éƒ¨åˆ†ã€‚</p><p>  First things first, if You find a device that is not supported by any â€˜acceleratedâ€™ driver like â€˜  intelâ€˜ or â€˜  nvidiaâ€˜ You would use â€˜  vesaâ€˜ driver (Video Electronics Standards Association) while booting in BIOS mode and You will use â€˜  scfbâ€˜ driver (System Console Frame Buffer) while booting on UEFI mode. This can be checked by   machdep.bootmethod   sysctl(8) parameter.</p><p>  é¦–å…ˆï¼Œå¦‚æœæ‚¨å‘ç°ä»»ä½•ä¸å—â€œ intelâ€æˆ–â€œ nvidiaâ€ä¹‹ç±»çš„â€œåŠ é€Ÿâ€é©±åŠ¨ç¨‹åºæ”¯æŒçš„è®¾å¤‡ï¼Œåˆ™åœ¨BIOSæ¨¡å¼ä¸‹å¯åŠ¨æ—¶å°†ä½¿ç”¨â€œ vesaâ€é©±åŠ¨ç¨‹åºï¼ˆè§†é¢‘ç”µå­æ ‡å‡†åä¼šï¼‰ï¼Œè€Œæ‚¨å°†ä½¿ç”¨â€œåœ¨UEFIæ¨¡å¼ä¸‹å¼•å¯¼æ—¶ï¼Œä½¿ç”¨scfb'é©±åŠ¨ç¨‹åºï¼ˆç³»ç»Ÿæ§åˆ¶å°å¸§ç¼“å†²åŒºï¼‰ã€‚å¯ä»¥é€šè¿‡machdep.bootmethod sysctlï¼ˆ8ï¼‰å‚æ•°è¿›è¡Œæ£€æŸ¥ã€‚</p><p>  This way You will know if you will use â€˜  scfbâ€˜ driver or â€˜  vesaâ€˜ driver when troubleshooting or when just running the ARM system on which â€˜  scfbâ€˜ will be used.</p><p>  è¿™æ ·ï¼Œæ‚¨å°†çŸ¥é“åœ¨è¿›è¡Œæ•…éšœæ’é™¤æ—¶æˆ–ä»…åœ¨è¿è¡Œå°†ä½¿ç”¨â€œ scfbâ€çš„ARMç³»ç»Ÿæ—¶ä½¿ç”¨â€œ scfbâ€é©±åŠ¨ç¨‹åºè¿˜æ˜¯â€œ vesaâ€é©±åŠ¨ç¨‹åºã€‚</p><p>  We will install the X11 server, the XDM login manager, the XTERM terminal emulator and the Openbox window manager. We will also install the Intel graphics card driver. To achieve that type the command below.</p><p>  æˆ‘ä»¬å°†å®‰è£…X11æœåŠ¡å™¨ï¼ŒXDMç™»å½•ç®¡ç†å™¨ï¼ŒXTERMç»ˆç«¯ä»¿çœŸå™¨å’ŒOpenboxçª—å£ç®¡ç†å™¨ã€‚æˆ‘ä»¬è¿˜å°†å®‰è£…è‹±ç‰¹å°”æ˜¾å¡é©±åŠ¨ç¨‹åºã€‚ä¸ºæ­¤ï¼Œè¯·åœ¨ä¸‹é¢è¾“å…¥å‘½ä»¤ã€‚</p><p>  Of course You will need to have network connection configured but we covered that in earlier parts.</p><p>  å½“ç„¶ï¼Œæ‚¨å°†éœ€è¦é…ç½®ç½‘ç»œè¿æ¥ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å‰é¢çš„éƒ¨åˆ†ä¸­å·²ç»è¿›è¡Œäº†ä»‹ç»ã€‚</p><p>  To have hardware accelerated X11 You will also need to add your regular user to the â€˜  videoâ€˜ group.</p><p>è¦ä½¿ç”¨X11ç¡¬ä»¶åŠ é€Ÿï¼Œæ‚¨è¿˜éœ€è¦å°†å¸¸è§„ç”¨æˆ·æ·»åŠ åˆ°â€œè§†é¢‘â€ç»„ä¸­ã€‚</p><p>   Remember to also add UTF-8 as the default encoding (  charset and   lang parameters) in the   /etc/login.conf file as show below. Also, after adding them, run the   cap_mkdb /etc/login.conf command as root and relogin with your regular user.</p><p>   åˆ‡è®°è¿˜è¦åœ¨/etc/login.confæ–‡ä»¶ä¸­æ·»åŠ UTF-8ä½œä¸ºé»˜è®¤ç¼–ç ï¼ˆcharsetå’Œlangå‚æ•°ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å¦å¤–ï¼Œåœ¨æ·»åŠ å®ƒä»¬ä¹‹åï¼Œä»¥rootç”¨æˆ·èº«ä»½è¿è¡Œcap_mkdb /etc/login.confå‘½ä»¤ï¼Œç„¶åä»¥å¸¸è§„ç”¨æˆ·èº«ä»½é‡æ–°ç™»å½•ã€‚</p><p> Below are shown the lines that need to be added to the   default: profile in the   /etc/login.conf file.</p><p> ä¸‹é¢æ˜¾ç¤ºäº†/etc/login.confæ–‡ä»¶ä¸­éœ€è¦æ·»åŠ åˆ°é»˜è®¤é…ç½®æ–‡ä»¶çš„è¡Œã€‚</p><p> (...) default:\ :passwd_format=sha512:\ :copyright=/etc/COPYRIGHT:\ :welcome=/etc/motd:\ :setenv=MAIL=/var/mail/$,BLOCKSIZE=K:\ :path=/sbin /bin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin ~/bin:\ :nologin=/var/run/nologin:\ :cputime=unlimited:\ :datasize=unlimited:\ :stacksize=unlimited:\ :memorylocked=64K:\ :memoryuse=unlimited:\ :filesize=unlimited:\ :coredumpsize=unlimited:\ :openfiles=unlimited:\ :maxproc=unlimited:\ :sbsize=unlimited:\ :vmemoryuse=unlimited:\ :swapuse=unlimited:\ :pseudoterminals=unlimited:\ :kqueues=unlimited:\ :umtxp=unlimited:\ :priority=0:\ :ignoretime@:\  + :charset=UTF-8:\+ :lang=en_US.UTF-8:\ :umask=022:(...)</p><p> ï¼ˆ...ï¼‰é»˜è®¤å€¼ï¼š\ï¼špasswd_format = sha512ï¼š\ï¼šcopyright = / etc / COPYRIGHTï¼š\ï¼šwelcome = / etc / motdï¼š\ï¼šsetenv = MAIL = / var / mail / $ï¼ŒBLOCKSIZE = Kï¼š\ï¼šè·¯å¾„= / sbin / bin / usr / sbin / usr / bin / usr / local / sbin / usr / local / binã€œ/ binï¼š\ï¼šnologin = / var / run / nologinï¼š\ï¼šcputime = unlimitedï¼š\ï¼šdatasize = unlimitedï¼š\ï¼šstacksize = unlimitedï¼š\ï¼šmemorylocked = 64Kï¼š\ï¼šmemoryuse = unlimitedï¼š\ï¼šfilesize = unlimitedï¼š\ï¼šcoredumpsize = unlimitedï¼š\ï¼šopenfiles = unlimitedï¼š\ï¼šmaxproc = unlimitedï¼š\ï¼šsbsize = unlimited ï¼š\ï¼švmemoryuse =æ— é™ï¼š\ï¼šswapuse =æ— é™ï¼š\ï¼špseudoterminals =æ— é™ï¼š\ï¼škqueues =æ— é™ï¼š\ï¼šumtxp =æ— é™ï¼š\ï¼špriority = 0ï¼š\ï¼šï¼šignoretime @ï¼š\ +ï¼šå­—ç¬¦é›†= UTF-8 ï¼š\ +ï¼šlang = zh_CN.UTF-8ï¼š\ï¼šumask = 022ï¼šï¼ˆ...ï¼‰</p><p>  #  diff -u login.conf.ORG login.conf--- login.conf.ORG 2018-05-22 07:10:09.864831000 +0200+++ login.conf 	2017-07-07 04:47:04.643412000 +0200@@ -46,6 +46,8 @@ :umtxp=unlimited:\ :priority=0:\ :ignoretime@:\  + :charset=UTF-8:\+ :lang=en_US.UTF-8:\ :umask=022:</p><p>  ï¼ƒdiff -u login.conf.ORG login.conf --- login.conf.ORG 2018-05-22 07ï¼š10ï¼š09.864831000 +0200 +++ login.conf 2017-07-07 04ï¼š47ï¼š04.643412000 +0200 @@ -46,6 +46,8 @@ï¼šumtxp = unlimitedï¼š\ï¼špriority = 0ï¼š\ï¼šï¼šignoretime @ï¼š\ + +ï¼šcharset = UTF-8ï¼š\ +ï¼šlang = en_US.UTF-8ï¼š\ï¼š umask = 022ï¼š</p><p> The UTF-8 encoding â€“ same as in the   lang parameter in the   /etc/login.conf file â€“ must be added at the begining of your   ~/.xinitrc file, like that:</p><p> å¿…é¡»åœ¨ã€œ/ .xinitrcæ–‡ä»¶çš„å¼€å¤´æ·»åŠ UTF-8ç¼–ç ï¼ˆä¸/etc/login.confæ–‡ä»¶ä¸­çš„langå‚æ•°ç›¸åŒï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>   In 2010 Intel introduced Nehalem architecture which have integrated GPU in the CPU (and memory controller which AMD had in CPU since 2003). This means that most computers/laptops/servers (Intel has about 80% market share) will have integrated GPU which should be supported by the X11 â€˜  intelâ€˜ driver and:</p><p>   2010å¹´ï¼Œè‹±ç‰¹å°”æ¨å‡ºäº†Nehalemæ¶æ„ï¼Œè¯¥æ¶æ„åœ¨CPUä¸­é›†æˆäº†GPUï¼ˆä»¥åŠè‡ª2003å¹´ä»¥æ¥AMDåœ¨CPUä¸­æ‹¥æœ‰çš„å†…å­˜æ§åˆ¶å™¨ï¼‰ã€‚è¿™æ„å‘³ç€å¤§å¤šæ•°è®¡ç®—æœº/ç¬”è®°æœ¬ç”µè„‘/æœåŠ¡å™¨ï¼ˆè‹±ç‰¹å°”æ‹¥æœ‰çº¦80ï¼…çš„å¸‚åœºä»½é¢ï¼‰å°†é›†æˆX11è‹±ç‰¹å°”é©±åŠ¨ç¨‹åºåº”æ”¯æŒçš„é›†æˆGPUï¼Œå¹¶ä¸”ï¼š</p><p>  The â€˜  drm-next-kmodâ€˜ package is available for FreeBSD 12-CURRENT development branch and upcoming FreeBSD 11.2-RELEASE (currently at BETA2 stage) about which You can read here on  FreeBSD Mailing Lists on  https://lists.freebsd.org/pipermail/freebsd-stable/2018-February/088406.html and  https://svnweb.freebsd.org/ports?view=revision&amp;revision=462202 accordingly.</p><p>'drm-next-kmod'è½¯ä»¶åŒ…å¯ç”¨äºFreeBSD 12-CURRENTå¼€å‘åˆ†æ”¯å’Œå³å°†æ¨å‡ºçš„FreeBSD 11.2-RELEASEï¼ˆå½“å‰å¤„äºBETA2é˜¶æ®µï¼‰ï¼Œæ‚¨å¯ä»¥åœ¨https://lists.freebsd.orgä¸Šçš„FreeBSDé‚®ä»¶åˆ—è¡¨ä¸­é˜…è¯»å…¶ç›¸å…³å†…å®¹ã€‚ /pipermail/freebsd-stable/2018-February/088406.htmlå’Œhttps://svnweb.freebsd.org/ports?view=revision&revision=462202ã€‚</p><p> You will probably be using the builtin KMS module which is the   /boot/kernel/i915kms.ko file. You may configure loading of this module in either   /boot/loader.conf (loaded at boot menu) or in the   /etc/rc.conf main FreeBSD configuration file â€“ which will load modules during the startup process. I prefer the second option as it is faster for FreeBSD system to boot while loading the kernel modules from the   /etc/rc.conf file along with starting needed services then lading them one by one from   /boot/loader.conf file. To keep system startup time to minimum we will have only one kernel module configured to load from the   /boot/loader.conf file â€“ the ZFS module with   zfs_load=YES line.</p><p> æ‚¨å¯èƒ½ä¼šä½¿ç”¨å†…ç½®çš„KMSæ¨¡å—ï¼Œè¯¥æ¨¡å—æ˜¯/boot/kernel/i915kms.koæ–‡ä»¶ã€‚æ‚¨å¯ä»¥åœ¨/boot/loader.confï¼ˆåœ¨å¼•å¯¼èœå•ä¸­åŠ è½½ï¼‰æˆ–/etc/rc.confä¸»FreeBSDé…ç½®æ–‡ä»¶ä¸­é…ç½®æ­¤æ¨¡å—çš„åŠ è½½-è¿™å°†åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­åŠ è½½æ¨¡å—ã€‚æˆ‘æ›´å–œæ¬¢ç¬¬äºŒç§é€‰æ‹©ï¼Œå› ä¸ºä»/etc/rc.confæ–‡ä»¶åŠ è½½å†…æ ¸æ¨¡å—ä»¥åŠå¯åŠ¨æ‰€éœ€çš„æœåŠ¡ç„¶åä»/boot/loader.confæ–‡ä»¶ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è£…è½½å®ƒä»¬æ—¶ï¼ŒFreeBSDç³»ç»Ÿçš„å¯åŠ¨é€Ÿåº¦æ›´å¿«ã€‚ä¸ºäº†å°†ç³»ç»Ÿå¯åŠ¨æ—¶é—´é™è‡³æœ€çŸ­ï¼Œæˆ‘ä»¬å°†ä»…é…ç½®ä¸€ä¸ªå†…æ ¸æ¨¡å—ä»¥ä»/boot/loader.confæ–‡ä»¶è¿›è¡ŒåŠ è½½-ZFSæ¨¡å—çš„zfs_load = YESè¡Œã€‚</p><p> If you found yourself with situation that KMS modules from the base system will not support your graphics card then You will have to try the â€˜  drm-next-kmodâ€˜ package for latest support of Intel graphics chips, that sometimes requires running FreeBSD CURRENT version which is not a problem, you will get all the new stuff instantly as a bonus ğŸ˜‰</p><p> å¦‚æœæ‚¨å‘ç°åŸºæœ¬ç³»ç»Ÿçš„KMSæ¨¡å—ä¸æ”¯æŒæ‚¨çš„å›¾å½¢å¡ï¼Œé‚£ä¹ˆæ‚¨å°†ä¸å¾—ä¸å°è¯•'drm-next-kmod'è½¯ä»¶åŒ…ä»¥è·å¾—æœ€æ–°çš„Intelå›¾å½¢èŠ¯ç‰‡æ”¯æŒï¼Œæœ‰æ—¶éœ€è¦è¿è¡ŒFreeBSD CURRENTç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬æ²¡é—®é¢˜ï¼Œæ‚¨å°†ç«‹å³è·å¾—æ‰€æœ‰æ–°ä¸œè¥¿ä½œä¸ºå¥–åŠ±ğŸ˜‰</p><p> To add the KMS (Kernel Mode Setting) Intel module loading into the   /etc/rc.conf file put the line below into it.</p><p> è¦å°†KMSï¼ˆå†…æ ¸æ¨¡å¼è®¾ç½®ï¼‰è‹±ç‰¹å°”æ¨¡å—æ·»åŠ åˆ°/etc/rc.confæ–‡ä»¶ä¸­ï¼Œè¯·åœ¨å…¶ä¸‹é¢æ·»åŠ ä¸€è¡Œã€‚</p><p>  We can also add other useful kernel module loading such as   fuse (for alien filsystems),   aesni (for encryption acceleration if You CPU has these extensions)   geom_eli (for the encryption itself) or   coretemp (for the temperature sensor). I will cover all of these kernel module in the future series with exact explanation what are they for.</p><p>  æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å…¶ä»–æœ‰ç”¨çš„å†…æ ¸æ¨¡å—åŠ è½½ï¼Œä¾‹å¦‚ä¿é™©ä¸ï¼ˆç”¨äºå¤–æ¥æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œaesniï¼ˆå¦‚æœæ‚¨çš„CPUå…·æœ‰è¿™äº›æ‰©å±•åï¼Œåˆ™ç”¨äºåŠ å¯†åŠ é€Ÿï¼‰ï¼Œgeom_eliï¼ˆç”¨äºåŠ å¯†æœ¬èº«ï¼‰æˆ–coretempï¼ˆç”¨äºæ¸©åº¦ä¼ æ„Ÿå™¨ï¼‰ã€‚æˆ‘å°†åœ¨æœªæ¥çš„ç³»åˆ—ä¸­ä»‹ç»æ‰€æœ‰è¿™äº›å†…æ ¸æ¨¡å—ï¼Œå¹¶ç»™å‡ºç¡®åˆ‡çš„è§£é‡Šã€‚</p><p>   In case of need to use â€˜  drm-next-kmodâ€˜ module instead of the base system one, your   /etc/rc.conf file would look like that one below.</p><p>   å¦‚æœéœ€è¦ä½¿ç”¨â€œ drm-next-kmodâ€æ¨¡å—è€Œä¸æ˜¯åŸºæœ¬ç³»ç»Ÿæ¨¡å—ï¼Œåˆ™/etc/rc.confæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p>  If you find yourself in the situation that the â€˜  drm-next-kmodâ€˜ would still not support your latest graphics card then you may try the latest version of the â€˜  drm-next-kmodâ€˜. Current â€˜  drm-next-kmodâ€˜ is on par with Linux 4.11 when it comes to graphics support, the latest WIP (work in progress) tree is at 4.15, so that may enable some graphics cards, anyway, here it is â€“  https://github.com/FreeBSDDesktop/freebsd-base-graphics/tree/drm-v4.15-WIP â€“ use at your own risk. ğŸ˜‰</p><p>  å¦‚æœæ‚¨å‘ç°'drm-next-kmod'ä»ä¸æ”¯æŒæ‚¨çš„æœ€æ–°æ˜¾å¡ï¼Œåˆ™å¯ä»¥å°è¯•ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„'drm-next-kmod'ã€‚å½“å‰çš„'drm-next-kmod'åœ¨å›¾å½¢æ”¯æŒæ–¹é¢ä¸Linux 4.11ç›¸å½“ï¼Œæœ€æ–°çš„WIPï¼ˆæ­£åœ¨è¿›è¡Œä¸­ï¼‰æ ‘ä½äº4.15ï¼Œå› æ­¤æ— è®ºå¦‚ä½•éƒ½å¯ä»¥å¯ç”¨æŸäº›å›¾å½¢å¡ï¼Œè¿™é‡Œæ˜¯â€“ httpsï¼š //github.com/FreeBSDDesktop/freebsd-base-graphics/tree/drm-v4.15-WIP â€“ä½¿ç”¨åæœè‡ªè´Ÿã€‚ ğŸ˜‰</p><p>  Historically You would create entire   /etc/X11/xorg.conf file which would include complete X11 Window System configuration. Recently to comply with FreeBSD   hier(7) directory structure and logic this can be also configured as   /usr/local/etc/X11/xorg.conf file â€¦ and even more recently You can just configure these parts of X11 server that You need without touching other parts. This â€˜individualâ€™ configuration is done in the   /usr/local/etc/X11/xorg.conf.d directory with individual files for each setting, like   card.conf for graphics card configuration.</p><p>ä»å†å²ä¸Šçœ‹ï¼Œæ‚¨å°†åˆ›å»ºæ•´ä¸ª/etc/X11/xorg.confæ–‡ä»¶ï¼Œå…¶ä¸­å°†åŒ…æ‹¬å®Œæ•´çš„X11 Window Systemé…ç½®ã€‚æœ€è¿‘ï¼Œä¸ºäº†ç¬¦åˆFreeBSD hierï¼ˆ7ï¼‰ç›®å½•ç»“æ„å’Œé€»è¾‘ï¼Œè¿˜å¯ä»¥å°†å…¶é…ç½®ä¸º/usr/local/etc/X11/xorg.confæ–‡ä»¶â€¦â€¦ç”šè‡³æœ€è¿‘ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä»…é…ç½®X11æœåŠ¡å™¨çš„è¿™äº›éƒ¨åˆ†è€Œæ— éœ€æ¥è§¦å…¶ä»–éƒ¨åˆ†ã€‚è¿™ç§â€œä¸ªäººâ€é…ç½®æ˜¯åœ¨/usr/local/etc/X11/xorg.conf.dç›®å½•ä¸­å®Œæˆçš„ï¼Œå…¶ä¸­æ¯ä¸ªè®¾ç½®éƒ½æœ‰å•ç‹¬çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ç”¨äºæ˜¾å¡é…ç½®çš„card.confã€‚</p><p> As the latter method is the most modern one we will use that in this guide for the sake of future installations.</p><p> ç”±äºåä¸€ç§æ–¹æ³•æ˜¯æœ€ç°ä»£çš„æ–¹æ³•ï¼Œå› æ­¤åœ¨ä»¥åçš„å®‰è£…ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬æŒ‡å—ä¸­ä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p><p>  The   DontZap option is to enable the X11 server abort with  [CTRL] + [ALT] + [BACKSPACE] shortcut. I found it useful several times when none other option worked. Only X11 server required restart. I could of course login to this laptop via SSH and kill needed processes, but I do not carry two laptops with me to be prepared for such situations ğŸ˜‰</p><p>  DontZapé€‰é¡¹ç”¨äºä½¿ç”¨[CTRL] + [ALT] + [BACKSPACE]å¿«æ·æ–¹å¼å¯ç”¨X11æœåŠ¡å™¨ä¸­æ­¢ã€‚å½“æ²¡æœ‰å…¶ä»–é€‰é¡¹èµ·ä½œç”¨æ—¶ï¼Œæˆ‘å‘ç°å®ƒå¾ˆæœ‰ç”¨ã€‚ä»…X11æœåŠ¡å™¨éœ€è¦é‡æ–°å¯åŠ¨ã€‚æˆ‘å½“ç„¶å¯ä»¥é€šè¿‡SSHç™»å½•åˆ°è¿™å°ç¬”è®°æœ¬ç”µè„‘å¹¶æ€æ­»æ‰€éœ€çš„è¿›ç¨‹ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰éšèº«æºå¸¦ä¸¤å°ç¬”è®°æœ¬ç”µè„‘æ¥ä¸ºè¿™ç§æƒ…å†µåšå‡†å¤‡ğŸ˜‰</p><p> Next we will configure the keyboard with   Polish layout and two additional options,   terminate:ctrl_alt_bksp to allow termination of the X11 server with  [CTRL] + [ALT] + [BACKSPACE] shortcut and   ctrl:nocaps to ignore the Caps Lock key as I also find that useful, if you not, then do not enable that option.</p><p> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¸ºé”®ç›˜é…ç½®æ³¢å…°è¯­å¸ƒå±€å’Œä¸¤ä¸ªé™„åŠ é€‰é¡¹ï¼ŒTerminateï¼šctrl_alt_bkspå…è®¸ä½¿ç”¨[CTRL] + [ALT] + [BACKSPACE]å¿«æ·æ–¹å¼ç»ˆæ­¢X11æœåŠ¡å™¨ï¼Œè€Œctrlï¼šnocapsåˆ™å¿½ç•¥Caps Locké”®ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯å¦‚æœæ²¡æœ‰ç”¨ï¼Œé‚£ä¹ˆè¯·ä¸è¦ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</p><p>  The last one is the graphics card configuration, we will put â€˜  intelâ€˜ here as our graphics is fully supported by it.</p><p>  æœ€åä¸€ä¸ªæ˜¯å›¾å½¢å¡é…ç½®ï¼Œæˆ‘ä»¬å°†åœ¨æ­¤å¤„æ”¾ç½®â€œ intelâ€ï¼Œå› ä¸ºå®ƒå®Œå…¨æ”¯æŒæˆ‘ä»¬çš„å›¾å½¢ã€‚</p><p>  Remember to NOT enable the   SNA acceleration method â€“   Option &#34;AccelMethod&#34; &#34;sna&#34; â€“ on â€˜  intelâ€˜ driver cards as it prevents suspend/resume from working. We will also enable   DPMS to save power when its possible.</p><p>  è¯·è®°ä½ä¸è¦åœ¨â€œ intelâ€é©±åŠ¨ç¨‹åºå¡ä¸Šå¯ç”¨SNAåŠ é€Ÿæ–¹æ³•ï¼ˆé€‰é¡¹â€œ AccelMethodâ€â€œ snaâ€ï¼‰ï¼Œå› ä¸ºå®ƒä¼šé˜»æ­¢æŒ‚èµ·/æ¢å¤å·¥ä½œã€‚æˆ‘ä»¬è¿˜å°†ä½¿DPMSå°½å¯èƒ½èŠ‚çœåŠŸç‡ã€‚</p><p>  You will also have to decide how You want to start your X11 Window Server, you may login in plan text console and then type   xinit(1) or   startx(1) to read your   ~/.xinitrc configuration and daemons or You may want to use X11 Login manager such as   xdm/  sddm/  slim with   ~/.xsession configuration to load after successful login. The difference between   xinit and   startx is that   startx command executes   xinit command with arguments like   -nolisten tcp to not listen for the external connections for example. Its pointless to start another layer of binary (  startx) just to pass an argument to command, so we will omit   startx and go directly to   xinit command with suitable alias.</p><p>  æ‚¨è¿˜å¿…é¡»å†³å®šå¦‚ä½•å¯åŠ¨X11 Window Serverï¼Œå¯ä»¥ç™»å½•è®¡åˆ’æ–‡æœ¬æ§åˆ¶å°ï¼Œç„¶åé”®å…¥xinitï¼ˆ1ï¼‰æˆ–startxï¼ˆ1ï¼‰æ¥è¯»å–ã€œ/ .xinitrcé…ç½®å’Œå®ˆæŠ¤ç¨‹åºï¼Œæˆ–è€…æ‚¨å¯èƒ½æƒ³è¦æˆåŠŸç™»å½•åï¼Œä½¿ç”¨å¸¦æœ‰ã€œ/ .xsessioné…ç½®çš„Xdm / sddm / slimç­‰X11ç™»å½•ç®¡ç†å™¨è¿›è¡ŒåŠ è½½ã€‚ xinitå’Œstartxä¹‹é—´çš„åŒºåˆ«åœ¨äºï¼Œstartxå‘½ä»¤ä½¿ç”¨-nolisten tcpä¹‹ç±»çš„å‚æ•°æ‰§è¡Œxinitå‘½ä»¤ï¼Œä¾‹å¦‚ï¼Œä¸ç›‘å¬å¤–éƒ¨è¿æ¥ã€‚å¯åŠ¨å¦ä¸€å±‚äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆstartxï¼‰åªæ˜¯ä¸ºäº†å°†å‚æ•°ä¼ é€’ç»™commandæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› æ­¤æˆ‘ä»¬å°†çœç•¥startxå¹¶ç›´æ¥ä½¿ç”¨åˆé€‚çš„åˆ«åè½¬åˆ°xinitå‘½ä»¤ã€‚</p><p> Which is better â€“ some login manager or directly starting X11 with   xinit? Both are good, it only depends on your preferences. For example I used text login and then typed â€˜  xâ€˜ as an alias to   xinit command and recently switched to   xdm along with symlink of   ~/.xsession which leads to the very same   ~/.xinitrc file and also like it.</p><p>å“ªä¸ªæ›´å¥½â€“æ˜¯æŸäº›ç™»å½•ç®¡ç†å™¨è¿˜æ˜¯ç›´æ¥ä½¿ç”¨xinitå¯åŠ¨X11ï¼Ÿä¸¤è€…éƒ½å¾ˆå¥½ï¼Œä»…å–å†³äºæ‚¨çš„å–œå¥½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä½¿ç”¨æ–‡æœ¬ç™»å½•ï¼Œç„¶ååœ¨xinitå‘½ä»¤ä¸­é”®å…¥â€œ xâ€ä½œä¸ºåˆ«åï¼Œæœ€è¿‘åˆ‡æ¢åˆ°xdmä»¥åŠã€œ/ .xsessionçš„ç¬¦å·é“¾æ¥ï¼Œè¿™å¯¼è‡´äº†éå¸¸ç›¸ä¼¼çš„ã€œ/ .xinitrcæ–‡ä»¶ï¼Œå¹¶ä¸”ä¹Ÿå–œæ¬¢å®ƒã€‚</p><p> When I use   xinit to directly start the X11 server I use an alias to   xinit with these parameters:</p><p> å½“æˆ‘ä½¿ç”¨xinitç›´æ¥å¯åŠ¨X11æœåŠ¡å™¨æ—¶ï¼Œæˆ‘ä½¿ç”¨åˆ«åæ¥é€šè¿‡ä»¥ä¸‹å‚æ•°å¯¹xinitè¿›è¡Œæ“ä½œï¼š</p><p>  Of course I keep that alias in the   ~/.zshrc file (for the ZSH shell) so everytime I login in the text console I just type â€˜  xâ€˜ and X11 session starts reading contents of my   ~/.xinitrc file.</p><p>  å½“ç„¶ï¼Œæˆ‘å°†è¯¥åˆ«åä¿ç•™åœ¨ã€œ/ .zshrcæ–‡ä»¶ä¸­ï¼ˆç”¨äºZSH shellï¼‰ï¼Œå› æ­¤ï¼Œæ¯æ¬¡æˆ‘åœ¨æ–‡æœ¬æ§åˆ¶å°ä¸­ç™»å½•æ—¶ï¼Œåªè¦é”®å…¥â€œ xâ€ï¼ŒX11ä¼šè¯å°±å¼€å§‹è¯»å–ã€œ/ .xinitrcæ–‡ä»¶çš„å†…å®¹ã€‚</p><p> While   xinit run commands based on the   ~/.xinitrc file the XDM login manager looks for the   ~/.xsession file. As You will be loading same stuff regardless of the startup method we will create a link of   ~/.xsession pointing to the   ~/.xinitrc file. This way either method You choose You will always end with started X11 session.</p><p> å½“xinitåŸºäºã€œ/ .xinitrcæ–‡ä»¶è¿è¡Œå‘½ä»¤æ—¶ï¼ŒXDMç™»å½•ç®¡ç†å™¨å°†æŸ¥æ‰¾ã€œ/ .xsessionæ–‡ä»¶ã€‚ç”±äºæ— è®ºå¯åŠ¨æ–¹æ³•å¦‚ä½•ï¼Œæ‚¨éƒ½å°†åŠ è½½ç›¸åŒçš„å†…å®¹ï¼Œå› æ­¤æˆ‘ä»¬å°†åˆ›å»ºã€œ/ .xsessionçš„é“¾æ¥ï¼Œè¯¥é“¾æ¥æŒ‡å‘ã€œ/ .xinitrcæ–‡ä»¶ã€‚è¿™æ ·ï¼Œæ— è®ºæ‚¨é€‰æ‹©å“ªç§æ–¹æ³•ï¼Œæ‚¨éƒ½å°†å§‹ç»ˆä»¥å¯åŠ¨çš„X11ä¼šè¯ç»“æŸã€‚</p><p> %  ln -s ~/.xinitrc ~/.xsession%  ls -l ~/.xsessionlrwxr-xr-x 1 vuk vuk 8 2018.05.22 00:27 .xsession -&gt; .xinitrc</p><p> ï¼…ln -sã€œ/ .xinitrcã€œ/ .xsessionï¼…ls -lã€œ/ .xsessionlrwxr-xr-x 1 vuk vuk 8 2018.05.22 00:27 .xsession-> .xinitrc</p><p> One more case about the   ~/.xinitrc (or   ~/.xsession) file. It is interpreted as a shell script (and yes you can do   if/  then/  else/  fi and   case/  esac or   for/  while POSIX shell scripting in it) but it does not need to be executable. The last command in this file MUST NOT to be put in the background (must be without the   &amp; char at the end) because the X11 session will end.</p><p> å…³äºã€œ/ .xinitrcï¼ˆæˆ–ã€œ/ .xsessionï¼‰æ–‡ä»¶çš„å¦ä¸€ç§æƒ…å†µã€‚å®ƒè¢«è§£é‡Šä¸ºshellè„šæœ¬ï¼ˆæ˜¯çš„ï¼Œæ‚¨å¯ä»¥åœ¨if / then / else / fiå’Œcase / esacæˆ–for /çš„åŒæ—¶æ‰§è¡ŒPOSIX shellè„šæœ¬ï¼‰ï¼Œä½†æ˜¯å®ƒä¸éœ€è¦å¯æ‰§è¡Œã€‚è¯¥æ–‡ä»¶ä¸­çš„æœ€åä¸€ä¸ªå‘½ä»¤ä¸€å®šä¸è¦æ”¾åœ¨åå°ï¼ˆæœ«å°¾å¿…é¡»ä¸å¸¦ï¼†charï¼‰ï¼Œå› ä¸ºX11ä¼šè¯å°†ç»“æŸã€‚</p><p>  I prepared two nice looking themes for XDM login manager, the first one uses black background and grey/white fonts.</p><p>  æˆ‘ä¸ºXDMç™»å½•ç®¡ç†å™¨å‡†å¤‡äº†ä¸¤ä¸ªæ¼‚äº®çš„ä¸»é¢˜ï¼Œç¬¬ä¸€ä¸ªä½¿ç”¨é»‘è‰²èƒŒæ™¯å’Œç°è‰²/ç™½è‰²å­—ä½“ã€‚</p><p> To configure this black XDM theme You will need to modify contents of two files as show below.</p><p>è¦é…ç½®æ­¤é»‘è‰²XDMä¸»é¢˜ï¼Œæ‚¨å°†éœ€è¦ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><p>  This we will set black background on the login screen on the   :0 X11 server â€“ the default one.</p><p>  è¿™æ ·ï¼Œæˆ‘ä»¬å°†åœ¨ï¼š0 X11æœåŠ¡å™¨çš„ç™»å½•å±å¹•ä¸Šè®¾ç½®é»‘è‰²èƒŒæ™¯ï¼Œè¿™æ˜¯é»˜è®¤èƒŒæ™¯ã€‚</p><p> #  cat /usr/local/etc/X11/xdm/Xresourcesxlogin.Login.greeting:xlogin.Login.unsecureGreeting:xlogin.Login.fail: Fail.xlogin.Login.changePasswdMessage: Change.xlogin.Login.namePrompt: Username:xlogin.Login.passwdPrompt: Password:xlogin.Login.echoPasswd: truexlogin.Login.background: blackxlogin.Login.foreground: whitexlogin.Login.failColor: #ccccccxlogin.Login.inpColor: blackxlogin.Login.promptColor: #aaaaaaxlogin.Login.face: courier:size=13:style=Boldxlogin.Login.failFace: courier:size=13:style=Boldxlogin.Login.promptFace: courier:size=13:style=Normalxlogin.Login.greetFace: courier:size=13xlogin.Login.width: 400</p><p> ï¼ƒcat /usr/local/etc/X11/xdm/Xresourcesxlogin.Login.greeting:xlogin.Login.unsecureGreeting:xlogin.Login.failï¼šFail.xlogin.Login.changePasswdMessageï¼šChange.xlogin.Login.namePromptï¼šç”¨æˆ·åï¼šxlogin .login.passwdæç¤ºï¼šå¯†ç ï¼šxlogin.Login.echoPasswdï¼štruexlogin.Loginã€‚èƒŒæ™¯ï¼šblackxlogin.Login.foregroundï¼šwhitexlogin.Login.failColorï¼šï¼ƒccccccxlogin.Login.inpColorï¼šblackxlogin.Login.promptColorï¼šï¼ƒaaaaaaxlogin.Loginã€‚ ï¼šcourierï¼šsize = 13ï¼šstyle = Boldxlogin.Login.failFaceï¼šcourierï¼šsize = 13ï¼šstyle = Boldxlogin.Login.promptFaceï¼šcourierï¼šsize = 13ï¼šstyle = Normalxlogin.Login.greetFaceï¼šcourierï¼šsize = 13xlogin.Loginã€‚ ã€‚å®½åº¦ï¼š400</p><p> â€¦ and the rest of the XDM login manager configuration is kept in the   Xresources file, at least the appearance part ğŸ˜‰</p><p> â€¦å…¶ä½™çš„XDMç™»å½•ç®¡ç†å™¨é…ç½®ä¿å­˜åœ¨Xresourcesæ–‡ä»¶ä¸­ï¼Œè‡³å°‘æ˜¯å¤–è§‚éƒ¨åˆ†ğŸ˜‰</p><p> Wonder what font will be chosen when we put â€˜  courierâ€˜ in the   *face options? Lets check with   fc-match(1) command.</p><p> æƒ³çŸ¥é“å½“æˆ‘ä»¬åœ¨* faceé€‰é¡¹ä¸­æ”¾ç½®â€œ courierâ€æ—¶ä¼šé€‰æ‹©å“ªç§å­—ä½“å—ï¼Ÿè®©æˆ‘ä»¬ä½¿ç”¨fc-matchï¼ˆ1ï¼‰å‘½ä»¤è¿›è¡Œæ£€æŸ¥ã€‚</p><p>  You have the answer, You do not always have to type whole font name in the configuration files.</p><p>  æ‚¨æœ‰ç­”æ¡ˆï¼Œæ‚¨ä¸å¿…æ€»æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­é”®å…¥æ•´ä¸ªå­—ä½“åç§°ã€‚</p><p>    If You did not liked the black XDM theme maybe the grey one will suit your taste better.</p><p>    å¦‚æœæ‚¨ä¸å–œæ¬¢é»‘è‰²XDMä¸»é¢˜ï¼Œé‚£ä¹ˆç°è‰²ä¸»é¢˜å¯èƒ½ä¼šæ›´é€‚åˆæ‚¨çš„å£å‘³ã€‚</p><p>   #  cat /usr/local/etc/X11/xdm/Xresourcesxlogin.Login.greeting:xlogin.Login.unsecureGreeting:xlogin.Login.fail: Fail.xlogin.Login.changePasswdMessage: Change.xlogin.Login.namePrompt: Username:xlogin.Login.passwdPrompt: Password:xlogin.Login.echoPasswd: truexlogin.Login.background: gray50xlogin.Login.foreground: whitexlogin.Login.failColor: #ddddddxlogin.Login.inpColor: gray50xlogin.Login.promptColor: #ccccccxlogin.Login.greetColor: gray50xlogin.Login.promptColor gray50xlogin.Login.hiColor gray50xlogin.Login.shdColor gray50xlogin.Login.face: courier:size=13:style=Boldxlogin.Login.failFace: courier:size=13:style=Boldxlogin.Login.promptFace: courier:size=13:style=Boldxlogin.Login.greetFace: courier:size=13:style=Boldxlogin.Login.frameWidth: 0xlogin.Login.innerFramesWidth: 0xlogin.Login.sepWidth: 0xlogin.Login.width: 32768xlogin.Login.height: 32768xlogin.Login.x: 0xlogin.Login.y: 0</p><p>ï¼ƒcat /usr/local/etc/X11/xdm/Xresourcesxlogin.Login.greeting:xlogin.Login.unsecureGreeting:xlogin.Login.failï¼šFail.xlogin.Login.changePasswdMessageï¼šChange.xlogin.Login.namePromptï¼šç”¨æˆ·åï¼šxlogin .login.passwdæç¤ºï¼šå¯†ç ï¼šxlogin.Login.echoPasswdï¼štruexlogin.Loginã€‚èƒŒæ™¯ï¼šgray50xlogin.Loginã€‚å‰æ™¯ï¼šwhitexlogin.Login.failColorï¼šï¼ƒddddddxlogin.Login.inpColorï¼šgray50xlogin.Login.Login.promptColorï¼š#ccccccxloginã€‚ ï¼šgray50xlogin.Login.promptColor gray50xlogin.Login.hiColor gray50xlogin.Login.shdColor gray50xlogin.Login.faceï¼šcourierï¼šsize = 13ï¼šstyle = Boldxlogin.Login.failFaceï¼šcourierï¼šsize = 13ï¼šstyle = Boldxlogin.Login.promptFaceï¼š courierï¼šsize = 13ï¼šstyle = Boldxlogin.Login.greeté¢å­”ï¼šcourierï¼šsize = 13ï¼šstyle = Boldxlogin.Login.frameWidthï¼š0xlogin.Login.innerFramesWidthï¼š0xlogin.Login.sepWidthï¼š0xlogin.Login.widthï¼š32768xlogin.Loginã€‚é«˜åº¦ï¼š32768xlogin.Login.xï¼š0xlogin.Login.yï¼š0</p><p> â€¦ and knowing the XDM theming limitations we will customize to mimic the fullscreen of grey color. The only downside of that approach is that   Username: and   Password: fields will be placed in the top/left side of the screen.</p><p> â€¦å¹¶äº†è§£XDMä¸»é¢˜é™åˆ¶ï¼Œæˆ‘ä»¬å°†è‡ªå®šä¹‰æ¨¡æ‹Ÿå…¨å±ç°è‰²ã€‚è¿™ç§æ–¹æ³•çš„å”¯ä¸€ç¼ºç‚¹æ˜¯ï¼Œâ€œç”¨æˆ·åâ€å’Œâ€œå¯†ç ï¼šâ€å­—æ®µå°†æ”¾ç½®åœ¨å±å¹•çš„é¡¶éƒ¨/å·¦ä¾§ã€‚</p><p>    Last but not least, we will configure the simple   ~/.xinitrc file with Openbox window manager, prestarted   xterm terminal and black background for our simple session.</p><p>    æœ€åä½†å¹¶éæœ€ä¸é‡è¦çš„ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Openboxçª—å£ç®¡ç†å™¨ï¼Œé¢„å¯åŠ¨çš„xtermç»ˆç«¯å’Œé»‘è‰²èƒŒæ™¯ä¸ºæˆ‘ä»¬çš„ç®€å•ä¼šè¯é…ç½®ç®€å•çš„ã€œ/ .xinitrcæ–‡ä»¶ã€‚</p><p>  %  cat ~/.xinitrc# SET PROPER locale(1) with LC_ALL VARIABLE. export LC_ALL=en_US.UTF-8# PRESTARTED APPS xterm &amp; xsetroot -solid black &amp;# WINDOW MANAGER openbox</p><p>  ï¼…catã€œ/ .xinitrcï¼ƒä½¿ç”¨LC_ALL VARIABLEè®¾ç½®æ­£ç¡®çš„è¯­è¨€ç¯å¢ƒï¼ˆ1ï¼‰ã€‚å¯¼å‡ºLC_ALL = zh_CN.UTF-8ï¼ƒé¢„å¯åŠ¨çš„åº”ç”¨ç¨‹åºxtermå’Œxsetroot-çº¯é»‘ï¼†ï¼ƒWINDOW MANAGER openbox</p><p> It will not be very pretty â€“ yet â€“ but we will cover that later in the series.</p><p> å°½ç®¡è¿˜ä¸æ˜¯å¾ˆæ¼‚äº®ï¼Œä½†æ˜¯æˆ‘ä»¬å°†åœ¨æœ¬ç³»åˆ—çš„åé¢éƒ¨åˆ†è¿›è¡Œä»‹ç»ã€‚</p><p>     â€œXorg now has a devd(8) backend it can use to get informed about hotplugged devices instead of hald(8):  https://lists.freebsd.org/pipermail/freebsd-x11/2017-March/018978.html Thatâ€™s working fine for me, even without moused(8).â€</p><p>     â€œ Xorgç°åœ¨æœ‰ä¸€ä¸ªdevdï¼ˆ8ï¼‰åç«¯ï¼Œå®ƒå¯ä»¥ç”¨æ¥è·å–æœ‰å…³çƒ­æ’æ‹”è®¾å¤‡çš„ä¿¡æ¯ï¼Œè€Œä¸æ˜¯haldï¼ˆ8ï¼‰ï¼šhttps://lists.freebsd.org/pipermail/freebsd-x11/2017-March/018978.htmlå³ä½¿æ²¡æœ‰mousedï¼ˆ8ï¼‰ï¼Œå¯¹æˆ‘æ¥è¯´ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚â€</p><p> Thank you for that information, this may be also verified by checking the X11 log   /var/log/Xorg.0.log file.</p><p> æ„Ÿè°¢æ‚¨æä¾›è¯¥ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ£€æŸ¥X11æ—¥å¿—/var/log/Xorg.0.logæ–‡ä»¶æ¥éªŒè¯è¿™ä¸€ç‚¹ã€‚</p><p> #  grep devd /var/log/Xorg.0.log[ 96890.425] (II) The server relies on devd to provide the list of input devices. If no devices become available, reconfigure devd or disable AutoAddDevices.[ 96890.955] (II) config/devd: probing input devices...[ 96890.955] (II) config/devd: adding input device (null) (/dev/kbdmux)[ 96890.956] (**) Option &#34;config_info&#34; &#34;devd:kbdmux&#34;[ 96890.960] (II) config/devd: kbdmux is enabled, ignoring device ukbd0[ 96890.960] (II) config/devd: kbdmux is enabled, ignoring device atkbd0[ 96890.960] (II) config/devd: adding input device (null) (/dev/sysmouse)[ 96890.961] (**) Option &#34;config_info&#34; &#34;devd:sysmouse&#34;[ 96890.962] (II) config/devd: device /dev/ums0 already opened[ 96890.962] (II) config/devd: device /dev/psm0 already opened</p><p>ï¼ƒgrep devd /var/log/Xorg.0.log [96890.425]ï¼ˆIIï¼‰æœåŠ¡å™¨ä¾é devdæä¾›è¾“å…¥è®¾å¤‡çš„åˆ—è¡¨ã€‚å¦‚æœæ²¡æœ‰å¯ç”¨çš„è®¾å¤‡ï¼Œåˆ™é‡æ–°é…ç½®devdæˆ–ç¦ç”¨AutoAddDevicesã€‚[96890.955]ï¼ˆIIï¼‰config / devdï¼šæ¢æµ‹è¾“å…¥è®¾å¤‡... [96890.955]ï¼ˆIIï¼‰config / devdï¼šæ·»åŠ è¾“å…¥è®¾å¤‡ï¼ˆç©ºï¼‰ï¼ˆ/ dev / kbdmuxï¼‰ [96890.956]ï¼ˆ**ï¼‰é€‰é¡¹â€œ config_infoâ€â€œ devdï¼škbdmuxâ€ [96890.960]ï¼ˆIIï¼‰config / devdï¼šå¯ç”¨kbdmuxï¼Œå¿½ç•¥è®¾å¤‡ukbd0 [96890.960]ï¼ˆIIï¼‰config / devdï¼šå¯ç”¨kbdmuxï¼Œå¿½ç•¥è®¾å¤‡atkbd0 [96890.960]ï¼ˆIIï¼‰config / devdï¼šæ·»åŠ è¾“å…¥è®¾å¤‡ï¼ˆç©ºï¼‰ï¼ˆ/ dev / sysmouseï¼‰[96890.961]ï¼ˆ**ï¼‰é€‰é¡¹â€œ config_infoâ€â€œ devdï¼šsysmouseâ€ [96890.962]ï¼ˆIIï¼‰config / devdï¼šè®¾å¤‡/ dev / ums0å·²æ‰“å¼€[96890.962]ï¼ˆIIï¼‰config / devdï¼šè®¾å¤‡/ dev / psm0å·²æ‰“å¼€</p><p>    â€œIf you use i915kms kernel module, you donâ€™t need to install xf86-video-intel, the modesetting generic DDX driver that is built in the X server, will do just well. The xf86-video-intel might even cause you troubles, as you mentioned, for example my x230 was rebooting instead of suspending when I had installed the xf86-video-intel (I had installed it to solve the tearing problem with xfwm4 using the xf86-video-intelâ€™s SNA acceleration). Now removed, my x230 suspends no problem.â€</p><p>    â€œå¦‚æœæ‚¨ä½¿ç”¨i915kmså†…æ ¸æ¨¡å—ï¼Œåˆ™æ— éœ€å®‰è£…xf86-video-intelï¼Œè¿™æ˜¯XæœåŠ¡å™¨ä¸­å†…ç½®çš„å…·æœ‰æ¨¡å¼è®¾ç½®åŠŸèƒ½çš„é€šç”¨DDXé©±åŠ¨ç¨‹åºï¼Œå¯ä»¥å¾ˆå¥½åœ°å®Œæˆå·¥ä½œã€‚æ­£å¦‚æ‚¨æåˆ°çš„ï¼Œxf86-video-intelç”šè‡³å¯èƒ½ä¼šç»™æ‚¨é€ æˆéº»çƒ¦ï¼Œä¾‹å¦‚ï¼Œå½“æˆ‘å®‰è£…xf86-video-intelæ—¶ï¼Œæˆ‘çš„x230æ­£åœ¨é‡æ–°å¯åŠ¨è€Œä¸æ˜¯æŒ‚èµ·ï¼ˆæˆ‘å®‰è£…äº†å®ƒæ˜¯ä¸ºäº†ä½¿ç”¨xf86è§£å†³xfwm4çš„æ’•è£‚é—®é¢˜-video-intelçš„SNAåŠ é€Ÿï¼‰ã€‚ç°åœ¨å¸ä¸‹åï¼Œæˆ‘çš„x230ä¸ä¼šå‡ºç°ä»»ä½•é—®é¢˜ã€‚â€</p><p>  I have tried below configuration with â€˜modesettingâ€™ driver and it works without a problem. I did not had any issues with â€˜intelâ€™ driver either but I will stick with â€˜modesettingâ€™ driver for a while see how it behaves on my machine.</p><p>  æˆ‘å·²ç»å°è¯•è¿‡ä½¿ç”¨â€œ modesettingâ€é©±åŠ¨ç¨‹åºè¿›è¡Œä»¥ä¸‹é…ç½®ï¼Œå¹¶ä¸”å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚æˆ‘å¯¹â€œè‹±ç‰¹å°”â€é©±åŠ¨ç¨‹åºä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä¼šåšæŒä½¿ç”¨â€œæ¨¡å¼è®¾ç½®â€é©±åŠ¨ç¨‹åºä¸€æ®µæ—¶é—´ï¼Œä»¥æŸ¥çœ‹å…¶åœ¨æˆ‘çš„è®¡ç®—æœºä¸Šçš„è¿è¡Œæƒ…å†µã€‚</p><p>      #  grep -c intel /var/log/Xorg.0.log98#  grep -c modeset /var/log/Xorg.0.log8#  grep DRI /var/log/Xorg.0.log[ 95305.483] (II) intel(0): [DRI2] Setup complete[ 95305.483] (II) intel(0): [DRI2] DRI driver: i965[ 95305.483] (II) intel(0): [DRI2] VDPAU driver: va_gl[ 95305.484] (II) intel(0): DRI2: Enabled[ 95305.484] (II) intel(0): DRI3: Disabled[ 95305.549] (II) GLX: Initialized DRI2 GL provider for screen 0</p><p>      ï¼ƒgrep -cè‹±ç‰¹å°”/var/log/Xorg.0.log98# grep -cæ¨¡å¼é›†/var/log/Xorg.0.log8# grep DRI /var/log/Xorg.0.log [95305.483]ï¼ˆIIï¼‰è‹±ç‰¹å°”ï¼ˆ0ï¼‰ï¼š[DRI2]è®¾ç½®å®Œæˆ[95305.483]ï¼ˆIIï¼‰intelï¼ˆ0ï¼‰ï¼š[DRI2] DRIé©±åŠ¨ç¨‹åºï¼ši965 [95305.483]ï¼ˆIIï¼‰intelï¼ˆ0ï¼‰ï¼š[DRI2] VDPAUé©±åŠ¨ç¨‹åºï¼šva_gl [95305.484]ï¼ˆII ï¼‰intelï¼ˆ0ï¼‰ï¼šDRI2ï¼šå¯ç”¨[95305.484]ï¼ˆIIï¼‰intelï¼ˆ0ï¼‰ï¼šDRI3ï¼šç¦ç”¨[95305.549]ï¼ˆIIï¼‰GLXï¼šå±å¹•0çš„åˆå§‹åŒ–DRI2 GLæä¾›ç¨‹åº</p><p>  #  grep -c intel /var/log/Xorg.0.log0#  grep -c modeset /var/log/Xorg.0.log80#  grep DRI /var/log/Xorg.0.log[ 95556.446] (II) glamor: EGL version 1.4 (DRI2):[ 95556.671] (II) modeset(0): [DRI2] Setup complete[ 95556.671] (II) modeset(0): [DRI2] DRI driver: i965[ 95556.671] (II) modeset(0): [DRI2] VDPAU driver: i965[ 95556.714] (II) GLX: Initialized DRI2 GL provider for screen 0</p><p>  ï¼ƒgrep -c intel /var/log/Xorg.0.log0# grep -c modeset /var/log/Xorg.0.log80# grep DRI /var/log/Xorg.0.log [95556.446]ï¼ˆIIï¼‰é­…åŠ›ï¼šEGLç‰ˆæœ¬1.4ï¼ˆDRI2ï¼‰ï¼š[95556.671]ï¼ˆIIï¼‰æ¨¡å¼é›†ï¼ˆ0ï¼‰ï¼š[DRI2]è®¾ç½®å®Œæˆ[95556.671]ï¼ˆIIï¼‰æ¨¡å¼é›†ï¼ˆ0ï¼‰ï¼š[DRI2] DRIé©±åŠ¨ç¨‹åºï¼ši965 [95556.671]ï¼ˆIIï¼‰æ¨¡å¼é›†ï¼ˆ 0ï¼‰ï¼š[DRI2] VDPAUé©±åŠ¨ç¨‹åºï¼ši965 [95556.714]ï¼ˆIIï¼‰GLXï¼šå±å¹•0çš„å·²åˆå§‹åŒ–DRI2 GLæä¾›ç¨‹åº</p><p>   â€œIf you modify /etc/login.conf, you are modifying the systemwide locale for the default login class to which all users belong (also user www for Apache, for example).â€</p><p>   â€œå¦‚æœä¿®æ”¹/etc/login.confï¼Œåˆ™å°†ä¿®æ”¹æ‰€æœ‰ç”¨æˆ·æ‰€å±çš„é»˜è®¤ç™»å½•ç±»çš„ç³»ç»ŸèŒƒå›´è¯­è¨€ç¯å¢ƒï¼ˆä¾‹å¦‚ï¼Œå¯¹äºApacheä¹Ÿä½¿ç”¨ç”¨æˆ·wwwï¼‰ã€‚â€</p><p> We can of course created dedicated login class for the X11 Window System, as we use group   video already we will create   video: login class for the X11 Window System.</p><p> å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºX11 Window Systemåˆ›å»ºä¸“ç”¨çš„ç™»å½•ç±»ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»ä½¿ç”¨äº†ç»„è§†é¢‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä¸ºX11 Window Systemåˆ›å»ºvideoï¼šç™»å½•ç±»ã€‚</p><p> I assume that the   default: login class is untouched â€“ if You already modified it with   lang and   charset options, remove them.</p><p>æˆ‘å‡è®¾æœªæ›´æ”¹defaultï¼šç™»å½•ç±»â€“å¦‚æœæ‚¨å·²ç»ä½¿ç”¨langå’Œcharseté€‰é¡¹å¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œè¯·å°†å…¶åˆ é™¤ã€‚</p><p>              After upgrade FreeBSD from 12.1-RELEASE to 12.2-RELEASE the  tap to click on (not only mine touchpad on  ThinkPad W520 machine stopped working.</p><p>              å°†FreeBSDä»12.1-RELEASEå‡çº§åˆ°12.2-RELEASEåï¼Œç‚¹å‡»ä»¥å•å‡»ï¼ˆä¸ä»…æ˜¯ThinkPad W520æœºå™¨ä¸Šçš„æˆ‘çš„è§¦æ‘¸æ¿åœæ­¢å·¥ä½œã€‚</p><p>  #  pkg install xf86-input-synaptics#  cat &lt;&lt; BSD &gt; /usr/local/etc/X11/xorg.conf.d/touchpad.confSection &#34;InputClass&#34; Identifier &#34;touchpad&#34; MatchIsTouchpad &#34;on&#34; Driver &#34;libinput&#34; Option &#34;Tapping&#34; &#34;on&#34;EndSectionBSD</p><p>  ï¼ƒpkg install xf86-input-synapticsï¼ƒcat  /usr/local/etc/X11/xorg.conf.d/touchpad.confSectionâ€œ InputClassâ€æ ‡è¯†ç¬¦â€œ touchpadâ€ MatchIsTouchpadâ€œ onâ€é©±åŠ¨ç¨‹åºâ€œ libinputâ€é€‰é¡¹â€œ Tapping â€œâ€ onâ€œ EndSectionBSD</p><p> After these steps restart the X11 server and  tap to click should work properly again.</p><p> å®Œæˆè¿™äº›æ­¥éª¤åï¼Œè¯·é‡æ–°å¯åŠ¨X11æœåŠ¡å™¨ï¼Œç„¶åå•å‡»ä»¥å†æ¬¡å•å‡»å³å¯æ­£å¸¸å·¥ä½œã€‚</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://vermaden.wordpress.com/2018/05/22/freebsd-desktop-part-3-x11-window-system/">https://vermaden.wordpress.com/2018/05/22/freebsd-desktop-part-3-x11-window-system/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/freebsd/">#freebsd</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/desktop/">#desktop</a></button></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¶æ/">#æ¶æ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å·¥å…·/">#å·¥å…·</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ†äº«/">#åˆ†äº«</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>