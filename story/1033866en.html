<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>æˆ‘ç¼–å†™äº†JavaScriptä»¥é¿å…ä½¿ç”¨JavaScript</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">æˆ‘ç¼–å†™äº†JavaScriptä»¥é¿å…ä½¿ç”¨JavaScript</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-11-08 23:51:08</div><div class="story_img_container"><a href="http://img2.diglog.com/img/2020/11/b6ede9d3ccb8b8afda35eebfbd118083.png"><img src="http://img2.diglog.com/img/2020/11/b6ede9d3ccb8b8afda35eebfbd118083.png" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>Web technologies have come so far, that you realize: not everything needs to be done in JavaScript nowadays anymore.</p><p>WebæŠ€æœ¯å·²ç»å–å¾—äº†é•¿è¶³çš„è¿›æ­¥ï¼Œæ‚¨ä¼šæ„è¯†åˆ°ï¼šå¦‚ä»Šå¹¶ä¸æ˜¯æ‰€æœ‰çš„äº‹æƒ…éƒ½éœ€è¦ç”¨JavaScriptæ¥å®Œæˆã€‚</p><p>     But that&#39;s already a mouthful and also would have revealed too much and you might not have clicked my slightly clickbait-y title, right?</p><p>ä½†è¿™å·²ç»æ˜¯ä¸€å¼ å¤§å˜´å·´äº†ï¼Œè€Œä¸”è¿˜ä¼šé€éœ²å¤ªå¤šä¿¡æ¯ï¼Œä½ å¯èƒ½å°±ä¸ä¼šç‚¹å‡»æˆ‘é‚£ç•¥æ˜¾è¯±äººçš„æ ‡é¢˜äº†ï¼Œå¯¹å§ï¼Ÿ</p><p>    First of all I am not against JavaScript ( JS) at all. If you&#39;re building a web  application, then this is not only totally fine but most likely a core requirement.</p><p>é¦–å…ˆï¼Œæˆ‘æ ¹æœ¬ä¸åå¯¹JavaScript(JS)ã€‚å¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆè¿™ä¸ä»…å®Œå…¨å¯ä»¥ï¼Œè€Œä¸”å¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªæ ¸å¿ƒéœ€æ±‚ã€‚</p><p> But I do have my pet peeve with  JS for plain websites and blogs. Currently there is still such a strong draught in the static site generator world, telling us all our sites should be some kind of React or other frontend framework based project (looking at you, Gatsby, Next, Nuxt, VuePress, â€¦). That you need to have that plentyful of code running in the browser of your visitors to have a smooth and  feels like a native app user experience. That a site should be a  Single Page Application (SPA). I can tell you, a plain HTML+CSS website does it really well, too. Surprise!</p><p>ä½†æˆ‘ç¡®å®å¯¹JSçš„æ™®é€šç½‘ç«™å’Œåšå®¢æ„Ÿåˆ°æ¼ç«ã€‚ç›®å‰åœ¨é™æ€ç«™ç‚¹ç”Ÿæˆå™¨é¢†åŸŸä»ç„¶æœ‰å¦‚æ­¤å¼ºçƒˆçš„é£æ½®ï¼Œå‘Šè¯‰æˆ‘ä»¬æˆ‘ä»¬æ‰€æœ‰çš„ç«™ç‚¹éƒ½åº”è¯¥æ˜¯æŸç§ç±»å‹çš„Reactionæˆ–å…¶ä»–åŸºäºå‰ç«¯æ¡†æ¶çš„é¡¹ç›®(çœ‹çœ‹ä½ ï¼Œç›–èŒ¨æ¯”ï¼ŒNeXTï¼ŒNuxtï¼ŒVuePressï¼Œâ€¦)ã€‚ã€‚ä½ éœ€è¦åœ¨è®¿é—®è€…çš„æµè§ˆå™¨ä¸­è¿è¡Œå¤§é‡çš„ä»£ç ï¼Œæ‰èƒ½è·å¾—æµç•…çš„ã€æ„Ÿè§‰åƒåŸç”Ÿåº”ç”¨ç¨‹åºç”¨æˆ·ä½“éªŒçš„ä½“éªŒã€‚ç½‘ç«™åº”è¯¥æ˜¯å•é¡µé¢åº”ç”¨ç¨‹åº(SPA)ã€‚æˆ‘å¯ä»¥å‘Šè¯‰ä½ ï¼Œä¸€ä¸ªæ™®é€šçš„HTML+CSSç½‘ç«™ä¹Ÿèƒ½å¾ˆå¥½åœ°åšåˆ°è¿™ä¸€ç‚¹ã€‚æƒŠå–œï¼</p><p> While on one hand the browser vendors add more and more  Web APIs, we also got a lot of improvement in the HTML and CSS area. Usually there is no big hype train around them, unless you are very enthusiastic and live in that niche.</p><p>ä¸€æ–¹é¢ï¼Œæµè§ˆå™¨ä¾›åº”å•†å¢åŠ äº†è¶Šæ¥è¶Šå¤šçš„WebAPIï¼Œæˆ‘ä»¬åœ¨HTMLå’ŒCSSæ–¹é¢ä¹Ÿå¾—åˆ°äº†å¾ˆå¤§çš„æ”¹è¿›ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä»–ä»¬å‘¨å›´ä¸ä¼šæœ‰å¤§è‚†å®£ä¼ çš„åˆ—è½¦ï¼Œé™¤éä½ éå¸¸çƒ­æƒ…ï¼Œå¹¶ç”Ÿæ´»åœ¨é‚£ä¸ªåˆ©åŸºå¸‚åœºã€‚</p><p> Take a look at  caniuse.com to get an idea what is possible today and what might come tomorrow.  Did you know that HTML5 is still iterated on and we&#39;re moving towards  version 5.3? On the other hand Â»HTML 5Â« is also used as an umbrella term for a  wide variety of standards. Also for CSS the story got very interesting: while CSS until 2.1 was a single specification, since CSS 3 there is a whole potpourri of recommendations and drafts. The  wiki of the CSS Working Group might be a good starting point for further discovery.</p><p>çœ‹çœ‹caniuse.comï¼Œçœ‹çœ‹ä»Šå¤©å¯èƒ½å‘ç”Ÿä»€ä¹ˆï¼Œæ˜å¤©å¯èƒ½ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä½ çŸ¥é“HTML5è¿˜åœ¨è¿­ä»£ï¼Œæˆ‘ä»¬æ­£åœ¨å‘5.3ç‰ˆæœ¬è¿ˆè¿›å—ï¼Ÿå¦ä¸€æ–¹é¢ï¼Œâ€œHTML5â€ä¹Ÿè¢«ç”¨ä½œå„ç§æ ‡å‡†çš„æ€»ç§°ã€‚å¦å¤–ï¼Œå¯¹äºCSSæ¥è¯´ï¼Œæ•…äº‹å˜å¾—éå¸¸æœ‰è¶£ï¼šå°½ç®¡CSS 2.1ä¹‹å‰æ˜¯ä¸€ä¸ªå•ä¸€çš„è§„èŒƒï¼Œä½†ä»CSS3å¼€å§‹å°±æœ‰äº†ä¸€å¤§å †å»ºè®®å’Œè‰æ¡ˆã€‚CSSå·¥ä½œç»„çš„wikiå¯èƒ½æ˜¯è¿›ä¸€æ­¥å‘ç°çš„ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚</p><p>     The key ingredient is the CSS  position: sticky  ğŸ›ˆ. Even though most of them are labeled as  partial support, this property value can be used in most scenarios except in some table related cases. If you want a sticky menu after scrolling and use only elements like  div everything is just fine. I could throw away all the code for that after I realized that none of the common and modern browsers had any blocking issues. So I did. The only real latecomers were the web view components, no big deal for me here.</p><p>å…³é”®å› ç´ æ˜¯cssçš„ä½ç½®ï¼šç²˜æ€§ğŸ›ˆã€‚å°½ç®¡å®ƒä»¬ä¸­çš„å¤§å¤šæ•°è¢«æ ‡è®°ä¸ºéƒ¨åˆ†æ”¯æŒï¼Œä½†æ­¤å±æ€§å€¼å¯ä»¥åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä½†åœ¨æŸäº›ä¸è¡¨ç›¸å…³çš„æƒ…å†µä¸‹é™¤å¤–ã€‚å¦‚æœä½ æƒ³åœ¨æ»šåŠ¨åçœ‹åˆ°ä¸€ä¸ªç²˜æ»çš„èœå•ï¼Œå¹¶ä¸”åªä½¿ç”¨divè¿™æ ·çš„å…ƒç´ ï¼Œé‚£ä¹ˆä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚å½“æˆ‘æ„è¯†åˆ°æ‰€æœ‰å¸¸è§çš„å’Œç°ä»£çš„æµè§ˆå™¨éƒ½æ²¡æœ‰ä»»ä½•é˜»å¡é—®é¢˜åï¼Œæˆ‘å¯ä»¥æ‰”æ‰æ‰€æœ‰çš„ä»£ç ã€‚æ‰€ä»¥æˆ‘å°±è¿™ä¹ˆåšäº†ã€‚å”¯ä¸€çœŸæ­£çš„åæ¥è€…æ˜¯ç½‘é¡µè§†å›¾ç»„ä»¶ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚</p><p>   const  navbar  =  document .querySelector( &#39;.navbar&#39; ); let  sticky  =  navbar.offsetTop; const  navbarScroll  =  ()  =&gt;  {  if  ( window .pageYOffset  &gt;=  sticky) { navbar.classList.add( &#39;sticky&#39; ) }  else  { navbar.classList.remove( &#39;sticky&#39; ); }}; window .onscroll  =  navbarScroll;</p><p>Const navbar=Document.querySelector(&#39ï¼›.navbar&#39ï¼›)ï¼›let Sticky=navbar.offsetTopï¼›const navbarScroll=()=&gtï¼›{if(Window.pageYOffset&gtï¼›=Sticky){navbar.classList.add(&#39ï¼›Sticky&39ï¼›))}Else{navbar.classList.Remove(&#39ï¼›Sticky&39ï¼›)ï¼›}ï¼›çª—å£ã€‚</p><p>       .navbar  {  position :  sticky ;  top :  0 ;  /* it does not reposition right away, but determines at which point it sticks */ }</p><p>.navbar{positionï¼šStickyï¼›topï¼š0ï¼›/*å®ƒä¸ä¼šç«‹å³é‡æ–°å®šä½ï¼Œä½†ä¼šç¡®å®šå®ƒç²˜åœ¨å“ªä¸ªç‚¹ä¸Š*/}ã€‚</p><p>   Also notice how little code is actually needed now? Two CSS properties and the job is done.</p><p>è¿˜æ³¨æ„åˆ°ç°åœ¨å®é™…éœ€è¦çš„ä»£ç æœ‰å¤šå°‘å—ï¼Ÿä¸¤ä¸ªCSSå±æ€§ï¼Œå·¥ä½œå°±å®Œæˆäº†ã€‚</p><p>   Also in 2018 I played with  Progressive Web Apps (PWA). The whole blog was one. A few days ago I teared down all of it. At the core of PWAs sit  Service Workers (SW), though you can use SW also without building an app. And that&#39;s what I was aiming for, but in the end my home-grown dynamic cache solution was more annoying to me than helpful for anyone else. Every time I updated anything here, I had to wait and/or force refresh to see the result. I&#39;m sure some people probably see visual inconsistencies due to a still running service worker in their browser. If you do, try to force clear all data for this website.</p><p>åŒæ ·åœ¨2018å¹´ï¼Œæˆ‘ç©äº†è¿›æ­¥ç½‘ç»œåº”ç”¨(PWA)ã€‚æ•´ä¸ªåšå®¢éƒ½æ˜¯ä¸€ä¸ªã€‚å‡ å¤©å‰ï¼Œæˆ‘æŠŠå®ƒéƒ½æ‹†äº†ã€‚åœ¨PWASçš„æ ¸å¿ƒæ˜¯SITæœåŠ¡å·¥ä½œè€…(SW)ï¼Œä¸è¿‡æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨SWè€Œæ— éœ€æ„å»ºåº”ç”¨ç¨‹åºã€‚è¿™å°±æ˜¯æˆ‘çš„ç›®æ ‡ï¼Œä½†æœ€ç»ˆï¼Œæˆ‘è‡ªå·±å¼€å‘çš„åŠ¨æ€ç¼“å­˜è§£å†³æ–¹æ¡ˆå¯¹æˆ‘æ¥è¯´æ›´ä»¤äººè®¨åŒï¼Œè€Œä¸æ˜¯å¯¹å…¶ä»–ä»»ä½•äººæœ‰å¸®åŠ©ã€‚æ¯æ¬¡æˆ‘åœ¨è¿™é‡Œæ›´æ–°ä»»ä½•ä¸œè¥¿æ—¶ï¼Œæˆ‘éƒ½å¿…é¡»ç­‰å¾…å’Œ/æˆ–å¼ºåˆ¶åˆ·æ–°æ‰èƒ½çœ‹åˆ°ç»“æœã€‚æˆ‘ç›¸ä¿¡æœ‰äº›äººå¯èƒ½ä¼šå› ä¸ºæµè§ˆå™¨ä¸­ä»åœ¨è¿è¡Œçš„æœåŠ¡äººå‘˜è€Œçœ‹åˆ°è§†è§‰ä¸Šçš„ä¸ä¸€è‡´ã€‚å¦‚æœè¿™æ ·åšï¼Œè¯·å°è¯•å¼ºåˆ¶æ¸…é™¤æ­¤ç½‘ç«™çš„æ‰€æœ‰æ•°æ®ã€‚</p><p> Long story short: if you do not build a web  app, you most likely do not need service workers. So yet another thing down from the  JS list.</p><p>é•¿è¯çŸ­è¯´ï¼šå¦‚æœä½ ä¸å¼€å‘ç½‘ç»œåº”ç”¨ï¼Œä½ å¾ˆå¯èƒ½ä¸éœ€è¦æœåŠ¡äººå‘˜ã€‚å› æ­¤ï¼Œè¿˜æœ‰ä¸€ä»¶äº‹æ˜¯ä»JSåå•ä¸Šæ‰ä¸‹æ¥çš„ã€‚</p><p> No  before/after comparison here, but several precious kilobytes of JavaScript shaved off by removing them.</p><p>è¿™é‡Œæ²¡æœ‰ä¹‹å‰/ä¹‹åçš„æ¯”è¾ƒï¼Œä½†æ˜¯é€šè¿‡åˆ é™¤å®ƒä»¬ï¼Œå‡å°‘äº†å®è´µçš„å‡ åƒå­—èŠ‚çš„JavaScriptã€‚</p><p>    If you have images and they are not very small in file size, you maybe want to provide a temporary placeholder with very low resolution and quality. This is pretty useful for slow internet connections; living here in Germany I know how difficult this situation can be. That thing called internet is still very Neuland to us. ğŸ¤¦</p><p>å¦‚æœæ‚¨æœ‰æ–‡ä»¶å¤§å°ä¸æ˜¯å¾ˆå°çš„å›¾åƒï¼Œåˆ™å¯èƒ½éœ€è¦æä¾›åˆ†è¾¨ç‡å’Œè´¨é‡éå¸¸ä½çš„ä¸´æ—¶å ä½ç¬¦ã€‚è¿™å¯¹äºä½é€Ÿçš„äº’è”ç½‘è¿æ¥éå¸¸æœ‰ç”¨ï¼›æˆ‘ç”Ÿæ´»åœ¨å¾·å›½ï¼Œæˆ‘çŸ¥é“è¿™ç§æƒ…å†µæœ‰å¤šå›°éš¾ã€‚é‚£ä¸ªå«äº’è”ç½‘çš„ä¸œè¥¿å¯¹æˆ‘ä»¬æ¥è¯´ä»ç„¶æ˜¯çº½å…°(Neuland)å¼çš„ä¸œè¥¿ã€‚ğŸ¤¦ã€‚</p><p>  SVG are Scalable Vector Graphics, an image format I really love a lot, my logo is done with it ( I wrote about it a while ago).</p><p>SVGæ˜¯å¯ä¼¸ç¼©å‘é‡å›¾å½¢ï¼Œè¿™æ˜¯ä¸€ç§æˆ‘éå¸¸å–œæ¬¢çš„å›¾åƒæ ¼å¼ï¼Œæˆ‘çš„å¾½æ ‡å·²ç»ç”¨å®ƒåšå¥½äº†(æˆ‘ä¸ä¹…å‰å†™è¿‡è¿™ç¯‡æ–‡ç« )ã€‚</p><p> LQIP finally stands for  Â»Low Quality Image PlaceholdersÂ« and is based on an algorithm to find primitive shapes to describe the source image. Basically try to find only a few triangles, rectangles, circles, ellipsis, and other low poly shapes. It is also an art form in its own, you can enjoy some  nice examples there. The advantage of SVG is that it is made to encode such figures in very few characters of human readable text, so a less complex image for a placeholder can be written in one kilobyte or less.</p><p>LQIPæœ€ç»ˆä»£è¡¨Â»ä½è´¨é‡å›¾åƒå ä½ç¬¦(Low Quality Image Placeders)ï¼Œå®ƒåŸºäºä¸€ç§ç®—æ³•æ¥å¯»æ‰¾åŸºå…ƒå½¢çŠ¶æ¥æè¿°æºå›¾åƒã€‚åŸºæœ¬ä¸Šåªèƒ½æ‰¾åˆ°å‡ ä¸ªä¸‰è§’å½¢ã€çŸ©å½¢ã€åœ†å½¢ã€æ¤­åœ†å½¢å’Œå…¶ä»–ä½å¤šè¾¹å½¢ã€‚å®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ç§è‰ºæœ¯å½¢å¼ï¼Œä½ å¯ä»¥åœ¨é‚£é‡Œæ¬£èµåˆ°ä¸€äº›å¾ˆå¥½çš„ä¾‹å­ã€‚SVGçš„ä¼˜ç‚¹åœ¨äºï¼Œå®ƒæ˜¯ç”¨æå°‘çš„äººç±»å¯è¯»æ–‡æœ¬å­—ç¬¦å¯¹è¿™äº›æ•°å­—è¿›è¡Œç¼–ç çš„ï¼Œå› æ­¤å ä½ç¬¦çš„ä¸å¤ªå¤æ‚çš„å›¾åƒå¯ä»¥ç”¨1åƒå­—èŠ‚æˆ–æ›´å°‘çš„å­—èŠ‚æ¥ç¼–å†™ã€‚</p><p> Compared to the original high resolution image which can easily weigh half a megabyte and more this is great. You can reserve the space in your page and very early in the loading process display some visual hint that there will be a proper picture soon. Especially for types which do not support progessive loading (as JPEG can) using SQIP/LQIP placeholders makes a lot of sense.</p><p>ä¸åŸå§‹çš„é«˜åˆ†è¾¨ç‡å›¾åƒç›¸æ¯”ï¼Œè¿™æ˜¯å¾ˆæ£’çš„ï¼Œå› ä¸ºé«˜åˆ†è¾¨ç‡å›¾åƒå¯ä»¥è½»æ¾åœ°é‡è¾¾0.5å…†å­—èŠ‚ç”šè‡³æ›´å¤šã€‚æ‚¨å¯ä»¥åœ¨é¡µé¢ä¸­é¢„ç•™ç©ºé—´ï¼Œå¹¶åœ¨åŠ è½½è¿‡ç¨‹çš„æ—©æœŸæ˜¾ç¤ºä¸€äº›è§†è§‰æç¤ºï¼Œè¡¨æ˜å¾ˆå¿«å°±ä¼šæœ‰åˆé€‚çš„å›¾ç‰‡ã€‚ç‰¹åˆ«æ˜¯å¯¹äºä¸æ”¯æŒæ¸è¿›å¼åŠ è½½çš„ç±»å‹(å¦‚JPEG)ï¼Œä½¿ç”¨SQIP/LQIPå ä½ç¬¦éå¸¸æœ‰æ„ä¹‰ã€‚</p><p> In this scenario at first it was not really about saving frontend  JS, more about saving it on the backend site and replacing it with something else. Unfortunately in between some code creeped into the frontend anyway.</p><p>åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œä¸€å¼€å§‹å¹¶ä¸æ˜¯çœŸçš„è¦ä¿å­˜å‰ç«¯JSï¼Œè€Œæ˜¯æ›´å¤šåœ°å°†å…¶ä¿å­˜åœ¨åç«¯ç«™ç‚¹ä¸Šï¼Œå¹¶ç”¨å…¶ä»–ä¸œè¥¿æ›¿æ¢å®ƒã€‚ä¸å¹¸çš„æ˜¯ï¼Œåœ¨è¿™ä¸­é—´ï¼Œä¸€äº›ä»£ç ä¸ç®¡æ€æ ·æ‚„æ‚„åœ°è¿›å…¥äº†å‰å°ã€‚</p><p>    So one reason to use small low quality placeholders is because before such tags became a thing we solely relied on a single  &lt;img&gt; and some trickery with CSS (and sometimes aided by sprinkles of JavaScript). I tried to avoid  JS completely, but of course I had to use some styling hacks eventually.</p><p>å› æ­¤ï¼Œä½¿ç”¨å°çš„ä½è´¨é‡å ä½ç¬¦çš„ä¸€ä¸ªåŸå› æ˜¯ï¼Œåœ¨è¿™ç±»æ ‡ç­¾æˆä¸ºä¸€ç§ä¸œè¥¿ä¹‹å‰ï¼Œæˆ‘ä»¬å®Œå…¨ä¾èµ–äºå•ä¸€çš„&ltï¼›img&gtï¼›å’Œä¸€äº›ä½¿ç”¨CSSçš„æŠ€å·§(æœ‰æ—¶è¿˜è¾…ä¹‹ä»¥å°‘é‡çš„JavaScript)ã€‚æˆ‘è¯•å›¾å®Œå…¨é¿å…JSï¼Œä½†å½“ç„¶æœ€ç»ˆæˆ‘ä¸å¾—ä¸ä½¿ç”¨ä¸€äº›æ ·å¼æŠ€å·§ã€‚</p><p>  &lt; img  src = &#34;highres-and-heavy.png&#34;  style = &#34; background-size :  cover ;  background-image :  url ( &#39;data:image/svg+xml;base64,PHN2â€¦&#39; ); &#34; &gt; &lt;!-- Usually in some post processing all style attributes were collected into a &lt;style&gt; tag or CSS file. --&gt;</p><p>&ltï¼›img src=&#34ï¼›é«˜å¤§ã€‚png&#34ï¼›æ ·å¼=&#34ï¼›èƒŒæ™¯-å¤§å°ï¼šå°é¢ï¼›èƒŒæ™¯-å›¾åƒï¼šurl(&#39ï¼›æ•°æ®ï¼šå›¾åƒ/svg+xmlï¼›base 64ï¼Œphn2â€¦ã€‚&#39ï¼›)ï¼›&#34ï¼›&gtï¼›&ltï¼›ï¼--é€šå¸¸åœ¨æŸäº›åå¤„ç†ä¸­ï¼Œæ‰€æœ‰æ ·å¼å±æ€§éƒ½è¢«æ”¶é›†åˆ°&ltï¼›style&gtï¼›æ ‡è®°æˆ–CSSæ–‡ä»¶ä¸­ã€‚--&gtï¼›</p><p> The JavaScript entered this scenery at one point: after I used images with transparency. Sadly with this background image workaround you would&#39;ve seen the low quality placeholder through the transparent parts, and this was extremly ugly to be honest. I could not stand it and deployed some snippet to trigger a background removal once the actual image was loaded:</p><p>åœ¨æˆ‘ä½¿ç”¨é€æ˜å›¾åƒä¹‹åï¼ŒJavaScriptä¸€åº¦è¿›å…¥äº†è¿™ä¸ªåœºæ™¯ã€‚é—æ†¾çš„æ˜¯ï¼Œç”¨è¿™ä¸ªèƒŒæ™¯å›¾åƒè§£å†³åŠæ³•ï¼Œä½ ä¼šçœ‹åˆ°ä½è´¨é‡çš„å ä½ç¬¦é€è¿‡é€æ˜çš„éƒ¨åˆ†ï¼Œè¯´å®è¯ï¼Œè¿™æ˜¯éå¸¸ä¸‘é™‹çš„ã€‚æˆ‘æ— æ³•å¿å—ï¼Œåœ¨å®é™…å›¾ç‰‡åŠ è½½åï¼Œæˆ‘éƒ¨ç½²äº†ä¸€äº›ä»£ç ç‰‡æ®µæ¥è§¦å‘èƒŒæ™¯ç§»é™¤ï¼š</p><p> // remove the background image styling, so transparent images won&#39;t have// strange SQIP artefacts shining through document .querySelectorAll(  &#34;img[loading=lazy][class]:not(.thumbnail):not(.loaded)&#34; ).forEach(( img )  =&gt;  {  img . onload  =  ( _event )  =&gt;  img.className  =  &#34;loaded&#34; ;}); document .querySelectorAll(  &#34;img[loading=lazy].thumbnail:not(.loaded)&#34; ).forEach(( img )  =&gt;  {  img . onload  =  ( _event )  =&gt;  img.className  =  &#34;thumbnail loaded&#34; ;});</p><p>//åˆ é™¤èƒŒæ™¯å›¾åƒæ ·å¼ï¼Œä»¥ä¾¿é€æ˜å›¾åƒä¸ä¼š//å‡ºç°//å¥‡æ€ªçš„SQIPä¼ªåƒé€šè¿‡æ–‡æ¡£.querySelectorAll(&#34ï¼›img[loading=lazy][class]ï¼šnot(.thumbnail)ï¼šnot(.loaded)&#34ï¼›).forEach((Img)=&gtï¼›{img.ã€‚OnLoad=(_Event)=&gtï¼›img.className=&#34ï¼›å·²åŠ è½½&#34ï¼›ï¼›})ï¼›æ–‡æ¡£.querySelectorAll(&#34ï¼›img[loading=lazy].thumbnail:not(.loaded)&#34ï¼›).forEach((Img)=&gtï¼›{img.ã€‚OnLoad=(_Event)=&gtï¼›img.className=&#34ï¼›åŠ è½½çš„ç¼©ç•¥å›¾&#34ï¼›ï¼›})ï¼›</p><p> Theoretically it would have been tolerable, but I noticed some strange behaviour once I started wrapping my images into  picture tags.</p><p>ç†è®ºä¸Šè¿™æ˜¯å¯ä»¥å¿å—çš„ï¼Œä½†å½“æˆ‘å¼€å§‹å°†å›¾ç‰‡åŒ…è£…æˆå›¾ç‰‡æ ‡ç­¾æ—¶ï¼Œæˆ‘æ³¨æ„åˆ°äº†ä¸€äº›å¥‡æ€ªçš„è¡Œä¸ºã€‚</p><p>   Come on, more acronyms? I&#39;m sorry, the web is a place with a lot of them.</p><p>å¾—äº†å§ï¼Œæ›´å¤šçš„ç¼©ç•¥è¯­ï¼Ÿæˆ‘å¾ˆæŠ±æ­‰ï¼Œç½‘ç»œä¸Šæœ‰å¾ˆå¤šè¿™æ ·çš„ä¸œè¥¿ã€‚</p><p> All you need to know for now is that both of them are pretty modern image formats with quite good (lossy) compression rates while keeping a respectable quality.   WEBP has been around for some time and most of the browsers do support it.   AVIF is extremly new and right now only Chrome since version 85 and Opera 71 can display them. Firefox has a configuration flag, maybe they will enable it by default pretty soon.</p><p>ç›®å‰ä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œè¿™ä¸¤ç§å›¾åƒæ ¼å¼éƒ½æ˜¯ç›¸å½“ç°ä»£çš„å›¾åƒæ ¼å¼ï¼Œåœ¨ä¿æŒè‰¯å¥½è´¨é‡çš„åŒæ—¶å…·æœ‰ç›¸å½“å¥½çš„(æœ‰æŸ)å‹ç¼©æ¯”ã€‚WebPå‡ºç°å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå¤§å¤šæ•°æµè§ˆå™¨éƒ½æ”¯æŒå®ƒã€‚AVIFéå¸¸æ–°ï¼Œç›®å‰åªæœ‰Chromeç‰ˆæœ¬85å’ŒOpera 71å¯ä»¥æ˜¾ç¤ºå®ƒä»¬ã€‚Firefoxæœ‰ä¸€ä¸ªé…ç½®æ ‡å¿—ï¼Œä¹Ÿè®¸ä»–ä»¬å¾ˆå¿«å°±ä¼šé»˜è®¤å¯ç”¨å®ƒã€‚</p><p> So the current situation is that I have my original image (PNG or JPEG in most cases), a WEBP version, an AVIF version, and the SQIP placeholder. How do I deal with it? Back to our  &lt;picture&gt; tag:</p><p>å› æ­¤ï¼Œç›®å‰çš„æƒ…å†µæ˜¯ï¼Œæˆ‘æœ‰æˆ‘çš„åŸå§‹å›¾åƒ(å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯PNGæˆ–JPEG)ã€WebPç‰ˆæœ¬ã€AVIFç‰ˆæœ¬å’ŒSQIPå ä½ç¬¦ã€‚æˆ‘è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿè¿”å›åˆ°æˆ‘ä»¬çš„&ltï¼›å›¾ç‰‡&&gt;æ ‡ç­¾ï¼š</p><p> &lt; picture &gt; &lt; source  srcset = &#34;./cover.avif&#34;  type = &#34;image/avif&#34; &gt; &lt; source  srcset = &#34;./cover.webp&#34;  type = &#34;image/webp&#34; &gt; &lt; img  src = &#34;./cover.png&#34;  style = &#34; /* SQIP data: see example above */ &#34; &gt;&lt;/ picture &gt;</p><p>&ltï¼›å›¾ç‰‡&&gt;æºèµ„æº=&#34ï¼›./over.avif&#34ï¼›type=&#34ï¼›Image/avif&#34ï¼›&gtï¼›&ltï¼›æºèµ„æº=&#34ï¼›./cover.webp&#34ï¼›type=&#34ï¼›Image/WebP&#34ï¼›&gtï¼›&ltï¼›img src=&#34ï¼›./over.png&#34ï¼›style=&ã€‚&ltï¼›/Picture&gtï¼›</p><p> You can also use source sets for different view sizes based on media queries, but in my case I&#39;m mainly concerned about supporting different image formats. My idea is to prioritize the formats with the smallest file size first, and given the compression ratios the order is usually: AVIF, WEBP, PNG/JPG. Not in every case will this be true; WEBP does not always have better savings then a decently compressed JPEG for example. AVIF has not disappointed so far, but sadly a part of my visitors will not see the effect yet.</p><p>æ‚¨ä¹Ÿå¯ä»¥æ ¹æ®åª’ä½“æŸ¥è¯¢ä½¿ç”¨ä¸åŒè§†å›¾å¤§å°çš„æºé›†ï¼Œä½†åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä¸»è¦å…³å¿ƒçš„æ˜¯æ”¯æŒä¸åŒçš„å›¾åƒæ ¼å¼ã€‚æˆ‘çš„æƒ³æ³•æ˜¯é¦–å…ˆå¯¹æ–‡ä»¶å¤§å°æœ€å°çš„æ ¼å¼è¿›è¡Œä¼˜å…ˆæ’åºï¼Œç»™å‡ºå‹ç¼©æ¯”é€šå¸¸çš„é¡ºåºæ˜¯ï¼šAVIFã€WebPã€PNG/JPGã€‚å¹¶éåœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ˜¯å¦‚æ­¤ï¼›ä¾‹å¦‚ï¼ŒWebPå¹¶ä¸æ€»æ˜¯æ¯”ç»è¿‡é€‚å½“å‹ç¼©çš„JPEGèŠ‚çœå¾—æ›´å¤šã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒAVIFè¿˜æ²¡æœ‰ä»¤äººå¤±æœ›ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œæˆ‘çš„éƒ¨åˆ†è®¿é—®è€…è¿˜æ²¡æœ‰çœ‹åˆ°æ•ˆæœã€‚</p><p> What did not really happen anymore was a display of the placeholder before the final image was loaded. I experimented for quite some time until I realized that I do not want to spent more energy any further.</p><p>çœŸæ­£ä¸å†å‘ç”Ÿçš„æ˜¯åœ¨åŠ è½½æœ€ç»ˆå›¾åƒä¹‹å‰æ˜¾ç¤ºå ä½ç¬¦ã€‚æˆ‘åšäº†ç›¸å½“é•¿ä¸€æ®µæ—¶é—´çš„å®éªŒï¼Œç›´åˆ°æˆ‘æ„è¯†åˆ°æˆ‘ä¸æƒ³å†èŠ±æ›´å¤šçš„ç²¾åŠ›ã€‚</p><p>  I made a  risk-return tradeoff compromise and got rid of SQIP altogether. For the growing number of AVIF support the images are sometimes significantly smaller which makes it acceptable to allow for some display delay anyway.</p><p>æˆ‘åœ¨é£é™©å’Œå›æŠ¥ä¹‹é—´è¿›è¡Œäº†æƒè¡¡ï¼Œå®Œå…¨æ”¾å¼ƒäº†SQIPã€‚å¯¹äºè¶Šæ¥è¶Šå¤šçš„AVIFæ”¯æŒï¼Œå›¾åƒæœ‰æ—¶è¦å°å¾—å¤šï¼Œè¿™ä½¿å¾—å…è®¸ä¸€äº›æ˜¾ç¤ºå»¶è¿Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><p> In the following screenshot the JPEG was the source photo. The PNG was created for some transparency stuff; of course, for photos this format does not really make a lot of sense in general. Sadly also WEBP fails to compete in this scenario. That&#39;s why I have to make this picture group generation a bit smarter soon to reorder based on the actual file sizes. Right now it is just based on a fixed format preference choice.</p><p>åœ¨ä¸‹é¢çš„å±å¹•æˆªå›¾ä¸­ï¼ŒJPEGæ˜¯æºç…§ç‰‡ã€‚PNGæ˜¯ä¸ºä¸€äº›é€æ˜çš„ä¸œè¥¿è€Œåˆ›å»ºçš„ï¼›å½“ç„¶ï¼Œå¯¹äºç…§ç‰‡æ¥è¯´ï¼Œè¿™ç§æ ¼å¼é€šå¸¸æ²¡æœ‰å¤šå¤§æ„ä¹‰ã€‚é—æ†¾çš„æ˜¯ï¼ŒWebPåœ¨è¿™ç§æƒ…å†µä¸‹ä¹Ÿæ— æ³•ç«äº‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘å¿…é¡»è®©è¿™ä¸ªå›¾ç‰‡ç»„ç”Ÿæˆæ›´æ™ºèƒ½ä¸€ç‚¹ï¼Œä»¥ä¾¿æ ¹æ®å®é™…æ–‡ä»¶å¤§å°è¿›è¡Œé‡æ–°æ’åºã€‚ç›®å‰ï¼Œå®ƒåªæ˜¯åŸºäºå›ºå®šçš„æ ¼å¼é¦–é€‰é¡¹é€‰æ‹©ã€‚</p><p> Well, AVIF is beating it definitely here. And yes, this 17.6 KB version is visually comparable to the original one. Sure, a closer look and you can spot differences, but for supportive symbolic pictures 100 % accuracy is not required. If you don&#39;t pay attention to it (or just don&#39;t know the source), it can compete with ease.</p><p>å—¯ï¼ŒAVIFåœ¨è¿™æ–¹é¢ç»å¯¹æ‰“è´¥äº†å®ƒã€‚æ˜¯çš„ï¼Œè¿™ä¸ª17.6KBçš„ç‰ˆæœ¬åœ¨è§†è§‰ä¸Šå¯ä»¥ä¸åŸå§‹ç‰ˆæœ¬ç›¸åª²ç¾ã€‚å½“ç„¶ï¼Œä»”ç»†è§‚å¯Ÿä½ å¯ä»¥å‘ç°ä¸åŒä¹‹å¤„ï¼Œä½†å¯¹äºæ”¯æŒæ€§çš„ç¬¦å·å›¾ç‰‡æ¥è¯´ï¼Œä¸éœ€è¦100%çš„å‡†ç¡®ç‡ã€‚å¦‚æœä½ ä¸æ³¨æ„å®ƒ(æˆ–è€…åªæ˜¯ä¸çŸ¥é“å®ƒçš„æ¥æº)ï¼Œå®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°ä¸ä¹‹ç«äº‰ã€‚</p><p>  Just as an aside: during deployment another attempt of compression is done, the PNG gets shrunken down to 159 KB, the WEBP not at all.</p><p>é¡ºä¾¿è¯´ä¸€å¥ï¼šåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œäº†å¦ä¸€æ¬¡å‹ç¼©å°è¯•ï¼ŒPNGå‹ç¼©åˆ°159KBï¼Œè€ŒWebPåˆ™å®Œå…¨æ²¡æœ‰ã€‚</p><p> The only annoying part is still that the image dimensions are not reserved appropriately, even with present  width and  height attributes. So the layout can jump around if you scroll past the not yet loaded image. If you have an idea how to deal with that within  picture groups, I love to hear about it.</p><p>å”¯ä¸€ä»¤äººæ¼ç«çš„éƒ¨åˆ†ä»ç„¶æ˜¯å›¾åƒå°ºå¯¸æ²¡æœ‰è¢«é€‚å½“åœ°ä¿ç•™ï¼Œå³ä½¿ä½¿ç”¨ç›®å‰çš„å®½åº¦å’Œé«˜åº¦å±æ€§ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æ»šåŠ¨åˆ°å°šæœªåŠ è½½çš„å›¾åƒï¼Œå¸ƒå±€å¯ä»¥è·³è½¬ã€‚å¦‚æœä½ æœ‰åŠæ³•åœ¨å›¾ç‰‡ç»„ä¸­è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å¾ˆä¹æ„å¬å¬ã€‚</p><p>  More images in different formats, more backend processing (and for now mostly in  JS), no placeholder images, no frontend scripts.</p><p>æ›´å¤šä¸åŒæ ¼å¼çš„å›¾ç‰‡ï¼Œæ›´å¤šçš„åç«¯å¤„ç†(ç›®å‰ä¸»è¦æ˜¯JS)ï¼Œæ²¡æœ‰å ä½ç¬¦å›¾ç‰‡ï¼Œæ²¡æœ‰å‰ç«¯è„šæœ¬ã€‚</p><p> You can find my current attempt for Â» &lt;img&gt; to  &lt;picture&gt;Â« transformation in the  GitHub repository for this site.</p><p>æ‚¨å¯ä»¥åœ¨æ­¤ç«™ç‚¹çš„GitHubå­˜å‚¨åº“ä¸­æ‰¾åˆ°æˆ‘å½“å‰å°è¯•å°†Â»&ltï¼›img&gtï¼›è½¬æ¢ä¸º&ltï¼›Picture&gtï¼›ã€‚</p><p>   Â»Sometimes I will add something here and there. And just a bit later I think I should remove something again.Â« â€”  me</p><p>Â»æœ‰æ—¶æˆ‘ä¼šåœ¨è¿™é‡Œå’Œé‚£é‡Œæ·»åŠ ä¸€äº›ä¸œè¥¿ã€‚å†è¿‡ä¸€ä¼šå„¿ï¼Œæˆ‘æƒ³æˆ‘åº”è¯¥å†å»æ‰ä¸€äº›ä¸œè¥¿ã€‚</p><p> Basically I removed all scripts not essential for visiting, viewing, and reading. Visually pleasing hints like a subtle progress bar for the reading position were a nice toy, though not necessary at all.</p><p>åŸºæœ¬ä¸Šï¼Œæˆ‘åˆ é™¤äº†è®¿é—®ã€æŸ¥çœ‹å’Œé˜…è¯»ä¸å¿…è¦çš„æ‰€æœ‰è„šæœ¬ã€‚è§†è§‰ä¸Šä»¤äººæ„‰æ‚¦çš„æç¤ºï¼Œå¦‚é˜…è¯»ä½ç½®çš„ç»†å¾®è¿›åº¦æ¡ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç©å…·ï¼Œå°½ç®¡æ ¹æœ¬ä¸æ˜¯å¿…è¦çš„ã€‚</p><p> In the beginning I mentioned, that there are exceptions to the JavaScript-free site. You&#39;ll find scripts for the pages  resolution and  theme.</p><p>æˆ‘åœ¨ä¸€å¼€å§‹å°±æåˆ°ï¼Œæ²¡æœ‰JavaScriptçš„ç«™ç‚¹ä¹Ÿæœ‰ä¾‹å¤–ã€‚ä½ ä¼šæ‰¾åˆ°é¡µé¢åˆ†è¾¨ç‡å’Œä¸»é¢˜çš„è„šæœ¬ã€‚</p><p> The first page is actually for myself when I need to check screen and window sizes while tweaking my theme. It needs to dynamically (re)calculate those values when resizing and scaling, so there is not really a way around  JS here. And as said, I don&#39;t mind it at all.</p><p>å½“æˆ‘éœ€è¦åœ¨è°ƒæ•´ä¸»é¢˜çš„åŒæ—¶æ£€æŸ¥å±å¹•å’Œçª—å£å¤§å°æ—¶ï¼Œç¬¬ä¸€é¡µå®é™…ä¸Šæ˜¯ä¸ºæˆ‘è‡ªå·±å‡†å¤‡çš„ã€‚åœ¨è°ƒæ•´å¤§å°å’Œç¼©æ”¾æ—¶ï¼Œå®ƒéœ€è¦åŠ¨æ€(é‡æ–°)è®¡ç®—è¿™äº›å€¼ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰çœŸæ­£ç»•è¿‡JSçš„æ–¹æ³•ã€‚æ­£å¦‚æˆ‘æ‰€è¯´çš„ï¼Œæˆ‘ä¸€ç‚¹ä¹Ÿä¸ä»‹æ„ã€‚</p><p> The second page could live without client side scripting if I&#39;m honest, but back then I was a bit too lazy to automate the data generation in a fully static fashion before or during deployment. Nowadays it serves as a reminder that you can get the computed style programmatically. Sometimes this can be very useful.</p><p>å¦‚æœæˆ‘è¯šå®çš„è¯ï¼Œç¬¬äºŒä¸ªé¡µé¢å¯ä»¥æ²¡æœ‰å®¢æˆ·ç«¯è„šæœ¬ï¼Œä½†å½“æ—¶æˆ‘æœ‰ç‚¹æ‡’å¾—åœ¨éƒ¨ç½²ä¹‹å‰æˆ–éƒ¨ç½²æœŸé—´ä»¥å®Œå…¨é™æ€çš„æ–¹å¼è‡ªåŠ¨ç”Ÿæˆæ•°æ®ã€‚ç°åœ¨ï¼Œå®ƒæé†’æ‚¨å¯ä»¥é€šè¿‡ç¼–ç¨‹è·å¾—è®¡ç®—æ ·å¼ã€‚æœ‰æ—¶è¿™å¯èƒ½éå¸¸æœ‰ç”¨ã€‚</p><p> By the way, this site is powered by 153 MB of  node_modules during build, pre &amp; post processing, and deployment times. I&#39;m not immensily happy about it, but currently that&#39;s okay. Though I will probably work on replacing that with something else in the future.</p><p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œåœ¨æ„å»ºã€å‰åå¤„ç†å’Œéƒ¨ç½²æœŸé—´ï¼Œè¯¥ç«™ç‚¹ç”±153 MBçš„node_moduleæä¾›æ”¯æŒã€‚æˆ‘å¯¹æ­¤å¹¶ä¸ååˆ†æ»¡æ„ï¼Œä½†ç›®å‰è¿™è¿˜å¯ä»¥ã€‚ä¸è¿‡ï¼Œæˆ‘å¯èƒ½ä¼šåœ¨æœªæ¥åŠªåŠ›ç”¨å…¶ä»–ä¸œè¥¿æ¥å–ä»£å®ƒã€‚</p><p> ğŸ™…ğŸ»â€â™€ï¸ğŸ•µğŸ»â€â™€ï¸, ğŸ™…ğŸ»â€â™€ï¸ğŸª</p><p>ğŸ™…ğŸ»â€â™€ï¸ğŸ•µğŸ»â€â™€ï¸ï¼ŒğŸ™…ğŸ»â€â™€ï¸ğŸªã€‚</p><p> Another side fact: since I do not track my visitors, not even any third party scripts are lingering around anywhere. This also means you have to not only bring coffee or tea for your afternoon reading, but also your very own cookies, too. Because I don&#39;t  eat need them.</p><p>å¦ä¸€ä¸ªä¾§é¢çš„äº‹å®æ˜¯ï¼šç”±äºæˆ‘ä¸è·Ÿè¸ªæˆ‘çš„è®¿é—®è€…ï¼Œç”šè‡³æ²¡æœ‰ä»»ä½•ç¬¬ä¸‰æ–¹è„šæœ¬åœ¨ä»»ä½•åœ°æ–¹å¾˜å¾Šã€‚è¿™ä¹Ÿæ„å‘³ç€ä½ ä¸ä»…è¦å¸¦å’–å•¡æˆ–èŒ¶æ¥ä¸‹åˆé˜…è¯»ï¼Œè¿˜è¦å¸¦ä¸Šä½ è‡ªå·±çš„é¥¼å¹²ã€‚å› ä¸ºæˆ‘åƒçš„æ—¶å€™ä¸éœ€è¦å®ƒä»¬ã€‚</p><p>  I wish more peopleâ€”specifically working or being interested in the web development fieldâ€”would consider to reduce or avoid the JavaScript cruft in their projects. When you build a static site, also ask yourself, what &#34;static&#34; really means to you?  (I remember the slightly darker sides of the era of  DHTML, Java Applets, and Flash, brrrrr â€¦)</p><p>æˆ‘å¸Œæœ›æ›´å¤šçš„äºº--ç‰¹åˆ«æ˜¯åœ¨Webå¼€å‘é¢†åŸŸå·¥ä½œæˆ–æ„Ÿå…´è¶£çš„äºº--ä¼šè€ƒè™‘å‡å°‘æˆ–é¿å…åœ¨ä»–ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨JavaScriptã€‚å½“ä½ å»ºç«‹ä¸€ä¸ªé™æ€ç½‘ç«™æ—¶ï¼Œä¹Ÿè¦é—®é—®è‡ªå·±ï¼Œé™æ€å¯¹ä½ æ¥è¯´æ„å‘³ç€ä»€ä¹ˆï¼Ÿ(æˆ‘è¿˜è®°å¾—åŠ¨æ€è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ã€Java appletå’ŒFlashæ—¶ä»£ç•¥æ˜¾é˜´æš—çš„ä¸€é¢ï¼Œbrrrrrâ€¦)ã€‚</p><p> Call me oldschool, but if you create a site with mostly text to read and images to view, why would you want to try to turn my device into a heater or stove? The simplicity of things also lies in what not do add and what to leave out.</p><p>å¯ä»¥è¯´æˆ‘å¾ˆè€æ´¾ï¼Œä½†å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªä»¥æ–‡å­—å’Œå›¾ç‰‡ä¸ºä¸»çš„ç½‘ç«™ï¼Œä¸ºä»€ä¹ˆä½ è¦è¯•å›¾æŠŠæˆ‘çš„è®¾å¤‡å˜æˆåŠ çƒ­å™¨æˆ–ç‚‰å­å‘¢ï¼Ÿäº‹ç‰©çš„ç®€å•è¿˜åœ¨äºä»€ä¹ˆä¸åšä»€ä¹ˆä¸åšï¼Œä»€ä¹ˆä¸åšä»€ä¹ˆçœç•¥ã€‚</p><p> I hope I gave you some ideas with the examples above. Discover the HTML and CSS specs and look for opportunities to replace parts with smaller and smarter solutions. If something is still rough around the edges, don&#39;t worry, most of the things are living standards and constantly evolve and improve over time (and you can help if you want to). Browser vendors usually implement some draft before the proposals and specifications are final. Everything is moving fast. Keep your eyes open!</p><p>æˆ‘å¸Œæœ›æˆ‘é€šè¿‡ä¸Šé¢çš„ä¾‹å­ç»™äº†ä½ ä¸€äº›æƒ³æ³•ã€‚äº†è§£HTMLå’ŒCSSè§„æ ¼ï¼Œå¹¶å¯»æ‰¾ç”¨æ›´å°ã€æ›´æ™ºèƒ½çš„è§£å†³æ–¹æ¡ˆæ›¿æ¢éƒ¨ä»¶çš„æœºä¼šã€‚å¦‚æœæœ‰äº›ä¸œè¥¿è¿˜å¾ˆç²—ç³™ï¼Œä¸è¦æ‹…å¿ƒï¼Œå¤§å¤šæ•°ä¸œè¥¿éƒ½æ˜¯ç”Ÿæ´»æ°´å¹³ï¼Œè€Œä¸”ä¼šéšç€æ—¶é—´çš„æ¨ç§»ä¸æ–­æ¼”å˜å’Œæ”¹è¿›(å¦‚æœä½ æ„¿æ„çš„è¯ï¼Œä½ å¯ä»¥æä¾›å¸®åŠ©)ã€‚æµè§ˆå™¨ä¾›åº”å•†é€šå¸¸åœ¨ææ¡ˆå’Œè§„èŒƒæœ€ç»ˆç¡®å®šä¹‹å‰å®æ–½ä¸€äº›è‰æ¡ˆã€‚ä¸€åˆ‡éƒ½åœ¨å¿«é€Ÿå‘å±•ã€‚çå¤§ä½ çš„çœ¼ç›ï¼</p><p> Â»Enjoy the little things, for one day you may look back and realize they were the big things.Â« â€” Robert Brault</p><p>å°½æƒ…äº«å—å°äº‹å§ï¼Œå› ä¸ºæœ‰ä¸€å¤©ä½ å›é¦–å¾€äº‹ï¼Œå¯èƒ½ä¼šæ„è¯†åˆ°å®ƒä»¬æ‰æ˜¯å¤§äº‹ã€‚â€œ--ç½—ä¼¯ç‰¹Â·å¸ƒåŠ³ç‰¹</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://markentier.tech/posts/2020/10/wrote-javascript-to-avoid-javascript/">https://markentier.tech/posts/2020/10/wrote-javascript-to-avoid-javascript/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/java/">#java</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/å›¾åƒ/">#å›¾åƒ</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1033316.html"><img src="http://img2.diglog.com/img/2020/11/thumb_21f8be35cef4397449ea9dd55e0aa657.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1033316.html">Pythonå–ä»£Javaæˆä¸ºç¬¬äºŒå¤§æœ€å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€</a></div><span class="my_story_list_date">2020-11-5 20:25</span></div><div class="col-sm"><div><a target="_blank" href="/story/1032758.html"><img src="http://img2.diglog.com/img/2020/11/thumb_5284cf17db551895b1215de49c9ea500.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032758.html">Dojo3D-ç”¨äº3Däº’åŠ¨æ•…äº‹çš„ç®€å•JavaScriptåº“</a></div><span class="my_story_list_date">2020-11-2 18:59</span></div><div class="col-sm"><div><a target="_blank" href="/story/1032702.html"><img src="http://img2.diglog.com/img/2020/11/thumb_74f1ccfa4249fcc4f7e79edad2d58586.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032702.html">Goä¸­å¸¸é‡çš„ç»†å¾®å·®åˆ«ï¼›Goä¸æ˜¯JavaScript</a></div><span class="my_story_list_date">2020-11-2 9:22</span></div><div class="col-sm"><div><a target="_blank" href="/story/1032572.html"><img src="http://img2.diglog.com/img/2020/11/thumb_9b2a7fcceee51585feb5628a787bccaa.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1032572.html">æ‰“ç®—åœæ­¢åœ¨æˆ‘çš„(JavaScript)ä»£ç ä¸­ä½¿ç”¨NULL</a></div><span class="my_story_list_date">2020-11-1 10:50</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è®¾è®¡/">#è®¾è®¡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ¸¸æˆ/">#æ¸¸æˆ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åˆ›æ„/">#åˆ›æ„</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‹¹æœ/">#è‹¹æœ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‘„å½±/">#æ‘„å½±</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è½¯ä»¶/">#è½¯ä»¶</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç¾å›½/">#ç¾å›½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å›¾ç‰‡/">#å›¾ç‰‡</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/æ‰‹æœº/">#æ‰‹æœº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è§†é¢‘/">#è§†é¢‘</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¹¿å‘Š/">#å¹¿å‘Š</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å…è´¹/">#å…è´¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è°·æ­Œ/">#è°·æ­Œ</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç½‘ç«™/">#ç½‘ç«™</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/å¾®è½¯/">#å¾®è½¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ä¸‹è½½/">#ä¸‹è½½</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/éŸ³ä¹/">#éŸ³ä¹</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/linux/">#linux</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/åšå®¢/">#åšå®¢</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/ç¨‹åº/">#ç¨‹åº</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/è‰ºæœ¯/">#è‰ºæœ¯</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy; 2020 diglog.com </div></div></body></html>