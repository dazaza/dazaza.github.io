<!doctype html><html lang="zh-hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>银行在2020年还在使用Perl吗？答案是否定的</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"><link rel="stylesheet" href="/img/css.css?random="><link data-rh="true" rel="icon" href="/img/favicon.ico"/><script data-ad-client="ca-pub-6067137220025946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5effb96910009800120b8d4d&product=inline-share-buttons" async="async"></script>
<script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?03c1a0f31299b4a2fbb83c34d6beaac9";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="my_header"><div class="container"><nav class="navbar navbar-expand-lg"><a class="navbar-brand" href="/"><img alt="diglog" src="/img/logo.v1.gif" class="rounded-sm"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavAltMarkup"><div class="navbar-nav"></div></div></nav></div></div><div class="container"><div id="my_content"><h1 class="page_narrow">银行在2020年还在使用Perl吗？答案是否定的</h1><div class="row"><div class="col-lg-12 col-12"><div class="my_story_list_item shadow p-3 mb-5 bg-white rounded"><div class="story_page_pub_time page_narrow">2020-06-26 19:19:10</div><div class="story_img_container"><a href="http://img.diglog.com/img/2020/6/68481f3d84489d8fbe7fde83b231176c.gif"><img src="http://img.diglog.com/img/2020/6/68481f3d84489d8fbe7fde83b231176c.gif" class="img-fluid my_story_img" onerror="this.style.display='none'"></a></div><div class="page_narrow text-break page_content"><p>美国最大的投资银行摩根大通(JP Morgan)再也没有Perl了。最后一个Perl代码于2019年退役。</p><p>银行中有几个Perl脚本，大约在2018年，总计10k LOC，最初是在20年前编写的。</p><p>这就是可以发现的一切，搜索覆盖了5000万行代码和数千台服务器的存储库，所有可以访问和解释的东西。</p><p>我当时正在那里工作，接到了一项不幸的任务去调查这件事。(小贴士：如果你看到路过的关于一些旧系统的电子邮件，不要回复，否则人们可能会利用这个机会让你做这项工作)。</p><p>我说的是“研究一下”，而不是升级、重写或退役，因为这些词不准确。处理旧的潜在关键系统的第一步是了解它们，然后再考虑是否可以或应该做任何事情。</p><p>第二步(如果有)是添加日志记录，以尝试捕获正在使用的内容。最终未使用的可以退役。变得琐碎或过时的事情可以解决(例如，对getcorecount.pl的调用可以由内置API调用代替)。</p><p>超过一半的脚本最终被证明是未使用的(或足够接近)，可以安全地退役。剩下几个脚本要处理，总共有几千行。</p><p>生产中活跃的Perl的最后几个部分是在2006年左右编写的，根据源代码控制历史记录，从那以后几乎没有人碰过它。</p><p>那里有一个存储子系统的建筑部件。简而言之，它类似于AWS S3。</p><p>Perl在它的时代被认为是一种粘合语言，用于编写短小的脚本来将东西粘合在一起，就像bash脚本一样，但复杂性要高出一个档次。当Perl代码将一些低级别的东西粘合在一起时，这并不令人惊讶。</p><p>而Perl代码从一开始就基本是原始的。“整个”的其余部分就不是了。</p><p>存储是许多项目的基本需求。最初只是一个构建块在几周内被黑客入侵，但在整个业务中的使用量迅速增长。</p><p>整个公司都创建了额外的集成和API来与之交互(不是在Perl中，也不一定在主repo中)。它得到了广泛的使用，并建立在更多的基础上。</p><p>十年来，它成为存储大量和各种数据、存储每日报告、存储风险分析结果、市场数据、过去和未来交易的首选解决方案。考虑csv/xlsx/pdf可能涵盖的任何用例(并在银行带动数十亿美元)。</p><p>[注：这意味着人工使用和程序化使用，这是最敏感的处理方式。人类依赖的系统在临界性和影响方面天生就是有限的(人类只能在物理上尽可能快地单击，并且会对未按预期工作的事情发出警报)。然而，自动化系统有无限的灾难潜力，因为它们可能会以“机器速度”无休止地反复故障，并驱动其他相关系统故障，有时甚至是静默的。]。</p><p>当然，在依赖它的数千个应用程序和开发人员中，没有一个人意识到他们最终依赖于一堆Perl。大概有两个人会认识这个话题。(在任何组织中，无论规模有多大，只有1-3个人熟悉任何给定的系统)。</p><p>在分析结束时，很明显Perl每天推动数十亿美元，可能是数万亿美元。它是摩根大通最关键的3个系统的竞争者，因为它的使用在摩根大通无处不在。这可能是地球上最关键的系统之一，因为世行推动了美国经济和世界的很大一部分。</p><p>结论很简单，这是不能退役的，因为它已经被使用了。</p><p>[我将省去导致结论的1001个因素，一些细节最好不要披露。]。</p><p>相反，必须将其重写为开发人员积极维护和理解的内容。</p><p>重写将在Python2.6上运行，因为Python2.6是非常棒且稳定的…。更重要的是，它是RHEL 6附带的版本，也就是它运行的地方。</p><p>[虽然替代版本运行在python2.6上，但它也可以在python2.7和python3.7上运行。通过对细微差别的笨拙了解和对依赖项的严格管理，可以制作在任何地方都能运行的小型软件。最初的项目在十多年的时间里运行良好，重写的时间也一样长。直到可能有人不得不在2030年把它挖出来，并为RHEL 9做出调整。]。</p><p>长话短说，剧本经过了广泛的重写和测试。(跳过关于测试如此重要的软件的叙述，否则文章将长50页)。</p></div><div id="story_share_this"><div class="sharethis-inline-share-buttons"></div></div><div class="text-break sotry_link page_narrow"><a target="_blank" href="https://thehftguy.com/2020/06/26/are-banks-still-using-perl-in-2020-the-answer-is-no/">https://thehftguy.com/2020/06/26/are-banks-still-using-perl-in-2020-the-answer-is-no/</a></div><div class="story_tags page_narrow"><button type="button" class="btn btn-light my_tag"><a href="/tag/2020/">#2020</a></button><button type="button" class="btn btn-light my_tag"><a href="/tag/banks/">#banks</a></button></div></div><div class="shadow p-3 mb-5 bg-white rounded clearfix"><div class="container"><div class="row"><div class="col-sm"><div><a target="_blank" href="/story/1008186.html"><img src="http://img.diglog.com/img/2020/6/thumb_52a411c709ddf8d623f083b142f83e24.png" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1008186.html">
Zoom创始人兼首席执行官埃里克·袁将在Disrupt 2020大会上发表讲话</a></div><span class="my_story_list_date">2020-6-25 21:48</span></div><div class="col-sm"><div><a target="_blank" href="/story/1007990.html"><img src="http://img.diglog.com/img/2020/6/thumb_d87ca7ac3c052233e470c227e4aafe52.jpeg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1007990.html">2020年做一名高效的技术经理</a></div><span class="my_story_list_date">2020-6-25 0:58</span></div><div class="col-sm"><div><a target="_blank" href="/story/1007968.html"><img src="http://img.diglog.com/img/2020/6/thumb_2b09a471dee28c446af8a95f5e72cda5.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1007968.html">越来越多的线索表明冠状病毒可能引发糖尿病(2020年6月)</a></div><span class="my_story_list_date">2020-6-24 22:48</span></div><div class="col-sm"><div><a target="_blank" href="/story/1007733.html"><img src="http://img.diglog.com/img/2020/6/thumb_33a18801918edcde8133104495cff350.jpg" class="img-fluid" onerror="this.style.display='none'"></a></div><div class="item_title"><a target="_blank" href="/story/1007733.html">特朗普将一些工作签证的限制延长至2020年</a></div><span class="my_story_list_date">2020-6-23 7:30</span></div></div></div></div><div class="my_movie_list_item shadow p-3 mb-5 bg-white rounded"><button type="button" class="btn btn-link my_tag"><a href="/tag/web2.0/">#web2.0</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/google/">#google</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/设计/">#设计</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/创意/">#创意</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/摄影/">#摄影</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/游戏/">#游戏</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/图片/">#图片</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/软件/">#软件</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/视频/">#视频</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/手机/">#手机</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/广告/">#广告</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/apple/">#apple</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/iphone/">#iphone</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/网站/">#网站</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/免费/">#免费</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/下载/">#下载</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/windows/">#windows</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/微软/">#微软</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/firefox/">#firefox</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/苹果/">#苹果</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/blog/">#blog</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/音乐/">#音乐</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/博客/">#博客</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/wordpress/">#wordpress</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/恶搞/">#恶搞</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/艺术/">#艺术</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/qq/">#qq</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/web/">#web</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/谷歌/">#谷歌</a></button><button type="button" class="btn btn-link my_tag"><a href="/tag/工具/">#工具</a></button></div></div></div><div id="my_footer"><div class=""><a href="/tags/">tags</a> <a href="/users/">users</a></div>&copy;2012-2021 diglog.com </div></div></body></html>